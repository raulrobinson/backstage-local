(()=>{(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1850],{86456:function(Dt,E,e){"use strict";e.d(E,{r:function(){return je}});var n=e(53907),d=e(30705),p=e(56563),i=e(2784),c=e(77277),m=e(80236),b=e(73557),R=e(39857),t=e(43642),U=e(80079),w=e(90941),N=e(32915),K=e(40562),k=e(21853),H=e(60744),C=e(66569),v=e(30254),F=e(13384),g=e(15933),J=e(58838),x=e(86737),B=e(4989),T=e(44407),S=e(18628),ie=e(84219),Te=e(98685),Pe=e(39781),qe=e(39412),xe=e(73689),ke=e(12536),rt=e(19219),Kt=e(41547),Nt=e(47591),rn=e(80737),D=e(3493),we=e(85277),ue=e(68542),Ke=e(87561);const $=W=>(..._)=>{const h=_.length===0?[1]:_,M=(X,j)=>typeof X=="string"?X:j*X;return h.map(X=>{const j=M(X,W);return typeof j=="number"?`${j}px`:j}).join(" ")};function A(W,_){if(!_||typeof _=="string")return;const h=typeof _=="function"?_(W):_;if(h)return{"@global":h}}function z(W,_){if(!(!_||typeof _=="string")){if(typeof _=="object"){const h={...W},M=W.spacing(1);return typeof M=="number"&&(h.spacing=$(M)),Object.fromEntries(Object.entries(_).map(([X,j])=>typeof j=="function"?[X,j({theme:h})]:[X,j]))}return _}}const ae=/^&.Mui-([\w-]+)$/;function $e(W){let _=W;if(!W||typeof W!="object")return _;for(const h of Object.keys(W)){const M=W[h];if(!(!M||typeof M!="object"))for(const X of Object.keys(M)){const j=X,Z=j.match(ae);if(Z){const[,oe]=Z,{[j]:se,...Ue}=M;se&&(_={..._,[h]:Ue,[oe]:se})}}}return _}function Ge(W,_={}){const h={},M={};for(const X of Object.keys(_)){const j=_[X];j&&("styleOverrides"in j&&(X==="MuiCssBaseline"?h[X]=A(W,j.styleOverrides):h[X]=$e(z(W,j.styleOverrides))),"defaultProps"in j&&(M[X]=j.defaultProps))}return{overrides:h,props:M}}const ft={wave:`url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='1368' height='400' fill='none'%3e%3cmask id='a' width='1368' height='401' x='0' y='0' maskUnits='userSpaceOnUse'%3e%3cpath fill='url(%23paint0_linear)' d='M437 116C223 116 112 0 112 0h1256v400c-82 0-225-21-282-109-112-175-436-175-649-175z'/%3e%3cpath fill='url(%23paint1_linear)' d='M1368 400V282C891-29 788 40 711 161 608 324 121 372 0 361v39h1368z'/%3e%3cpath fill='url(%23paint2_linear)' d='M1368 244v156H0V94c92-24 198-46 375 0l135 41c176 51 195 109 858 109z'/%3e%3cpath fill='url(%23paint3_linear)' d='M1252 400h116c-14-7-35-14-116-16-663-14-837-128-1013-258l-85-61C98 28 46 8 0 0v400h1252z'/%3e%3c/mask%3e%3cg mask='url(%23a)'%3e%3cpath fill='white' d='M-172-98h1671v601H-172z'/%3e%3c/g%3e%3cdefs%3e%3clinearGradient id='paint0_linear' x1='602' x2='1093.5' y1='-960.5' y2='272' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint1_linear' x1='482' x2='480' y1='1058.5' y2='70.5' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint2_linear' x1='424' x2='446.1' y1='-587.5' y2='274.6' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint3_linear' x1='587' x2='349' y1='-1120.5' y2='341' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e")`,wave2:`url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='1368' height='400' fill='none'%3e%3cmask id='a' width='1764' height='479' x='-229' y='-6' maskUnits='userSpaceOnUse'%3e%3cpath fill='url(%23paint0_linear)' d='M0 400h1350C1321 336 525 33 179-2c-345-34-395 236-408 402H0z'/%3e%3cpath fill='url(%23paint1_linear)' d='M1378 177v223H0V217s219 75 327 52C436 246 717-35 965 45s254 144 413 132z'/%3e%3cpath fill='url(%23paint2_linear)' d='M26 400l-78-16c-170 205-44-6-137-30l-4-1 4 1 137 30c37-45 89-110 159-201 399-514-45 238 1176-50 275-65 354-39 91 267H26z'/%3e%3c/mask%3e%3cg mask='url(%23a)'%3e%3cpath fill='white' d='M0 0h1368v400H0z'/%3e%3c/g%3e%3cdefs%3e%3clinearGradient id='paint0_linear' x1='431' x2='397.3' y1='-599' y2='372.8' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint1_linear' x1='236.5' x2='446.6' y1='-586' y2='381.5' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint2_linear' x1='851.8' x2='640.4' y1='-867.2' y2='363.7' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e")`,round:`url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='1368' height='400' fill='none'%3e%3cmask id='a' width='2269' height='1408' x='-610' y='-509' maskUnits='userSpaceOnUse'%3e%3ccircle cx='1212.8' cy='74.8' r='317.5' fill='url(%23paint0_linear)' transform='rotate(-52 1213 75)'/%3e%3ccircle cx='737.8' cy='445.8' r='317.5' fill='url(%23paint1_linear)' transform='rotate(-116 738 446)'/%3e%3ccircle cx='601.8' cy='52.8' r='418.6' fill='url(%23paint2_linear)' transform='rotate(-117 602 53)'/%3e%3ccircle cx='999.8' cy='364' r='389.1' fill='url(%23paint3_linear)' transform='rotate(31 1000 364)'/%3e%3cellipse cx='-109.2' cy='263.5' fill='url(%23paint4_linear)' rx='429.2' ry='465.8' transform='rotate(-85 -109 264)'/%3e%3c/mask%3e%3cg mask='url(%23a)'%3e%3cpath fill='white' d='M0 0h1368v400H0z'/%3e%3c/g%3e%3cdefs%3e%3clinearGradient id='paint0_linear' x1='1301.2' x2='161.4' y1='-1879.7' y2='-969.6' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint1_linear' x1='826.2' x2='-313.6' y1='-1508.7' y2='-598.6' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint2_linear' x1='718.4' x2='-784.3' y1='-2524' y2='-1324.2' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint3_linear' x1='1108.2' x2='-288.6' y1='-2031.1' y2='-915.9' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint4_linear' x1='10.4' x2='-1626.5' y1='-2603.8' y2='-1399.5' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e")`},nt={darkGrey:["#171717","#383838"],marineBlue:["#006D8F","#0049A1"],veryBlue:["#0027AF","#270094"],rubyRed:["#98002B","#8D1134"],toastyOrange:["#BE2200","#A41D00"],purpleSky:["#8912CA","#3E00EA"],eveningSea:["#00FFF2","#035355"],teal:["#005B4B"],pinkSea:["#C8077A","#C2297D"],greens:["#4BB8A5","#187656"]};function Rt(W){var _;const{colors:h,shape:M,options:X}=W,Z=`linear-gradient(90deg, ${(h.length===1?[h[0],h[0]]:h).join(", ")})`,oe=`${M},  ${Z}`,se=(_=X==null?void 0:X.fontColor)!=null?_:"#FFFFFF";return{colors:h,shape:M,backgroundImage:oe,fontColor:se}}const q={home:Rt({colors:nt.teal,shape:ft.wave}),documentation:Rt({colors:nt.pinkSea,shape:ft.wave2}),tool:Rt({colors:nt.purpleSky,shape:ft.round}),service:Rt({colors:nt.marineBlue,shape:ft.wave}),website:Rt({colors:nt.veryBlue,shape:ft.wave}),library:Rt({colors:nt.rubyRed,shape:ft.wave}),other:Rt({colors:nt.darkGrey,shape:ft.wave}),app:Rt({colors:nt.toastyOrange,shape:ft.wave}),apis:Rt({colors:nt.teal,shape:ft.wave2}),card:Rt({colors:nt.greens,shape:ft.wave})},de=16,Se='"Helvetica Neue", Helvetica, Roboto, Arial, sans-serif',Ne="home";function st(W){const{palette:_,htmlFontSize:h=de,fontFamily:M=Se,defaultPageTheme:X=Ne,pageTheme:j=q,typography:Z}=W;if(!j[X])throw new Error(`${X} is not defined in pageTheme.`);const oe={htmlFontSize:h,fontFamily:M,h1:{fontSize:54,fontWeight:700,marginBottom:10},h2:{fontSize:40,fontWeight:700,marginBottom:8},h3:{fontSize:32,fontWeight:700,marginBottom:6},h4:{fontWeight:700,fontSize:28,marginBottom:6},h5:{fontWeight:700,fontSize:24,marginBottom:4},h6:{fontWeight:700,fontSize:20,marginBottom:2}};return{palette:_,typography:Z!=null?Z:oe,page:j[X],getPageTheme:({themeId:se})=>{var Ue;return(Ue=j[se])!=null?Ue:j[X]}}}const pe={MuiCssBaseline:{styleOverrides:W=>({html:{height:"100%",fontFamily:W.typography.fontFamily},body:{height:"100%",fontFamily:W.typography.fontFamily,overscrollBehaviorY:"none",fontSize:"0.875rem",lineHeight:1.43},a:{color:"inherit",textDecoration:"none"}})},MuiGrid:{defaultProps:{spacing:2}},MuiSwitch:{defaultProps:{color:"primary"}},MuiTableRow:{styleOverrides:{root:({theme:W})=>({"&:nth-of-type(odd)":{backgroundColor:W.palette.background.default}}),hover:{"&:hover":{cursor:"pointer"}},head:({theme:W})=>({"&:nth-of-type(odd)":{backgroundColor:W.palette.background.paper}})}},MuiTableCell:{styleOverrides:{root:({theme:W})=>({wordBreak:"break-word",overflow:"hidden",verticalAlign:"middle",lineHeight:"1",margin:0,padding:W.spacing(3,2,3,2.5),borderBottom:0}),sizeSmall:({theme:W})=>({padding:W.spacing(1.5,2,1.5,2.5)}),head:({theme:W})=>({wordBreak:"break-word",overflow:"hidden",color:W.palette.textSubtle,fontWeight:"normal",lineHeight:"1"})}},MuiTabs:{styleOverrides:{root:{minHeight:24}}},MuiTab:{styleOverrides:{root:({theme:W})=>({color:W.palette.link,minHeight:24,textTransform:"initial",letterSpacing:"0.07em","&:hover":{color:(0,Nt._j)(W.palette.link,.3),background:(0,Nt.$n)(W.palette.link,.95)},[W.breakpoints.up("md")]:{minWidth:120,fontSize:W.typography.pxToRem(14),fontWeight:500}}),textColorPrimary:({theme:W})=>({color:W.palette.link})}},MuiTableSortLabel:{styleOverrides:{root:{color:"inherit","&:hover":{color:"inherit"},"&:focus":{color:"inherit"},"&.Mui-active":{fontWeight:"bold",color:"inherit"}}}},MuiListItemText:{styleOverrides:{dense:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}}},MuiButton:{styleOverrides:{text:{padding:void 0}}},MuiChip:{styleOverrides:{root:({theme:W})=>({marginRight:W.spacing(1),marginBottom:W.spacing(1)}),label:({theme:W})=>({lineHeight:W.spacing(2.5),fontWeight:W.typography.fontWeightMedium,fontSize:W.spacing(1.75)}),labelSmall:({theme:W})=>({fontSize:W.spacing(1.5)}),deleteIcon:({theme:W})=>({width:W.spacing(3),height:W.spacing(3),margin:W.spacing(0,.75,0,-.75)}),deleteIconSmall:({theme:W})=>({width:W.spacing(2),height:W.spacing(2),margin:W.spacing(0,.5,0,-.5)})}},MuiCard:{styleOverrides:{root:{display:"flex",flexDirection:"column"}}},MuiCardHeader:{styleOverrides:{root:{paddingBottom:0}}},MuiCardContent:{styleOverrides:{root:{flexGrow:1,"&:last-child":{paddingBottom:void 0}}}},MuiCardActions:{styleOverrides:{root:{justifyContent:"flex-end"}}},MuiLink:{defaultProps:{underline:"hover"}}};var Je=(W,_,h)=>{if(!_.has(W))throw TypeError("Cannot "+h)},ot=(W,_,h)=>(Je(W,_,"read from private field"),h?h.call(W):_.get(W)),Qe=(W,_,h)=>{if(_.has(W))throw TypeError("Cannot add the same private member more than once");_ instanceof WeakSet?_.add(W):_.set(W,h)},Et=(W,_,h,M)=>(Je(W,_,"write to private field"),M?M.call(W,h):_.set(W,h),h),dt;class Vt{constructor(_,h){Qe(this,dt,new Map),Et(this,dt,new Map),_&&ot(this,dt).set("v4",_),h&&ot(this,dt).set("v5",h)}getTheme(_){return ot(this,dt).get(_)}}dt=new WeakMap;function jt(W){const _=st(W),h={...pe,...W.components},M=(0,rn.Z)({..._,components:h}),X=Ge(M,h),j={...(0,xe.Z)(_),...X};return new Vt(j,M)}function Ht(W){const _=adaptV4Theme(W),h=createTheme$2(W);return new Vt(h,_)}const Ye={light:{type:"light",mode:"light",background:{default:"#F8F8F8",paper:"#FFFFFF"},status:{ok:"#1DB954",warning:"#FF9800",error:"#E22134",running:"#1F5493",pending:"#FFED51",aborted:"#757575"},bursts:{fontColor:"#FEFEFE",slackChannelText:"#ddd",backgroundColor:{default:"#7C3699"},gradient:{linear:"linear-gradient(-137deg, #4BB8A5 0%, #187656 100%)"}},primary:{main:"#1F5493"},banner:{info:"#2E77D0",error:"#E22134",text:"#FFFFFF",link:"#000000",closeButtonColor:"#FFFFFF",warning:"#FF9800"},border:"#E6E6E6",textContrast:"#000000",textVerySubtle:"#DDD",textSubtle:"#6E6E6E",highlight:"#FFFBCC",errorBackground:"#FFEBEE",warningBackground:"#F59B23",infoBackground:"#ebf5ff",errorText:"#CA001B",infoText:"#004e8a",warningText:"#000000",linkHover:"#2196F3",link:"#0A6EBE",gold:"#FFD600",navigation:{background:"#171717",indicator:"#9BF0E1",color:"#b5b5b5",selectedColor:"#FFF",navItem:{hoverBackground:"#404040"},submenu:{background:"#404040"}},pinSidebarButton:{icon:"#181818",background:"#BDBDBD"},tabbar:{indicator:"#9BF0E1"}},dark:{type:"dark",mode:"dark",background:{default:"#333333",paper:"#424242"},status:{ok:"#71CF88",warning:"#FFB84D",error:"#F84C55",running:"#3488E3",pending:"#FEF071",aborted:"#9E9E9E"},bursts:{fontColor:"#FEFEFE",slackChannelText:"#ddd",backgroundColor:{default:"#7C3699"},gradient:{linear:"linear-gradient(-137deg, #4BB8A5 0%, #187656 100%)"}},primary:{main:"#9CC9FF",dark:"#82BAFD"},secondary:{main:"#FF88B2"},banner:{info:"#2E77D0",error:"#E22134",text:"#FFFFFF",link:"#000000",closeButtonColor:"#FFFFFF",warning:"#FF9800"},border:"#E6E6E6",textContrast:"#FFFFFF",textVerySubtle:"#727272",textSubtle:"#CCCCCC",highlight:"#FFFBCC",errorBackground:"#FFEBEE",warningBackground:"#F59B23",infoBackground:"#ebf5ff",errorText:"#CA001B",infoText:"#004e8a",warningText:"#000000",linkHover:"#82BAFD",link:"#9CC9FF",gold:"#FFD600",navigation:{background:"#424242",indicator:"#9BF0E1",color:"#b5b5b5",selectedColor:"#FFF",navItem:{hoverBackground:"#404040"},submenu:{background:"#404040"}},pinSidebarButton:{icon:"#404040",background:"#BDBDBD"},tabbar:{indicator:"#9BF0E1"}}},St={light:jt({palette:Ye.light}),dark:jt({palette:Ye.dark})};ue.Z.configure(W=>`v5-${W}`);const Mt=(0,ke.Z)({productionPrefix:"jss4-"});function Bt(W){const{children:_,theme:h,noCssBaseline:M=!1}=W,X=h.getTheme("v4"),j=h.getTheme("v5");let Z;M||(Z=i.createElement(Ke.ZP,null));let oe=i.createElement(i.Fragment,null,Z,_);return X&&(oe=i.createElement(rt.ZP,{generateClassName:Mt},i.createElement(Kt.Z,{theme:X},oe))),j&&(oe=i.createElement(D.Z,{injectFirst:!0},i.createElement(we.Z,{theme:j},oe))),oe}function Ee(W){var _,h,M,X;return{props:{MuiGrid:(h=(_=pe)==null?void 0:_.MuiGrid)==null?void 0:h.defaultProps,MuiSwitch:(X=(M=pe)==null?void 0:M.MuiSwitch)==null?void 0:X.defaultProps},...st(W)}}function De(W){return Ge(W,pe).overrides}function ct(W){const _=Ee(W),h=(0,xe.Z)(_),M=De(h);return{...h,overrides:M}}const Ve=ct({palette:Ye.light}),yt=ct({palette:Ye.dark});var ye=e(98192),mt=e(15222);const Ct=[(0,d.ni)({api:d.NW,deps:{configApi:d.Ds},factory:({configApi:W})=>n.pM.compile(`${W.getString("backend.baseUrl")}/api/{{ pluginId }}`)}),(0,d.ni)({api:d.$v,deps:{},factory:()=>new n.CX}),(0,d.ni)({api:d.v_,deps:{},factory:()=>new n.gN}),(0,d.ni)({api:d.VE,deps:{alertApi:d.$v},factory:({alertApi:W})=>{const _=new n.KN(W,new n.gr);return n.Jv.forward(_,{hidden:!1}),_}}),(0,d.ni)({api:d.E6,deps:{errorApi:d.VE},factory:({errorApi:W})=>n.CJ.create({errorApi:W})}),(0,d.ni)({api:d.gP,deps:{configApi:d.Ds,identityApi:d.$4,discoveryApi:d.NW},factory:({configApi:W,identityApi:_,discoveryApi:h})=>(0,n.jJ)({middleware:[n.II.resolvePluginProtocol({discoveryApi:h}),n.II.injectIdentityAuth({identityApi:_,config:W})]})}),(0,d.ni)({api:d.ZM,deps:{},factory:()=>new n.YM}),(0,d.ni)({api:d.Kp,deps:{discoveryApi:d.NW,oauthRequestApi:d.ZM,configApi:d.Ds},factory:({discoveryApi:W,oauthRequestApi:_,configApi:h})=>n.eE.create({configApi:h,discoveryApi:W,oauthRequestApi:_,environment:h.getOptionalString("auth.environment")})}),(0,d.ni)({api:d.p_,deps:{discoveryApi:d.NW,oauthRequestApi:d.ZM,configApi:d.Ds},factory:({discoveryApi:W,oauthRequestApi:_,configApi:h})=>n._i.create({configApi:h,discoveryApi:W,oauthRequestApi:_,environment:h.getOptionalString("auth.environment")})}),(0,d.ni)({api:d.F4,deps:{discoveryApi:d.NW,oauthRequestApi:d.ZM,configApi:d.Ds},factory:({discoveryApi:W,oauthRequestApi:_,configApi:h})=>n.Td.create({configApi:h,discoveryApi:W,oauthRequestApi:_,defaultScopes:["read:user"],environment:h.getOptionalString("auth.environment")})}),(0,d.ni)({api:d.D,deps:{discoveryApi:d.NW,oauthRequestApi:d.ZM,configApi:d.Ds},factory:({discoveryApi:W,oauthRequestApi:_,configApi:h})=>n.sn.create({configApi:h,discoveryApi:W,oauthRequestApi:_,environment:h.getOptionalString("auth.environment")})}),(0,d.ni)({api:d.ux,deps:{discoveryApi:d.NW,oauthRequestApi:d.ZM,configApi:d.Ds},factory:({discoveryApi:W,oauthRequestApi:_,configApi:h})=>n.aq.create({configApi:h,discoveryApi:W,oauthRequestApi:_,environment:h.getOptionalString("auth.environment")})}),(0,d.ni)({api:d.gW,deps:{discoveryApi:d.NW,oauthRequestApi:d.ZM,configApi:d.Ds},factory:({discoveryApi:W,oauthRequestApi:_,configApi:h})=>n.$_.create({configApi:h,discoveryApi:W,oauthRequestApi:_,environment:h.getOptionalString("auth.environment")})}),(0,d.ni)({api:d.bq,deps:{discoveryApi:d.NW,oauthRequestApi:d.ZM,configApi:d.Ds},factory:({discoveryApi:W,oauthRequestApi:_,configApi:h})=>n.xP.create({configApi:h,discoveryApi:W,oauthRequestApi:_,defaultScopes:["team"],environment:h.getOptionalString("auth.environment")})}),(0,d.ni)({api:d.Km,deps:{discoveryApi:d.NW,oauthRequestApi:d.ZM,configApi:d.Ds},factory:({discoveryApi:W,oauthRequestApi:_,configApi:h})=>n.C4.create({configApi:h,discoveryApi:W,oauthRequestApi:_,defaultScopes:["REPO_READ"]})}),(0,d.ni)({api:d.uB,deps:{discoveryApi:d.NW,oauthRequestApi:d.ZM,configApi:d.Ds},factory:({discoveryApi:W,oauthRequestApi:_,configApi:h})=>n.uC.create({configApi:h,discoveryApi:W,oauthRequestApi:_,environment:h.getOptionalString("auth.environment")})}),(0,d.ni)({api:p.RV,deps:{discovery:d.NW,identity:d.$4,config:d.Ds},factory:({config:W,discovery:_,identity:h})=>p.iM.create({config:W,discovery:_,identity:h})})];function _t({children:W}){return(0,b.GV)()?i.createElement(i.Fragment,null,W):i.createElement(b.VA,null,W)}const it=()=>i.createElement(m.mf,{status:"404",statusMessage:"PAGE NOT FOUND"}),At=({step:W,error:_})=>{let h="";return W==="load-config"?h=`The configuration failed to load, someone should have a look at this error: ${_.message}`:W==="load-chunk"&&(h=`Lazy loaded chunk failed to load, try to reload the page: ${_.message}`),i.createElement(_t,null,i.createElement(m.mf,{status:"501",statusMessage:h}))},zt=({error:W,resetError:_,plugin:h})=>i.createElement(m.yu,{title:`Error in ${h==null?void 0:h.getId()}`,defaultExpanded:!0,error:W},i.createElement(c.Z,{variant:"outlined",onClick:_},"Retry")),ze={Progress:m.Ex,Router:R.VK,NotFoundErrorPage:it,BootErrorPage:At,ErrorBoundaryFallback:zt},Re={brokenImage:U.Z,catalog:S.Z,scaffolder:N.Z,techdocs:K.Z,search:k.Z,chat:H.Z,dashboard:C.Z,docs:v.Z,email:F.Z,github:J.Z,group:ie.Z,help:x.Z,"kind:api":g.Z,"kind:component":T.Z,"kind:domain":t.Z,"kind:group":ie.Z,"kind:location":B.Z,"kind:system":w.Z,"kind:user":Te.Z,"kind:resource":qe.Z,user:Te.Z,warning:Pe.Z},We=[{id:"light",title:"Light Theme",variant:"light",icon:i.createElement(mt.Z,null),Provider:({children:W})=>i.createElement(Bt,{theme:St.light,children:W})},{id:"dark",title:"Dark Theme",variant:"dark",icon:i.createElement(ye.Z,null),Provider:({children:W})=>i.createElement(Bt,{theme:St.dark,children:W})}];function je(W){var _,h,M,X;return(0,n.bg)({...W,apis:(_=W==null?void 0:W.apis)!=null?_:[],bindRoutes:W==null?void 0:W.bindRoutes,components:{...ze,...W==null?void 0:W.components},configLoader:W==null?void 0:W.configLoader,defaultApis:Ct,icons:{...Re,...W==null?void 0:W.icons},plugins:(h=W==null?void 0:W.plugins)!=null?h:[],featureFlags:(M=W==null?void 0:W.featureFlags)!=null?M:[],themes:(X=W==null?void 0:W.themes)!=null?X:We})}},88285:function(Dt,E,e){"use strict";e.d(E,{MS:function(){return U},mk:function(){return w},n3:function(){return c}});var n=e(34520),d=e(32272),p=e(96279),i=e.n(p);const c=Symbol.for("CATALOG_FILTER_EXISTS_0e15b590c0b343a2bae3e787e84c2111");function m(N){return!N.cursor}var b=Object.defineProperty,R=(N,K,k)=>K in N?b(N,K,{enumerable:!0,configurable:!0,writable:!0,value:k}):N[K]=k,t=(N,K,k)=>(R(N,typeof K!="symbol"?K+"":K,k),k);class U{constructor(K){t(this,"discoveryApi"),t(this,"fetchApi"),this.discoveryApi=K.discoveryApi,this.fetchApi=K.fetchApi||{fetch:i()}}async getEntityAncestors(K,k){const{kind:H,namespace:C,name:v}=(0,n.of)(K.entityRef);return await this.requestRequired("GET",`/entities/by-name/${encodeURIComponent(H)}/${encodeURIComponent(C)}/${encodeURIComponent(v)}/ancestry`,k)}async getLocationById(K,k){return await this.requestOptional("GET",`/locations/${encodeURIComponent(K)}`,k)}async getEntities(K,k){const{filter:H=[],fields:C=[],order:v,offset:F,limit:g,after:J}=K!=null?K:{},x=this.getParams(H);if(C.length&&x.push(`fields=${C.map(encodeURIComponent).join(",")}`),v)for(const ie of[v].flat())ie&&x.push(`order=${encodeURIComponent(ie.order)}:${encodeURIComponent(ie.field)}`);F!==void 0&&x.push(`offset=${F}`),g!==void 0&&x.push(`limit=${g}`),J!==void 0&&x.push(`after=${encodeURIComponent(J)}`);const B=x.length?`?${x.join("&")}`:"",T=await this.requestRequired("GET",`/entities${B}`,k),S=(ie,Te)=>{var Pe,qe;if(((Pe=ie.metadata)==null?void 0:Pe.name)===void 0||ie.kind===void 0||((qe=Te.metadata)==null?void 0:qe.name)===void 0||Te.kind===void 0)return 0;const xe=(0,n.eE)(ie),ke=(0,n.eE)(Te);return xe<ke?-1:xe>ke?1:0};return{items:T.sort(S)}}async getEntitiesByRefs(K,k){var H;const C={entityRefs:K.entityRefs};(H=K.fields)!=null&&H.length&&(C.fields=K.fields);const F=`${await this.discoveryApi.getBaseUrl("catalog")}/entities/by-refs`,g=await this.fetchApi.fetch(F,{headers:{"Content-Type":"application/json",...(k==null?void 0:k.token)&&{Authorization:`Bearer ${k==null?void 0:k.token}`}},method:"POST",body:JSON.stringify(C)});if(!g.ok)throw await d.VL.fromResponse(g);const{items:J}=await g.json();return{items:J.map(x=>x!=null?x:void 0)}}async queryEntities(K={},k){var H,C;const v=[];if(m(K)){const{fields:g=[],filter:J,limit:x,orderFields:B,fullTextFilter:T}=K;v.push(...this.getParams(J)),x!==void 0&&v.push(`limit=${x}`),B!==void 0&&(Array.isArray(B)?B:[B]).forEach(({field:ie,order:Te})=>v.push(`orderField=${ie},${Te}`)),g.length&&v.push(`fields=${g.map(encodeURIComponent).join(",")}`);const S=(H=T==null?void 0:T.term)==null?void 0:H.trim();S&&v.push(`fullTextFilterTerm=${S}`),(C=T==null?void 0:T.fields)!=null&&C.length&&v.push(`fullTextFilterFields=${T.fields.join(",")}`)}else{const{fields:g=[],limit:J,cursor:x}=K;v.push(`cursor=${x}`),J!==void 0&&v.push(`limit=${J}`),g.length&&v.push(`fields=${g.map(encodeURIComponent).join(",")}`)}const F=v.length?`?${v.join("&")}`:"";return this.requestRequired("GET",`/entities/by-query${F}`,k)}async getEntityByRef(K,k){const{kind:H,namespace:C,name:v}=(0,n.of)(K);return this.requestOptional("GET",`/entities/by-name/${encodeURIComponent(H)}/${encodeURIComponent(C)}/${encodeURIComponent(v)}`,k)}async getEntityByName(K,k){const{kind:H,namespace:C="default",name:v}=K;return this.requestOptional("GET",`/entities/by-name/${encodeURIComponent(H)}/${encodeURIComponent(C)}/${encodeURIComponent(v)}`,k)}async refreshEntity(K,k){const H=await this.fetchApi.fetch(`${await this.discoveryApi.getBaseUrl("catalog")}/refresh`,{headers:{"Content-Type":"application/json",...(k==null?void 0:k.token)&&{Authorization:`Bearer ${k==null?void 0:k.token}`}},method:"POST",body:JSON.stringify({entityRef:K})});if(H.status!==200)throw new Error(await H.text())}async getEntityFacets(K,k){const{filter:H=[],facets:C}=K,v=this.getParams(H);for(const g of C)v.push(`facet=${encodeURIComponent(g)}`);const F=v.length?`?${v.join("&")}`:"";return await this.requestOptional("GET",`/entity-facets${F}`,k)}async addLocation(K,k){const{type:H="url",target:C,dryRun:v}=K,F=await this.fetchApi.fetch(`${await this.discoveryApi.getBaseUrl("catalog")}/locations${v?"?dryRun=true":""}`,{headers:{"Content-Type":"application/json",...(k==null?void 0:k.token)&&{Authorization:`Bearer ${k==null?void 0:k.token}`}},method:"POST",body:JSON.stringify({type:H,target:C})});if(F.status!==201)throw new Error(await F.text());const{location:g,entities:J,exists:x}=await F.json();if(!g)throw new Error(`Location wasn't added: ${C}`);return{location:g,entities:J,exists:x}}async getLocationByRef(K,k){return(await this.requestRequired("GET","/locations",k)).map(C=>C.data).find(C=>K===(0,n.NZ)(C))}async removeLocationById(K,k){await this.requestIgnored("DELETE",`/locations/${encodeURIComponent(K)}`,k)}async removeEntityByUid(K,k){await this.requestIgnored("DELETE",`/entities/by-uid/${encodeURIComponent(K)}`,k)}async validateEntity(K,k,H){const C=await this.fetchApi.fetch(`${await this.discoveryApi.getBaseUrl("catalog")}/validate-entity`,{headers:{"Content-Type":"application/json",...(H==null?void 0:H.token)&&{Authorization:`Bearer ${H==null?void 0:H.token}`}},method:"POST",body:JSON.stringify({entity:K,location:k})});if(C.ok)return{valid:!0};if(C.status!==400)throw await d.VL.fromResponse(C);const{errors:v=[]}=await C.json();return{valid:!1,errors:v}}async requestIgnored(K,k,H){const C=`${await this.discoveryApi.getBaseUrl("catalog")}${k}`,v=H!=null&&H.token?{Authorization:`Bearer ${H.token}`}:{},F=await this.fetchApi.fetch(C,{method:K,headers:v});if(!F.ok)throw await d.VL.fromResponse(F)}async requestRequired(K,k,H){const C=`${await this.discoveryApi.getBaseUrl("catalog")}${k}`,v=H!=null&&H.token?{Authorization:`Bearer ${H.token}`}:{},F=await this.fetchApi.fetch(C,{method:K,headers:v});if(!F.ok)throw await d.VL.fromResponse(F);return F.json()}async requestOptional(K,k,H){const C=`${await this.discoveryApi.getBaseUrl("catalog")}${k}`,v=H!=null&&H.token?{Authorization:`Bearer ${H.token}`}:{},F=await this.fetchApi.fetch(C,{method:K,headers:v});if(!F.ok){if(F.status===404)return;throw await d.VL.fromResponse(F)}return await F.json()}getParams(K=[]){const k=[];for(const H of[K].flat()){const C=[];for(const[v,F]of Object.entries(H))for(const g of[F].flat())g===c?C.push(encodeURIComponent(v)):typeof g=="string"&&C.push(`${encodeURIComponent(v)}=${encodeURIComponent(g)}`);C.length&&k.push(`filter=${C.join(",")}`)}return k}}const w="backstage.io/catalog-processing"},34520:function(Dt,E,e){"use strict";e.d(E,{$1:function(){return _r},CV:function(){return Zn},Dg:function(){return Lr},In:function(){return At},KS:function(){return Fr},M6:function(){return Hn},M_:function(){return mr},NZ:function(){return Or},Ou:function(){return qn},P1:function(){return Gn},S4:function(){return $r},Tf:function(){return H},X9:function(){return Ar},Zj:function(){return Br},_b:function(){return Fn},aS:function(){return xr},cz:function(){return Ur},eE:function(){return Te},hr:function(){return Mr},iB:function(){return S},l2:function(){return k},nP:function(){return br},of:function(){return ie},q1:function(){return Wn},w$:function(){return Pr},wI:function(){return mt},wP:function(){return wr},y$:function(){return _t},zG:function(){return K}});var n=e(76635),d=e.n(n),p=e(53911),i=e.n(p);function c(Xe){return Xe.kind.toLocaleUpperCase("en-US")==="API"}function m(Xe){return Xe.kind.toLocaleUpperCase("en-US")==="COMPONENT"}function b(Xe){return Xe.kind.toLocaleUpperCase("en-US")==="DOMAIN"}function R(Xe){return Xe.kind.toLocaleUpperCase("en-US")==="GROUP"}function t(Xe){return Xe.kind.toLocaleUpperCase("en-US")==="LOCATION"}function U(Xe){return Xe.kind.toLocaleUpperCase("en-US")==="RESOURCE"}function w(Xe){return Xe.kind.toLocaleUpperCase("en-US")==="SYSTEM"}function N(Xe){return Xe.kind.toLocaleUpperCase("en-US")==="USER"}const K="default",k="backstage.io/view-url",H="backstage.io/edit-url",C="kubernetes.io/api-server",v="kubernetes.io/api-server-certificate-authority",F="kubernetes.io/auth-provider";var g=Object.defineProperty,J=(Xe,ge,gt)=>ge in Xe?g(Xe,ge,{enumerable:!0,configurable:!0,writable:!0,value:gt}):Xe[ge]=gt,x=(Xe,ge,gt)=>(J(Xe,typeof ge!="symbol"?ge+"":ge,gt),gt);class B{constructor(ge=K){x(this,"namespace"),this.namespace=ge}async enforce(ge){return ge.metadata.namespace?ge:lodash.merge({metadata:{namespace:this.namespace}},ge)}}function T(Xe){let ge=Xe.indexOf(":");const gt=Xe.indexOf("/");gt!==-1&&gt<ge&&(ge=-1);const l=ge===-1?void 0:Xe.slice(0,ge),o=gt===-1?void 0:Xe.slice(ge+1,gt),f=Xe.slice(Math.max(ge+1,gt+1));if(l===""||o===""||f==="")throw new TypeError(`Entity reference "${Xe}" was not on the form [<kind>:][<namespace>/]<name>`);return{kind:l,namespace:o,name:f}}function S(Xe){return{kind:Xe.kind,namespace:Xe.metadata.namespace||K,name:Xe.metadata.name}}function ie(Xe,ge){var gt,l,o,f;if(!Xe)throw new Error("Entity reference must not be empty");const I=ge==null?void 0:ge.defaultKind,ee=(ge==null?void 0:ge.defaultNamespace)||K;let fe,Ae,Be;if(typeof Xe=="string"){const $t=T(Xe);fe=(gt=$t.kind)!=null?gt:I,Ae=(l=$t.namespace)!=null?l:ee,Be=$t.name}else fe=(o=Xe.kind)!=null?o:I,Ae=(f=Xe.namespace)!=null?f:ee,Be=Xe.name;if(fe)if(Ae){if(!Be){const $t=JSON.stringify(Xe);throw new Error(`Entity reference ${$t} had missing or empty name`)}}else{const $t=JSON.stringify(Xe);throw new Error(`Entity reference ${$t} had missing or empty namespace`)}else{const $t=JSON.stringify(Xe);throw new Error(`Entity reference ${$t} had missing or empty kind (e.g. did not start with "component:" or similar)`)}return{kind:fe,namespace:Ae,name:Be}}function Te(Xe){var ge,gt;let l,o,f;return"metadata"in Xe?(l=Xe.kind,o=(ge=Xe.metadata.namespace)!=null?ge:K,f=Xe.metadata.name):(l=Xe.kind,o=(gt=Xe.namespace)!=null?gt:K,f=Xe.name),`${l.toLocaleLowerCase("en-US")}:${o.toLocaleLowerCase("en-US")}/${f.toLocaleLowerCase("en-US")}`}var Pe=Object.defineProperty,qe=(Xe,ge,gt)=>ge in Xe?Pe(Xe,ge,{enumerable:!0,configurable:!0,writable:!0,value:gt}):Xe[ge]=gt,xe=(Xe,ge,gt)=>(qe(Xe,typeof ge!="symbol"?ge+"":ge,gt),gt);class ke{constructor(ge){xe(this,"parentRef");const{kind:gt,namespace:l,name:o}=ie(ge,{defaultKind:"Group",defaultNamespace:K});if(gt.toLocaleUpperCase("en-US")!=="GROUP")throw new TypeError("group parent must be a group");this.parentRef=Te({kind:gt,namespace:l,name:o})}async enforce(ge){if(ge.kind!=="Group")return ge;const gt=ge;return gt.spec.parent||Te(gt)!==this.parentRef&&(gt.spec.parent=this.parentRef),gt}}class rt{static isValidPrefixAndOrSuffix(ge,gt,l,o){if(typeof ge!="string")return!1;const f=ge.split(gt);return f.length===1?o(f[0]):f.length===2?l(f[0])&&o(f[1]):!1}static isJsonSafe(ge){try{return d().isEqual(ge,JSON.parse(JSON.stringify(ge)))}catch{return!1}}static isValidDnsSubdomain(ge){return typeof ge=="string"&&ge.length>=1&&ge.length<=253&&ge.split(".").every(rt.isValidDnsLabel)}static isValidDnsLabel(ge){return typeof ge=="string"&&ge.length>=1&&ge.length<=63&&/^[a-z0-9]+(?:\-+[a-z0-9]+)*$/.test(ge)}static isValidTag(ge){return typeof ge=="string"&&ge.length>=1&&ge.length<=63&&/^[a-z0-9+#]+(\-[a-z0-9+#]+)*$/.test(ge)}static isValidUrl(ge){if(typeof ge!="string")return!1;try{return new URL(ge),!0}catch{return!1}}static isValidString(ge){var gt;return typeof ge=="string"&&((gt=ge==null?void 0:ge.trim())==null?void 0:gt.length)>=1}static isNonEmptyString(ge){var gt;return typeof ge=="string"&&((gt=ge==null?void 0:ge.trim())==null?void 0:gt.length)>=1}}var Kt="http://json-schema.org/draft-07/schema",Nt="EntityEnvelope",rn="The envelope skeleton parts of an entity - whatever is necessary to be able to give it a ref and pass to further validation / policy checking.",D=[{apiVersion:"backstage.io/v1alpha1",kind:"Component",metadata:{name:"LoremService"}}],we="object",ue=["apiVersion","kind","metadata"],Ke=!0,$={apiVersion:{type:"string",description:"The version of specification format for this particular entity that this is written against.",minLength:1,examples:["backstage.io/v1alpha1","my-company.net/v1","1.0"]},kind:{type:"string",description:"The high level entity type being described.",minLength:1,examples:["API","Component","Domain","Group","Location","Resource","System","Template","User"]},metadata:{type:"object",required:["name"],additionalProperties:!0,properties:{name:{type:"string",description:"The name of the entity. Must be unique within the catalog at any given point in time, for any given namespace + kind pair.",examples:["metadata-proxy"],minLength:1},namespace:{type:"string",description:"The namespace that the entity belongs to.",default:"default",examples:["default","admin"],minLength:1}}}},A={$schema:Kt,$id:Nt,description:rn,examples:D,type:we,required:ue,additionalProperties:Ke,properties:$},z="http://json-schema.org/draft-07/schema",ae="Entity",$e="The parts of the format that's common to all versions/kinds of entity.",Ge=[{apiVersion:"backstage.io/v1alpha1",kind:"Component",metadata:{name:"LoremService",description:"Creates Lorems like a pro.",labels:{product_name:"Random value Generator"},annotations:{docs:"https://github.com/..../tree/develop/doc"}},spec:{type:"service",lifecycle:"production",owner:"tools"}}],ft="object",nt=["apiVersion","kind","metadata"],Rt=!1,q={apiVersion:{type:"string",description:"The version of specification format for this particular entity that this is written against.",minLength:1,examples:["backstage.io/v1alpha1","my-company.net/v1","1.0"]},kind:{type:"string",description:"The high level entity type being described.",minLength:1,examples:["API","Component","Domain","Group","Location","Resource","System","Template","User"]},metadata:{$ref:"EntityMeta"},spec:{type:"object",description:"The specification data describing the entity itself."},relations:{type:"array",description:"The relations that this entity has with other entities.",items:{$ref:"common#relation"}},status:{$ref:"common#status"}},de={$schema:z,$id:ae,description:$e,examples:Ge,type:ft,required:nt,additionalProperties:Rt,properties:q},Se="http://json-schema.org/draft-07/schema",Ne="EntityMeta",st="Metadata fields common to all versions/kinds of entity.",pe=[{uid:"e01199ab-08cc-44c2-8e19-5c29ded82521",etag:"lsndfkjsndfkjnsdfkjnsd==",name:"my-component-yay",namespace:"the-namespace",labels:{"backstage.io/custom":"ValueStuff"},annotations:{"example.com/bindings":"are-secret"},tags:["java","data"]}],Je="object",ot=["name"],Qe=!0,Et={uid:{type:"string",description:"A globally unique ID for the entity. This field can not be set by the user at creation time, and the server will reject an attempt to do so. The field will be populated in read operations. The field can (optionally) be specified when performing update or delete operations, but the server is free to reject requests that do so in such a way that it breaks semantics.",examples:["e01199ab-08cc-44c2-8e19-5c29ded82521"],minLength:1},etag:{type:"string",description:"An opaque string that changes for each update operation to any part of the entity, including metadata. This field can not be set by the user at creation time, and the server will reject an attempt to do so. The field will be populated in read operations. The field can (optionally) be specified when performing update or delete operations, and the server will then reject the operation if it does not match the current stored value.",examples:["lsndfkjsndfkjnsdfkjnsd=="],minLength:1},name:{type:"string",description:"The name of the entity. Must be unique within the catalog at any given point in time, for any given namespace + kind pair.",examples:["metadata-proxy"],minLength:1},namespace:{type:"string",description:"The namespace that the entity belongs to.",default:"default",examples:["default","admin"],minLength:1},title:{type:"string",description:"A display name of the entity, to be presented in user interfaces instead of the name property, when available.",examples:["React SSR Template"],minLength:1},description:{type:"string",description:"A short (typically relatively few words, on one line) description of the entity."},labels:{type:"object",description:"Key/value pairs of identifying information attached to the entity.",additionalProperties:!0,patternProperties:{"^.+$":{type:"string"}}},annotations:{type:"object",description:"Key/value pairs of non-identifying auxiliary information attached to the entity.",additionalProperties:!0,patternProperties:{"^.+$":{type:"string"}}},tags:{type:"array",description:"A list of single-valued strings, to for example classify catalog entities in various ways.",items:{type:"string",minLength:1}},links:{type:"array",description:"A list of external hyperlinks related to the entity. Links can provide additional contextual information that may be located outside of Backstage itself. For example, an admin dashboard or external CMS page.",items:{type:"object",required:["url"],properties:{url:{type:"string",description:"A url in a standard uri format.",examples:["https://admin.example-org.com"],minLength:1},title:{type:"string",description:"A user friendly display name for the link.",examples:["Admin Dashboard"],minLength:1},icon:{type:"string",description:"A key representing a visual icon to be displayed in the UI.",examples:["dashboard"],minLength:1},type:{type:"string",description:"An optional value to categorize links into specific groups.",examples:["runbook","documentation","logs","dashboard"],minLength:1}}}}},dt={$schema:Se,$id:Ne,description:st,examples:pe,type:Je,required:ot,additionalProperties:Qe,properties:Et},Vt="http://json-schema.org/draft-07/schema",jt="common",Ht="object",Ye="Common definitions to import from other schemas",St={reference:{$id:"#reference",type:"object",description:"A reference by name to another entity.",required:["kind","namespace","name"],additionalProperties:!1,properties:{kind:{type:"string",description:"The kind field of the entity.",minLength:1},namespace:{type:"string",description:"The metadata.namespace field of the entity.",minLength:1},name:{type:"string",description:"The metadata.name field of the entity.",minLength:1}}},relation:{$id:"#relation",type:"object",description:"A directed relation from one entity to another.",required:["type","targetRef"],additionalProperties:!1,properties:{type:{type:"string",minLength:1,pattern:"^\\w+$",description:"The type of relation."},target:{$ref:"#reference",deprecated:!0},targetRef:{type:"string",minLength:1,description:"The entity ref of the target of this relation."}}},status:{$id:"#status",type:"object",description:"The current status of the entity, as claimed by various sources.",required:[],additionalProperties:!0,properties:{items:{type:"array",items:{$ref:"#statusItem"}}}},statusItem:{$id:"#statusItem",type:"object",description:"A specific status item on a well known format.",required:["type","level","message"],additionalProperties:!0,properties:{type:{type:"string",minLength:1},level:{$ref:"#statusLevel",description:"The status level / severity of the status item."},message:{type:"string",description:"A brief message describing the status, intended for human consumption."},error:{$ref:"#error",description:"An optional serialized error object related to the status."}}},statusLevel:{$id:"#statusLevel",type:"string",description:"A status level / severity.",enum:["info","warning","error"]},error:{$id:"#error",type:"object",description:"A serialized error object.",required:["name","message"],additionalProperties:!0,properties:{name:{type:"string",examples:["Error","InputError"],description:"The type name of the error",minLength:1},message:{type:"string",description:"The message of the error"},code:{type:"string",description:"An error code associated with the error"},stack:{type:"string",description:"An error stack trace"}}}},Mt={$schema:Vt,$id:jt,type:Ht,description:Ye,definitions:St};const Bt=new Map,Ee=[A,de,dt,Mt];function De(Xe){if(!(Xe!=null&&Xe.length))throw new TypeError("Unknown error");const ge=Xe[0];throw new TypeError(`${ge.instancePath||"<root>"} ${ge.message}${ge.params?` - ${Object.entries(ge.params).map(([gt,l])=>`${gt}: ${l}`).join(", ")}`:""}`)}function ct(Xe,ge={}){var gt;const l=(gt=ge==null?void 0:ge.disableCache)!=null?gt:!1,o=l?"":JSON.stringify(Xe);if(!l){const fe=Bt.get(o);if(fe)return fe}const f=Ve(Xe),I=new(i())({allowUnionTypes:!0,allErrors:!0,validateSchema:!0});f.length&&I.addSchema(f,void 0,void 0,!0);const ee=I.compile(Xe);return l||Bt.set(o,ee),ee}function Ve(Xe){if(typeof Xe!="object")return[];const ge=new Set;Xe.$id&&ge.add(Xe.$id);const gt=new Array,l=[Xe];for(;l.length;){const o=l.pop();for(const f of yt(o))if(!ge.has(f)){ge.add(f);const I=Ee.find(ee=>ee.$id===f);I&&(gt.push(I),l.push(I))}}return gt}function*yt(Xe){const ge=[Xe];for(;ge.length;){const gt=ge.pop();if(typeof gt=="object"&&gt)for(const[l,o]of Object.entries(gt))l==="$ref"&&typeof o=="string"?yield o.split("#")[0]:ge.push(o)}}function ye(Xe){const ge=ct(Xe||A);return gt=>{if(ge(gt)===!0)return gt;throw De(ge.errors)}}function mt(Xe){const ge=ct(Xe);return gt=>{var l;if(ge(gt)===!0)return gt;const f=(l=ge.errors)==null?void 0:l.filter(I=>["/kind","/apiVersion"].includes(I.instancePath));if(f!=null&&f.length&&f.every(I=>I.keyword==="enum"))return!1;throw De(ge.errors)}}function Ct(Xe){const ge=ct(Xe||de);return gt=>{if(ge(gt)===!0)return gt;throw De(ge.errors)}}class _t{static isValidApiVersion(ge){return rt.isValidPrefixAndOrSuffix(ge,"/",rt.isValidDnsSubdomain,gt=>gt.length>=1&&gt.length<=63&&/^[a-z0-9A-Z]+$/.test(gt))}static isValidKind(ge){return typeof ge=="string"&&ge.length>=1&&ge.length<=63&&/^[a-zA-Z][a-z0-9A-Z]*$/.test(ge)}static isValidObjectName(ge){return typeof ge=="string"&&ge.length>=1&&ge.length<=63&&/^([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9]$/.test(ge)}static isValidNamespace(ge){return rt.isValidDnsLabel(ge)}static isValidLabelKey(ge){return rt.isValidPrefixAndOrSuffix(ge,"/",rt.isValidDnsSubdomain,_t.isValidObjectName)}static isValidLabelValue(ge){return ge===""||_t.isValidObjectName(ge)}static isValidAnnotationKey(ge){return rt.isValidPrefixAndOrSuffix(ge,"/",rt.isValidDnsSubdomain,_t.isValidObjectName)}static isValidAnnotationValue(ge){return typeof ge=="string"}}const it={isValidApiVersion:_t.isValidApiVersion,isValidKind:_t.isValidKind,isValidEntityName:_t.isValidObjectName,isValidNamespace:_t.isValidNamespace,isValidLabelKey:_t.isValidLabelKey,isValidLabelValue:_t.isValidLabelValue,isValidAnnotationKey:_t.isValidAnnotationKey,isValidAnnotationValue:_t.isValidAnnotationValue,isValidTag:Xe=>typeof Xe=="string"&&Xe.length>=1&&Xe.length<=63&&/^[a-z0-9:+#]+(\-[a-z0-9:+#]+)*$/.test(Xe)};function At(Xe={}){return{...it,...Xe}}var zt=Object.defineProperty,ze=(Xe,ge,gt)=>ge in Xe?zt(Xe,ge,{enumerable:!0,configurable:!0,writable:!0,value:gt}):Xe[ge]=gt,Re=(Xe,ge,gt)=>(ze(Xe,typeof ge!="symbol"?ge+"":ge,gt),gt);class We{constructor(ge=At()){Re(this,"validators"),this.validators=ge}async enforce(ge){var gt,l,o,f,I,ee,fe;function Ae(Ft,mn,nn){if(mn==null)throw new Error(`${Ft} must have a value`);let kn;try{kn=nn(mn)}catch(Tn){throw new Error(`${Ft} could not be validated, ${Tn}`)}if(!kn){let Tn;switch(nn.name){case"isValidLabelValue":case"isValidObjectName":Tn="a string that is sequences of [a-zA-Z0-9] separated by any of [-_.], at most 63 characters in total";break;case"isValidLabelKey":case"isValidApiVersion":case"isValidAnnotationKey":Tn="a valid prefix and/or suffix";break;case"isValidNamespace":case"isValidDnsLabel":Tn="a string that is sequences of [a-z0-9] separated by [-], at most 63 characters in total";break;case"isValidTag":Tn="a string that is sequences of [a-z0-9+#] separated by [-], at most 63 characters in total";break;case"isValidAnnotationValue":Tn="a string";break;case"isValidKind":Tn="a string that is a sequence of [a-zA-Z][a-z0-9A-Z], at most 63 characters in total";break;case"isValidUrl":Tn="a string that is a valid url";break;case"isValidString":case"isNonEmptyString":Tn="a non empty string";break;default:Tn=void 0;break}const ur=Tn?` expected ${Tn} but found "${mn}".`:"";throw new Error(`"${Ft}" is not valid;${ur} To learn more about catalog file format, visit: https://github.com/backstage/backstage/blob/master/docs/architecture-decisions/adr002-default-catalog-file-format.md`)}}function Be(Ft,mn,nn){return mn===void 0||Ae(Ft,mn,nn)}Ae("apiVersion",ge.apiVersion,this.validators.isValidApiVersion),Ae("kind",ge.kind,this.validators.isValidKind),Ae("metadata.name",ge.metadata.name,this.validators.isValidEntityName),Be("metadata.namespace",ge.metadata.namespace,this.validators.isValidNamespace);for(const[Ft,mn]of Object.entries((gt=ge.metadata.labels)!=null?gt:[]))Ae(`labels.${Ft}`,Ft,this.validators.isValidLabelKey),Ae(`labels.${Ft}`,mn,this.validators.isValidLabelValue);for(const[Ft,mn]of Object.entries((l=ge.metadata.annotations)!=null?l:[]))Ae(`annotations.${Ft}`,Ft,this.validators.isValidAnnotationKey),Ae(`annotations.${Ft}`,mn,this.validators.isValidAnnotationValue);const $t=(o=ge.metadata.tags)!=null?o:[];for(let Ft=0;Ft<$t.length;++Ft)Ae(`tags.${Ft}`,$t[Ft],this.validators.isValidTag);const on=(f=ge.metadata.links)!=null?f:[];for(let Ft=0;Ft<on.length;++Ft)Ae(`links.${Ft}.url`,(I=on[Ft])==null?void 0:I.url,rt.isValidUrl),Be(`links.${Ft}.title`,(ee=on[Ft])==null?void 0:ee.title,rt.isNonEmptyString),Be(`links.${Ft}.icon`,(fe=on[Ft])==null?void 0:fe.icon,_t.isValidObjectName);return ge}}var je=Object.defineProperty,W=(Xe,ge,gt)=>ge in Xe?je(Xe,ge,{enumerable:!0,configurable:!0,writable:!0,value:gt}):Xe[ge]=gt,_=(Xe,ge,gt)=>(W(Xe,typeof ge!="symbol"?ge+"":ge,gt),gt);const h=null;class M{constructor(ge=h){_(this,"knownFields"),this.knownFields=ge}async enforce(ge){for(const gt of Object.keys(ge))if(!this.knownFields.includes(gt))throw new Error(`Unknown field ${gt}`);return ge}}var X=Object.defineProperty,j=(Xe,ge,gt)=>ge in Xe?X(Xe,ge,{enumerable:!0,configurable:!0,writable:!0,value:gt}):Xe[ge]=gt,Z=(Xe,ge,gt)=>(j(Xe,typeof ge!="symbol"?ge+"":ge,gt),gt);class oe{constructor(){Z(this,"validate")}async enforce(ge){if(!this.validate){const o=new Ajv({allowUnionTypes:!0});this.validate=o.addSchema([Mt,dt],void 0,void 0,!0).compile(de)}if(this.validate(ge)===!0)return ge;const[l]=this.validate.errors||[];throw l?new Error(`Malformed envelope, ${l.instancePath||"<root>"} ${l.message}`):new Error("Malformed envelope, Unknown error")}}class se{constructor(ge){this.policies=ge}async enforce(ge){let gt=ge;for(const l of this.policies){const o=await l.enforce(gt);if(!o)throw new Error(`Policy ${l.constructor.name} did not return a result`);gt=o}return gt}}class Ue{constructor(ge){this.policies=ge}async enforce(ge){for(const gt of this.policies){const l=await gt.enforce(ge);if(l)return l}throw new Error("The entity did not match any known policy")}}const lt={allOf(Xe){return new se(Xe)},oneOf(Xe){return new Ue(Xe)}};var ne="http://json-schema.org/draft-07/schema",ce="ApiV1alpha1",Ce="An API describes an interface that can be exposed by a component. The API can be defined in different formats, like OpenAPI, AsyncAPI, GraphQL, gRPC, or other formats.",Y=[{apiVersion:"backstage.io/v1alpha1",kind:"API",metadata:{name:"artist-api",description:"Retrieve artist details",labels:{product_name:"Random value Generator"},annotations:{docs:"https://github.com/..../tree/develop/doc"}},spec:{type:"openapi",lifecycle:"production",owner:"artist-relations-team",system:"artist-engagement-portal",definition:`openapi: "3.0.0"
info:...`}}],te=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["API"]},spec:{type:"object",required:["type","lifecycle","owner","definition"],properties:{type:{type:"string",description:"The type of the API definition.",examples:["openapi","asyncapi","graphql","grpc","trpc"],minLength:1},lifecycle:{type:"string",description:"The lifecycle state of the API.",examples:["experimental","production","deprecated"],minLength:1},owner:{type:"string",description:"An entity reference to the owner of the API.",examples:["artist-relations-team","user:john.johnson"],minLength:1},system:{type:"string",description:"An entity reference to the system that the API belongs to.",minLength:1},definition:{type:"string",description:"The definition of the API, based on the format defined by the type.",minLength:1}}}}}],me={$schema:ne,$id:ce,description:Ce,examples:Y,allOf:te};function Ie(Xe){let ge;return{async check(gt){return ge||(ge=mt(Xe)),ge(gt)===gt}}}const Le=Ie(me);var bt="http://json-schema.org/draft-07/schema",ut="ComponentV1alpha1",Ut='A Component describes a software component. It is typically intimately linked to the source code that constitutes the component, and should be what a developer may regard a "unit of software", usually with a distinct deployable or linkable artifact.',wt=[{apiVersion:"backstage.io/v1alpha1",kind:"Component",metadata:{name:"LoremService",description:"Creates Lorems like a pro.",labels:{product_name:"Random value Generator"},annotations:{docs:"https://github.com/..../tree/develop/doc"}},spec:{type:"service",lifecycle:"production",owner:"tools"}}],kt=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["Component"]},spec:{type:"object",required:["type","lifecycle","owner"],properties:{type:{type:"string",description:"The type of component.",examples:["service","website","library"],minLength:1},lifecycle:{type:"string",description:"The lifecycle state of the component.",examples:["experimental","production","deprecated"],minLength:1},owner:{type:"string",description:"An entity reference to the owner of the component.",examples:["artist-relations-team","user:john.johnson"],minLength:1},system:{type:"string",description:"An entity reference to the system that the component belongs to.",minLength:1},subcomponentOf:{type:"string",description:"An entity reference to another component of which the component is a part.",minLength:1},providesApis:{type:"array",description:"An array of entity references to the APIs that are provided by the component.",items:{type:"string",minLength:1}},consumesApis:{type:"array",description:"An array of entity references to the APIs that are consumed by the component.",items:{type:"string",minLength:1}},dependsOn:{type:"array",description:"An array of references to other entities that the component depends on to function.",items:{type:"string",minLength:1}}}}}}],Qt={$schema:bt,$id:ut,description:Ut,examples:wt,allOf:kt};const un=Ie(Qt);var ln="http://json-schema.org/draft-07/schema",tn="DomainV1alpha1",Zt="A Domain groups a collection of systems that share terminology, domain models, business purpose, or documentation, i.e. form a bounded context.",Wt=[{apiVersion:"backstage.io/v1alpha1",kind:"Domain",metadata:{name:"artists",description:"Everything about artists"},spec:{owner:"artist-relations-team"}}],hn=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["Domain"]},spec:{type:"object",required:["owner"],properties:{owner:{type:"string",description:"An entity reference to the owner of the component.",examples:["artist-relations-team","user:john.johnson"],minLength:1}}}}}],gn={$schema:ln,$id:tn,description:Zt,examples:Wt,allOf:hn};const yn=Ie(gn);var bn="http://json-schema.org/draft-07/schema",In="GroupV1alpha1",An="A group describes an organizational entity, such as for example a team, a business unit, or a loose collection of people in an interest group. Members of these groups are modeled in the catalog as kind User.",On=[{apiVersion:"backstage.io/v1alpha1",kind:"Group",metadata:{name:"infrastructure",description:"The infra business unit"},spec:{type:"business-unit",profile:{displayName:"Infrastructure",email:"infrastructure@example.com",picture:"https://example.com/groups/bu-infrastructure.jpeg"},parent:"ops",children:["backstage","other"]}}],Sn=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["Group"]},spec:{type:"object",required:["type","children"],properties:{type:{type:"string",description:"The type of group. There is currently no enforced set of values for this field, so it is left up to the adopting organization to choose a nomenclature that matches their org hierarchy.",examples:["team","business-unit","product-area","root"],minLength:1},profile:{type:"object",description:"Optional profile information about the group, mainly for display purposes. All fields of this structure are also optional. The email would be a group email of some form, that the group may wish to be used for contacting them. The picture is expected to be a URL pointing to an image that's representative of the group, and that a browser could fetch and render on a group page or similar.",properties:{displayName:{type:"string",description:"A simple display name to present to users.",examples:["Infrastructure"],minLength:1},email:{type:"string",description:"An email where this entity can be reached.",examples:["infrastructure@example.com"],minLength:1},picture:{type:"string",description:"The URL of an image that represents this entity.",examples:["https://example.com/groups/bu-infrastructure.jpeg"],minLength:1}}},parent:{type:"string",description:"The immediate parent group in the hierarchy, if any. Not all groups must have a parent; the catalog supports multi-root hierarchies. Groups may however not have more than one parent. This field is an entity reference.",examples:["ops"],minLength:1},children:{type:"array",description:"The immediate child groups of this group in the hierarchy (whose parent field points to this group). The list must be present, but may be empty if there are no child groups. The items are not guaranteed to be ordered in any particular way. The entries of this array are entity references.",items:{type:"string",examples:["backstage","other"],minLength:1}},members:{type:"array",description:"The users that are members of this group. The entries of this array are entity references.",items:{type:"string",examples:["jdoe"],minLength:1}}}}}}],Dn={$schema:bn,$id:In,description:An,examples:On,allOf:Sn};const sr=Ie(Dn);var zn="http://json-schema.org/draft-07/schema",Dr="LocationV1alpha1",Vr="A location is a marker that references other places to look for catalog data.",Zr=[{apiVersion:"backstage.io/v1alpha1",kind:"Location",metadata:{name:"org-data"},spec:{type:"url",targets:["http://github.com/myorg/myproject/org-data-dump/catalog-info-staff.yaml","http://github.com/myorg/myproject/org-data-dump/catalog-info-consultants.yaml"]}}],lr=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["Location"]},spec:{type:"object",required:[],properties:{type:{type:"string",description:"The single location type, that's common to the targets specified in the spec. If it is left out, it is inherited from the location type that originally read the entity data.",examples:["url"],minLength:1},target:{type:"string",description:"A single target as a string. Can be either an absolute path/URL (depending on the type), or a relative path such as ./details/catalog-info.yaml which is resolved relative to the location of this Location entity itself.",examples:["./details/catalog-info.yaml"],minLength:1},targets:{type:"array",description:"A list of targets as strings. They can all be either absolute paths/URLs (depending on the type), or relative paths such as ./details/catalog-info.yaml which are resolved relative to the location of this Location entity itself.",items:{type:"string",examples:["./details/catalog-info.yaml","http://github.com/myorg/myproject/org-data-dump/catalog-info-staff.yaml"],minLength:1}},presence:{type:"string",description:"Whether the presence of the location target is required and it should be considered an error if it can not be found",default:"required",examples:["required"],enum:["required","optional"]}}}}}],Wr={$schema:zn,$id:Dr,description:Vr,examples:Zr,allOf:lr};const jn=Ie(Wr),$r="ownedBy",_r="ownerOf",Lr="consumesApi",Ar="apiConsumedBy",mr="providesApi",Br="apiProvidedBy",br="dependsOn",Pr="dependencyOf",Fn="parentOf",wr="childOf",Mr="memberOf",Fr="hasMember",Ur="partOf",xr="hasPart";var be="http://json-schema.org/draft-07/schema",at="ResourceV1alpha1",vt="A resource describes the infrastructure a system needs to operate, like BigTable databases, Pub/Sub topics, S3 buckets or CDNs. Modelling them together with components and systems allows to visualize resource footprint, and create tooling around them.",Tt=[{apiVersion:"backstage.io/v1alpha1",kind:"Resource",metadata:{name:"artists-db",description:"Stores artist details"},spec:{type:"database",owner:"artist-relations-team",system:"artist-engagement-portal"}}],an=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["Resource"]},spec:{type:"object",required:["type","owner"],properties:{type:{type:"string",description:"The type of resource.",examples:["database","s3-bucket","cluster"],minLength:1},owner:{type:"string",description:"An entity reference to the owner of the resource.",examples:["artist-relations-team","user:john.johnson"],minLength:1},dependsOn:{type:"array",description:"An array of references to other entities that the resource depends on to function.",items:{type:"string",minLength:1}},system:{type:"string",description:"An entity reference to the system that the resource belongs to.",minLength:1}}}}}],Jt={$schema:be,$id:at,description:vt,examples:Tt,allOf:an};const en=Ie(Jt);var En="http://json-schema.org/draft-07/schema",cn="SystemV1alpha1",sn="A system is a collection of resources and components. The system may expose or consume one or several APIs. It is viewed as abstraction level that provides potential consumers insights into exposed features without needing a too detailed view into the details of all components. This also gives the owning team the possibility to decide about published artifacts and APIs.",Rn=[{apiVersion:"backstage.io/v1alpha1",kind:"System",metadata:{name:"artist-engagement-portal",description:"Handy tools to keep artists in the loop"},spec:{owner:"artist-relations-team",domain:"artists"}}],_n=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["System"]},spec:{type:"object",required:["owner"],properties:{owner:{type:"string",description:"An entity reference to the owner of the component.",examples:["artist-relations-team","user:john.johnson"],minLength:1},domain:{type:"string",description:"An entity reference to the domain that the system belongs to.",examples:["artists"],minLength:1}}}}}],Ln={$schema:En,$id:cn,description:sn,examples:Rn,allOf:_n};const Cn=Ie(Ln);var Un="http://json-schema.org/draft-07/schema",Mn="UserV1alpha1",Bn="A user describes a person, such as an employee, a contractor, or similar. Users belong to Group entities in the catalog. These catalog user entries are connected to the way that authentication within the Backstage ecosystem works. See the auth section of the docs for a discussion of these concepts.",Qn=[{apiVersion:"backstage.io/v1alpha1",kind:"User",metadata:{name:"jdoe"},spec:{profile:{displayName:"Jenny Doe",email:"jenny-doe@example.com",picture:"https://example.com/staff/jenny-with-party-hat.jpeg"},memberOf:["team-b","employees"]}}],xn=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["User"]},spec:{type:"object",required:["memberOf"],properties:{profile:{type:"object",description:"Optional profile information about the user, mainly for display purposes. All fields of this structure are also optional. The email would be a primary email of some form, that the user may wish to be used for contacting them. The picture is expected to be a URL pointing to an image that's representative of the user, and that a browser could fetch and render on a profile page or similar.",properties:{displayName:{type:"string",description:"A simple display name to present to users.",examples:["Jenny Doe"],minLength:1},email:{type:"string",description:"An email where this user can be reached.",examples:["jenny-doe@example.com"],minLength:1},picture:{type:"string",description:"The URL of an image that represents this user.",examples:["https://example.com/staff/jenny-with-party-hat.jpeg"],minLength:1}}},memberOf:{type:"array",description:"The list of groups that the user is a direct member of (i.e., no transitive memberships are listed here). The list must be present, but may be empty if the user is not member of any groups. The items are not guaranteed to be ordered in any particular way. The entries of this array are entity references.",items:{type:"string",examples:["team-b","employees"],minLength:1}}}}}}],rr={$schema:Un,$id:Mn,description:Bn,examples:Qn,allOf:xn};const Vn=Ie(rr),Gn="backstage.io/managed-by-location",Wn="backstage.io/managed-by-origin-location",Hn="backstage.io/source-location",cr=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*\:/i;function qn(Xe){if(typeof Xe!="string")throw new TypeError(`Unable to parse location ref '${Xe}', unexpected argument ${typeof Xe}`);const ge=Xe.indexOf(":");if(ge<0)throw new TypeError(`Unable to parse location ref '${Xe}', expected '<type>:<target>', e.g. 'url:https://host/path'`);const gt=Xe.substring(0,ge).trim(),l=Xe.substring(ge+1).trim();if(!gt||!l)throw new TypeError(`Unable to parse location ref '${Xe}', expected '<type>:<target>', e.g. 'url:https://host/path'`);if(gt==="http"||gt==="https")throw new TypeError(`Invalid location ref '${Xe}', please prefix it with 'url:', e.g. 'url:${Xe}'`);if(cr.test(l))throw new TypeError(`Invalid location ref '${Xe}', target is a javascript: URL`);return{type:gt,target:l}}function Or(Xe){const{type:ge,target:gt}=Xe;if(ge){if(!gt)throw new TypeError("Unable to stringify location ref, empty target")}else throw new TypeError("Unable to stringify location ref, empty type");if(cr.test(gt))throw new TypeError(`Invalid location ref '${ge}:${gt}', target is a javascript: URL`);return`${ge}:${gt}`}function Zn(Xe){var ge,gt,l,o,f;const I=(f=(gt=(ge=Xe.metadata)==null?void 0:ge.annotations)==null?void 0:gt[Hn])!=null?f:(o=(l=Xe.metadata)==null?void 0:l.annotations)==null?void 0:o[Gn];if(!I)throw new Error(`Entity '${Te(Xe)}' is missing location`);return qn(I)}},53911:function(Dt,E,e){"use strict";Object.defineProperty(E,"__esModule",{value:!0}),E.MissingRefError=E.ValidationError=E.CodeGen=E.Name=E.nil=E.stringify=E.str=E._=E.KeywordCxt=void 0;const n=e(61889),d=e(57993),p=e(99908),i=e(51020),c=["/properties"],m="http://json-schema.org/draft-07/schema";class b extends n.default{_addVocabularies(){super._addVocabularies(),d.default.forEach(K=>this.addVocabulary(K)),this.opts.discriminator&&this.addKeyword(p.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const K=this.opts.$data?this.$dataMetaSchema(i,c):i;this.addMetaSchema(K,m,!1),this.refs["http://json-schema.org/schema"]=m}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(m)?m:void 0)}}Dt.exports=E=b,Object.defineProperty(E,"__esModule",{value:!0}),E.default=b;var R=e(4371);Object.defineProperty(E,"KeywordCxt",{enumerable:!0,get:function(){return R.KeywordCxt}});var t=e(82481);Object.defineProperty(E,"_",{enumerable:!0,get:function(){return t._}}),Object.defineProperty(E,"str",{enumerable:!0,get:function(){return t.str}}),Object.defineProperty(E,"stringify",{enumerable:!0,get:function(){return t.stringify}}),Object.defineProperty(E,"nil",{enumerable:!0,get:function(){return t.nil}}),Object.defineProperty(E,"Name",{enumerable:!0,get:function(){return t.Name}}),Object.defineProperty(E,"CodeGen",{enumerable:!0,get:function(){return t.CodeGen}});var U=e(14319);Object.defineProperty(E,"ValidationError",{enumerable:!0,get:function(){return U.default}});var w=e(30283);Object.defineProperty(E,"MissingRefError",{enumerable:!0,get:function(){return w.default}})},91475:function(Dt,E){"use strict";Object.defineProperty(E,"__esModule",{value:!0}),E.regexpCode=E.getEsmExportName=E.getProperty=E.safeStringify=E.stringify=E.strConcat=E.addCodeArg=E.str=E._=E.nil=E._Code=E.Name=E.IDENTIFIER=E._CodeOrName=void 0;class e{}E._CodeOrName=e,E.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class n extends e{constructor(v){if(super(),!E.IDENTIFIER.test(v))throw new Error("CodeGen: name must be a valid identifier");this.str=v}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}E.Name=n;class d extends e{constructor(v){super(),this._items=typeof v=="string"?[v]:v}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const v=this._items[0];return v===""||v==='""'}get str(){var v;return(v=this._str)!==null&&v!==void 0?v:this._str=this._items.reduce((F,g)=>`${F}${g}`,"")}get names(){var v;return(v=this._names)!==null&&v!==void 0?v:this._names=this._items.reduce((F,g)=>(g instanceof n&&(F[g.str]=(F[g.str]||0)+1),F),{})}}E._Code=d,E.nil=new d("");function p(C,...v){const F=[C[0]];let g=0;for(;g<v.length;)m(F,v[g]),F.push(C[++g]);return new d(F)}E._=p;const i=new d("+");function c(C,...v){const F=[N(C[0])];let g=0;for(;g<v.length;)F.push(i),m(F,v[g]),F.push(i,N(C[++g]));return b(F),new d(F)}E.str=c;function m(C,v){v instanceof d?C.push(...v._items):v instanceof n?C.push(v):C.push(U(v))}E.addCodeArg=m;function b(C){let v=1;for(;v<C.length-1;){if(C[v]===i){const F=R(C[v-1],C[v+1]);if(F!==void 0){C.splice(v-1,3,F);continue}C[v++]="+"}v++}}function R(C,v){if(v==='""')return C;if(C==='""')return v;if(typeof C=="string")return v instanceof n||C[C.length-1]!=='"'?void 0:typeof v!="string"?`${C.slice(0,-1)}${v}"`:v[0]==='"'?C.slice(0,-1)+v.slice(1):void 0;if(typeof v=="string"&&v[0]==='"'&&!(C instanceof n))return`"${C}${v.slice(1)}`}function t(C,v){return v.emptyStr()?C:C.emptyStr()?v:c`${C}${v}`}E.strConcat=t;function U(C){return typeof C=="number"||typeof C=="boolean"||C===null?C:N(Array.isArray(C)?C.join(","):C)}function w(C){return new d(N(C))}E.stringify=w;function N(C){return JSON.stringify(C).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}E.safeStringify=N;function K(C){return typeof C=="string"&&E.IDENTIFIER.test(C)?new d(`.${C}`):p`[${C}]`}E.getProperty=K;function k(C){if(typeof C=="string"&&E.IDENTIFIER.test(C))return new d(`${C}`);throw new Error(`CodeGen: invalid export name: ${C}, use explicit $id name mapping`)}E.getEsmExportName=k;function H(C){return new d(C.toString())}E.regexpCode=H},82481:function(Dt,E,e){"use strict";Object.defineProperty(E,"__esModule",{value:!0}),E.or=E.and=E.not=E.CodeGen=E.operators=E.varKinds=E.ValueScopeName=E.ValueScope=E.Scope=E.Name=E.regexpCode=E.stringify=E.getProperty=E.nil=E.strConcat=E.str=E._=void 0;const n=e(91475),d=e(66162);var p=e(91475);Object.defineProperty(E,"_",{enumerable:!0,get:function(){return p._}}),Object.defineProperty(E,"str",{enumerable:!0,get:function(){return p.str}}),Object.defineProperty(E,"strConcat",{enumerable:!0,get:function(){return p.strConcat}}),Object.defineProperty(E,"nil",{enumerable:!0,get:function(){return p.nil}}),Object.defineProperty(E,"getProperty",{enumerable:!0,get:function(){return p.getProperty}}),Object.defineProperty(E,"stringify",{enumerable:!0,get:function(){return p.stringify}}),Object.defineProperty(E,"regexpCode",{enumerable:!0,get:function(){return p.regexpCode}}),Object.defineProperty(E,"Name",{enumerable:!0,get:function(){return p.Name}});var i=e(66162);Object.defineProperty(E,"Scope",{enumerable:!0,get:function(){return i.Scope}}),Object.defineProperty(E,"ValueScope",{enumerable:!0,get:function(){return i.ValueScope}}),Object.defineProperty(E,"ValueScopeName",{enumerable:!0,get:function(){return i.ValueScopeName}}),Object.defineProperty(E,"varKinds",{enumerable:!0,get:function(){return i.varKinds}}),E.operators={GT:new n._Code(">"),GTE:new n._Code(">="),LT:new n._Code("<"),LTE:new n._Code("<="),EQ:new n._Code("==="),NEQ:new n._Code("!=="),NOT:new n._Code("!"),OR:new n._Code("||"),AND:new n._Code("&&"),ADD:new n._Code("+")};class c{optimizeNodes(){return this}optimizeNames(A,z){return this}}class m extends c{constructor(A,z,ae){super(),this.varKind=A,this.name=z,this.rhs=ae}render({es5:A,_n:z}){const ae=A?d.varKinds.var:this.varKind,$e=this.rhs===void 0?"":` = ${this.rhs}`;return`${ae} ${this.name}${$e};`+z}optimizeNames(A,z){if(A[this.name.str])return this.rhs&&(this.rhs=ke(this.rhs,A,z)),this}get names(){return this.rhs instanceof n._CodeOrName?this.rhs.names:{}}}class b extends c{constructor(A,z,ae){super(),this.lhs=A,this.rhs=z,this.sideEffects=ae}render({_n:A}){return`${this.lhs} = ${this.rhs};`+A}optimizeNames(A,z){if(!(this.lhs instanceof n.Name&&!A[this.lhs.str]&&!this.sideEffects))return this.rhs=ke(this.rhs,A,z),this}get names(){const A=this.lhs instanceof n.Name?{}:{...this.lhs.names};return xe(A,this.rhs)}}class R extends b{constructor(A,z,ae,$e){super(A,ae,$e),this.op=z}render({_n:A}){return`${this.lhs} ${this.op}= ${this.rhs};`+A}}class t extends c{constructor(A){super(),this.label=A,this.names={}}render({_n:A}){return`${this.label}:`+A}}class U extends c{constructor(A){super(),this.label=A,this.names={}}render({_n:A}){return`break${this.label?` ${this.label}`:""};`+A}}class w extends c{constructor(A){super(),this.error=A}render({_n:A}){return`throw ${this.error};`+A}get names(){return this.error.names}}class N extends c{constructor(A){super(),this.code=A}render({_n:A}){return`${this.code};`+A}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(A,z){return this.code=ke(this.code,A,z),this}get names(){return this.code instanceof n._CodeOrName?this.code.names:{}}}class K extends c{constructor(A=[]){super(),this.nodes=A}render(A){return this.nodes.reduce((z,ae)=>z+ae.render(A),"")}optimizeNodes(){const{nodes:A}=this;let z=A.length;for(;z--;){const ae=A[z].optimizeNodes();Array.isArray(ae)?A.splice(z,1,...ae):ae?A[z]=ae:A.splice(z,1)}return A.length>0?this:void 0}optimizeNames(A,z){const{nodes:ae}=this;let $e=ae.length;for(;$e--;){const Ge=ae[$e];Ge.optimizeNames(A,z)||(rt(A,Ge.names),ae.splice($e,1))}return ae.length>0?this:void 0}get names(){return this.nodes.reduce((A,z)=>qe(A,z.names),{})}}class k extends K{render(A){return"{"+A._n+super.render(A)+"}"+A._n}}class H extends K{}class C extends k{}C.kind="else";class v extends k{constructor(A,z){super(z),this.condition=A}render(A){let z=`if(${this.condition})`+super.render(A);return this.else&&(z+="else "+this.else.render(A)),z}optimizeNodes(){super.optimizeNodes();const A=this.condition;if(A===!0)return this.nodes;let z=this.else;if(z){const ae=z.optimizeNodes();z=this.else=Array.isArray(ae)?new C(ae):ae}if(z)return A===!1?z instanceof v?z:z.nodes:this.nodes.length?this:new v(Kt(A),z instanceof v?[z]:z.nodes);if(!(A===!1||!this.nodes.length))return this}optimizeNames(A,z){var ae;if(this.else=(ae=this.else)===null||ae===void 0?void 0:ae.optimizeNames(A,z),!!(super.optimizeNames(A,z)||this.else))return this.condition=ke(this.condition,A,z),this}get names(){const A=super.names;return xe(A,this.condition),this.else&&qe(A,this.else.names),A}}v.kind="if";class F extends k{}F.kind="for";class g extends F{constructor(A){super(),this.iteration=A}render(A){return`for(${this.iteration})`+super.render(A)}optimizeNames(A,z){if(super.optimizeNames(A,z))return this.iteration=ke(this.iteration,A,z),this}get names(){return qe(super.names,this.iteration.names)}}class J extends F{constructor(A,z,ae,$e){super(),this.varKind=A,this.name=z,this.from=ae,this.to=$e}render(A){const z=A.es5?d.varKinds.var:this.varKind,{name:ae,from:$e,to:Ge}=this;return`for(${z} ${ae}=${$e}; ${ae}<${Ge}; ${ae}++)`+super.render(A)}get names(){const A=xe(super.names,this.from);return xe(A,this.to)}}class x extends F{constructor(A,z,ae,$e){super(),this.loop=A,this.varKind=z,this.name=ae,this.iterable=$e}render(A){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(A)}optimizeNames(A,z){if(super.optimizeNames(A,z))return this.iterable=ke(this.iterable,A,z),this}get names(){return qe(super.names,this.iterable.names)}}class B extends k{constructor(A,z,ae){super(),this.name=A,this.args=z,this.async=ae}render(A){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(A)}}B.kind="func";class T extends K{render(A){return"return "+super.render(A)}}T.kind="return";class S extends k{render(A){let z="try"+super.render(A);return this.catch&&(z+=this.catch.render(A)),this.finally&&(z+=this.finally.render(A)),z}optimizeNodes(){var A,z;return super.optimizeNodes(),(A=this.catch)===null||A===void 0||A.optimizeNodes(),(z=this.finally)===null||z===void 0||z.optimizeNodes(),this}optimizeNames(A,z){var ae,$e;return super.optimizeNames(A,z),(ae=this.catch)===null||ae===void 0||ae.optimizeNames(A,z),($e=this.finally)===null||$e===void 0||$e.optimizeNames(A,z),this}get names(){const A=super.names;return this.catch&&qe(A,this.catch.names),this.finally&&qe(A,this.finally.names),A}}class ie extends k{constructor(A){super(),this.error=A}render(A){return`catch(${this.error})`+super.render(A)}}ie.kind="catch";class Te extends k{render(A){return"finally"+super.render(A)}}Te.kind="finally";class Pe{constructor(A,z={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...z,_n:z.lines?`
`:""},this._extScope=A,this._scope=new d.Scope({parent:A}),this._nodes=[new H]}toString(){return this._root.render(this.opts)}name(A){return this._scope.name(A)}scopeName(A){return this._extScope.name(A)}scopeValue(A,z){const ae=this._extScope.value(A,z);return(this._values[ae.prefix]||(this._values[ae.prefix]=new Set)).add(ae),ae}getScopeValue(A,z){return this._extScope.getValue(A,z)}scopeRefs(A){return this._extScope.scopeRefs(A,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(A,z,ae,$e){const Ge=this._scope.toName(z);return ae!==void 0&&$e&&(this._constants[Ge.str]=ae),this._leafNode(new m(A,Ge,ae)),Ge}const(A,z,ae){return this._def(d.varKinds.const,A,z,ae)}let(A,z,ae){return this._def(d.varKinds.let,A,z,ae)}var(A,z,ae){return this._def(d.varKinds.var,A,z,ae)}assign(A,z,ae){return this._leafNode(new b(A,z,ae))}add(A,z){return this._leafNode(new R(A,E.operators.ADD,z))}code(A){return typeof A=="function"?A():A!==n.nil&&this._leafNode(new N(A)),this}object(...A){const z=["{"];for(const[ae,$e]of A)z.length>1&&z.push(","),z.push(ae),(ae!==$e||this.opts.es5)&&(z.push(":"),(0,n.addCodeArg)(z,$e));return z.push("}"),new n._Code(z)}if(A,z,ae){if(this._blockNode(new v(A)),z&&ae)this.code(z).else().code(ae).endIf();else if(z)this.code(z).endIf();else if(ae)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(A){return this._elseNode(new v(A))}else(){return this._elseNode(new C)}endIf(){return this._endBlockNode(v,C)}_for(A,z){return this._blockNode(A),z&&this.code(z).endFor(),this}for(A,z){return this._for(new g(A),z)}forRange(A,z,ae,$e,Ge=this.opts.es5?d.varKinds.var:d.varKinds.let){const ft=this._scope.toName(A);return this._for(new J(Ge,ft,z,ae),()=>$e(ft))}forOf(A,z,ae,$e=d.varKinds.const){const Ge=this._scope.toName(A);if(this.opts.es5){const ft=z instanceof n.Name?z:this.var("_arr",z);return this.forRange("_i",0,(0,n._)`${ft}.length`,nt=>{this.var(Ge,(0,n._)`${ft}[${nt}]`),ae(Ge)})}return this._for(new x("of",$e,Ge,z),()=>ae(Ge))}forIn(A,z,ae,$e=this.opts.es5?d.varKinds.var:d.varKinds.const){if(this.opts.ownProperties)return this.forOf(A,(0,n._)`Object.keys(${z})`,ae);const Ge=this._scope.toName(A);return this._for(new x("in",$e,Ge,z),()=>ae(Ge))}endFor(){return this._endBlockNode(F)}label(A){return this._leafNode(new t(A))}break(A){return this._leafNode(new U(A))}return(A){const z=new T;if(this._blockNode(z),this.code(A),z.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(T)}try(A,z,ae){if(!z&&!ae)throw new Error('CodeGen: "try" without "catch" and "finally"');const $e=new S;if(this._blockNode($e),this.code(A),z){const Ge=this.name("e");this._currNode=$e.catch=new ie(Ge),z(Ge)}return ae&&(this._currNode=$e.finally=new Te,this.code(ae)),this._endBlockNode(ie,Te)}throw(A){return this._leafNode(new w(A))}block(A,z){return this._blockStarts.push(this._nodes.length),A&&this.code(A).endBlock(z),this}endBlock(A){const z=this._blockStarts.pop();if(z===void 0)throw new Error("CodeGen: not in self-balancing block");const ae=this._nodes.length-z;if(ae<0||A!==void 0&&ae!==A)throw new Error(`CodeGen: wrong number of nodes: ${ae} vs ${A} expected`);return this._nodes.length=z,this}func(A,z=n.nil,ae,$e){return this._blockNode(new B(A,z,ae)),$e&&this.code($e).endFunc(),this}endFunc(){return this._endBlockNode(B)}optimize(A=1){for(;A-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(A){return this._currNode.nodes.push(A),this}_blockNode(A){this._currNode.nodes.push(A),this._nodes.push(A)}_endBlockNode(A,z){const ae=this._currNode;if(ae instanceof A||z&&ae instanceof z)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${z?`${A.kind}/${z.kind}`:A.kind}"`)}_elseNode(A){const z=this._currNode;if(!(z instanceof v))throw new Error('CodeGen: "else" without "if"');return this._currNode=z.else=A,this}get _root(){return this._nodes[0]}get _currNode(){const A=this._nodes;return A[A.length-1]}set _currNode(A){const z=this._nodes;z[z.length-1]=A}}E.CodeGen=Pe;function qe($,A){for(const z in A)$[z]=($[z]||0)+(A[z]||0);return $}function xe($,A){return A instanceof n._CodeOrName?qe($,A.names):$}function ke($,A,z){if($ instanceof n.Name)return ae($);if(!$e($))return $;return new n._Code($._items.reduce((Ge,ft)=>(ft instanceof n.Name&&(ft=ae(ft)),ft instanceof n._Code?Ge.push(...ft._items):Ge.push(ft),Ge),[]));function ae(Ge){const ft=z[Ge.str];return ft===void 0||A[Ge.str]!==1?Ge:(delete A[Ge.str],ft)}function $e(Ge){return Ge instanceof n._Code&&Ge._items.some(ft=>ft instanceof n.Name&&A[ft.str]===1&&z[ft.str]!==void 0)}}function rt($,A){for(const z in A)$[z]=($[z]||0)-(A[z]||0)}function Kt($){return typeof $=="boolean"||typeof $=="number"||$===null?!$:(0,n._)`!${Ke($)}`}E.not=Kt;const Nt=ue(E.operators.AND);function rn(...$){return $.reduce(Nt)}E.and=rn;const D=ue(E.operators.OR);function we(...$){return $.reduce(D)}E.or=we;function ue($){return(A,z)=>A===n.nil?z:z===n.nil?A:(0,n._)`${Ke(A)} ${$} ${Ke(z)}`}function Ke($){return $ instanceof n.Name?$:(0,n._)`(${$})`}},66162:function(Dt,E,e){"use strict";Object.defineProperty(E,"__esModule",{value:!0}),E.ValueScope=E.ValueScopeName=E.Scope=E.varKinds=E.UsedValueState=void 0;const n=e(91475);class d extends Error{constructor(t){super(`CodeGen: "code" for ${t} not defined`),this.value=t.value}}var p;(function(R){R[R.Started=0]="Started",R[R.Completed=1]="Completed"})(p=E.UsedValueState||(E.UsedValueState={})),E.varKinds={const:new n.Name("const"),let:new n.Name("let"),var:new n.Name("var")};class i{constructor({prefixes:t,parent:U}={}){this._names={},this._prefixes=t,this._parent=U}toName(t){return t instanceof n.Name?t:this.name(t)}name(t){return new n.Name(this._newName(t))}_newName(t){const U=this._names[t]||this._nameGroup(t);return`${t}${U.index++}`}_nameGroup(t){var U,w;if(!((w=(U=this._parent)===null||U===void 0?void 0:U._prefixes)===null||w===void 0)&&w.has(t)||this._prefixes&&!this._prefixes.has(t))throw new Error(`CodeGen: prefix "${t}" is not allowed in this scope`);return this._names[t]={prefix:t,index:0}}}E.Scope=i;class c extends n.Name{constructor(t,U){super(U),this.prefix=t}setValue(t,{property:U,itemIndex:w}){this.value=t,this.scopePath=(0,n._)`.${new n.Name(U)}[${w}]`}}E.ValueScopeName=c;const m=(0,n._)`\n`;class b extends i{constructor(t){super(t),this._values={},this._scope=t.scope,this.opts={...t,_n:t.lines?m:n.nil}}get(){return this._scope}name(t){return new c(t,this._newName(t))}value(t,U){var w;if(U.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const N=this.toName(t),{prefix:K}=N,k=(w=U.key)!==null&&w!==void 0?w:U.ref;let H=this._values[K];if(H){const F=H.get(k);if(F)return F}else H=this._values[K]=new Map;H.set(k,N);const C=this._scope[K]||(this._scope[K]=[]),v=C.length;return C[v]=U.ref,N.setValue(U,{property:K,itemIndex:v}),N}getValue(t,U){const w=this._values[t];if(w)return w.get(U)}scopeRefs(t,U=this._values){return this._reduceValues(U,w=>{if(w.scopePath===void 0)throw new Error(`CodeGen: name "${w}" has no value`);return(0,n._)`${t}${w.scopePath}`})}scopeCode(t=this._values,U,w){return this._reduceValues(t,N=>{if(N.value===void 0)throw new Error(`CodeGen: name "${N}" has no value`);return N.value.code},U,w)}_reduceValues(t,U,w={},N){let K=n.nil;for(const k in t){const H=t[k];if(!H)continue;const C=w[k]=w[k]||new Map;H.forEach(v=>{if(C.has(v))return;C.set(v,p.Started);let F=U(v);if(F){const g=this.opts.es5?E.varKinds.var:E.varKinds.const;K=(0,n._)`${K}${g} ${v} = ${F};${this.opts._n}`}else if(F=N==null?void 0:N(v))K=(0,n._)`${K}${F}${this.opts._n}`;else throw new d(v);C.set(v,p.Completed)})}return K}}E.ValueScope=b},59428:function(Dt,E,e){"use strict";Object.defineProperty(E,"__esModule",{value:!0}),E.extendErrors=E.resetErrorsCount=E.reportExtraError=E.reportError=E.keyword$DataError=E.keywordError=void 0;const n=e(82481),d=e(1849),p=e(99583);E.keywordError={message:({keyword:C})=>(0,n.str)`must pass "${C}" keyword validation`},E.keyword$DataError={message:({keyword:C,schemaType:v})=>v?(0,n.str)`"${C}" keyword must be ${v} ($data)`:(0,n.str)`"${C}" keyword is invalid ($data)`};function i(C,v=E.keywordError,F,g){const{it:J}=C,{gen:x,compositeRule:B,allErrors:T}=J,S=w(C,v,F);(g!=null?g:B||T)?R(x,S):t(J,(0,n._)`[${S}]`)}E.reportError=i;function c(C,v=E.keywordError,F){const{it:g}=C,{gen:J,compositeRule:x,allErrors:B}=g,T=w(C,v,F);R(J,T),x||B||t(g,p.default.vErrors)}E.reportExtraError=c;function m(C,v){C.assign(p.default.errors,v),C.if((0,n._)`${p.default.vErrors} !== null`,()=>C.if(v,()=>C.assign((0,n._)`${p.default.vErrors}.length`,v),()=>C.assign(p.default.vErrors,null)))}E.resetErrorsCount=m;function b({gen:C,keyword:v,schemaValue:F,data:g,errsCount:J,it:x}){if(J===void 0)throw new Error("ajv implementation error");const B=C.name("err");C.forRange("i",J,p.default.errors,T=>{C.const(B,(0,n._)`${p.default.vErrors}[${T}]`),C.if((0,n._)`${B}.instancePath === undefined`,()=>C.assign((0,n._)`${B}.instancePath`,(0,n.strConcat)(p.default.instancePath,x.errorPath))),C.assign((0,n._)`${B}.schemaPath`,(0,n.str)`${x.errSchemaPath}/${v}`),x.opts.verbose&&(C.assign((0,n._)`${B}.schema`,F),C.assign((0,n._)`${B}.data`,g))})}E.extendErrors=b;function R(C,v){const F=C.const("err",v);C.if((0,n._)`${p.default.vErrors} === null`,()=>C.assign(p.default.vErrors,(0,n._)`[${F}]`),(0,n._)`${p.default.vErrors}.push(${F})`),C.code((0,n._)`${p.default.errors}++`)}function t(C,v){const{gen:F,validateName:g,schemaEnv:J}=C;J.$async?F.throw((0,n._)`new ${C.ValidationError}(${v})`):(F.assign((0,n._)`${g}.errors`,v),F.return(!1))}const U={keyword:new n.Name("keyword"),schemaPath:new n.Name("schemaPath"),params:new n.Name("params"),propertyName:new n.Name("propertyName"),message:new n.Name("message"),schema:new n.Name("schema"),parentSchema:new n.Name("parentSchema")};function w(C,v,F){const{createErrors:g}=C.it;return g===!1?(0,n._)`{}`:N(C,v,F)}function N(C,v,F={}){const{gen:g,it:J}=C,x=[K(J,F),k(C,F)];return H(C,v,x),g.object(...x)}function K({errorPath:C},{instancePath:v}){const F=v?(0,n.str)`${C}${(0,d.getErrorPath)(v,d.Type.Str)}`:C;return[p.default.instancePath,(0,n.strConcat)(p.default.instancePath,F)]}function k({keyword:C,it:{errSchemaPath:v}},{schemaPath:F,parentSchema:g}){let J=g?v:(0,n.str)`${v}/${C}`;return F&&(J=(0,n.str)`${J}${(0,d.getErrorPath)(F,d.Type.Str)}`),[U.schemaPath,J]}function H(C,{params:v,message:F},g){const{keyword:J,data:x,schemaValue:B,it:T}=C,{opts:S,propertyName:ie,topSchemaRef:Te,schemaPath:Pe}=T;g.push([U.keyword,J],[U.params,typeof v=="function"?v(C):v||(0,n._)`{}`]),S.messages&&g.push([U.message,typeof F=="function"?F(C):F]),S.verbose&&g.push([U.schema,B],[U.parentSchema,(0,n._)`${Te}${Pe}`],[p.default.data,x]),ie&&g.push([U.propertyName,ie])}},62902:function(Dt,E,e){"use strict";Object.defineProperty(E,"__esModule",{value:!0}),E.resolveSchema=E.getCompilingSchema=E.resolveRef=E.compileSchema=E.SchemaEnv=void 0;const n=e(82481),d=e(14319),p=e(99583),i=e(2710),c=e(1849),m=e(4371);class b{constructor(F){var g;this.refs={},this.dynamicAnchors={};let J;typeof F.schema=="object"&&(J=F.schema),this.schema=F.schema,this.schemaId=F.schemaId,this.root=F.root||this,this.baseId=(g=F.baseId)!==null&&g!==void 0?g:(0,i.normalizeId)(J==null?void 0:J[F.schemaId||"$id"]),this.schemaPath=F.schemaPath,this.localRefs=F.localRefs,this.meta=F.meta,this.$async=J==null?void 0:J.$async,this.refs={}}}E.SchemaEnv=b;function R(v){const F=w.call(this,v);if(F)return F;const g=(0,i.getFullPath)(this.opts.uriResolver,v.root.baseId),{es5:J,lines:x}=this.opts.code,{ownProperties:B}=this.opts,T=new n.CodeGen(this.scope,{es5:J,lines:x,ownProperties:B});let S;v.$async&&(S=T.scopeValue("Error",{ref:d.default,code:(0,n._)`require("ajv/dist/runtime/validation_error").default`}));const ie=T.scopeName("validate");v.validateName=ie;const Te={gen:T,allErrors:this.opts.allErrors,data:p.default.data,parentData:p.default.parentData,parentDataProperty:p.default.parentDataProperty,dataNames:[p.default.data],dataPathArr:[n.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:T.scopeValue("schema",this.opts.code.source===!0?{ref:v.schema,code:(0,n.stringify)(v.schema)}:{ref:v.schema}),validateName:ie,ValidationError:S,schema:v.schema,schemaEnv:v,rootId:g,baseId:v.baseId||g,schemaPath:n.nil,errSchemaPath:v.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,n._)`""`,opts:this.opts,self:this};let Pe;try{this._compilations.add(v),(0,m.validateFunctionCode)(Te),T.optimize(this.opts.code.optimize);const qe=T.toString();Pe=`${T.scopeRefs(p.default.scope)}return ${qe}`,this.opts.code.process&&(Pe=this.opts.code.process(Pe,v));const ke=new Function(`${p.default.self}`,`${p.default.scope}`,Pe)(this,this.scope.get());if(this.scope.value(ie,{ref:ke}),ke.errors=null,ke.schema=v.schema,ke.schemaEnv=v,v.$async&&(ke.$async=!0),this.opts.code.source===!0&&(ke.source={validateName:ie,validateCode:qe,scopeValues:T._values}),this.opts.unevaluated){const{props:rt,items:Kt}=Te;ke.evaluated={props:rt instanceof n.Name?void 0:rt,items:Kt instanceof n.Name?void 0:Kt,dynamicProps:rt instanceof n.Name,dynamicItems:Kt instanceof n.Name},ke.source&&(ke.source.evaluated=(0,n.stringify)(ke.evaluated))}return v.validate=ke,v}catch(qe){throw delete v.validate,delete v.validateName,Pe&&this.logger.error("Error compiling schema, function code:",Pe),qe}finally{this._compilations.delete(v)}}E.compileSchema=R;function t(v,F,g){var J;g=(0,i.resolveUrl)(this.opts.uriResolver,F,g);const x=v.refs[g];if(x)return x;let B=K.call(this,v,g);if(B===void 0){const T=(J=v.localRefs)===null||J===void 0?void 0:J[g],{schemaId:S}=this.opts;T&&(B=new b({schema:T,schemaId:S,root:v,baseId:F}))}if(B!==void 0)return v.refs[g]=U.call(this,B)}E.resolveRef=t;function U(v){return(0,i.inlineRef)(v.schema,this.opts.inlineRefs)?v.schema:v.validate?v:R.call(this,v)}function w(v){for(const F of this._compilations)if(N(F,v))return F}E.getCompilingSchema=w;function N(v,F){return v.schema===F.schema&&v.root===F.root&&v.baseId===F.baseId}function K(v,F){let g;for(;typeof(g=this.refs[F])=="string";)F=g;return g||this.schemas[F]||k.call(this,v,F)}function k(v,F){const g=this.opts.uriResolver.parse(F),J=(0,i._getFullPath)(this.opts.uriResolver,g);let x=(0,i.getFullPath)(this.opts.uriResolver,v.baseId,void 0);if(Object.keys(v.schema).length>0&&J===x)return C.call(this,g,v);const B=(0,i.normalizeId)(J),T=this.refs[B]||this.schemas[B];if(typeof T=="string"){const S=k.call(this,v,T);return typeof(S==null?void 0:S.schema)!="object"?void 0:C.call(this,g,S)}if(typeof(T==null?void 0:T.schema)=="object"){if(T.validate||R.call(this,T),B===(0,i.normalizeId)(F)){const{schema:S}=T,{schemaId:ie}=this.opts,Te=S[ie];return Te&&(x=(0,i.resolveUrl)(this.opts.uriResolver,x,Te)),new b({schema:S,schemaId:ie,root:v,baseId:x})}return C.call(this,g,T)}}E.resolveSchema=k;const H=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function C(v,{baseId:F,schema:g,root:J}){var x;if(((x=v.fragment)===null||x===void 0?void 0:x[0])!=="/")return;for(const S of v.fragment.slice(1).split("/")){if(typeof g=="boolean")return;const ie=g[(0,c.unescapeFragment)(S)];if(ie===void 0)return;g=ie;const Te=typeof g=="object"&&g[this.opts.schemaId];!H.has(S)&&Te&&(F=(0,i.resolveUrl)(this.opts.uriResolver,F,Te))}let B;if(typeof g!="boolean"&&g.$ref&&!(0,c.schemaHasRulesButRef)(g,this.RULES)){const S=(0,i.resolveUrl)(this.opts.uriResolver,F,g.$ref);B=k.call(this,J,S)}const{schemaId:T}=this.opts;if(B=B||new b({schema:g,schemaId:T,root:J,baseId:F}),B.schema!==B.root.schema)return B}},99583:function(Dt,E,e){"use strict";Object.defineProperty(E,"__esModule",{value:!0});const n=e(82481),d={data:new n.Name("data"),valCxt:new n.Name("valCxt"),instancePath:new n.Name("instancePath"),parentData:new n.Name("parentData"),parentDataProperty:new n.Name("parentDataProperty"),rootData:new n.Name("rootData"),dynamicAnchors:new n.Name("dynamicAnchors"),vErrors:new n.Name("vErrors"),errors:new n.Name("errors"),this:new n.Name("this"),self:new n.Name("self"),scope:new n.Name("scope"),json:new n.Name("json"),jsonPos:new n.Name("jsonPos"),jsonLen:new n.Name("jsonLen"),jsonPart:new n.Name("jsonPart")};E.default=d},30283:function(Dt,E,e){"use strict";Object.defineProperty(E,"__esModule",{value:!0});const n=e(2710);class d extends Error{constructor(i,c,m,b){super(b||`can't resolve reference ${m} from id ${c}`),this.missingRef=(0,n.resolveUrl)(i,c,m),this.missingSchema=(0,n.normalizeId)((0,n.getFullPath)(i,this.missingRef))}}E.default=d},2710:function(Dt,E,e){"use strict";Object.defineProperty(E,"__esModule",{value:!0}),E.getSchemaRefs=E.resolveUrl=E.normalizeId=E._getFullPath=E.getFullPath=E.inlineRef=void 0;const n=e(1849),d=e(69378),p=e(19522),i=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function c(C,v=!0){return typeof C=="boolean"?!0:v===!0?!b(C):v?R(C)<=v:!1}E.inlineRef=c;const m=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function b(C){for(const v in C){if(m.has(v))return!0;const F=C[v];if(Array.isArray(F)&&F.some(b)||typeof F=="object"&&b(F))return!0}return!1}function R(C){let v=0;for(const F in C){if(F==="$ref")return 1/0;if(v++,!i.has(F)&&(typeof C[F]=="object"&&(0,n.eachItem)(C[F],g=>v+=R(g)),v===1/0))return 1/0}return v}function t(C,v="",F){F!==!1&&(v=N(v));const g=C.parse(v);return U(C,g)}E.getFullPath=t;function U(C,v){return C.serialize(v).split("#")[0]+"#"}E._getFullPath=U;const w=/#\/?$/;function N(C){return C?C.replace(w,""):""}E.normalizeId=N;function K(C,v,F){return F=N(F),C.resolve(v,F)}E.resolveUrl=K;const k=/^[a-z_][-a-z0-9._]*$/i;function H(C,v){if(typeof C=="boolean")return{};const{schemaId:F,uriResolver:g}=this.opts,J=N(C[F]||v),x={"":J},B=t(g,J,!1),T={},S=new Set;return p(C,{allKeys:!0},(Pe,qe,xe,ke)=>{if(ke===void 0)return;const rt=B+qe;let Kt=x[ke];typeof Pe[F]=="string"&&(Kt=Nt.call(this,Pe[F])),rn.call(this,Pe.$anchor),rn.call(this,Pe.$dynamicAnchor),x[qe]=Kt;function Nt(D){const we=this.opts.uriResolver.resolve;if(D=N(Kt?we(Kt,D):D),S.has(D))throw Te(D);S.add(D);let ue=this.refs[D];return typeof ue=="string"&&(ue=this.refs[ue]),typeof ue=="object"?ie(Pe,ue.schema,D):D!==N(rt)&&(D[0]==="#"?(ie(Pe,T[D],D),T[D]=Pe):this.refs[D]=rt),D}function rn(D){if(typeof D=="string"){if(!k.test(D))throw new Error(`invalid anchor "${D}"`);Nt.call(this,`#${D}`)}}}),T;function ie(Pe,qe,xe){if(qe!==void 0&&!d(Pe,qe))throw Te(xe)}function Te(Pe){return new Error(`reference "${Pe}" resolves to more than one schema`)}}E.getSchemaRefs=H},18288:function(Dt,E){"use strict";Object.defineProperty(E,"__esModule",{value:!0}),E.getRules=E.isJSONType=void 0;const e=["string","number","integer","boolean","null","object","array"],n=new Set(e);function d(i){return typeof i=="string"&&n.has(i)}E.isJSONType=d;function p(){const i={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...i,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},i.number,i.string,i.array,i.object],post:{rules:[]},all:{},keywords:{}}}E.getRules=p},1849:function(Dt,E,e){"use strict";Object.defineProperty(E,"__esModule",{value:!0}),E.checkStrictMode=E.getErrorPath=E.Type=E.useFunc=E.setEvaluated=E.evaluatedPropsToName=E.mergeEvaluated=E.eachItem=E.unescapeJsonPointer=E.escapeJsonPointer=E.escapeFragment=E.unescapeFragment=E.schemaRefOrVal=E.schemaHasRulesButRef=E.schemaHasRules=E.checkUnknownRules=E.alwaysValidSchema=E.toHash=void 0;const n=e(82481),d=e(91475);function p(B){const T={};for(const S of B)T[S]=!0;return T}E.toHash=p;function i(B,T){return typeof T=="boolean"?T:Object.keys(T).length===0?!0:(c(B,T),!m(T,B.self.RULES.all))}E.alwaysValidSchema=i;function c(B,T=B.schema){const{opts:S,self:ie}=B;if(!S.strictSchema||typeof T=="boolean")return;const Te=ie.RULES.keywords;for(const Pe in T)Te[Pe]||x(B,`unknown keyword: "${Pe}"`)}E.checkUnknownRules=c;function m(B,T){if(typeof B=="boolean")return!B;for(const S in B)if(T[S])return!0;return!1}E.schemaHasRules=m;function b(B,T){if(typeof B=="boolean")return!B;for(const S in B)if(S!=="$ref"&&T.all[S])return!0;return!1}E.schemaHasRulesButRef=b;function R({topSchemaRef:B,schemaPath:T},S,ie,Te){if(!Te){if(typeof S=="number"||typeof S=="boolean")return S;if(typeof S=="string")return(0,n._)`${S}`}return(0,n._)`${B}${T}${(0,n.getProperty)(ie)}`}E.schemaRefOrVal=R;function t(B){return N(decodeURIComponent(B))}E.unescapeFragment=t;function U(B){return encodeURIComponent(w(B))}E.escapeFragment=U;function w(B){return typeof B=="number"?`${B}`:B.replace(/~/g,"~0").replace(/\//g,"~1")}E.escapeJsonPointer=w;function N(B){return B.replace(/~1/g,"/").replace(/~0/g,"~")}E.unescapeJsonPointer=N;function K(B,T){if(Array.isArray(B))for(const S of B)T(S);else T(B)}E.eachItem=K;function k({mergeNames:B,mergeToName:T,mergeValues:S,resultToName:ie}){return(Te,Pe,qe,xe)=>{const ke=qe===void 0?Pe:qe instanceof n.Name?(Pe instanceof n.Name?B(Te,Pe,qe):T(Te,Pe,qe),qe):Pe instanceof n.Name?(T(Te,qe,Pe),Pe):S(Pe,qe);return xe===n.Name&&!(ke instanceof n.Name)?ie(Te,ke):ke}}E.mergeEvaluated={props:k({mergeNames:(B,T,S)=>B.if((0,n._)`${S} !== true && ${T} !== undefined`,()=>{B.if((0,n._)`${T} === true`,()=>B.assign(S,!0),()=>B.assign(S,(0,n._)`${S} || {}`).code((0,n._)`Object.assign(${S}, ${T})`))}),mergeToName:(B,T,S)=>B.if((0,n._)`${S} !== true`,()=>{T===!0?B.assign(S,!0):(B.assign(S,(0,n._)`${S} || {}`),C(B,S,T))}),mergeValues:(B,T)=>B===!0?!0:{...B,...T},resultToName:H}),items:k({mergeNames:(B,T,S)=>B.if((0,n._)`${S} !== true && ${T} !== undefined`,()=>B.assign(S,(0,n._)`${T} === true ? true : ${S} > ${T} ? ${S} : ${T}`)),mergeToName:(B,T,S)=>B.if((0,n._)`${S} !== true`,()=>B.assign(S,T===!0?!0:(0,n._)`${S} > ${T} ? ${S} : ${T}`)),mergeValues:(B,T)=>B===!0?!0:Math.max(B,T),resultToName:(B,T)=>B.var("items",T)})};function H(B,T){if(T===!0)return B.var("props",!0);const S=B.var("props",(0,n._)`{}`);return T!==void 0&&C(B,S,T),S}E.evaluatedPropsToName=H;function C(B,T,S){Object.keys(S).forEach(ie=>B.assign((0,n._)`${T}${(0,n.getProperty)(ie)}`,!0))}E.setEvaluated=C;const v={};function F(B,T){return B.scopeValue("func",{ref:T,code:v[T.code]||(v[T.code]=new d._Code(T.code))})}E.useFunc=F;var g;(function(B){B[B.Num=0]="Num",B[B.Str=1]="Str"})(g=E.Type||(E.Type={}));function J(B,T,S){if(B instanceof n.Name){const ie=T===g.Num;return S?ie?(0,n._)`"[" + ${B} + "]"`:(0,n._)`"['" + ${B} + "']"`:ie?(0,n._)`"/" + ${B}`:(0,n._)`"/" + ${B}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return S?(0,n.getProperty)(B).toString():"/"+w(B)}E.getErrorPath=J;function x(B,T,S=B.opts.strictSchema){if(S){if(T=`strict mode: ${T}`,S===!0)throw new Error(T);B.self.logger.warn(T)}}E.checkStrictMode=x},66557:function(Dt,E){"use strict";Object.defineProperty(E,"__esModule",{value:!0}),E.shouldUseRule=E.shouldUseGroup=E.schemaHasRulesForType=void 0;function e({schema:p,self:i},c){const m=i.RULES.types[c];return m&&m!==!0&&n(p,m)}E.schemaHasRulesForType=e;function n(p,i){return i.rules.some(c=>d(p,c))}E.shouldUseGroup=n;function d(p,i){var c;return p[i.keyword]!==void 0||((c=i.definition.implements)===null||c===void 0?void 0:c.some(m=>p[m]!==void 0))}E.shouldUseRule=d},74616:function(Dt,E,e){"use strict";Object.defineProperty(E,"__esModule",{value:!0}),E.boolOrEmptySchema=E.topBoolOrEmptySchema=void 0;const n=e(59428),d=e(82481),p=e(99583),i={message:"boolean schema is false"};function c(R){const{gen:t,schema:U,validateName:w}=R;U===!1?b(R,!1):typeof U=="object"&&U.$async===!0?t.return(p.default.data):(t.assign((0,d._)`${w}.errors`,null),t.return(!0))}E.topBoolOrEmptySchema=c;function m(R,t){const{gen:U,schema:w}=R;w===!1?(U.var(t,!1),b(R)):U.var(t,!0)}E.boolOrEmptySchema=m;function b(R,t){const{gen:U,data:w}=R,N={gen:U,keyword:"false schema",data:w,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:R};(0,n.reportError)(N,i,void 0,t)}},93277:function(Dt,E,e){"use strict";Object.defineProperty(E,"__esModule",{value:!0}),E.reportTypeError=E.checkDataTypes=E.checkDataType=E.coerceAndCheckDataType=E.getJSONTypes=E.getSchemaTypes=E.DataType=void 0;const n=e(18288),d=e(66557),p=e(59428),i=e(82481),c=e(1849);var m;(function(g){g[g.Correct=0]="Correct",g[g.Wrong=1]="Wrong"})(m=E.DataType||(E.DataType={}));function b(g){const J=R(g.type);if(J.includes("null")){if(g.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!J.length&&g.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');g.nullable===!0&&J.push("null")}return J}E.getSchemaTypes=b;function R(g){const J=Array.isArray(g)?g:g?[g]:[];if(J.every(n.isJSONType))return J;throw new Error("type must be JSONType or JSONType[]: "+J.join(","))}E.getJSONTypes=R;function t(g,J){const{gen:x,data:B,opts:T}=g,S=w(J,T.coerceTypes),ie=J.length>0&&!(S.length===0&&J.length===1&&(0,d.schemaHasRulesForType)(g,J[0]));if(ie){const Te=H(J,B,T.strictNumbers,m.Wrong);x.if(Te,()=>{S.length?N(g,J,S):v(g)})}return ie}E.coerceAndCheckDataType=t;const U=new Set(["string","number","integer","boolean","null"]);function w(g,J){return J?g.filter(x=>U.has(x)||J==="array"&&x==="array"):[]}function N(g,J,x){const{gen:B,data:T,opts:S}=g,ie=B.let("dataType",(0,i._)`typeof ${T}`),Te=B.let("coerced",(0,i._)`undefined`);S.coerceTypes==="array"&&B.if((0,i._)`${ie} == 'object' && Array.isArray(${T}) && ${T}.length == 1`,()=>B.assign(T,(0,i._)`${T}[0]`).assign(ie,(0,i._)`typeof ${T}`).if(H(J,T,S.strictNumbers),()=>B.assign(Te,T))),B.if((0,i._)`${Te} !== undefined`);for(const qe of x)(U.has(qe)||qe==="array"&&S.coerceTypes==="array")&&Pe(qe);B.else(),v(g),B.endIf(),B.if((0,i._)`${Te} !== undefined`,()=>{B.assign(T,Te),K(g,Te)});function Pe(qe){switch(qe){case"string":B.elseIf((0,i._)`${ie} == "number" || ${ie} == "boolean"`).assign(Te,(0,i._)`"" + ${T}`).elseIf((0,i._)`${T} === null`).assign(Te,(0,i._)`""`);return;case"number":B.elseIf((0,i._)`${ie} == "boolean" || ${T} === null
              || (${ie} == "string" && ${T} && ${T} == +${T})`).assign(Te,(0,i._)`+${T}`);return;case"integer":B.elseIf((0,i._)`${ie} === "boolean" || ${T} === null
              || (${ie} === "string" && ${T} && ${T} == +${T} && !(${T} % 1))`).assign(Te,(0,i._)`+${T}`);return;case"boolean":B.elseIf((0,i._)`${T} === "false" || ${T} === 0 || ${T} === null`).assign(Te,!1).elseIf((0,i._)`${T} === "true" || ${T} === 1`).assign(Te,!0);return;case"null":B.elseIf((0,i._)`${T} === "" || ${T} === 0 || ${T} === false`),B.assign(Te,null);return;case"array":B.elseIf((0,i._)`${ie} === "string" || ${ie} === "number"
              || ${ie} === "boolean" || ${T} === null`).assign(Te,(0,i._)`[${T}]`)}}}function K({gen:g,parentData:J,parentDataProperty:x},B){g.if((0,i._)`${J} !== undefined`,()=>g.assign((0,i._)`${J}[${x}]`,B))}function k(g,J,x,B=m.Correct){const T=B===m.Correct?i.operators.EQ:i.operators.NEQ;let S;switch(g){case"null":return(0,i._)`${J} ${T} null`;case"array":S=(0,i._)`Array.isArray(${J})`;break;case"object":S=(0,i._)`${J} && typeof ${J} == "object" && !Array.isArray(${J})`;break;case"integer":S=ie((0,i._)`!(${J} % 1) && !isNaN(${J})`);break;case"number":S=ie();break;default:return(0,i._)`typeof ${J} ${T} ${g}`}return B===m.Correct?S:(0,i.not)(S);function ie(Te=i.nil){return(0,i.and)((0,i._)`typeof ${J} == "number"`,Te,x?(0,i._)`isFinite(${J})`:i.nil)}}E.checkDataType=k;function H(g,J,x,B){if(g.length===1)return k(g[0],J,x,B);let T;const S=(0,c.toHash)(g);if(S.array&&S.object){const ie=(0,i._)`typeof ${J} != "object"`;T=S.null?ie:(0,i._)`!${J} || ${ie}`,delete S.null,delete S.array,delete S.object}else T=i.nil;S.number&&delete S.integer;for(const ie in S)T=(0,i.and)(T,k(ie,J,x,B));return T}E.checkDataTypes=H;const C={message:({schema:g})=>`must be ${g}`,params:({schema:g,schemaValue:J})=>typeof g=="string"?(0,i._)`{type: ${g}}`:(0,i._)`{type: ${J}}`};function v(g){const J=F(g);(0,p.reportError)(J,C)}E.reportTypeError=v;function F(g){const{gen:J,data:x,schema:B}=g,T=(0,c.schemaRefOrVal)(g,B,"type");return{gen:J,keyword:"type",data:x,schema:B.type,schemaCode:T,schemaValue:T,parentSchema:B,params:{},it:g}}},35192:function(Dt,E,e){"use strict";Object.defineProperty(E,"__esModule",{value:!0}),E.assignDefaults=void 0;const n=e(82481),d=e(1849);function p(c,m){const{properties:b,items:R}=c.schema;if(m==="object"&&b)for(const t in b)i(c,t,b[t].default);else m==="array"&&Array.isArray(R)&&R.forEach((t,U)=>i(c,U,t.default))}E.assignDefaults=p;function i(c,m,b){const{gen:R,compositeRule:t,data:U,opts:w}=c;if(b===void 0)return;const N=(0,n._)`${U}${(0,n.getProperty)(m)}`;if(t){(0,d.checkStrictMode)(c,`default is ignored for: ${N}`);return}let K=(0,n._)`${N} === undefined`;w.useDefaults==="empty"&&(K=(0,n._)`${K} || ${N} === null || ${N} === ""`),R.if(K,(0,n._)`${N} = ${(0,n.stringify)(b)}`)}},4371:function(Dt,E,e){"use strict";Object.defineProperty(E,"__esModule",{value:!0}),E.getData=E.KeywordCxt=E.validateFunctionCode=void 0;const n=e(74616),d=e(93277),p=e(66557),i=e(93277),c=e(35192),m=e(83558),b=e(20521),R=e(82481),t=e(99583),U=e(2710),w=e(1849),N=e(59428);function K(q){if(B(q)&&(S(q),x(q))){v(q);return}k(q,()=>(0,n.topBoolOrEmptySchema)(q))}E.validateFunctionCode=K;function k({gen:q,validateName:de,schema:Se,schemaEnv:Ne,opts:st},pe){st.code.es5?q.func(de,(0,R._)`${t.default.data}, ${t.default.valCxt}`,Ne.$async,()=>{q.code((0,R._)`"use strict"; ${g(Se,st)}`),C(q,st),q.code(pe)}):q.func(de,(0,R._)`${t.default.data}, ${H(st)}`,Ne.$async,()=>q.code(g(Se,st)).code(pe))}function H(q){return(0,R._)`{${t.default.instancePath}="", ${t.default.parentData}, ${t.default.parentDataProperty}, ${t.default.rootData}=${t.default.data}${q.dynamicRef?(0,R._)`, ${t.default.dynamicAnchors}={}`:R.nil}}={}`}function C(q,de){q.if(t.default.valCxt,()=>{q.var(t.default.instancePath,(0,R._)`${t.default.valCxt}.${t.default.instancePath}`),q.var(t.default.parentData,(0,R._)`${t.default.valCxt}.${t.default.parentData}`),q.var(t.default.parentDataProperty,(0,R._)`${t.default.valCxt}.${t.default.parentDataProperty}`),q.var(t.default.rootData,(0,R._)`${t.default.valCxt}.${t.default.rootData}`),de.dynamicRef&&q.var(t.default.dynamicAnchors,(0,R._)`${t.default.valCxt}.${t.default.dynamicAnchors}`)},()=>{q.var(t.default.instancePath,(0,R._)`""`),q.var(t.default.parentData,(0,R._)`undefined`),q.var(t.default.parentDataProperty,(0,R._)`undefined`),q.var(t.default.rootData,t.default.data),de.dynamicRef&&q.var(t.default.dynamicAnchors,(0,R._)`{}`)})}function v(q){const{schema:de,opts:Se,gen:Ne}=q;k(q,()=>{Se.$comment&&de.$comment&&ke(q),Pe(q),Ne.let(t.default.vErrors,null),Ne.let(t.default.errors,0),Se.unevaluated&&F(q),ie(q),rt(q)})}function F(q){const{gen:de,validateName:Se}=q;q.evaluated=de.const("evaluated",(0,R._)`${Se}.evaluated`),de.if((0,R._)`${q.evaluated}.dynamicProps`,()=>de.assign((0,R._)`${q.evaluated}.props`,(0,R._)`undefined`)),de.if((0,R._)`${q.evaluated}.dynamicItems`,()=>de.assign((0,R._)`${q.evaluated}.items`,(0,R._)`undefined`))}function g(q,de){const Se=typeof q=="object"&&q[de.schemaId];return Se&&(de.code.source||de.code.process)?(0,R._)`/*# sourceURL=${Se} */`:R.nil}function J(q,de){if(B(q)&&(S(q),x(q))){T(q,de);return}(0,n.boolOrEmptySchema)(q,de)}function x({schema:q,self:de}){if(typeof q=="boolean")return!q;for(const Se in q)if(de.RULES.all[Se])return!0;return!1}function B(q){return typeof q.schema!="boolean"}function T(q,de){const{schema:Se,gen:Ne,opts:st}=q;st.$comment&&Se.$comment&&ke(q),qe(q),xe(q);const pe=Ne.const("_errs",t.default.errors);ie(q,pe),Ne.var(de,(0,R._)`${pe} === ${t.default.errors}`)}function S(q){(0,w.checkUnknownRules)(q),Te(q)}function ie(q,de){if(q.opts.jtd)return Nt(q,[],!1,de);const Se=(0,d.getSchemaTypes)(q.schema),Ne=(0,d.coerceAndCheckDataType)(q,Se);Nt(q,Se,!Ne,de)}function Te(q){const{schema:de,errSchemaPath:Se,opts:Ne,self:st}=q;de.$ref&&Ne.ignoreKeywordsWithRef&&(0,w.schemaHasRulesButRef)(de,st.RULES)&&st.logger.warn(`$ref: keywords ignored in schema at path "${Se}"`)}function Pe(q){const{schema:de,opts:Se}=q;de.default!==void 0&&Se.useDefaults&&Se.strictSchema&&(0,w.checkStrictMode)(q,"default is ignored in the schema root")}function qe(q){const de=q.schema[q.opts.schemaId];de&&(q.baseId=(0,U.resolveUrl)(q.opts.uriResolver,q.baseId,de))}function xe(q){if(q.schema.$async&&!q.schemaEnv.$async)throw new Error("async schema in sync schema")}function ke({gen:q,schemaEnv:de,schema:Se,errSchemaPath:Ne,opts:st}){const pe=Se.$comment;if(st.$comment===!0)q.code((0,R._)`${t.default.self}.logger.log(${pe})`);else if(typeof st.$comment=="function"){const Je=(0,R.str)`${Ne}/$comment`,ot=q.scopeValue("root",{ref:de.root});q.code((0,R._)`${t.default.self}.opts.$comment(${pe}, ${Je}, ${ot}.schema)`)}}function rt(q){const{gen:de,schemaEnv:Se,validateName:Ne,ValidationError:st,opts:pe}=q;Se.$async?de.if((0,R._)`${t.default.errors} === 0`,()=>de.return(t.default.data),()=>de.throw((0,R._)`new ${st}(${t.default.vErrors})`)):(de.assign((0,R._)`${Ne}.errors`,t.default.vErrors),pe.unevaluated&&Kt(q),de.return((0,R._)`${t.default.errors} === 0`))}function Kt({gen:q,evaluated:de,props:Se,items:Ne}){Se instanceof R.Name&&q.assign((0,R._)`${de}.props`,Se),Ne instanceof R.Name&&q.assign((0,R._)`${de}.items`,Ne)}function Nt(q,de,Se,Ne){const{gen:st,schema:pe,data:Je,allErrors:ot,opts:Qe,self:Et}=q,{RULES:dt}=Et;if(pe.$ref&&(Qe.ignoreKeywordsWithRef||!(0,w.schemaHasRulesButRef)(pe,dt))){st.block(()=>Ge(q,"$ref",dt.all.$ref.definition));return}Qe.jtd||D(q,de),st.block(()=>{for(const jt of dt.rules)Vt(jt);Vt(dt.post)});function Vt(jt){(0,p.shouldUseGroup)(pe,jt)&&(jt.type?(st.if((0,i.checkDataType)(jt.type,Je,Qe.strictNumbers)),rn(q,jt),de.length===1&&de[0]===jt.type&&Se&&(st.else(),(0,i.reportTypeError)(q)),st.endIf()):rn(q,jt),ot||st.if((0,R._)`${t.default.errors} === ${Ne||0}`))}}function rn(q,de){const{gen:Se,schema:Ne,opts:{useDefaults:st}}=q;st&&(0,c.assignDefaults)(q,de.type),Se.block(()=>{for(const pe of de.rules)(0,p.shouldUseRule)(Ne,pe)&&Ge(q,pe.keyword,pe.definition,de.type)})}function D(q,de){q.schemaEnv.meta||!q.opts.strictTypes||(we(q,de),q.opts.allowUnionTypes||ue(q,de),Ke(q,q.dataTypes))}function we(q,de){if(de.length){if(!q.dataTypes.length){q.dataTypes=de;return}de.forEach(Se=>{A(q.dataTypes,Se)||ae(q,`type "${Se}" not allowed by context "${q.dataTypes.join(",")}"`)}),z(q,de)}}function ue(q,de){de.length>1&&!(de.length===2&&de.includes("null"))&&ae(q,"use allowUnionTypes to allow union type keyword")}function Ke(q,de){const Se=q.self.RULES.all;for(const Ne in Se){const st=Se[Ne];if(typeof st=="object"&&(0,p.shouldUseRule)(q.schema,st)){const{type:pe}=st.definition;pe.length&&!pe.some(Je=>$(de,Je))&&ae(q,`missing type "${pe.join(",")}" for keyword "${Ne}"`)}}}function $(q,de){return q.includes(de)||de==="number"&&q.includes("integer")}function A(q,de){return q.includes(de)||de==="integer"&&q.includes("number")}function z(q,de){const Se=[];for(const Ne of q.dataTypes)A(de,Ne)?Se.push(Ne):de.includes("integer")&&Ne==="number"&&Se.push("integer");q.dataTypes=Se}function ae(q,de){const Se=q.schemaEnv.baseId+q.errSchemaPath;de+=` at "${Se}" (strictTypes)`,(0,w.checkStrictMode)(q,de,q.opts.strictTypes)}class $e{constructor(de,Se,Ne){if((0,m.validateKeywordUsage)(de,Se,Ne),this.gen=de.gen,this.allErrors=de.allErrors,this.keyword=Ne,this.data=de.data,this.schema=de.schema[Ne],this.$data=Se.$data&&de.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,w.schemaRefOrVal)(de,this.schema,Ne,this.$data),this.schemaType=Se.schemaType,this.parentSchema=de.schema,this.params={},this.it=de,this.def=Se,this.$data)this.schemaCode=de.gen.const("vSchema",Rt(this.$data,de));else if(this.schemaCode=this.schemaValue,!(0,m.validSchemaType)(this.schema,Se.schemaType,Se.allowUndefined))throw new Error(`${Ne} value must be ${JSON.stringify(Se.schemaType)}`);("code"in Se?Se.trackErrors:Se.errors!==!1)&&(this.errsCount=de.gen.const("_errs",t.default.errors))}result(de,Se,Ne){this.failResult((0,R.not)(de),Se,Ne)}failResult(de,Se,Ne){this.gen.if(de),Ne?Ne():this.error(),Se?(this.gen.else(),Se(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(de,Se){this.failResult((0,R.not)(de),void 0,Se)}fail(de){if(de===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(de),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(de){if(!this.$data)return this.fail(de);const{schemaCode:Se}=this;this.fail((0,R._)`${Se} !== undefined && (${(0,R.or)(this.invalid$data(),de)})`)}error(de,Se,Ne){if(Se){this.setParams(Se),this._error(de,Ne),this.setParams({});return}this._error(de,Ne)}_error(de,Se){(de?N.reportExtraError:N.reportError)(this,this.def.error,Se)}$dataError(){(0,N.reportError)(this,this.def.$dataError||N.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,N.resetErrorsCount)(this.gen,this.errsCount)}ok(de){this.allErrors||this.gen.if(de)}setParams(de,Se){Se?Object.assign(this.params,de):this.params=de}block$data(de,Se,Ne=R.nil){this.gen.block(()=>{this.check$data(de,Ne),Se()})}check$data(de=R.nil,Se=R.nil){if(!this.$data)return;const{gen:Ne,schemaCode:st,schemaType:pe,def:Je}=this;Ne.if((0,R.or)((0,R._)`${st} === undefined`,Se)),de!==R.nil&&Ne.assign(de,!0),(pe.length||Je.validateSchema)&&(Ne.elseIf(this.invalid$data()),this.$dataError(),de!==R.nil&&Ne.assign(de,!1)),Ne.else()}invalid$data(){const{gen:de,schemaCode:Se,schemaType:Ne,def:st,it:pe}=this;return(0,R.or)(Je(),ot());function Je(){if(Ne.length){if(!(Se instanceof R.Name))throw new Error("ajv implementation error");const Qe=Array.isArray(Ne)?Ne:[Ne];return(0,R._)`${(0,i.checkDataTypes)(Qe,Se,pe.opts.strictNumbers,i.DataType.Wrong)}`}return R.nil}function ot(){if(st.validateSchema){const Qe=de.scopeValue("validate$data",{ref:st.validateSchema});return(0,R._)`!${Qe}(${Se})`}return R.nil}}subschema(de,Se){const Ne=(0,b.getSubschema)(this.it,de);(0,b.extendSubschemaData)(Ne,this.it,de),(0,b.extendSubschemaMode)(Ne,de);const st={...this.it,...Ne,items:void 0,props:void 0};return J(st,Se),st}mergeEvaluated(de,Se){const{it:Ne,gen:st}=this;Ne.opts.unevaluated&&(Ne.props!==!0&&de.props!==void 0&&(Ne.props=w.mergeEvaluated.props(st,de.props,Ne.props,Se)),Ne.items!==!0&&de.items!==void 0&&(Ne.items=w.mergeEvaluated.items(st,de.items,Ne.items,Se)))}mergeValidEvaluated(de,Se){const{it:Ne,gen:st}=this;if(Ne.opts.unevaluated&&(Ne.props!==!0||Ne.items!==!0))return st.if(Se,()=>this.mergeEvaluated(de,R.Name)),!0}}E.KeywordCxt=$e;function Ge(q,de,Se,Ne){const st=new $e(q,Se,de);"code"in Se?Se.code(st,Ne):st.$data&&Se.validate?(0,m.funcKeywordCode)(st,Se):"macro"in Se?(0,m.macroKeywordCode)(st,Se):(Se.compile||Se.validate)&&(0,m.funcKeywordCode)(st,Se)}const ft=/^\/(?:[^~]|~0|~1)*$/,nt=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function Rt(q,{dataLevel:de,dataNames:Se,dataPathArr:Ne}){let st,pe;if(q==="")return t.default.rootData;if(q[0]==="/"){if(!ft.test(q))throw new Error(`Invalid JSON-pointer: ${q}`);st=q,pe=t.default.rootData}else{const Et=nt.exec(q);if(!Et)throw new Error(`Invalid JSON-pointer: ${q}`);const dt=+Et[1];if(st=Et[2],st==="#"){if(dt>=de)throw new Error(Qe("property/index",dt));return Ne[de-dt]}if(dt>de)throw new Error(Qe("data",dt));if(pe=Se[de-dt],!st)return pe}let Je=pe;const ot=st.split("/");for(const Et of ot)Et&&(pe=(0,R._)`${pe}${(0,R.getProperty)((0,w.unescapeJsonPointer)(Et))}`,Je=(0,R._)`${Je} && ${pe}`);return Je;function Qe(Et,dt){return`Cannot access ${Et} ${dt} levels up, current level is ${de}`}}E.getData=Rt},83558:function(Dt,E,e){"use strict";Object.defineProperty(E,"__esModule",{value:!0}),E.validateKeywordUsage=E.validSchemaType=E.funcKeywordCode=E.macroKeywordCode=void 0;const n=e(82481),d=e(99583),p=e(9280),i=e(59428);function c(K,k){const{gen:H,keyword:C,schema:v,parentSchema:F,it:g}=K,J=k.macro.call(g.self,v,F,g),x=U(H,C,J);g.opts.validateSchema!==!1&&g.self.validateSchema(J,!0);const B=H.name("valid");K.subschema({schema:J,schemaPath:n.nil,errSchemaPath:`${g.errSchemaPath}/${C}`,topSchemaRef:x,compositeRule:!0},B),K.pass(B,()=>K.error(!0))}E.macroKeywordCode=c;function m(K,k){var H;const{gen:C,keyword:v,schema:F,parentSchema:g,$data:J,it:x}=K;t(x,k);const B=!J&&k.compile?k.compile.call(x.self,F,g,x):k.validate,T=U(C,v,B),S=C.let("valid");K.block$data(S,ie),K.ok((H=k.valid)!==null&&H!==void 0?H:S);function ie(){if(k.errors===!1)qe(),k.modifying&&b(K),xe(()=>K.error());else{const ke=k.async?Te():Pe();k.modifying&&b(K),xe(()=>R(K,ke))}}function Te(){const ke=C.let("ruleErrs",null);return C.try(()=>qe((0,n._)`await `),rt=>C.assign(S,!1).if((0,n._)`${rt} instanceof ${x.ValidationError}`,()=>C.assign(ke,(0,n._)`${rt}.errors`),()=>C.throw(rt))),ke}function Pe(){const ke=(0,n._)`${T}.errors`;return C.assign(ke,null),qe(n.nil),ke}function qe(ke=k.async?(0,n._)`await `:n.nil){const rt=x.opts.passContext?d.default.this:d.default.self,Kt=!("compile"in k&&!J||k.schema===!1);C.assign(S,(0,n._)`${ke}${(0,p.callValidateCode)(K,T,rt,Kt)}`,k.modifying)}function xe(ke){var rt;C.if((0,n.not)((rt=k.valid)!==null&&rt!==void 0?rt:S),ke)}}E.funcKeywordCode=m;function b(K){const{gen:k,data:H,it:C}=K;k.if(C.parentData,()=>k.assign(H,(0,n._)`${C.parentData}[${C.parentDataProperty}]`))}function R(K,k){const{gen:H}=K;H.if((0,n._)`Array.isArray(${k})`,()=>{H.assign(d.default.vErrors,(0,n._)`${d.default.vErrors} === null ? ${k} : ${d.default.vErrors}.concat(${k})`).assign(d.default.errors,(0,n._)`${d.default.vErrors}.length`),(0,i.extendErrors)(K)},()=>K.error())}function t({schemaEnv:K},k){if(k.async&&!K.$async)throw new Error("async keyword in sync schema")}function U(K,k,H){if(H===void 0)throw new Error(`keyword "${k}" failed to compile`);return K.scopeValue("keyword",typeof H=="function"?{ref:H}:{ref:H,code:(0,n.stringify)(H)})}function w(K,k,H=!1){return!k.length||k.some(C=>C==="array"?Array.isArray(K):C==="object"?K&&typeof K=="object"&&!Array.isArray(K):typeof K==C||H&&typeof K=="undefined")}E.validSchemaType=w;function N({schema:K,opts:k,self:H,errSchemaPath:C},v,F){if(Array.isArray(v.keyword)?!v.keyword.includes(F):v.keyword!==F)throw new Error("ajv implementation error");const g=v.dependencies;if(g!=null&&g.some(J=>!Object.prototype.hasOwnProperty.call(K,J)))throw new Error(`parent schema must have dependencies of ${F}: ${g.join(",")}`);if(v.validateSchema&&!v.validateSchema(K[F])){const x=`keyword "${F}" value is invalid at path "${C}": `+H.errorsText(v.validateSchema.errors);if(k.validateSchema==="log")H.logger.error(x);else throw new Error(x)}}E.validateKeywordUsage=N},20521:function(Dt,E,e){"use strict";Object.defineProperty(E,"__esModule",{value:!0}),E.extendSubschemaMode=E.extendSubschemaData=E.getSubschema=void 0;const n=e(82481),d=e(1849);function p(m,{keyword:b,schemaProp:R,schema:t,schemaPath:U,errSchemaPath:w,topSchemaRef:N}){if(b!==void 0&&t!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(b!==void 0){const K=m.schema[b];return R===void 0?{schema:K,schemaPath:(0,n._)`${m.schemaPath}${(0,n.getProperty)(b)}`,errSchemaPath:`${m.errSchemaPath}/${b}`}:{schema:K[R],schemaPath:(0,n._)`${m.schemaPath}${(0,n.getProperty)(b)}${(0,n.getProperty)(R)}`,errSchemaPath:`${m.errSchemaPath}/${b}/${(0,d.escapeFragment)(R)}`}}if(t!==void 0){if(U===void 0||w===void 0||N===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:t,schemaPath:U,topSchemaRef:N,errSchemaPath:w}}throw new Error('either "keyword" or "schema" must be passed')}E.getSubschema=p;function i(m,b,{dataProp:R,dataPropType:t,data:U,dataTypes:w,propertyName:N}){if(U!==void 0&&R!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:K}=b;if(R!==void 0){const{errorPath:H,dataPathArr:C,opts:v}=b,F=K.let("data",(0,n._)`${b.data}${(0,n.getProperty)(R)}`,!0);k(F),m.errorPath=(0,n.str)`${H}${(0,d.getErrorPath)(R,t,v.jsPropertySyntax)}`,m.parentDataProperty=(0,n._)`${R}`,m.dataPathArr=[...C,m.parentDataProperty]}if(U!==void 0){const H=U instanceof n.Name?U:K.let("data",U,!0);k(H),N!==void 0&&(m.propertyName=N)}w&&(m.dataTypes=w);function k(H){m.data=H,m.dataLevel=b.dataLevel+1,m.dataTypes=[],b.definedProperties=new Set,m.parentData=b.data,m.dataNames=[...b.dataNames,H]}}E.extendSubschemaData=i;function c(m,{jtdDiscriminator:b,jtdMetadata:R,compositeRule:t,createErrors:U,allErrors:w}){t!==void 0&&(m.compositeRule=t),U!==void 0&&(m.createErrors=U),w!==void 0&&(m.allErrors=w),m.jtdDiscriminator=b,m.jtdMetadata=R}E.extendSubschemaMode=c},61889:function(Dt,E,e){"use strict";Object.defineProperty(E,"__esModule",{value:!0}),E.CodeGen=E.Name=E.nil=E.stringify=E.str=E._=E.KeywordCxt=void 0;var n=e(4371);Object.defineProperty(E,"KeywordCxt",{enumerable:!0,get:function(){return n.KeywordCxt}});var d=e(82481);Object.defineProperty(E,"_",{enumerable:!0,get:function(){return d._}}),Object.defineProperty(E,"str",{enumerable:!0,get:function(){return d.str}}),Object.defineProperty(E,"stringify",{enumerable:!0,get:function(){return d.stringify}}),Object.defineProperty(E,"nil",{enumerable:!0,get:function(){return d.nil}}),Object.defineProperty(E,"Name",{enumerable:!0,get:function(){return d.Name}}),Object.defineProperty(E,"CodeGen",{enumerable:!0,get:function(){return d.CodeGen}});const p=e(14319),i=e(30283),c=e(18288),m=e(62902),b=e(82481),R=e(2710),t=e(93277),U=e(1849),w=e(85310),N=e(3075),K=(we,ue)=>new RegExp(we,ue);K.code="new RegExp";const k=["removeAdditional","useDefaults","coerceTypes"],H=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),C={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},v={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},F=200;function g(we){var ue,Ke,$,A,z,ae,$e,Ge,ft,nt,Rt,q,de,Se,Ne,st,pe,Je,ot,Qe,Et,dt,Vt,jt,Ht;const Ye=we.strict,St=(ue=we.code)===null||ue===void 0?void 0:ue.optimize,Mt=St===!0||St===void 0?1:St||0,Bt=($=(Ke=we.code)===null||Ke===void 0?void 0:Ke.regExp)!==null&&$!==void 0?$:K,Ee=(A=we.uriResolver)!==null&&A!==void 0?A:N.default;return{strictSchema:(ae=(z=we.strictSchema)!==null&&z!==void 0?z:Ye)!==null&&ae!==void 0?ae:!0,strictNumbers:(Ge=($e=we.strictNumbers)!==null&&$e!==void 0?$e:Ye)!==null&&Ge!==void 0?Ge:!0,strictTypes:(nt=(ft=we.strictTypes)!==null&&ft!==void 0?ft:Ye)!==null&&nt!==void 0?nt:"log",strictTuples:(q=(Rt=we.strictTuples)!==null&&Rt!==void 0?Rt:Ye)!==null&&q!==void 0?q:"log",strictRequired:(Se=(de=we.strictRequired)!==null&&de!==void 0?de:Ye)!==null&&Se!==void 0?Se:!1,code:we.code?{...we.code,optimize:Mt,regExp:Bt}:{optimize:Mt,regExp:Bt},loopRequired:(Ne=we.loopRequired)!==null&&Ne!==void 0?Ne:F,loopEnum:(st=we.loopEnum)!==null&&st!==void 0?st:F,meta:(pe=we.meta)!==null&&pe!==void 0?pe:!0,messages:(Je=we.messages)!==null&&Je!==void 0?Je:!0,inlineRefs:(ot=we.inlineRefs)!==null&&ot!==void 0?ot:!0,schemaId:(Qe=we.schemaId)!==null&&Qe!==void 0?Qe:"$id",addUsedSchema:(Et=we.addUsedSchema)!==null&&Et!==void 0?Et:!0,validateSchema:(dt=we.validateSchema)!==null&&dt!==void 0?dt:!0,validateFormats:(Vt=we.validateFormats)!==null&&Vt!==void 0?Vt:!0,unicodeRegExp:(jt=we.unicodeRegExp)!==null&&jt!==void 0?jt:!0,int32range:(Ht=we.int32range)!==null&&Ht!==void 0?Ht:!0,uriResolver:Ee}}class J{constructor(ue={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,ue=this.opts={...ue,...g(ue)};const{es5:Ke,lines:$}=this.opts.code;this.scope=new b.ValueScope({scope:{},prefixes:H,es5:Ke,lines:$}),this.logger=qe(ue.logger);const A=ue.validateFormats;ue.validateFormats=!1,this.RULES=(0,c.getRules)(),x.call(this,C,ue,"NOT SUPPORTED"),x.call(this,v,ue,"DEPRECATED","warn"),this._metaOpts=Te.call(this),ue.formats&&S.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),ue.keywords&&ie.call(this,ue.keywords),typeof ue.meta=="object"&&this.addMetaSchema(ue.meta),T.call(this),ue.validateFormats=A}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:ue,meta:Ke,schemaId:$}=this.opts;let A=w;$==="id"&&(A={...w},A.id=A.$id,delete A.$id),Ke&&ue&&this.addMetaSchema(A,A[$],!1)}defaultMeta(){const{meta:ue,schemaId:Ke}=this.opts;return this.opts.defaultMeta=typeof ue=="object"?ue[Ke]||ue:void 0}validate(ue,Ke){let $;if(typeof ue=="string"){if($=this.getSchema(ue),!$)throw new Error(`no schema with key or ref "${ue}"`)}else $=this.compile(ue);const A=$(Ke);return"$async"in $||(this.errors=$.errors),A}compile(ue,Ke){const $=this._addSchema(ue,Ke);return $.validate||this._compileSchemaEnv($)}compileAsync(ue,Ke){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:$}=this.opts;return A.call(this,ue,Ke);async function A(nt,Rt){await z.call(this,nt.$schema);const q=this._addSchema(nt,Rt);return q.validate||ae.call(this,q)}async function z(nt){nt&&!this.getSchema(nt)&&await A.call(this,{$ref:nt},!0)}async function ae(nt){try{return this._compileSchemaEnv(nt)}catch(Rt){if(!(Rt instanceof i.default))throw Rt;return $e.call(this,Rt),await Ge.call(this,Rt.missingSchema),ae.call(this,nt)}}function $e({missingSchema:nt,missingRef:Rt}){if(this.refs[nt])throw new Error(`AnySchema ${nt} is loaded but ${Rt} cannot be resolved`)}async function Ge(nt){const Rt=await ft.call(this,nt);this.refs[nt]||await z.call(this,Rt.$schema),this.refs[nt]||this.addSchema(Rt,nt,Ke)}async function ft(nt){const Rt=this._loading[nt];if(Rt)return Rt;try{return await(this._loading[nt]=$(nt))}finally{delete this._loading[nt]}}}addSchema(ue,Ke,$,A=this.opts.validateSchema){if(Array.isArray(ue)){for(const ae of ue)this.addSchema(ae,void 0,$,A);return this}let z;if(typeof ue=="object"){const{schemaId:ae}=this.opts;if(z=ue[ae],z!==void 0&&typeof z!="string")throw new Error(`schema ${ae} must be string`)}return Ke=(0,R.normalizeId)(Ke||z),this._checkUnique(Ke),this.schemas[Ke]=this._addSchema(ue,$,Ke,A,!0),this}addMetaSchema(ue,Ke,$=this.opts.validateSchema){return this.addSchema(ue,Ke,!0,$),this}validateSchema(ue,Ke){if(typeof ue=="boolean")return!0;let $;if($=ue.$schema,$!==void 0&&typeof $!="string")throw new Error("$schema must be a string");if($=$||this.opts.defaultMeta||this.defaultMeta(),!$)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const A=this.validate($,ue);if(!A&&Ke){const z="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(z);else throw new Error(z)}return A}getSchema(ue){let Ke;for(;typeof(Ke=B.call(this,ue))=="string";)ue=Ke;if(Ke===void 0){const{schemaId:$}=this.opts,A=new m.SchemaEnv({schema:{},schemaId:$});if(Ke=m.resolveSchema.call(this,A,ue),!Ke)return;this.refs[ue]=Ke}return Ke.validate||this._compileSchemaEnv(Ke)}removeSchema(ue){if(ue instanceof RegExp)return this._removeAllSchemas(this.schemas,ue),this._removeAllSchemas(this.refs,ue),this;switch(typeof ue){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const Ke=B.call(this,ue);return typeof Ke=="object"&&this._cache.delete(Ke.schema),delete this.schemas[ue],delete this.refs[ue],this}case"object":{const Ke=ue;this._cache.delete(Ke);let $=ue[this.opts.schemaId];return $&&($=(0,R.normalizeId)($),delete this.schemas[$],delete this.refs[$]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(ue){for(const Ke of ue)this.addKeyword(Ke);return this}addKeyword(ue,Ke){let $;if(typeof ue=="string")$=ue,typeof Ke=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),Ke.keyword=$);else if(typeof ue=="object"&&Ke===void 0){if(Ke=ue,$=Ke.keyword,Array.isArray($)&&!$.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(ke.call(this,$,Ke),!Ke)return(0,U.eachItem)($,z=>rt.call(this,z)),this;Nt.call(this,Ke);const A={...Ke,type:(0,t.getJSONTypes)(Ke.type),schemaType:(0,t.getJSONTypes)(Ke.schemaType)};return(0,U.eachItem)($,A.type.length===0?z=>rt.call(this,z,A):z=>A.type.forEach(ae=>rt.call(this,z,A,ae))),this}getKeyword(ue){const Ke=this.RULES.all[ue];return typeof Ke=="object"?Ke.definition:!!Ke}removeKeyword(ue){const{RULES:Ke}=this;delete Ke.keywords[ue],delete Ke.all[ue];for(const $ of Ke.rules){const A=$.rules.findIndex(z=>z.keyword===ue);A>=0&&$.rules.splice(A,1)}return this}addFormat(ue,Ke){return typeof Ke=="string"&&(Ke=new RegExp(Ke)),this.formats[ue]=Ke,this}errorsText(ue=this.errors,{separator:Ke=", ",dataVar:$="data"}={}){return!ue||ue.length===0?"No errors":ue.map(A=>`${$}${A.instancePath} ${A.message}`).reduce((A,z)=>A+Ke+z)}$dataMetaSchema(ue,Ke){const $=this.RULES.all;ue=JSON.parse(JSON.stringify(ue));for(const A of Ke){const z=A.split("/").slice(1);let ae=ue;for(const $e of z)ae=ae[$e];for(const $e in $){const Ge=$[$e];if(typeof Ge!="object")continue;const{$data:ft}=Ge.definition,nt=ae[$e];ft&&nt&&(ae[$e]=D(nt))}}return ue}_removeAllSchemas(ue,Ke){for(const $ in ue){const A=ue[$];(!Ke||Ke.test($))&&(typeof A=="string"?delete ue[$]:A&&!A.meta&&(this._cache.delete(A.schema),delete ue[$]))}}_addSchema(ue,Ke,$,A=this.opts.validateSchema,z=this.opts.addUsedSchema){let ae;const{schemaId:$e}=this.opts;if(typeof ue=="object")ae=ue[$e];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof ue!="boolean")throw new Error("schema must be object or boolean")}let Ge=this._cache.get(ue);if(Ge!==void 0)return Ge;$=(0,R.normalizeId)(ae||$);const ft=R.getSchemaRefs.call(this,ue,$);return Ge=new m.SchemaEnv({schema:ue,schemaId:$e,meta:Ke,baseId:$,localRefs:ft}),this._cache.set(Ge.schema,Ge),z&&!$.startsWith("#")&&($&&this._checkUnique($),this.refs[$]=Ge),A&&this.validateSchema(ue,!0),Ge}_checkUnique(ue){if(this.schemas[ue]||this.refs[ue])throw new Error(`schema with key or id "${ue}" already exists`)}_compileSchemaEnv(ue){if(ue.meta?this._compileMetaSchema(ue):m.compileSchema.call(this,ue),!ue.validate)throw new Error("ajv implementation error");return ue.validate}_compileMetaSchema(ue){const Ke=this.opts;this.opts=this._metaOpts;try{m.compileSchema.call(this,ue)}finally{this.opts=Ke}}}E.default=J,J.ValidationError=p.default,J.MissingRefError=i.default;function x(we,ue,Ke,$="error"){for(const A in we){const z=A;z in ue&&this.logger[$](`${Ke}: option ${A}. ${we[z]}`)}}function B(we){return we=(0,R.normalizeId)(we),this.schemas[we]||this.refs[we]}function T(){const we=this.opts.schemas;if(we)if(Array.isArray(we))this.addSchema(we);else for(const ue in we)this.addSchema(we[ue],ue)}function S(){for(const we in this.opts.formats){const ue=this.opts.formats[we];ue&&this.addFormat(we,ue)}}function ie(we){if(Array.isArray(we)){this.addVocabulary(we);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const ue in we){const Ke=we[ue];Ke.keyword||(Ke.keyword=ue),this.addKeyword(Ke)}}function Te(){const we={...this.opts};for(const ue of k)delete we[ue];return we}const Pe={log(){},warn(){},error(){}};function qe(we){if(we===!1)return Pe;if(we===void 0)return console;if(we.log&&we.warn&&we.error)return we;throw new Error("logger must implement log, warn and error methods")}const xe=/^[a-z_$][a-z0-9_$:-]*$/i;function ke(we,ue){const{RULES:Ke}=this;if((0,U.eachItem)(we,$=>{if(Ke.keywords[$])throw new Error(`Keyword ${$} is already defined`);if(!xe.test($))throw new Error(`Keyword ${$} has invalid name`)}),!!ue&&ue.$data&&!("code"in ue||"validate"in ue))throw new Error('$data keyword must have "code" or "validate" function')}function rt(we,ue,Ke){var $;const A=ue==null?void 0:ue.post;if(Ke&&A)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:z}=this;let ae=A?z.post:z.rules.find(({type:Ge})=>Ge===Ke);if(ae||(ae={type:Ke,rules:[]},z.rules.push(ae)),z.keywords[we]=!0,!ue)return;const $e={keyword:we,definition:{...ue,type:(0,t.getJSONTypes)(ue.type),schemaType:(0,t.getJSONTypes)(ue.schemaType)}};ue.before?Kt.call(this,ae,$e,ue.before):ae.rules.push($e),z.all[we]=$e,($=ue.implements)===null||$===void 0||$.forEach(Ge=>this.addKeyword(Ge))}function Kt(we,ue,Ke){const $=we.rules.findIndex(A=>A.keyword===Ke);$>=0?we.rules.splice($,0,ue):(we.rules.push(ue),this.logger.warn(`rule ${Ke} is not defined`))}function Nt(we){let{metaSchema:ue}=we;ue!==void 0&&(we.$data&&this.opts.$data&&(ue=D(ue)),we.validateSchema=this.compile(ue,!0))}const rn={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function D(we){return{anyOf:[we,rn]}}},55947:function(Dt,E,e){"use strict";Object.defineProperty(E,"__esModule",{value:!0});const n=e(69378);n.code='require("ajv/dist/runtime/equal").default',E.default=n},7836:function(Dt,E){"use strict";Object.defineProperty(E,"__esModule",{value:!0});function e(n){const d=n.length;let p=0,i=0,c;for(;i<d;)p++,c=n.charCodeAt(i++),c>=55296&&c<=56319&&i<d&&(c=n.charCodeAt(i),(c&64512)===56320&&i++);return p}E.default=e,e.code='require("ajv/dist/runtime/ucs2length").default'},3075:function(Dt,E,e){"use strict";Object.defineProperty(E,"__esModule",{value:!0});const n=e(12854);n.code='require("ajv/dist/runtime/uri").default',E.default=n},14319:function(Dt,E){"use strict";Object.defineProperty(E,"__esModule",{value:!0});class e extends Error{constructor(d){super("validation failed"),this.errors=d,this.ajv=this.validation=!0}}E.default=e},52251:function(Dt,E,e){"use strict";Object.defineProperty(E,"__esModule",{value:!0}),E.validateAdditionalItems=void 0;const n=e(82481),d=e(1849),i={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:{message:({params:{len:m}})=>(0,n.str)`must NOT have more than ${m} items`,params:({params:{len:m}})=>(0,n._)`{limit: ${m}}`},code(m){const{parentSchema:b,it:R}=m,{items:t}=b;if(!Array.isArray(t)){(0,d.checkStrictMode)(R,'"additionalItems" is ignored when "items" is not an array of schemas');return}c(m,t)}};function c(m,b){const{gen:R,schema:t,data:U,keyword:w,it:N}=m;N.items=!0;const K=R.const("len",(0,n._)`${U}.length`);if(t===!1)m.setParams({len:b.length}),m.pass((0,n._)`${K} <= ${b.length}`);else if(typeof t=="object"&&!(0,d.alwaysValidSchema)(N,t)){const H=R.var("valid",(0,n._)`${K} <= ${b.length}`);R.if((0,n.not)(H),()=>k(H)),m.ok(H)}function k(H){R.forRange("i",b.length,K,C=>{m.subschema({keyword:w,dataProp:C,dataPropType:d.Type.Num},H),N.allErrors||R.if((0,n.not)(H),()=>R.break())})}}E.validateAdditionalItems=c,E.default=i},17831:function(Dt,E,e){"use strict";Object.defineProperty(E,"__esModule",{value:!0});const n=e(9280),d=e(82481),p=e(99583),i=e(1849),m={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:{message:"must NOT have additional properties",params:({params:b})=>(0,d._)`{additionalProperty: ${b.additionalProperty}}`},code(b){const{gen:R,schema:t,parentSchema:U,data:w,errsCount:N,it:K}=b;if(!N)throw new Error("ajv implementation error");const{allErrors:k,opts:H}=K;if(K.props=!0,H.removeAdditional!=="all"&&(0,i.alwaysValidSchema)(K,t))return;const C=(0,n.allSchemaProperties)(U.properties),v=(0,n.allSchemaProperties)(U.patternProperties);F(),b.ok((0,d._)`${N} === ${p.default.errors}`);function F(){R.forIn("key",w,T=>{!C.length&&!v.length?x(T):R.if(g(T),()=>x(T))})}function g(T){let S;if(C.length>8){const ie=(0,i.schemaRefOrVal)(K,U.properties,"properties");S=(0,n.isOwnProperty)(R,ie,T)}else C.length?S=(0,d.or)(...C.map(ie=>(0,d._)`${T} === ${ie}`)):S=d.nil;return v.length&&(S=(0,d.or)(S,...v.map(ie=>(0,d._)`${(0,n.usePattern)(b,ie)}.test(${T})`))),(0,d.not)(S)}function J(T){R.code((0,d._)`delete ${w}[${T}]`)}function x(T){if(H.removeAdditional==="all"||H.removeAdditional&&t===!1){J(T);return}if(t===!1){b.setParams({additionalProperty:T}),b.error(),k||R.break();return}if(typeof t=="object"&&!(0,i.alwaysValidSchema)(K,t)){const S=R.name("valid");H.removeAdditional==="failing"?(B(T,S,!1),R.if((0,d.not)(S),()=>{b.reset(),J(T)})):(B(T,S),k||R.if((0,d.not)(S),()=>R.break()))}}function B(T,S,ie){const Te={keyword:"additionalProperties",dataProp:T,dataPropType:i.Type.Str};ie===!1&&Object.assign(Te,{compositeRule:!0,createErrors:!1,allErrors:!1}),b.subschema(Te,S)}}};E.default=m},15319:function(Dt,E,e){"use strict";Object.defineProperty(E,"__esModule",{value:!0});const n=e(1849),d={keyword:"allOf",schemaType:"array",code(p){const{gen:i,schema:c,it:m}=p;if(!Array.isArray(c))throw new Error("ajv implementation error");const b=i.name("valid");c.forEach((R,t)=>{if((0,n.alwaysValidSchema)(m,R))return;const U=p.subschema({keyword:"allOf",schemaProp:t},b);p.ok(b),p.mergeEvaluated(U)})}};E.default=d},60513:function(Dt,E,e){"use strict";Object.defineProperty(E,"__esModule",{value:!0});const d={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:e(9280).validateUnion,error:{message:"must match a schema in anyOf"}};E.default=d},51622:function(Dt,E,e){"use strict";Object.defineProperty(E,"__esModule",{value:!0});const n=e(82481),d=e(1849),i={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:{message:({params:{min:c,max:m}})=>m===void 0?(0,n.str)`must contain at least ${c} valid item(s)`:(0,n.str)`must contain at least ${c} and no more than ${m} valid item(s)`,params:({params:{min:c,max:m}})=>m===void 0?(0,n._)`{minContains: ${c}}`:(0,n._)`{minContains: ${c}, maxContains: ${m}}`},code(c){const{gen:m,schema:b,parentSchema:R,data:t,it:U}=c;let w,N;const{minContains:K,maxContains:k}=R;U.opts.next?(w=K===void 0?1:K,N=k):w=1;const H=m.const("len",(0,n._)`${t}.length`);if(c.setParams({min:w,max:N}),N===void 0&&w===0){(0,d.checkStrictMode)(U,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(N!==void 0&&w>N){(0,d.checkStrictMode)(U,'"minContains" > "maxContains" is always invalid'),c.fail();return}if((0,d.alwaysValidSchema)(U,b)){let J=(0,n._)`${H} >= ${w}`;N!==void 0&&(J=(0,n._)`${J} && ${H} <= ${N}`),c.pass(J);return}U.items=!0;const C=m.name("valid");N===void 0&&w===1?F(C,()=>m.if(C,()=>m.break())):w===0?(m.let(C,!0),N!==void 0&&m.if((0,n._)`${t}.length > 0`,v)):(m.let(C,!1),v()),c.result(C,()=>c.reset());function v(){const J=m.name("_valid"),x=m.let("count",0);F(J,()=>m.if(J,()=>g(x)))}function F(J,x){m.forRange("i",0,H,B=>{c.subschema({keyword:"contains",dataProp:B,dataPropType:d.Type.Num,compositeRule:!0},J),x()})}function g(J){m.code((0,n._)`${J}++`),N===void 0?m.if((0,n._)`${J} >= ${w}`,()=>m.assign(C,!0).break()):(m.if((0,n._)`${J} > ${N}`,()=>m.assign(C,!1).break()),w===1?m.assign(C,!0):m.if((0,n._)`${J} >= ${w}`,()=>m.assign(C,!0)))}}};E.default=i},8524:function(Dt,E,e){"use strict";Object.defineProperty(E,"__esModule",{value:!0}),E.validateSchemaDeps=E.validatePropertyDeps=E.error=void 0;const n=e(82481),d=e(1849),p=e(9280);E.error={message:({params:{property:R,depsCount:t,deps:U}})=>{const w=t===1?"property":"properties";return(0,n.str)`must have ${w} ${U} when property ${R} is present`},params:({params:{property:R,depsCount:t,deps:U,missingProperty:w}})=>(0,n._)`{property: ${R},
    missingProperty: ${w},
    depsCount: ${t},
    deps: ${U}}`};const i={keyword:"dependencies",type:"object",schemaType:"object",error:E.error,code(R){const[t,U]=c(R);m(R,t),b(R,U)}};function c({schema:R}){const t={},U={};for(const w in R){if(w==="__proto__")continue;const N=Array.isArray(R[w])?t:U;N[w]=R[w]}return[t,U]}function m(R,t=R.schema){const{gen:U,data:w,it:N}=R;if(Object.keys(t).length===0)return;const K=U.let("missing");for(const k in t){const H=t[k];if(H.length===0)continue;const C=(0,p.propertyInData)(U,w,k,N.opts.ownProperties);R.setParams({property:k,depsCount:H.length,deps:H.join(", ")}),N.allErrors?U.if(C,()=>{for(const v of H)(0,p.checkReportMissingProp)(R,v)}):(U.if((0,n._)`${C} && (${(0,p.checkMissingProp)(R,H,K)})`),(0,p.reportMissingProp)(R,K),U.else())}}E.validatePropertyDeps=m;function b(R,t=R.schema){const{gen:U,data:w,keyword:N,it:K}=R,k=U.name("valid");for(const H in t)(0,d.alwaysValidSchema)(K,t[H])||(U.if((0,p.propertyInData)(U,w,H,K.opts.ownProperties),()=>{const C=R.subschema({keyword:N,schemaProp:H},k);R.mergeValidEvaluated(C,k)},()=>U.var(k,!0)),R.ok(k))}E.validateSchemaDeps=b,E.default=i},74413:function(Dt,E,e){"use strict";Object.defineProperty(E,"__esModule",{value:!0});const n=e(82481),d=e(1849),i={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:{message:({params:m})=>(0,n.str)`must match "${m.ifClause}" schema`,params:({params:m})=>(0,n._)`{failingKeyword: ${m.ifClause}}`},code(m){const{gen:b,parentSchema:R,it:t}=m;R.then===void 0&&R.else===void 0&&(0,d.checkStrictMode)(t,'"if" without "then" and "else" is ignored');const U=c(t,"then"),w=c(t,"else");if(!U&&!w)return;const N=b.let("valid",!0),K=b.name("_valid");if(k(),m.reset(),U&&w){const C=b.let("ifClause");m.setParams({ifClause:C}),b.if(K,H("then",C),H("else",C))}else U?b.if(K,H("then")):b.if((0,n.not)(K),H("else"));m.pass(N,()=>m.error(!0));function k(){const C=m.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},K);m.mergeEvaluated(C)}function H(C,v){return()=>{const F=m.subschema({keyword:C},K);b.assign(N,K),m.mergeValidEvaluated(F,N),v?b.assign(v,(0,n._)`${C}`):m.setParams({ifClause:C})}}}};function c(m,b){const R=m.schema[b];return R!==void 0&&!(0,d.alwaysValidSchema)(m,R)}E.default=i},14226:function(Dt,E,e){"use strict";Object.defineProperty(E,"__esModule",{value:!0});const n=e(52251),d=e(38968),p=e(3042),i=e(69719),c=e(51622),m=e(8524),b=e(53261),R=e(17831),t=e(81734),U=e(47673),w=e(73270),N=e(60513),K=e(84959),k=e(15319),H=e(74413),C=e(5095);function v(F=!1){const g=[w.default,N.default,K.default,k.default,H.default,C.default,b.default,R.default,m.default,t.default,U.default];return F?g.push(d.default,i.default):g.push(n.default,p.default),g.push(c.default),g}E.default=v},3042:function(Dt,E,e){"use strict";Object.defineProperty(E,"__esModule",{value:!0}),E.validateTuple=void 0;const n=e(82481),d=e(1849),p=e(9280),i={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(m){const{schema:b,it:R}=m;if(Array.isArray(b))return c(m,"additionalItems",b);R.items=!0,!(0,d.alwaysValidSchema)(R,b)&&m.ok((0,p.validateArray)(m))}};function c(m,b,R=m.schema){const{gen:t,parentSchema:U,data:w,keyword:N,it:K}=m;C(U),K.opts.unevaluated&&R.length&&K.items!==!0&&(K.items=d.mergeEvaluated.items(t,R.length,K.items));const k=t.name("valid"),H=t.const("len",(0,n._)`${w}.length`);R.forEach((v,F)=>{(0,d.alwaysValidSchema)(K,v)||(t.if((0,n._)`${H} > ${F}`,()=>m.subschema({keyword:N,schemaProp:F,dataProp:F},k)),m.ok(k))});function C(v){const{opts:F,errSchemaPath:g}=K,J=R.length,x=J===v.minItems&&(J===v.maxItems||v[b]===!1);if(F.strictTuples&&!x){const B=`"${N}" is ${J}-tuple, but minItems or maxItems/${b} are not specified or different at path "${g}"`;(0,d.checkStrictMode)(K,B,F.strictTuples)}}}E.validateTuple=c,E.default=i},69719:function(Dt,E,e){"use strict";Object.defineProperty(E,"__esModule",{value:!0});const n=e(82481),d=e(1849),p=e(9280),i=e(52251),m={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:{message:({params:{len:b}})=>(0,n.str)`must NOT have more than ${b} items`,params:({params:{len:b}})=>(0,n._)`{limit: ${b}}`},code(b){const{schema:R,parentSchema:t,it:U}=b,{prefixItems:w}=t;U.items=!0,!(0,d.alwaysValidSchema)(U,R)&&(w?(0,i.validateAdditionalItems)(b,w):b.ok((0,p.validateArray)(b)))}};E.default=m},73270:function(Dt,E,e){"use strict";Object.defineProperty(E,"__esModule",{value:!0});const n=e(1849),d={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(p){const{gen:i,schema:c,it:m}=p;if((0,n.alwaysValidSchema)(m,c)){p.fail();return}const b=i.name("valid");p.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},b),p.failResult(b,()=>p.reset(),()=>p.error())},error:{message:"must NOT be valid"}};E.default=d},84959:function(Dt,E,e){"use strict";Object.defineProperty(E,"__esModule",{value:!0});const n=e(82481),d=e(1849),i={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:{message:"must match exactly one schema in oneOf",params:({params:c})=>(0,n._)`{passingSchemas: ${c.passing}}`},code(c){const{gen:m,schema:b,parentSchema:R,it:t}=c;if(!Array.isArray(b))throw new Error("ajv implementation error");if(t.opts.discriminator&&R.discriminator)return;const U=b,w=m.let("valid",!1),N=m.let("passing",null),K=m.name("_valid");c.setParams({passing:N}),m.block(k),c.result(w,()=>c.reset(),()=>c.error(!0));function k(){U.forEach((H,C)=>{let v;(0,d.alwaysValidSchema)(t,H)?m.var(K,!0):v=c.subschema({keyword:"oneOf",schemaProp:C,compositeRule:!0},K),C>0&&m.if((0,n._)`${K} && ${w}`).assign(w,!1).assign(N,(0,n._)`[${N}, ${C}]`).else(),m.if(K,()=>{m.assign(w,!0),m.assign(N,C),v&&c.mergeEvaluated(v,n.Name)})})}}};E.default=i},47673:function(Dt,E,e){"use strict";Object.defineProperty(E,"__esModule",{value:!0});const n=e(9280),d=e(82481),p=e(1849),i=e(1849),c={keyword:"patternProperties",type:"object",schemaType:"object",code(m){const{gen:b,schema:R,data:t,parentSchema:U,it:w}=m,{opts:N}=w,K=(0,n.allSchemaProperties)(R),k=K.filter(x=>(0,p.alwaysValidSchema)(w,R[x]));if(K.length===0||k.length===K.length&&(!w.opts.unevaluated||w.props===!0))return;const H=N.strictSchema&&!N.allowMatchingProperties&&U.properties,C=b.name("valid");w.props!==!0&&!(w.props instanceof d.Name)&&(w.props=(0,i.evaluatedPropsToName)(b,w.props));const{props:v}=w;F();function F(){for(const x of K)H&&g(x),w.allErrors?J(x):(b.var(C,!0),J(x),b.if(C))}function g(x){for(const B in H)new RegExp(x).test(B)&&(0,p.checkStrictMode)(w,`property ${B} matches pattern ${x} (use allowMatchingProperties)`)}function J(x){b.forIn("key",t,B=>{b.if((0,d._)`${(0,n.usePattern)(m,x)}.test(${B})`,()=>{const T=k.includes(x);T||m.subschema({keyword:"patternProperties",schemaProp:x,dataProp:B,dataPropType:i.Type.Str},C),w.opts.unevaluated&&v!==!0?b.assign((0,d._)`${v}[${B}]`,!0):!T&&!w.allErrors&&b.if((0,d.not)(C),()=>b.break())})})}}};E.default=c},38968:function(Dt,E,e){"use strict";Object.defineProperty(E,"__esModule",{value:!0});const n=e(3042),d={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:p=>(0,n.validateTuple)(p,"items")};E.default=d},81734:function(Dt,E,e){"use strict";Object.defineProperty(E,"__esModule",{value:!0});const n=e(4371),d=e(9280),p=e(1849),i=e(17831),c={keyword:"properties",type:"object",schemaType:"object",code(m){const{gen:b,schema:R,parentSchema:t,data:U,it:w}=m;w.opts.removeAdditional==="all"&&t.additionalProperties===void 0&&i.default.code(new n.KeywordCxt(w,i.default,"additionalProperties"));const N=(0,d.allSchemaProperties)(R);for(const v of N)w.definedProperties.add(v);w.opts.unevaluated&&N.length&&w.props!==!0&&(w.props=p.mergeEvaluated.props(b,(0,p.toHash)(N),w.props));const K=N.filter(v=>!(0,p.alwaysValidSchema)(w,R[v]));if(K.length===0)return;const k=b.name("valid");for(const v of K)H(v)?C(v):(b.if((0,d.propertyInData)(b,U,v,w.opts.ownProperties)),C(v),w.allErrors||b.else().var(k,!0),b.endIf()),m.it.definedProperties.add(v),m.ok(k);function H(v){return w.opts.useDefaults&&!w.compositeRule&&R[v].default!==void 0}function C(v){m.subschema({keyword:"properties",schemaProp:v,dataProp:v},k)}}};E.default=c},53261:function(Dt,E,e){"use strict";Object.defineProperty(E,"__esModule",{value:!0});const n=e(82481),d=e(1849),i={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:{message:"property name must be valid",params:({params:c})=>(0,n._)`{propertyName: ${c.propertyName}}`},code(c){const{gen:m,schema:b,data:R,it:t}=c;if((0,d.alwaysValidSchema)(t,b))return;const U=m.name("valid");m.forIn("key",R,w=>{c.setParams({propertyName:w}),c.subschema({keyword:"propertyNames",data:w,dataTypes:["string"],propertyName:w,compositeRule:!0},U),m.if((0,n.not)(U),()=>{c.error(!0),t.allErrors||m.break()})}),c.ok(U)}};E.default=i},5095:function(Dt,E,e){"use strict";Object.defineProperty(E,"__esModule",{value:!0});const n=e(1849),d={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:p,parentSchema:i,it:c}){i.if===void 0&&(0,n.checkStrictMode)(c,`"${p}" without "if" is ignored`)}};E.default=d},9280:function(Dt,E,e){"use strict";Object.defineProperty(E,"__esModule",{value:!0}),E.validateUnion=E.validateArray=E.usePattern=E.callValidateCode=E.schemaProperties=E.allSchemaProperties=E.noPropertyInData=E.propertyInData=E.isOwnProperty=E.hasPropFunc=E.reportMissingProp=E.checkMissingProp=E.checkReportMissingProp=void 0;const n=e(82481),d=e(1849),p=e(99583),i=e(1849);function c(g,J){const{gen:x,data:B,it:T}=g;x.if(w(x,B,J,T.opts.ownProperties),()=>{g.setParams({missingProperty:(0,n._)`${J}`},!0),g.error()})}E.checkReportMissingProp=c;function m({gen:g,data:J,it:{opts:x}},B,T){return(0,n.or)(...B.map(S=>(0,n.and)(w(g,J,S,x.ownProperties),(0,n._)`${T} = ${S}`)))}E.checkMissingProp=m;function b(g,J){g.setParams({missingProperty:J},!0),g.error()}E.reportMissingProp=b;function R(g){return g.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,n._)`Object.prototype.hasOwnProperty`})}E.hasPropFunc=R;function t(g,J,x){return(0,n._)`${R(g)}.call(${J}, ${x})`}E.isOwnProperty=t;function U(g,J,x,B){const T=(0,n._)`${J}${(0,n.getProperty)(x)} !== undefined`;return B?(0,n._)`${T} && ${t(g,J,x)}`:T}E.propertyInData=U;function w(g,J,x,B){const T=(0,n._)`${J}${(0,n.getProperty)(x)} === undefined`;return B?(0,n.or)(T,(0,n.not)(t(g,J,x))):T}E.noPropertyInData=w;function N(g){return g?Object.keys(g).filter(J=>J!=="__proto__"):[]}E.allSchemaProperties=N;function K(g,J){return N(J).filter(x=>!(0,d.alwaysValidSchema)(g,J[x]))}E.schemaProperties=K;function k({schemaCode:g,data:J,it:{gen:x,topSchemaRef:B,schemaPath:T,errorPath:S},it:ie},Te,Pe,qe){const xe=qe?(0,n._)`${g}, ${J}, ${B}${T}`:J,ke=[[p.default.instancePath,(0,n.strConcat)(p.default.instancePath,S)],[p.default.parentData,ie.parentData],[p.default.parentDataProperty,ie.parentDataProperty],[p.default.rootData,p.default.rootData]];ie.opts.dynamicRef&&ke.push([p.default.dynamicAnchors,p.default.dynamicAnchors]);const rt=(0,n._)`${xe}, ${x.object(...ke)}`;return Pe!==n.nil?(0,n._)`${Te}.call(${Pe}, ${rt})`:(0,n._)`${Te}(${rt})`}E.callValidateCode=k;const H=(0,n._)`new RegExp`;function C({gen:g,it:{opts:J}},x){const B=J.unicodeRegExp?"u":"",{regExp:T}=J.code,S=T(x,B);return g.scopeValue("pattern",{key:S.toString(),ref:S,code:(0,n._)`${T.code==="new RegExp"?H:(0,i.useFunc)(g,T)}(${x}, ${B})`})}E.usePattern=C;function v(g){const{gen:J,data:x,keyword:B,it:T}=g,S=J.name("valid");if(T.allErrors){const Te=J.let("valid",!0);return ie(()=>J.assign(Te,!1)),Te}return J.var(S,!0),ie(()=>J.break()),S;function ie(Te){const Pe=J.const("len",(0,n._)`${x}.length`);J.forRange("i",0,Pe,qe=>{g.subschema({keyword:B,dataProp:qe,dataPropType:d.Type.Num},S),J.if((0,n.not)(S),Te)})}}E.validateArray=v;function F(g){const{gen:J,schema:x,keyword:B,it:T}=g;if(!Array.isArray(x))throw new Error("ajv implementation error");if(x.some(Pe=>(0,d.alwaysValidSchema)(T,Pe))&&!T.opts.unevaluated)return;const ie=J.let("valid",!1),Te=J.name("_valid");J.block(()=>x.forEach((Pe,qe)=>{const xe=g.subschema({keyword:B,schemaProp:qe,compositeRule:!0},Te);J.assign(ie,(0,n._)`${ie} || ${Te}`),g.mergeValidEvaluated(xe,Te)||J.if((0,n.not)(ie))})),g.result(ie,()=>g.reset(),()=>g.error(!0))}E.validateUnion=F},5671:function(Dt,E){"use strict";Object.defineProperty(E,"__esModule",{value:!0});const e={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};E.default=e},10356:function(Dt,E,e){"use strict";Object.defineProperty(E,"__esModule",{value:!0});const n=e(5671),d=e(24302),p=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",n.default,d.default];E.default=p},24302:function(Dt,E,e){"use strict";Object.defineProperty(E,"__esModule",{value:!0}),E.callRef=E.getValidate=void 0;const n=e(30283),d=e(9280),p=e(82481),i=e(99583),c=e(62902),m=e(1849),b={keyword:"$ref",schemaType:"string",code(U){const{gen:w,schema:N,it:K}=U,{baseId:k,schemaEnv:H,validateName:C,opts:v,self:F}=K,{root:g}=H;if((N==="#"||N==="#/")&&k===g.baseId)return x();const J=c.resolveRef.call(F,g,k,N);if(J===void 0)throw new n.default(K.opts.uriResolver,k,N);if(J instanceof c.SchemaEnv)return B(J);return T(J);function x(){if(H===g)return t(U,C,H,H.$async);const S=w.scopeValue("root",{ref:g});return t(U,(0,p._)`${S}.validate`,g,g.$async)}function B(S){const ie=R(U,S);t(U,ie,S,S.$async)}function T(S){const ie=w.scopeValue("schema",v.code.source===!0?{ref:S,code:(0,p.stringify)(S)}:{ref:S}),Te=w.name("valid"),Pe=U.subschema({schema:S,dataTypes:[],schemaPath:p.nil,topSchemaRef:ie,errSchemaPath:N},Te);U.mergeEvaluated(Pe),U.ok(Te)}}};function R(U,w){const{gen:N}=U;return w.validate?N.scopeValue("validate",{ref:w.validate}):(0,p._)`${N.scopeValue("wrapper",{ref:w})}.validate`}E.getValidate=R;function t(U,w,N,K){const{gen:k,it:H}=U,{allErrors:C,schemaEnv:v,opts:F}=H,g=F.passContext?i.default.this:p.nil;K?J():x();function J(){if(!v.$async)throw new Error("async schema referenced by sync schema");const S=k.let("valid");k.try(()=>{k.code((0,p._)`await ${(0,d.callValidateCode)(U,w,g)}`),T(w),C||k.assign(S,!0)},ie=>{k.if((0,p._)`!(${ie} instanceof ${H.ValidationError})`,()=>k.throw(ie)),B(ie),C||k.assign(S,!1)}),U.ok(S)}function x(){U.result((0,d.callValidateCode)(U,w,g),()=>T(w),()=>B(w))}function B(S){const ie=(0,p._)`${S}.errors`;k.assign(i.default.vErrors,(0,p._)`${i.default.vErrors} === null ? ${ie} : ${i.default.vErrors}.concat(${ie})`),k.assign(i.default.errors,(0,p._)`${i.default.vErrors}.length`)}function T(S){var ie;if(!H.opts.unevaluated)return;const Te=(ie=N==null?void 0:N.validate)===null||ie===void 0?void 0:ie.evaluated;if(H.props!==!0)if(Te&&!Te.dynamicProps)Te.props!==void 0&&(H.props=m.mergeEvaluated.props(k,Te.props,H.props));else{const Pe=k.var("props",(0,p._)`${S}.evaluated.props`);H.props=m.mergeEvaluated.props(k,Pe,H.props,p.Name)}if(H.items!==!0)if(Te&&!Te.dynamicItems)Te.items!==void 0&&(H.items=m.mergeEvaluated.items(k,Te.items,H.items));else{const Pe=k.var("items",(0,p._)`${S}.evaluated.items`);H.items=m.mergeEvaluated.items(k,Pe,H.items,p.Name)}}}E.callRef=t,E.default=b},99908:function(Dt,E,e){"use strict";Object.defineProperty(E,"__esModule",{value:!0});const n=e(82481),d=e(521),p=e(62902),i=e(1849),m={keyword:"discriminator",type:"object",schemaType:"object",error:{message:({params:{discrError:b,tagName:R}})=>b===d.DiscrError.Tag?`tag "${R}" must be string`:`value of tag "${R}" must be in oneOf`,params:({params:{discrError:b,tag:R,tagName:t}})=>(0,n._)`{error: ${b}, tag: ${t}, tagValue: ${R}}`},code(b){const{gen:R,data:t,schema:U,parentSchema:w,it:N}=b,{oneOf:K}=w;if(!N.opts.discriminator)throw new Error("discriminator: requires discriminator option");const k=U.propertyName;if(typeof k!="string")throw new Error("discriminator: requires propertyName");if(U.mapping)throw new Error("discriminator: mapping is not supported");if(!K)throw new Error("discriminator: requires oneOf keyword");const H=R.let("valid",!1),C=R.const("tag",(0,n._)`${t}${(0,n.getProperty)(k)}`);R.if((0,n._)`typeof ${C} == "string"`,()=>v(),()=>b.error(!1,{discrError:d.DiscrError.Tag,tag:C,tagName:k})),b.ok(H);function v(){const J=g();R.if(!1);for(const x in J)R.elseIf((0,n._)`${C} === ${x}`),R.assign(H,F(J[x]));R.else(),b.error(!1,{discrError:d.DiscrError.Mapping,tag:C,tagName:k}),R.endIf()}function F(J){const x=R.name("valid"),B=b.subschema({keyword:"oneOf",schemaProp:J},x);return b.mergeEvaluated(B,n.Name),x}function g(){var J;const x={},B=S(w);let T=!0;for(let Pe=0;Pe<K.length;Pe++){let qe=K[Pe];qe!=null&&qe.$ref&&!(0,i.schemaHasRulesButRef)(qe,N.self.RULES)&&(qe=p.resolveRef.call(N.self,N.schemaEnv.root,N.baseId,qe==null?void 0:qe.$ref),qe instanceof p.SchemaEnv&&(qe=qe.schema));const xe=(J=qe==null?void 0:qe.properties)===null||J===void 0?void 0:J[k];if(typeof xe!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${k}"`);T=T&&(B||S(qe)),ie(xe,Pe)}if(!T)throw new Error(`discriminator: "${k}" must be required`);return x;function S({required:Pe}){return Array.isArray(Pe)&&Pe.includes(k)}function ie(Pe,qe){if(Pe.const)Te(Pe.const,qe);else if(Pe.enum)for(const xe of Pe.enum)Te(xe,qe);else throw new Error(`discriminator: "properties/${k}" must have "const" or "enum"`)}function Te(Pe,qe){if(typeof Pe!="string"||Pe in x)throw new Error(`discriminator: "${k}" values must be unique strings`);x[Pe]=qe}}}};E.default=m},521:function(Dt,E){"use strict";Object.defineProperty(E,"__esModule",{value:!0}),E.DiscrError=void 0;var e;(function(n){n.Tag="tag",n.Mapping="mapping"})(e=E.DiscrError||(E.DiscrError={}))},57993:function(Dt,E,e){"use strict";Object.defineProperty(E,"__esModule",{value:!0});const n=e(10356),d=e(16282),p=e(14226),i=e(6989),c=e(68373),m=[n.default,d.default,(0,p.default)(),i.default,c.metadataVocabulary,c.contentVocabulary];E.default=m},43202:function(Dt,E,e){"use strict";Object.defineProperty(E,"__esModule",{value:!0});const n=e(82481),p={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:{message:({schemaCode:i})=>(0,n.str)`must match format "${i}"`,params:({schemaCode:i})=>(0,n._)`{format: ${i}}`},code(i,c){const{gen:m,data:b,$data:R,schema:t,schemaCode:U,it:w}=i,{opts:N,errSchemaPath:K,schemaEnv:k,self:H}=w;if(!N.validateFormats)return;R?C():v();function C(){const F=m.scopeValue("formats",{ref:H.formats,code:N.code.formats}),g=m.const("fDef",(0,n._)`${F}[${U}]`),J=m.let("fType"),x=m.let("format");m.if((0,n._)`typeof ${g} == "object" && !(${g} instanceof RegExp)`,()=>m.assign(J,(0,n._)`${g}.type || "string"`).assign(x,(0,n._)`${g}.validate`),()=>m.assign(J,(0,n._)`"string"`).assign(x,g)),i.fail$data((0,n.or)(B(),T()));function B(){return N.strictSchema===!1?n.nil:(0,n._)`${U} && !${x}`}function T(){const S=k.$async?(0,n._)`(${g}.async ? await ${x}(${b}) : ${x}(${b}))`:(0,n._)`${x}(${b})`,ie=(0,n._)`(typeof ${x} == "function" ? ${S} : ${x}.test(${b}))`;return(0,n._)`${x} && ${x} !== true && ${J} === ${c} && !${ie}`}}function v(){const F=H.formats[t];if(!F){B();return}if(F===!0)return;const[g,J,x]=T(F);g===c&&i.pass(S());function B(){if(N.strictSchema===!1){H.logger.warn(ie());return}throw new Error(ie());function ie(){return`unknown format "${t}" ignored in schema at path "${K}"`}}function T(ie){const Te=ie instanceof RegExp?(0,n.regexpCode)(ie):N.code.formats?(0,n._)`${N.code.formats}${(0,n.getProperty)(t)}`:void 0,Pe=m.scopeValue("formats",{key:t,ref:ie,code:Te});return typeof ie=="object"&&!(ie instanceof RegExp)?[ie.type||"string",ie.validate,(0,n._)`${Pe}.validate`]:["string",ie,Pe]}function S(){if(typeof F=="object"&&!(F instanceof RegExp)&&F.async){if(!k.$async)throw new Error("async format in sync schema");return(0,n._)`await ${x}(${b})`}return typeof J=="function"?(0,n._)`${x}(${b})`:(0,n._)`${x}.test(${b})`}}}};E.default=p},6989:function(Dt,E,e){"use strict";Object.defineProperty(E,"__esModule",{value:!0});const d=[e(43202).default];E.default=d},68373:function(Dt,E){"use strict";Object.defineProperty(E,"__esModule",{value:!0}),E.contentVocabulary=E.metadataVocabulary=void 0,E.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"],E.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]},80750:function(Dt,E,e){"use strict";Object.defineProperty(E,"__esModule",{value:!0});const n=e(82481),d=e(1849),p=e(55947),c={keyword:"const",$data:!0,error:{message:"must be equal to constant",params:({schemaCode:m})=>(0,n._)`{allowedValue: ${m}}`},code(m){const{gen:b,data:R,$data:t,schemaCode:U,schema:w}=m;t||w&&typeof w=="object"?m.fail$data((0,n._)`!${(0,d.useFunc)(b,p.default)}(${R}, ${U})`):m.fail((0,n._)`${w} !== ${R}`)}};E.default=c},28109:function(Dt,E,e){"use strict";Object.defineProperty(E,"__esModule",{value:!0});const n=e(82481),d=e(1849),p=e(55947),c={keyword:"enum",schemaType:"array",$data:!0,error:{message:"must be equal to one of the allowed values",params:({schemaCode:m})=>(0,n._)`{allowedValues: ${m}}`},code(m){const{gen:b,data:R,$data:t,schema:U,schemaCode:w,it:N}=m;if(!t&&U.length===0)throw new Error("enum must have non-empty array");const K=U.length>=N.opts.loopEnum;let k;const H=()=>k!=null?k:k=(0,d.useFunc)(b,p.default);let C;if(K||t)C=b.let("valid"),m.block$data(C,v);else{if(!Array.isArray(U))throw new Error("ajv implementation error");const g=b.const("vSchema",w);C=(0,n.or)(...U.map((J,x)=>F(g,x)))}m.pass(C);function v(){b.assign(C,!1),b.forOf("v",w,g=>b.if((0,n._)`${H()}(${R}, ${g})`,()=>b.assign(C,!0).break()))}function F(g,J){const x=U[J];return typeof x=="object"&&x!==null?(0,n._)`${H()}(${R}, ${g}[${J}])`:(0,n._)`${R} === ${x}`}}};E.default=c},16282:function(Dt,E,e){"use strict";Object.defineProperty(E,"__esModule",{value:!0});const n=e(41619),d=e(36701),p=e(34660),i=e(72326),c=e(69354),m=e(60881),b=e(42632),R=e(41985),t=e(80750),U=e(28109),w=[n.default,d.default,p.default,i.default,c.default,m.default,b.default,R.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},t.default,U.default];E.default=w},42632:function(Dt,E,e){"use strict";Object.defineProperty(E,"__esModule",{value:!0});const n=e(82481),p={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:{message({keyword:i,schemaCode:c}){const m=i==="maxItems"?"more":"fewer";return(0,n.str)`must NOT have ${m} than ${c} items`},params:({schemaCode:i})=>(0,n._)`{limit: ${i}}`},code(i){const{keyword:c,data:m,schemaCode:b}=i,R=c==="maxItems"?n.operators.GT:n.operators.LT;i.fail$data((0,n._)`${m}.length ${R} ${b}`)}};E.default=p},34660:function(Dt,E,e){"use strict";Object.defineProperty(E,"__esModule",{value:!0});const n=e(82481),d=e(1849),p=e(7836),c={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:{message({keyword:m,schemaCode:b}){const R=m==="maxLength"?"more":"fewer";return(0,n.str)`must NOT have ${R} than ${b} characters`},params:({schemaCode:m})=>(0,n._)`{limit: ${m}}`},code(m){const{keyword:b,data:R,schemaCode:t,it:U}=m,w=b==="maxLength"?n.operators.GT:n.operators.LT,N=U.opts.unicode===!1?(0,n._)`${R}.length`:(0,n._)`${(0,d.useFunc)(m.gen,p.default)}(${R})`;m.fail$data((0,n._)`${N} ${w} ${t}`)}};E.default=c},41619:function(Dt,E,e){"use strict";Object.defineProperty(E,"__esModule",{value:!0});const n=e(82481),d=n.operators,p={maximum:{okStr:"<=",ok:d.LTE,fail:d.GT},minimum:{okStr:">=",ok:d.GTE,fail:d.LT},exclusiveMaximum:{okStr:"<",ok:d.LT,fail:d.GTE},exclusiveMinimum:{okStr:">",ok:d.GT,fail:d.LTE}},i={message:({keyword:m,schemaCode:b})=>(0,n.str)`must be ${p[m].okStr} ${b}`,params:({keyword:m,schemaCode:b})=>(0,n._)`{comparison: ${p[m].okStr}, limit: ${b}}`},c={keyword:Object.keys(p),type:"number",schemaType:"number",$data:!0,error:i,code(m){const{keyword:b,data:R,schemaCode:t}=m;m.fail$data((0,n._)`${R} ${p[b].fail} ${t} || isNaN(${R})`)}};E.default=c},69354:function(Dt,E,e){"use strict";Object.defineProperty(E,"__esModule",{value:!0});const n=e(82481),p={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:{message({keyword:i,schemaCode:c}){const m=i==="maxProperties"?"more":"fewer";return(0,n.str)`must NOT have ${m} than ${c} properties`},params:({schemaCode:i})=>(0,n._)`{limit: ${i}}`},code(i){const{keyword:c,data:m,schemaCode:b}=i,R=c==="maxProperties"?n.operators.GT:n.operators.LT;i.fail$data((0,n._)`Object.keys(${m}).length ${R} ${b}`)}};E.default=p},36701:function(Dt,E,e){"use strict";Object.defineProperty(E,"__esModule",{value:!0});const n=e(82481),p={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:{message:({schemaCode:i})=>(0,n.str)`must be multiple of ${i}`,params:({schemaCode:i})=>(0,n._)`{multipleOf: ${i}}`},code(i){const{gen:c,data:m,schemaCode:b,it:R}=i,t=R.opts.multipleOfPrecision,U=c.let("res"),w=t?(0,n._)`Math.abs(Math.round(${U}) - ${U}) > 1e-${t}`:(0,n._)`${U} !== parseInt(${U})`;i.fail$data((0,n._)`(${b} === 0 || (${U} = ${m}/${b}, ${w}))`)}};E.default=p},72326:function(Dt,E,e){"use strict";Object.defineProperty(E,"__esModule",{value:!0});const n=e(9280),d=e(82481),i={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:{message:({schemaCode:c})=>(0,d.str)`must match pattern "${c}"`,params:({schemaCode:c})=>(0,d._)`{pattern: ${c}}`},code(c){const{data:m,$data:b,schema:R,schemaCode:t,it:U}=c,w=U.opts.unicodeRegExp?"u":"",N=b?(0,d._)`(new RegExp(${t}, ${w}))`:(0,n.usePattern)(c,R);c.fail$data((0,d._)`!${N}.test(${m})`)}};E.default=i},60881:function(Dt,E,e){"use strict";Object.defineProperty(E,"__esModule",{value:!0});const n=e(9280),d=e(82481),p=e(1849),c={keyword:"required",type:"object",schemaType:"array",$data:!0,error:{message:({params:{missingProperty:m}})=>(0,d.str)`must have required property '${m}'`,params:({params:{missingProperty:m}})=>(0,d._)`{missingProperty: ${m}}`},code(m){const{gen:b,schema:R,schemaCode:t,data:U,$data:w,it:N}=m,{opts:K}=N;if(!w&&R.length===0)return;const k=R.length>=K.loopRequired;if(N.allErrors?H():C(),K.strictRequired){const g=m.parentSchema.properties,{definedProperties:J}=m.it;for(const x of R)if((g==null?void 0:g[x])===void 0&&!J.has(x)){const B=N.schemaEnv.baseId+N.errSchemaPath,T=`required property "${x}" is not defined at "${B}" (strictRequired)`;(0,p.checkStrictMode)(N,T,N.opts.strictRequired)}}function H(){if(k||w)m.block$data(d.nil,v);else for(const g of R)(0,n.checkReportMissingProp)(m,g)}function C(){const g=b.let("missing");if(k||w){const J=b.let("valid",!0);m.block$data(J,()=>F(g,J)),m.ok(J)}else b.if((0,n.checkMissingProp)(m,R,g)),(0,n.reportMissingProp)(m,g),b.else()}function v(){b.forOf("prop",t,g=>{m.setParams({missingProperty:g}),b.if((0,n.noPropertyInData)(b,U,g,K.ownProperties),()=>m.error())})}function F(g,J){m.setParams({missingProperty:g}),b.forOf(g,t,()=>{b.assign(J,(0,n.propertyInData)(b,U,g,K.ownProperties)),b.if((0,d.not)(J),()=>{m.error(),b.break()})},d.nil)}}};E.default=c},41985:function(Dt,E,e){"use strict";Object.defineProperty(E,"__esModule",{value:!0});const n=e(93277),d=e(82481),p=e(1849),i=e(55947),m={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:{message:({params:{i:b,j:R}})=>(0,d.str)`must NOT have duplicate items (items ## ${R} and ${b} are identical)`,params:({params:{i:b,j:R}})=>(0,d._)`{i: ${b}, j: ${R}}`},code(b){const{gen:R,data:t,$data:U,schema:w,parentSchema:N,schemaCode:K,it:k}=b;if(!U&&!w)return;const H=R.let("valid"),C=N.items?(0,n.getSchemaTypes)(N.items):[];b.block$data(H,v,(0,d._)`${K} === false`),b.ok(H);function v(){const x=R.let("i",(0,d._)`${t}.length`),B=R.let("j");b.setParams({i:x,j:B}),R.assign(H,!0),R.if((0,d._)`${x} > 1`,()=>(F()?g:J)(x,B))}function F(){return C.length>0&&!C.some(x=>x==="object"||x==="array")}function g(x,B){const T=R.name("item"),S=(0,n.checkDataTypes)(C,T,k.opts.strictNumbers,n.DataType.Wrong),ie=R.const("indices",(0,d._)`{}`);R.for((0,d._)`;${x}--;`,()=>{R.let(T,(0,d._)`${t}[${x}]`),R.if(S,(0,d._)`continue`),C.length>1&&R.if((0,d._)`typeof ${T} == "string"`,(0,d._)`${T} += "_"`),R.if((0,d._)`typeof ${ie}[${T}] == "number"`,()=>{R.assign(B,(0,d._)`${ie}[${T}]`),b.error(),R.assign(H,!1).break()}).code((0,d._)`${ie}[${T}] = ${x}`)})}function J(x,B){const T=(0,p.useFunc)(R,i.default),S=R.name("outer");R.label(S).for((0,d._)`;${x}--;`,()=>R.for((0,d._)`${B} = ${x}; ${B}--;`,()=>R.if((0,d._)`${T}(${t}[${x}], ${t}[${B}])`,()=>{b.error(),R.assign(H,!1).break(S)})))}}};E.default=m},53907:function(Dt,E,e){"use strict";e.d(E,{CX:function(){return tn},WY:function(){return Vn},uC:function(){return kt},xP:function(){return bt},C4:function(){return Ut},KN:function(){return Dn},gr:function(){return Vr},II:function(){return wr},wQ:function(){return Ot},Td:function(){return zt},aq:function(){return Re},eE:function(){return W},_i:function(){return Ce},gN:function(){return Wt},YM:function(){return Jt},sn:function(){return X},$_:function(){return Ie},Jv:function(){return Zr},pM:function(){return On},CJ:function(){return _n},jJ:function(){return Lr},bg:function(){return ht}});var n=e(2784),d=e(13980),p=e.n(d),i=e(18473),c=e(82394),m=e.n(c),b=e(30705),R=e(30195),t=e(9850),U=e.n(t),w=e(12782),N=e.n(w);const K=/^[a-z][a-z0-9]*(?:[-_][a-z][a-z0-9]*)*$/i;function k(y){return typeof y=="object"&&y!==null&&!Array.isArray(y)}function H(y){if(y===null)return"null";if(Array.isArray(y))return"array";const a=typeof y;return a==="number"&&isNaN(y)?"nan":a==="string"&&y===""?"empty-string":a}const C={type(y,a,u,O){return`Invalid type in config for key '${y}' in '${a}', got ${u}, wanted ${O}`},missing(y){return`Missing required config value at '${y}'`},convert(y,a,u){return`Unable to convert config value for key '${y}' in '${a}' to a ${u}`}};class v{constructor(a,u="mock-config",O,V=""){this.data=a,this.context=u,this.fallback=O,this.prefix=V,this.notifiedFilteredKeys=new Set}static fromConfigs(a){return a.length===0?new v(void 0):a.reduce((u,{data:O,context:V,filteredKeys:Oe,deprecatedKeys:Fe})=>{const Ze=new v(O,V,u);if(Ze.filteredKeys=Oe,Fe)for(const{key:Pt,description:xt}of Fe)console.warn(`The configuration key '${Pt}' of ${V} is deprecated and may be removed soon. ${xt||""}`);return Ze},void 0)}has(a){var u,O;return this.readValue(a)!==void 0?!0:(O=(u=this.fallback)==null?void 0:u.has(a))!=null?O:!1}keys(){var a,u;const O=this.data?Object.keys(this.data):[],V=(u=(a=this.fallback)==null?void 0:a.keys())!=null?u:[];return[...new Set([...O,...V])]}get(a){const u=this.getOptional(a);if(u===void 0)throw new Error(C.missing(this.fullKey(a!=null?a:"")));return u}getOptional(a){var u,O;const V=U()(this.readValue(a)),Oe=(u=this.fallback)==null?void 0:u.getOptional(a);return V===void 0?Oe:Oe===void 0?V:N()({},{value:Oe},{value:V},(Fe,Ze)=>!k(Ze)||!k(Fe)?Ze:void 0).value}getConfig(a){const u=this.getOptionalConfig(a);if(u===void 0)throw new Error(C.missing(this.fullKey(a)));return u}getOptionalConfig(a){var u;const O=this.readValue(a),V=(u=this.fallback)==null?void 0:u.getOptionalConfig(a);if(k(O))return this.copy(O,a,V);if(O!==void 0)throw new TypeError(C.type(this.fullKey(a),this.context,H(O),"object"));return V}getConfigArray(a){const u=this.getOptionalConfigArray(a);if(u===void 0)throw new Error(C.missing(this.fullKey(a)));return u}getOptionalConfigArray(a){var u;const O=this.readConfigValue(a,V=>{if(!Array.isArray(V))return{expected:"object-array"};for(const[Oe,Fe]of V.entries())if(!k(Fe))return{expected:"object-array",value:Fe,key:`${a}[${Oe}]`};return!0});if(O)return O.map((V,Oe)=>this.copy(V,`${a}[${Oe}]`))}getNumber(a){const u=this.getOptionalNumber(a);if(u===void 0)throw new Error(C.missing(this.fullKey(a)));return u}getOptionalNumber(a){const u=this.readConfigValue(a,V=>typeof V=="number"||typeof V=="string"||{expected:"number"});if(typeof u=="number"||u===void 0)return u;const O=Number(u);if(!Number.isFinite(O))throw new Error(C.convert(this.fullKey(a),this.context,"number"));return O}getBoolean(a){const u=this.getOptionalBoolean(a);if(u===void 0)throw new Error(C.missing(this.fullKey(a)));return u}getOptionalBoolean(a){const u=this.readConfigValue(a,V=>typeof V=="boolean"||typeof V=="number"||typeof V=="string"||{expected:"boolean"});if(typeof u=="boolean"||u===void 0)return u;const O=String(u).trim();if(/^(?:y|yes|true|1|on)$/i.test(O))return!0;if(/^(?:n|no|false|0|off)$/i.test(O))return!1;throw new Error(C.convert(this.fullKey(a),this.context,"boolean"))}getString(a){const u=this.getOptionalString(a);if(u===void 0)throw new Error(C.missing(this.fullKey(a)));return u}getOptionalString(a){return this.readConfigValue(a,u=>typeof u=="string"&&u!==""||{expected:"string"})}getStringArray(a){const u=this.getOptionalStringArray(a);if(u===void 0)throw new Error(C.missing(this.fullKey(a)));return u}getOptionalStringArray(a){return this.readConfigValue(a,u=>{if(!Array.isArray(u))return{expected:"string-array"};for(const[O,V]of u.entries())if(typeof V!="string"||V==="")return{expected:"string-array",value:V,key:`${a}[${O}]`};return!0})}fullKey(a){return`${this.prefix}${this.prefix?".":""}${a}`}copy(a,u,O){const V=new v(a,this.context,O,this.fullKey(u));return V.filteredKeys=this.filteredKeys,V}readConfigValue(a,u){var O,V;const Oe=this.readValue(a);if(Oe===void 0)return(V=this.fallback)==null?void 0:V.readConfigValue(a,u);const Fe=u(Oe);if(Fe!==!0){const{key:Ze=a,value:Pt=Oe,expected:xt}=Fe;throw new TypeError(C.type(this.fullKey(Ze),this.context,H(Pt),xt))}return Oe}readValue(a){const u=a?a.split("."):[];for(const V of u)if(!K.test(V))throw new TypeError(`Invalid config key '${a}'`);if(this.data===void 0)return;let O=this.data;for(const[V,Oe]of u.entries())if(k(O))O=O[Oe];else if(O!==void 0){const Fe=this.fullKey(u.slice(0,V).join("."));throw new TypeError(C.type(Fe,this.context,H(O),"object"))}return O}}var F=e(73557),g=e(16060),J=e(64279),x=e(72164),B=Object.defineProperty,T=(y,a,u)=>a in y?B(y,a,{enumerable:!0,configurable:!0,writable:!0,value:u}):y[a]=u,S=(y,a,u)=>(T(y,typeof a!="symbol"?a+"":a,u),u);class ie{constructor(...a){S(this,"holders"),this.holders=a}get(a){for(const u of this.holders){const O=u.get(a);if(O)return O}}}const Te=(0,i.CT)("api-context"),Pe=y=>{var a;const{apis:u,children:O}=y,V=(a=(0,n.useContext)(Te))==null?void 0:a.atVersion(1),Oe=V?new ie(u,V):u;return n.createElement(Te.Provider,{value:(0,i.EI)({1:Oe}),children:O})};Pe.propTypes={apis:p().shape({get:p().func.isRequired}).isRequired,children:p().node};var qe=Object.defineProperty,xe=(y,a,u)=>a in y?qe(y,a,{enumerable:!0,configurable:!0,writable:!0,value:u}):y[a]=u,ke=(y,a,u)=>(xe(y,typeof a!="symbol"?a+"":a,u),u);class rt{constructor(a){this.factories=a,ke(this,"apis",new Map)}static validateFactories(a,u){for(const O of u){const V=[O],Oe=new Set;for(;V.length;){const Fe=V.shift(),Ze=a.get(Fe);if(Ze)for(const Pt of Object.values(Ze.deps)){if(Pt.id===O.id)throw new Error(`Circular dependency of api factory for ${O}`);Oe.has(Pt)||(Oe.add(Pt),V.push(Pt))}}}}get(a){return this.load(a)}load(a,u=[]){const O=this.apis.get(a.id);if(O)return O;const V=this.factories.get(a);if(!V)return;if(u.includes(V.api))throw new Error(`Circular dependency of api factory for ${V.api}`);const Oe=this.loadDeps(a,V.deps,[...u,V.api]),Fe=V.factory(Oe);return this.apis.set(a.id,Fe),Fe}loadDeps(a,u,O){const V={};for(const Oe in u)if(u.hasOwnProperty(Oe)){const Fe=u[Oe],Ze=this.load(Fe,O);if(!Ze)throw new Error(`No API factory available for dependency ${Fe} of dependent ${a}`);V[Oe]=Ze}return V}}var Kt=Object.defineProperty,Nt=(y,a,u)=>a in y?Kt(y,a,{enumerable:!0,configurable:!0,writable:!0,value:u}):y[a]=u,rn=(y,a,u)=>(Nt(y,typeof a!="symbol"?a+"":a,u),u),D=(y=>(y[y.default=10]="default",y[y.app=50]="app",y[y.static=100]="static",y))(D||{});class we{constructor(){rn(this,"factories",new Map)}register(a,u){const O=D[a],V=this.factories.get(u.api.id);return V&&V.priority>=O?!1:(this.factories.set(u.api.id,{priority:O,factory:u}),!0)}get(a){const u=this.factories.get(a.id);if(u)return u.factory}getAllApis(){const a=new Set;for(const{factory:u}of this.factories.values())a.add(u.api);return a}}function ue(y){return new Promise((a,u)=>{const O=y.width||500,V=y.height||700,Oe=window.screen.width/2-O/2,Fe=window.screen.height/2-V/2,Ze=window.open(y.url,y.name,`menubar=no,location=no,resizable=no,scrollbars=no,status=no,width=${O},height=${V},top=${Fe},left=${Oe}`);let Pt="";if(!Ze||typeof Ze.closed=="undefined"||Ze.closed){const Yt=new Error("Failed to open auth popup.");Yt.name="PopupRejectedError",u(Yt);return}const xt=Yt=>{if(Yt.source!==Ze||Yt.origin!==y.origin)return;const{data:fn}=Yt;if(fn.type==="config_info"){Pt=fn.targetOrigin;return}if(fn.type!=="authorization_response")return;const vn=fn;if("error"in vn){const Yn=new Error(vn.error.message);Yn.name=vn.error.name,u(Yn)}else a(vn.response);Xt()},pn=setInterval(()=>{if(Ze.closed){const Yt=`Login failed, ${Pt&&Pt!==window.location.origin?`Incorrect app origin, expected ${Pt}`:"popup was closed"}`,fn=new Error(Yt);fn.name="PopupClosedError",u(fn),Xt()}},100);function Xt(){window.removeEventListener("message",xt),clearInterval(pn)}window.addEventListener("message",xt)})}var Ke=Object.defineProperty,$=(y,a,u)=>a in y?Ke(y,a,{enumerable:!0,configurable:!0,writable:!0,value:u}):y[a]=u,A=(y,a,u)=>($(y,typeof a!="symbol"?a+"":a,u),u);let z=!1;function ae(y){return[...y].join(" ")}class $e{constructor(a){A(this,"discoveryApi"),A(this,"environment"),A(this,"provider"),A(this,"joinScopesFunc"),A(this,"authRequester"),A(this,"sessionTransform"),A(this,"enableExperimentalRedirectFlow"),A(this,"popupOptions");var u;const{configApi:O,discoveryApi:V,environment:Oe,provider:Fe,joinScopes:Ze=ae,oauthRequestApi:Pt,sessionTransform:xt=Xt=>Xt,popupOptions:pn}=a;!z&&!O&&(console.warn("DEPRECATION WARNING: Authentication providers require a configApi instance to configure the authentication flow. Please provide one to the authentication provider constructor."),z=!0),this.enableExperimentalRedirectFlow=O&&(u=O.getOptionalBoolean("enableExperimentalRedirectFlow"))!=null?u:!1,this.authRequester=Pt.createAuthRequester({provider:Fe,onAuthRequest:async Xt=>this.enableExperimentalRedirectFlow?this.executeRedirect(Xt):this.showPopup(Xt)}),this.discoveryApi=V,this.environment=Oe,this.provider=Fe,this.joinScopesFunc=Ze,this.sessionTransform=xt,this.popupOptions=pn}async createSession(a){return a.instantPopup?this.enableExperimentalRedirectFlow?this.executeRedirect(a.scopes):this.showPopup(a.scopes):this.authRequester(a.scopes)}async refreshSession(a){const u=await fetch(await this.buildUrl("/refresh",{optional:!0,...a&&{scope:this.joinScopesFunc(a)}}),{headers:{"x-requested-with":"XMLHttpRequest"},credentials:"include"}).catch(V=>{throw new Error(`Auth refresh request failed, ${V}`)});if(!u.ok){const V=new Error(`Auth refresh request failed, ${u.statusText}`);throw V.status=u.status,V}const O=await u.json();if(O.error){const V=new Error(O.error.message);throw O.error.name&&(V.name=O.error.name),V}return await this.sessionTransform(O)}async removeSession(){const a=await fetch(await this.buildUrl("/logout"),{method:"POST",headers:{"x-requested-with":"XMLHttpRequest"},credentials:"include"}).catch(u=>{throw new Error(`Logout request failed, ${u}`)});if(!a.ok){const u=new Error(`Logout request failed, ${a.statusText}`);throw u.status=a.status,u}}async showPopup(a){var u,O,V,Oe,Fe,Ze,Pt,xt;const pn=this.joinScopesFunc(a),Xt=await this.buildUrl("/start",{scope:pn,origin:window.location.origin,flow:"popup"}),Yt=(O=(u=this.popupOptions)==null?void 0:u.size)!=null&&O.fullscreen?window.screen.width:((Oe=(V=this.popupOptions)==null?void 0:V.size)==null?void 0:Oe.width)||450,fn=(Ze=(Fe=this.popupOptions)==null?void 0:Fe.size)!=null&&Ze.fullscreen?window.screen.height:((xt=(Pt=this.popupOptions)==null?void 0:Pt.size)==null?void 0:xt.height)||730,vn=await ue({url:Xt,name:`${this.provider.title} Login`,origin:new URL(Xt).origin,width:Yt,height:fn});return await this.sessionTransform(vn)}async executeRedirect(a){const u=this.joinScopesFunc(a);return window.location.href=await this.buildUrl("/start",{scope:u,origin:window.location.origin,redirectUrl:window.location.href,flow:"redirect"}),new Promise(()=>{})}async buildUrl(a,u){const O=await this.discoveryApi.getBaseUrl("auth"),V=this.buildQueryString({...u,env:this.environment});return`${O}/${this.provider.id}${a}${V}`}buildQueryString(a){if(!a)return"";const u=Object.entries(a).map(([O,V])=>{if(typeof V=="string")return`${encodeURIComponent(O)}=${encodeURIComponent(V)}`;if(V)return encodeURIComponent(O)}).filter(Boolean).join("&");return u?`?${u}`:""}}var Ge=Object.defineProperty,ft=(y,a,u)=>a in y?Ge(y,a,{enumerable:!0,configurable:!0,writable:!0,value:u}):y[a]=u,nt=(y,a,u)=>(ft(y,typeof a!="symbol"?a+"":a,u),u);class Rt{constructor(a){nt(this,"discoveryApi"),nt(this,"environment"),nt(this,"provider");const{discoveryApi:u,environment:O,provider:V}=a;this.discoveryApi=u,this.environment=O,this.provider=V}async createSession(){const a=await this.buildUrl("/start"),u=await ue({url:a,name:`${this.provider.title} Login`,origin:new URL(a).origin,width:450,height:730});return{...u,id:u.profile.email}}async refreshSession(){}async removeSession(){const a=await fetch(await this.buildUrl("/logout"),{method:"POST",headers:{"x-requested-with":"XMLHttpRequest"},credentials:"include"}).catch(u=>{throw new Error(`Logout request failed, ${u}`)});if(!a.ok){const u=new Error(`Logout request failed, ${a.statusText}`);throw u.status=a.status,u}}async buildUrl(a){return`${await this.discoveryApi.getBaseUrl("auth")}/${this.provider.id}${a}?env=${this.environment}`}}function q(y,a){for(const u of a)if(!y.has(u))return!1;return!0}class de{constructor(a){this.options=a}sessionExistsAndHasScope(a,u){if(!a)return!1;if(!u||this.options.sessionScopes===void 0)return!0;const O=this.options.sessionScopes(a);return q(O,u)}getExtendedScope(a,u){const O=new Set(this.options.defaultScopes);if(a&&this.options.sessionScopes!==void 0){const V=this.options.sessionScopes(a);for(const Oe of V)O.add(Oe)}if(u)for(const V of u)O.add(V);return O}}var Se=Object.defineProperty,Ne=(y,a,u)=>a in y?Se(y,a,{enumerable:!0,configurable:!0,writable:!0,value:u}):y[a]=u,st=(y,a,u)=>(Ne(y,typeof a!="symbol"?a+"":a,u),u);class pe{constructor(){st(this,"isClosed",!1),st(this,"terminatingError"),st(this,"observable",new(m())(a=>this.isClosed?(this.terminatingError?a.error(this.terminatingError):a.complete(),()=>{}):(this.subscribers.add(a),()=>{this.subscribers.delete(a)}))),st(this,"subscribers",new Set)}[Symbol.observable](){return this}get closed(){return this.isClosed}next(a){if(this.isClosed)throw new Error("PublishSubject is closed");this.subscribers.forEach(u=>u.next(a))}error(a){if(this.isClosed)throw new Error("PublishSubject is closed");this.isClosed=!0,this.terminatingError=a,this.subscribers.forEach(u=>u.error(a))}complete(){if(this.isClosed)throw new Error("PublishSubject is closed");this.isClosed=!0,this.subscribers.forEach(a=>a.complete())}subscribe(a,u,O){const V=typeof a=="function"?{next:a,error:u,complete:O}:a;return this.observable.subscribe(V)}}class Je{constructor(a){st(this,"isClosed"),st(this,"currentValue"),st(this,"terminatingError"),st(this,"observable"),st(this,"subscribers",new Set),this.isClosed=!1,this.currentValue=a,this.terminatingError=void 0,this.observable=new(m())(u=>this.isClosed?(this.terminatingError?u.error(this.terminatingError):u.complete(),()=>{}):(u.next(this.currentValue),this.subscribers.add(u),()=>{this.subscribers.delete(u)}))}[Symbol.observable](){return this}get closed(){return this.isClosed}next(a){if(this.isClosed)throw new Error("BehaviorSubject is closed");this.currentValue=a,this.subscribers.forEach(u=>u.next(a))}error(a){if(this.isClosed)throw new Error("BehaviorSubject is closed");this.isClosed=!0,this.terminatingError=a,this.subscribers.forEach(u=>u.error(a))}complete(){if(this.isClosed)throw new Error("BehaviorSubject is closed");this.isClosed=!0,this.subscribers.forEach(a=>a.complete())}subscribe(a,u,O){const V=typeof a=="function"?{next:a,error:u,complete:O}:a;return this.observable.subscribe(V)}}var ot=Object.defineProperty,Qe=(y,a,u)=>a in y?ot(y,a,{enumerable:!0,configurable:!0,writable:!0,value:u}):y[a]=u,Et=(y,a,u)=>(Qe(y,typeof a!="symbol"?a+"":a,u),u);class dt{constructor(){Et(this,"subject",new Je(b.sM.SignedOut)),Et(this,"signedIn",!1)}setIsSignedIn(a){this.signedIn!==a&&(this.signedIn=a,this.subject.next(this.signedIn?b.sM.SignedIn:b.sM.SignedOut))}sessionState$(){return this.subject}}var Vt=Object.defineProperty,jt=(y,a,u)=>a in y?Vt(y,a,{enumerable:!0,configurable:!0,writable:!0,value:u}):y[a]=u,Ht=(y,a,u)=>(jt(y,typeof a!="symbol"?a+"":a,u),u);class Ye{constructor(a){Ht(this,"connector"),Ht(this,"helper"),Ht(this,"sessionScopesFunc"),Ht(this,"sessionShouldRefreshFunc"),Ht(this,"stateTracker",new dt),Ht(this,"refreshPromise"),Ht(this,"currentSession");const{connector:u,defaultScopes:O=new Set,sessionScopes:V,sessionShouldRefresh:Oe}=a;this.connector=u,this.sessionScopesFunc=V,this.sessionShouldRefreshFunc=Oe,this.helper=new de({sessionScopes:V,defaultScopes:O})}async getSession(a){if(this.helper.sessionExistsAndHasScope(this.currentSession,a.scopes)){if(!this.sessionShouldRefreshFunc(this.currentSession))return this.currentSession;try{const O=await this.collapsedSessionRefresh(a.scopes),V=this.sessionScopesFunc(this.currentSession),Oe=this.sessionScopesFunc(O);return q(Oe,V)&&(this.currentSession=O),O}catch(O){if(a.optional)return;throw O}}if(!this.currentSession&&!a.instantPopup)try{const u=await this.collapsedSessionRefresh(a.scopes);return this.currentSession=u,this.getSession(a)}catch{}if(!a.optional)return this.currentSession=await this.connector.createSession({...a,scopes:this.helper.getExtendedScope(this.currentSession,a.scopes)}),this.stateTracker.setIsSignedIn(!0),this.currentSession}async removeSession(){this.currentSession=void 0,await this.connector.removeSession(),this.stateTracker.setIsSignedIn(!1)}sessionState$(){return this.stateTracker.sessionState$()}async collapsedSessionRefresh(a){if(this.refreshPromise)return this.refreshPromise;this.refreshPromise=this.connector.refreshSession(a);try{const u=await this.refreshPromise;return this.stateTracker.setIsSignedIn(!0),u}finally{delete this.refreshPromise}}}var St=Object.defineProperty,Mt=(y,a,u)=>a in y?St(y,a,{enumerable:!0,configurable:!0,writable:!0,value:u}):y[a]=u,Bt=(y,a,u)=>(Mt(y,typeof a!="symbol"?a+"":a,u),u);class Ee{constructor(a){Bt(this,"connector"),Bt(this,"helper"),Bt(this,"stateTracker",new dt),Bt(this,"currentSession");const{connector:u,defaultScopes:O=new Set,sessionScopes:V}=a;this.connector=u,this.helper=new de({sessionScopes:V,defaultScopes:O})}setSession(a){this.currentSession=a,this.stateTracker.setIsSignedIn(Boolean(a))}async getSession(a){if(this.helper.sessionExistsAndHasScope(this.currentSession,a.scopes))return this.currentSession;if(!a.optional)return this.currentSession=await this.connector.createSession({...a,scopes:this.helper.getExtendedScope(this.currentSession,a.scopes)}),this.stateTracker.setIsSignedIn(!0),this.currentSession}async removeSession(){this.currentSession=void 0,this.stateTracker.setIsSignedIn(!1)}sessionState$(){return this.stateTracker.sessionState$()}}var De=Object.defineProperty,ct=(y,a,u)=>a in y?De(y,a,{enumerable:!0,configurable:!0,writable:!0,value:u}):y[a]=u,Ve=(y,a,u)=>(ct(y,typeof a!="symbol"?a+"":a,u),u);class yt{constructor(a){Ve(this,"manager"),Ve(this,"storageKey"),Ve(this,"schema"),Ve(this,"sessionShouldRefreshFunc"),Ve(this,"helper");const{manager:u,storageKey:O,schema:V,sessionScopes:Oe,sessionShouldRefresh:Fe=()=>!1}=a;this.manager=u,this.storageKey=O,this.schema=V,this.sessionShouldRefreshFunc=Fe,this.helper=new de({sessionScopes:Oe,defaultScopes:new Set})}setSession(a){this.manager.setSession(a),this.saveSession(a)}async getSession(a){const{scopes:u}=a,O=this.loadSession();if(this.helper.sessionExistsAndHasScope(O,u)&&!this.sessionShouldRefreshFunc(O))return this.manager.setSession(O),O;const V=await this.manager.getSession(a);return this.saveSession(V),V}async removeSession(){localStorage.removeItem(this.storageKey),await this.manager.removeSession()}sessionState$(){return this.manager.sessionState$()}loadSession(){try{const a=localStorage.getItem(this.storageKey);if(a){const u=JSON.parse(a,(O,V)=>(V==null?void 0:V.__type)==="Set"?new Set(V.__value):V);try{return this.schema.parse(u)}catch(O){throw console.log(`Failed to load session from local storage because it did not conform to the expected schema, ${O}`),O}}return}catch{localStorage.removeItem(this.storageKey);return}}saveSession(a){if(a===void 0){localStorage.removeItem(this.storageKey);return}try{this.schema.parse(a)}catch(u){console.warn(`Failed to save session to local storage because it did not conform to the expected schema, ${u}`);return}localStorage.setItem(this.storageKey,JSON.stringify(a,(u,O)=>O instanceof Set?{__type:"Set",__value:Array.from(O)}:O))}}var ye=Object.defineProperty,mt=(y,a,u)=>a in y?ye(y,a,{enumerable:!0,configurable:!0,writable:!0,value:u}):y[a]=u,Ct=(y,a,u)=>(mt(y,typeof a!="symbol"?a+"":a,u),u);const _t={id:"oauth2",title:"Your Identity Provider",icon:()=>null};class it{constructor(a){Ct(this,"sessionManager"),Ct(this,"scopeTransform"),this.sessionManager=a.sessionManager,this.scopeTransform=a.scopeTransform}static create(a){const{configApi:u,discoveryApi:O,environment:V="development",provider:Oe=_t,oauthRequestApi:Fe,defaultScopes:Ze=[],scopeTransform:Pt=Yt=>Yt,popupOptions:xt}=a,pn=new $e({configApi:u,discoveryApi:O,environment:V,provider:Oe,oauthRequestApi:Fe,sessionTransform(Yt){return{...Yt,providerInfo:{idToken:Yt.providerInfo.idToken,accessToken:Yt.providerInfo.accessToken,scopes:it.normalizeScopes(Pt,Yt.providerInfo.scope),expiresAt:new Date(Date.now()+Yt.providerInfo.expiresInSeconds*1e3)}}},popupOptions:xt}),Xt=new Ye({connector:pn,defaultScopes:new Set(Ze),sessionScopes:Yt=>Yt.providerInfo.scopes,sessionShouldRefresh:Yt=>(Yt.providerInfo.expiresAt.getTime()-Date.now())/1e3<60*5});return new it({sessionManager:Xt,scopeTransform:Pt})}async signIn(){await this.getAccessToken()}async signOut(){await this.sessionManager.removeSession()}sessionState$(){return this.sessionManager.sessionState$()}async getAccessToken(a,u){var O;const V=it.normalizeScopes(this.scopeTransform,a),Oe=await this.sessionManager.getSession({...u,scopes:V});return(O=Oe==null?void 0:Oe.providerInfo.accessToken)!=null?O:""}async getIdToken(a={}){var u;const O=await this.sessionManager.getSession({...a,scopes:new Set(["openid"])});return(u=O==null?void 0:O.providerInfo.idToken)!=null?u:""}async getBackstageIdentity(a={}){const u=await this.sessionManager.getSession(a);return u==null?void 0:u.backstageIdentity}async getProfile(a={}){const u=await this.sessionManager.getSession(a);return u==null?void 0:u.profile}static normalizeScopes(a,u){if(!u)return new Set;const O=Array.isArray(u)?u:u.split(/[\s|,]/).filter(Boolean);return new Set(a(O))}}const At={id:"github",title:"GitHub",icon:()=>null};class zt{static create(a){const{configApi:u,discoveryApi:O,environment:V="development",provider:Oe=At,oauthRequestApi:Fe,defaultScopes:Ze=["read:user"]}=a;return it.create({configApi:u,discoveryApi:O,oauthRequestApi:Fe,provider:Oe,environment:V,defaultScopes:Ze})}}const ze={id:"gitlab",title:"GitLab",icon:()=>null};class Re{static create(a){const{configApi:u,discoveryApi:O,environment:V="development",provider:Oe=ze,oauthRequestApi:Fe,defaultScopes:Ze=["read_user"]}=a;return it.create({configApi:u,discoveryApi:O,oauthRequestApi:Fe,provider:Oe,environment:V,defaultScopes:Ze})}}const We={id:"google",title:"Google",icon:()=>null},je="https://www.googleapis.com/auth/";class W{static create(a){const{configApi:u,discoveryApi:O,oauthRequestApi:V,environment:Oe="development",provider:Fe=We,defaultScopes:Ze=["openid",`${je}userinfo.email`,`${je}userinfo.profile`]}=a;return it.create({configApi:u,discoveryApi:O,oauthRequestApi:V,provider:Fe,environment:Oe,defaultScopes:Ze,scopeTransform(Pt){return Pt.map(xt=>xt==="openid"?xt:xt==="profile"||xt==="email"?`${je}userinfo.${xt}`:xt.startsWith(je)?xt:`${je}${xt}`)}})}}const _={id:"okta",title:"Okta",icon:()=>null},h=new Set(["openid","profile","email","phone","address","groups","offline_access"]),M="okta.";class X{static create(a){const{configApi:u,discoveryApi:O,environment:V="development",provider:Oe=_,oauthRequestApi:Fe,defaultScopes:Ze=["openid","email","profile","offline_access"]}=a;return it.create({configApi:u,discoveryApi:O,oauthRequestApi:Fe,provider:Oe,environment:V,defaultScopes:Ze,scopeTransform(Pt){return Pt.map(xt=>h.has(xt)||xt.startsWith(M)?xt:`${M}${xt}`)}})}}const j=R.z.object({profile:R.z.object({email:R.z.string().optional(),displayName:R.z.string().optional(),picture:R.z.string().optional()}),backstageIdentity:R.z.object({token:R.z.string(),identity:R.z.object({type:R.z.literal("user"),userEntityRef:R.z.string(),ownershipEntityRefs:R.z.array(R.z.string())})})}),Z={id:"saml",title:"SAML",icon:()=>null};class oe{constructor(a){this.sessionManager=a}static create(a){const{discoveryApi:u,environment:O="development",provider:V=Z}=a,Oe=new Rt({discoveryApi:u,environment:O,provider:V}),Fe=new Ee({connector:Oe}),Ze=new yt({manager:Fe,storageKey:`${V.id}Session`,schema:j});return new oe(Ze)}sessionState$(){return this.sessionManager.sessionState$()}async signIn(){await this.getBackstageIdentity({})}async signOut(){await this.sessionManager.removeSession()}async getBackstageIdentity(a={}){const u=await this.sessionManager.getSession(a);return u==null?void 0:u.backstageIdentity}async getProfile(a={}){const u=await this.sessionManager.getSession(a);return u==null?void 0:u.profile}}var se=Object.defineProperty,Ue=(y,a,u)=>a in y?se(y,a,{enumerable:!0,configurable:!0,writable:!0,value:u}):y[a]=u,lt=(y,a,u)=>(Ue(y,typeof a!="symbol"?a+"":a,u),u);const ne={id:"microsoft",title:"Microsoft",icon:()=>null},ce=class la{constructor(a){lt(this,"oauth2"),lt(this,"configApi"),lt(this,"environment"),lt(this,"provider"),lt(this,"oauthRequestApi"),lt(this,"discoveryApi"),lt(this,"scopeTransform");const{configApi:u,environment:O="development",provider:V=ne,oauthRequestApi:Oe,discoveryApi:Fe,defaultScopes:Ze=["openid","offline_access","profile","email","User.Read"],scopeTransform:Pt=xt=>xt.concat("offline_access")}=a;this.configApi=u,this.environment=O,this.provider=V,this.oauthRequestApi=Oe,this.discoveryApi=Fe,this.scopeTransform=Pt,this.oauth2={[la.MicrosoftGraphID]:it.create({configApi:this.configApi,discoveryApi:this.discoveryApi,oauthRequestApi:this.oauthRequestApi,provider:this.provider,environment:this.environment,scopeTransform:this.scopeTransform,defaultScopes:Ze})}}static create(a){return new la(a)}microsoftGraph(){return this.oauth2[la.MicrosoftGraphID]}static resourceForScopes(a){var u;const O=[...new Set(a.split(" ").map(la.resourceForScope).filter(Oe=>Oe!=="openid"))];if(O.length>1)return Promise.reject(new Error(`Requested access token with scopes from multiple Azure resources: ${O.join(", ")}. Access tokens can only have a single audience.`));const V=(u=O[0])!=null?u:la.MicrosoftGraphID;return Promise.resolve(V)}static resourceForScope(a){var u;const O=(u=a.match(/^(?<resourceURI>.*)\/(?<scp>[^\/]*)$/))==null?void 0:u.groups;if(O){const{resourceURI:V}=O;return V.replace(/^api:\/\//,"")}switch(a){case"email":case"openid":case"offline_access":case"profile":return"openid";default:return la.MicrosoftGraphID}}async getAccessToken(a,u){const O=a===void 0?la.MicrosoftGraphID:await la.resourceForScopes(Array.isArray(a)?a.join(" "):a);return O in this.oauth2||(this.oauth2[O]=it.create({configApi:this.configApi,discoveryApi:this.discoveryApi,oauthRequestApi:this.oauthRequestApi,provider:this.provider,environment:this.environment,scopeTransform:this.scopeTransform})),this.oauth2[O].getAccessToken(a,u)}getIdToken(a){return this.microsoftGraph().getIdToken(a)}getProfile(a){return this.microsoftGraph().getProfile(a)}getBackstageIdentity(a){return this.microsoftGraph().getBackstageIdentity(a)}signIn(){return this.microsoftGraph().signIn()}signOut(){return this.microsoftGraph().signOut()}sessionState$(){return this.microsoftGraph().sessionState$()}};lt(ce,"MicrosoftGraphID","00000003-0000-0000-c000-000000000000");let Ce=ce;const Y={id:"onelogin",title:"onelogin",icon:()=>null},te=new Set(["openid","profile","email","phone","address","groups","offline_access"]),me="onelogin.";class Ie{static create(a){const{configApi:u,discoveryApi:O,environment:V="development",provider:Oe=Y,oauthRequestApi:Fe}=a;return it.create({configApi:u,discoveryApi:O,oauthRequestApi:Fe,provider:Oe,environment:V,defaultScopes:["openid","email","profile","offline_access"],scopeTransform(Ze){return Ze.map(Pt=>te.has(Pt)||Pt.startsWith(me)?Pt:`${me}${Pt}`)}})}}const Le={id:"bitbucket",title:"Bitbucket",icon:()=>null};class bt{static create(a){const{configApi:u,discoveryApi:O,environment:V="development",provider:Oe=Le,oauthRequestApi:Fe,defaultScopes:Ze=["team"]}=a;return it.create({configApi:u,discoveryApi:O,oauthRequestApi:Fe,provider:Oe,environment:V,defaultScopes:Ze})}}const ut={id:"bitbucketServer",title:"Bitbucket Server",icon:()=>null};class Ut{static create(a){const{configApi:u,discoveryApi:O,environment:V="development",provider:Oe=ut,oauthRequestApi:Fe,defaultScopes:Ze=["PROJECT_ADMIN"]}=a;return it.create({configApi:u,discoveryApi:O,oauthRequestApi:Fe,provider:Oe,environment:V,defaultScopes:Ze})}}const wt={id:"atlassian",title:"Atlassian",icon:()=>null};class kt{static create(a){const{configApi:u,discoveryApi:O,environment:V="development",provider:Oe=wt,oauthRequestApi:Fe}=a;return it.create({configApi:u,discoveryApi:O,oauthRequestApi:Fe,provider:Oe,environment:V})}}var Qt=Object.defineProperty,un=(y,a,u)=>a in y?Qt(y,a,{enumerable:!0,configurable:!0,writable:!0,value:u}):y[a]=u,ln=(y,a,u)=>(un(y,typeof a!="symbol"?a+"":a,u),u);class tn{constructor(){ln(this,"subject",new pe)}post(a){this.subject.next(a)}alert$(){return this.subject}}class Zt{constructor(a){this.actualApis=a}static fromApis(a){return new Zt(a)}captureEvent(a){this.actualApis.forEach(u=>{try{u.captureEvent(a)}catch{}})}}class Wt{captureEvent(a){}}var hn=Object.defineProperty,gn=(y,a,u)=>a in y?hn(y,a,{enumerable:!0,configurable:!0,writable:!0,value:u}):y[a]=u,yn=(y,a,u)=>(gn(y,typeof a!="symbol"?a+"":a,u),u);const bn="theme";class In{constructor(a){this.themes=a,yn(this,"activeThemeId"),yn(this,"subject",new Je(void 0))}static createWithStorage(a){var u;const O=new In(a);if(!window.localStorage)return O;const V=(u=window.localStorage.getItem(bn))!=null?u:void 0;return O.setActiveThemeId(V),O.activeThemeId$().subscribe(Oe=>{Oe?window.localStorage.setItem(bn,Oe):window.localStorage.removeItem(bn)}),window.addEventListener("storage",Oe=>{var Fe;if(Oe.key===bn){const Ze=(Fe=localStorage.getItem(bn))!=null?Fe:void 0;O.setActiveThemeId(Ze)}}),O}getInstalledThemes(){return this.themes.slice()}activeThemeId$(){return this.subject}getActiveThemeId(){return this.activeThemeId}setActiveThemeId(a){this.activeThemeId=a,this.subject.next(a)}}const An="Invalid discovery URL pattern,";class On{constructor(a){this.parts=a}static compile(a){const u=a.split(/\{\{\s*pluginId\s*\}\}/),O=u.join("pluginId");let V;try{V=new URL(O)}catch{throw new Error(`${An} URL '${O}' is invalid`)}if(V.hash)throw new Error(`${An} URL must not have a hash`);if(V.search)throw new Error(`${An} URL must not have a query`);if(O.endsWith("/"))throw new Error(`${An} URL must not end with a slash`);return new On(u)}async getBaseUrl(a){return this.parts.join(encodeURIComponent(a))}}class Sn{constructor(a,u){this.endpoints=a,this.defaultEndpoint=u}static fromConfig(a,u){var O,V;const Oe=(O=u==null?void 0:u.pathPattern)!=null?O:"/api/{{ pluginId }}",Fe=a.getString("backend.baseUrl"),Ze=(V=a.getOptionalConfigArray("discovery.endpoints"))==null?void 0:V.flatMap(Pt=>{const xt=typeof Pt.get("target")=="object"?Pt.getString("target.external"):Pt.getString("target"),pn=On.compile(xt);return Pt.getStringArray("plugins").map(Xt=>[Xt,pn])});return new Sn(new Map(Ze),On.compile(`${Fe}${Oe}`))}async getBaseUrl(a){const u=this.endpoints.get(a);return u?u.getBaseUrl(a):this.defaultEndpoint.getBaseUrl(a)}}class Dn{constructor(a,u){this.alertApi=a,this.errorApi=u}post(a,u){return u!=null&&u.hidden||this.alertApi.post({message:a.message,severity:"error"}),this.errorApi.post(a,u)}error$(){return this.errorApi.error$()}}var sr=Object.defineProperty,zn=(y,a,u)=>a in y?sr(y,a,{enumerable:!0,configurable:!0,writable:!0,value:u}):y[a]=u,Dr=(y,a,u)=>(zn(y,typeof a!="symbol"?a+"":a,u),u);class Vr{constructor(){Dr(this,"subject",new pe)}post(a,u){this.subject.next({error:a,context:u})}error$(){return this.subject}}class Zr{static forward(a,u){window.addEventListener("unhandledrejection",O=>{a.post(O.reason,u)})}}var lr=Object.defineProperty,Wr=(y,a,u)=>a in y?lr(y,a,{enumerable:!0,configurable:!0,writable:!0,value:u}):y[a]=u,jn=(y,a,u)=>(Wr(y,typeof a!="symbol"?a+"":a,u),u);function $r(y){if(y.length<3)throw new Error(`The '${y}' feature flag must have a minimum length of three characters.`);if(y.length>150)throw new Error(`The '${y}' feature flag must not exceed 150 characters.`);if(!y.match(/^[a-z]+[a-z0-9-]+$/))throw new Error(`The '${y}' feature flag must start with a lowercase letter and only contain lowercase letters, numbers and hyphens. Examples: feature-flag-one, alpha, release-2020`)}class _r{constructor(){jn(this,"registeredFeatureFlags",[]),jn(this,"flags")}registerFlag(a){$r(a.name),this.registeredFeatureFlags.push(a)}getRegisteredFlags(){return this.registeredFeatureFlags.slice()}isActive(a){return this.flags||(this.flags=this.load()),this.flags.get(a)===b.CL.Active}save(a){this.flags||(this.flags=this.load()),a.merge||this.flags.clear();for(const[O,V]of Object.entries(a.states))this.flags.set(O,V);const u=Array.from(this.flags.entries()).filter(([,O])=>O===b.CL.Active);window.localStorage.setItem("featureFlags",JSON.stringify(Object.fromEntries(u)))}load(){try{const a=window.localStorage.getItem("featureFlags");if(!a)return new Map;const u=JSON.parse(a);if(typeof u!="object"||u===null||Array.isArray(u))return new Map;const O=Object.entries(u).filter(([V,Oe])=>($r(V),Oe===b.CL.Active));return new Map(O)}catch{return new Map}}}function Lr(y){var a;let u=y.baseImplementation||e.g.fetch;const O=[(a=y.middleware)!=null?a:[]].flat().reverse();for(const V of O)u=V.apply(u);return{fetch:u}}class Ar{constructor(a,u,O,V){this.identityApi=a,this.allowUrl=u,this.headerName=O,this.headerValue=V}static create(a){var u,O;const V=mr(a),Oe=((u=a.header)==null?void 0:u.name)||"authorization",Fe=((O=a.header)==null?void 0:O.value)||(Ze=>`Bearer ${Ze}`);return new Ar(a.identityApi,V,Oe,Fe)}apply(a){return async(u,O)=>{const V=new Request(u,O),{token:Oe}=await this.identityApi.getCredentials();return V.headers.get(this.headerName)||typeof Oe!="string"||!Oe||!this.allowUrl(V.url)?a(u,O):(V.headers.set(this.headerName,this.headerValue(Oe)),a(V))}}}function mr(y){return y.allowUrl?y.allowUrl:y.urlPrefixAllowlist?Br(y.urlPrefixAllowlist):y.config?Br([y.config.getString("backend.baseUrl")]):()=>!1}function Br(y){const a=y.map(u=>u.replace(/\/$/,""));return u=>a.some(O=>u===O||u.startsWith(`${O}/`))}function br(y,a){return!a||a==="/"?y:`${y.replace(/\/$/,"")}/${a.replace(/^\//,"")}`}class Pr{constructor(a){this.discoveryApi=a}apply(a){return async(u,O)=>{const V=new Request(u,O),Oe="plugin://";if(!V.url.startsWith(Oe))return a(u,O);const{hostname:Fe,pathname:Ze,search:Pt,hash:xt,username:pn,password:Xt}=new URL(`http://${V.url.substring(Oe.length)}`);let Yt=await this.discoveryApi.getBaseUrl(Fe);if(pn||Xt){const vn=new URL(Yt),Yn=`${pn}${Xt?`:${Xt}`:""}@`;Yt=`${vn.protocol}//${Yn}${vn.host}${vn.pathname}`}const fn=`${br(Yt,Ze)}${Pt}${xt}`;return a(fn,typeof u=="string"||Fn(u)?O:u)}}}function Fn(y){return typeof y=="object"&&(y==null?void 0:y.constructor)===URL}class wr{static resolvePluginProtocol(a){return new Pr(a.discoveryApi)}static injectIdentityAuth(a){return Ar.create(a)}constructor(){}}var Mr=Object.defineProperty,Fr=(y,a,u)=>a in y?Mr(y,a,{enumerable:!0,configurable:!0,writable:!0,value:u}):y[a]=u,Ur=(y,a,u)=>(Fr(y,typeof a!="symbol"?a+"":a,u),u);function xr(y,a){for(const u of a)if(!y.has(u))return!1;return!0}function be(y,...a){const u=new Set(y);for(const O of a)for(const V of O)u.add(V);return u}class at{constructor(){Ur(this,"requests",[]),Ur(this,"subject",new Je(this.getCurrentPending()))}request(a){return new Promise((u,O)=>{this.requests.push({scopes:a,resolve:u,reject:O}),this.subject.next(this.getCurrentPending())})}resolve(a,u){this.requests=this.requests.filter(O=>xr(a,O.scopes)?(O.resolve(u),!1):!0),this.subject.next(this.getCurrentPending())}reject(a){this.requests.forEach(u=>u.reject(a)),this.requests=[],this.subject.next(this.getCurrentPending())}pending(){return this.subject}getCurrentPending(){const a=this.requests.length===0?void 0:this.requests.slice(1).reduce((u,O)=>be(u,O.scopes),this.requests[0].scopes);return{scopes:a,resolve:u=>{a&&this.resolve(a,u)},reject:u=>{a&&this.reject(u)}}}}var vt=Object.defineProperty,Tt=(y,a,u)=>a in y?vt(y,a,{enumerable:!0,configurable:!0,writable:!0,value:u}):y[a]=u,an=(y,a,u)=>(Tt(y,typeof a!="symbol"?a+"":a,u),u);class Jt{constructor(){an(this,"subject",new Je([])),an(this,"currentRequests",[]),an(this,"handlerCount",0)}createAuthRequester(a){const u=new at,O=this.handlerCount;return this.handlerCount++,u.pending().subscribe({next:V=>{const Oe=this.currentRequests.slice(),Fe=this.makeAuthRequest(V,a);Fe?Oe[O]=Fe:delete Oe[O],this.currentRequests=Oe,this.subject.next(Oe.filter(Boolean))}}),V=>u.request(V)}makeAuthRequest(a,u){const{scopes:O}=a;if(O)return{provider:u.provider,trigger:async()=>{const V=await u.onAuthRequest(O);a.resolve(V)},reject:()=>{const V=new Error("Login failed, rejected by user");V.name="RejectedError",a.reject(V)}}}authRequest$(){return this.subject}}var en=Object.defineProperty,En=(y,a,u)=>a in y?en(y,a,{enumerable:!0,configurable:!0,writable:!0,value:u}):y[a]=u,cn=(y,a,u)=>(En(y,typeof a!="symbol"?a+"":a,u),u);const sn=new Map,Rn=class Oa{constructor(a,u){this.namespace=a,this.errorApi=u,cn(this,"subscribers",new Set),cn(this,"observable",new(m())(O=>(this.subscribers.add(O),()=>{this.subscribers.delete(O)})))}static create(a){var u;return new Oa((u=a.namespace)!=null?u:"",a.errorApi)}static addStorageEventListener(){window.addEventListener("storage",a=>{var u;for(const[O,V]of sn.entries())(u=a.key)!=null&&u.startsWith(O)&&V.handleStorageChange(a.key)})}get(a){return this.snapshot(a).value}snapshot(a){let u,O="absent";try{const V=localStorage.getItem(this.getKeyName(a));V&&(u=JSON.parse(V,(Oe,Fe)=>(typeof Fe=="object"&&Fe!==null&&Object.freeze(Fe),Fe)),O="present")}catch{this.errorApi.post(new Error(`Error when parsing JSON config from storage for: ${a}`))}return{key:a,value:u,presence:O}}forBucket(a){const u=`${this.namespace}/${a}`;return sn.has(u)||sn.set(u,new Oa(u,this.errorApi)),sn.get(u)}async set(a,u){localStorage.setItem(this.getKeyName(a),JSON.stringify(u)),this.notifyChanges(a)}async remove(a){localStorage.removeItem(this.getKeyName(a)),this.notifyChanges(a)}observe$(a){return Oa.hasSubscribed||(Oa.addStorageEventListener(),Oa.hasSubscribed=!0),this.observable.filter(({key:u})=>u===a)}handleStorageChange(a){if(!(a!=null&&a.startsWith(this.namespace)))return;const u=a==null?void 0:a.slice(`${this.namespace}/`.length);u.includes("/")||this.notifyChanges(decodeURIComponent(u))}getKeyName(a){return`${this.namespace}/${encodeURIComponent(a)}`}notifyChanges(a){const u=this.snapshot(a);for(const O of this.subscribers)O.next(u)}};cn(Rn,"hasSubscribed",!1);let _n=Rn;const Ln=(0,n.createContext)(void 0);function Cn(){const[y]=(0,F.is)(n.createElement(F.AW,{index:!0,element:n.createElement("div",null)}));return!y.index}const Un=(y,a)=>{try{const u=(0,g.fp)(a,{pathname:y}),O=u==null?void 0:u.filter(Pt=>{var xt;return((xt=Pt==null?void 0:Pt.route.routeRefs)==null?void 0:xt.size)>0}).pop(),V=O==null?void 0:O.route;if(!V||V.path===""&&y!=="/")return;let Oe;V.routeRefs.size===1&&(Oe=V.routeRefs.values().next().value);let Fe;V.plugins.size===1&&(Fe=V.plugins.values().next().value);const Ze=Object.entries((O==null?void 0:O.params)||{}).reduce((Pt,[xt,pn])=>(pn!==void 0&&xt!=="*"&&(Pt[xt]=pn),Pt),{});return{extension:"App",pluginId:(Fe==null?void 0:Fe.getId())||"root",...Oe?{routeRef:Oe.id}:{},_routeNodeType:V.element,params:Ze}}catch{return}},Mn=({pathname:y,search:a,hash:u,attributes:O})=>{const V=(0,b.z$)();return(0,n.useEffect)(()=>{V.captureEvent("navigate",`${y}${a}${u}`,{attributes:O})},[V,y,a,u,O]),null},Bn=({routeObjects:y})=>{const{pathname:a,search:u,hash:O}=(0,F.TH)(),{params:V,...Oe}=Un(a,y)||{params:{}};return n.createElement(b.fC,{attributes:Oe},n.createElement(Mn,{pathname:a,search:u,hash:O,attributes:V}))};function Qn(y){return Cn()?xn(y):""}function xn(y){var a;let{pathname:u}=new URL((a=y.getOptionalString("app.baseUrl"))!=null?a:"/","http://sample.dev");return u=u.replace(/\/*$/,""),u}function rr({component:y,appIdentityProxy:a,children:u}){const[O,V]=(0,n.useState)(),Oe=(0,b.h_)(b.Ds),Fe=Qn(Oe);return O?(a.setTarget(O,{signOutTargetUrl:Fe||"/"}),n.createElement(n.Fragment,null,u)):n.createElement(y,{onSignInSuccess:V})}function Vn(y){const{Router:a,SignInPage:u}=(0,b.qD)().getComponents(),O=(0,b.h_)(b.Ds),V=xn(O),Oe=`${V}/*`,Fe=(0,n.useContext)(Ln);if(!Fe)throw new Error("AppRouter must be rendered within the AppProvider");const{routeObjects:Ze,appIdentityProxy:Pt}=Fe;return u?Cn()?n.createElement(a,null,n.createElement(Bn,{routeObjects:Ze}),n.createElement(rr,{component:u,appIdentityProxy:Pt},n.createElement(F.Z5,null,n.createElement(F.AW,{path:Oe,element:n.createElement(n.Fragment,null,y.children)})))):n.createElement(a,{basename:V},n.createElement(Bn,{routeObjects:Ze}),n.createElement(rr,{component:u,appIdentityProxy:Pt},y.children)):(Pt.setTarget({getUserId:()=>"guest",getIdToken:async()=>{},getProfile:()=>({email:"guest@example.com",displayName:"Guest"}),getProfileInfo:async()=>({email:"guest@example.com",displayName:"Guest"}),getBackstageIdentity:async()=>({type:"user",userEntityRef:"user:default/guest",ownershipEntityRefs:["user:default/guest"]}),getCredentials:async()=>({}),signOut:async()=>{}},{signOutTargetUrl:V||"/"}),Cn()?n.createElement(a,null,n.createElement(Bn,{routeObjects:Ze}),n.createElement(F.Z5,null,n.createElement(F.AW,{path:Oe,element:n.createElement(n.Fragment,null,y.children)}))):n.createElement(a,{basename:V},n.createElement(Bn,{routeObjects:Ze}),y.children))}function Gn(y){const a={};for(const O in y.collectors)y.collectors.hasOwnProperty(O)&&(a[O]=y.collectors[O]());const u=[{node:n.Children.toArray(y.root),parent:void 0,contexts:{}}];for(;u.length!==0;){const{node:O,parent:V,contexts:Oe}=u.shift();n.Children.forEach(O,Fe=>{if(!(0,n.isValidElement)(Fe))return;const Ze={};for(const Pt in a)if(a.hasOwnProperty(Pt)){const xt=a[Pt];Ze[Pt]=xt.visit(xt.accumulator,Fe,V,Oe[Pt])}for(const Pt of y.discoverers){const xt=Pt(Fe);xt&&u.push({node:xt,parent:Fe,contexts:Ze})}})}return Object.fromEntries(Object.entries(a).map(([O,V])=>[O,V.accumulator]))}function Wn(y,a){return()=>({accumulator:y(),visit:a})}function Hn(y){var a;return(a=y.props)==null?void 0:a.children}function cr(y){var a,u,O;if((a=y.props)!=null&&a.path&&((u=y.props)!=null&&u.element))return(O=y.props)==null?void 0:O.element}const qn=Wn(()=>new Set,(y,a)=>{const u=(0,b.IY)(a,"core.plugin");u&&y.add(u)}),Or=y=>{const{children:a}=y,u=(0,b.h_)(b.W0),O="with"in y?u.isActive(y.with):!u.isActive(y.without);return n.createElement(n.Fragment,null,O?a:null)};(0,b.R5)(Or,"core.featureFlagged",!0);const Zn={caseSensitive:!1,path:"*",element:"match-all",routeRefs:new Set,plugins:new Set};function Xe(y){var a,u;const O=y;return O!=null&&O.type?(u=(a=O.type.displayName)!=null?a:O.type.name)!=null?u:String(O.type):String(O)}const ge=y=>{const a=new Set;return y&&a.add(y),a};function gt(y,a=new Array){return n.Children.forEach(y,u=>{if(!(0,n.isValidElement)(u))return;const O=(0,b.IY)(u,"core.mountPoint");if(O){const V=(0,b.IY)(u,"core.plugin");a.push({routeRef:O,plugin:V})}gt(u.props.children,a)}),a}const l=Wn(()=>({paths:new Map,parents:new Map,objects:new Array}),(y,a,u,O)=>{var V,Oe,Fe,Ze,Pt,xt,pn;if(O!=null&&O.isElementAncestor)return O;if((u==null?void 0:u.props.element)===a)return{...O,isElementAncestor:!0};const Xt=(V=a.props)==null?void 0:V.path,Yt=(0,b.IY)(a,"core.mountPoint");if(Yt&&Xt)throw new Error(`Path property may not be set directly on a routable extension "${Xe(a)}"`);const fn=(Fe=(Oe=O==null?void 0:O.obj)==null?void 0:Oe.children)!=null?Fe:y.objects;if(Xt!==void 0){if(typeof Xt!="string")throw new Error(`Element path must be a string at "${Xe(a)}"`);const vn=Xt.startsWith("/")?Xt.slice(1):Xt,Yn=a.props.element;if((0,b.IY)(a,"core.gatherMountPoints")){if(Yn)throw new Error(`Mount point gatherers may not have an element prop "${Xe(a)}"`);const Nn={path:vn,element:"gathered",routeRefs:new Set,caseSensitive:Boolean((Ze=a.props)==null?void 0:Ze.caseSensitive),children:[Zn],plugins:new Set};return fn.push(Nn),{obj:Nn,gatherPath:vn,routeRef:O==null?void 0:O.routeRef,gatherRouteRef:O==null?void 0:O.routeRef}}if(Yn){const[Nn,...Xn]=gt(Yn);if(Xn.length>0)throw new Error(`Route element with path "${Xt}" may not contain multiple routable extensions`);if(!Nn)return O;const{routeRef:dr,plugin:pr}=Nn,aa={path:vn,element:"mounted",routeRefs:new Set([dr]),caseSensitive:Boolean((Pt=a.props)==null?void 0:Pt.caseSensitive),children:[Zn],plugins:ge(pr)};return fn.push(aa),y.paths.set(dr,vn),y.parents.set(dr,O==null?void 0:O.routeRef),{obj:aa,routeRef:dr!=null?dr:O==null?void 0:O.routeRef,gatherPath:vn,gatherRouteRef:O==null?void 0:O.gatherRouteRef}}}if(Yt){if((O==null?void 0:O.gatherPath)===void 0)throw new Error(`Routable extension "${Xe(a)}" with mount point "${Yt}" must be assigned a path`);(xt=O==null?void 0:O.obj)==null||xt.routeRefs.add(Yt);const vn=(0,b.IY)(a,"core.plugin");return vn&&((pn=O==null?void 0:O.obj)==null||pn.plugins.add(vn)),y.paths.set(Yt,O.gatherPath),y.parents.set(Yt,O==null?void 0:O.gatherRouteRef),{...O,routeRef:Yt}}return O}),o=Wn(()=>({paths:new Map,parents:new Map,objects:new Array}),(y,a,u,O)=>{var V,Oe,Fe,Ze,Pt;if((u==null?void 0:u.props.element)===a)return O;let xt=O==null?void 0:O.obj,pn=O==null?void 0:O.routeRef,Xt=O==null?void 0:O.sticky;const Yt=(V=a.props)==null?void 0:V.path,fn=(Oe=xt==null?void 0:xt.children)!=null?Oe:y.objects,vn=Boolean((Fe=a.props)==null?void 0:Fe.caseSensitive);let Yn=O==null?void 0:O.path;if((0,b.IY)(a,"core.gatherMountPoints")){if(!Yt)throw new Error("Mount point gatherer must have a path");Yn=Yt}const Nn=(Ze=a.props)==null?void 0:Ze.element;let Xn=(0,b.IY)(a,"core.mountPoint");if(!Xn&&(0,n.isValidElement)(Nn)&&(Xn=(0,b.IY)(Nn,"core.mountPoint")),Xn){let pr=Yt;if(Yn&&(pr?Yn=void 0:pr=Yn),!pr)throw new Error("Mounted routable extension must have a path");y.paths.set(Xn,pr),pn&&Xt?(y.parents.set(Xn,pn),Yt&&(pn=Xn,Xt=!1)):(y.parents.set(Xn,pn),pn=Xn),Yt?(xt={caseSensitive:vn,path:Yt,element:"mounted",routeRefs:new Set([Xn]),children:[Zn],plugins:ge((0,b.IY)(a.props.element,"core.plugin"))},fn.push(xt)):xt==null||xt.routeRefs.add(Xn)}if((0,b.IY)(a,"core.gatherMountPoints")&&(Xt=!0),(0,b.IY)(a,"core.gatherMountPoints")){if(!Yt)throw new Error("Mount point gatherer must have a path");Xn||(xt={caseSensitive:vn,path:Yt,element:"gathered",routeRefs:new Set,children:[Zn],plugins:((Pt=O==null?void 0:O.obj)==null?void 0:Pt.plugins)||new Set},fn.push(xt))}return{obj:xt,path:Yn,routeRef:pn,sticky:Xt}}),f=Wn(()=>new Set,(y,a)=>{if(a.type===Or){const u=a.props;y.add("with"in u?u.with:u.without)}}),I=(0,i.uW)("route-ref-type",()=>Symbol("route-ref-type"));function ee(y){return y[I]==="absolute"}function fe(y){return y[I]==="sub"}function Ae(y){return y[I]==="external"}function Be(...y){const a=y.join("/").replace(/\/\/+/g,"/");return a!=="/"&&a.endsWith("/")?a.slice(0,-1):a}function $t(y,a,u){let O,V="";if(ee(y))O=y;else if(fe(y))O=y.parent,V=y.path;else if(Ae(y)){const Ze=u.get(y);if(!Ze)return[void 0,""];if(ee(Ze))O=Ze;else if(fe(Ze))O=Ze.parent,V=Ze.path;else throw new Error(`ExternalRouteRef was bound to invalid target, ${Ze}`)}else throw y[I]?new Error(`Unknown or invalid route ref type, ${y[I]}`):new Error(`Unknown object passed to useRouteRef, got ${y}`);if(!O)return[void 0,""];const Oe=a.get(O);if(Oe===void 0)return[void 0,""];const Fe=Be(Oe,V);return[O,Fe]}function on(y,a,u,O,V){var Oe;const Fe=(Oe=(0,g.fp)(V,a))!=null?Oe:[],Ze=Array();let Pt=-1;for(let Xt=y;Xt&&(Pt=Fe.findIndex(Yt=>Yt.route.routeRefs.has(Xt)),Pt===-1);Xt=O.get(Xt))Ze.unshift(Xt);Ze.length===0&&(Pt-=1);const xt=Pt===-1?"":Fe[Pt].pathname,pn=Ze.slice(0,-1).map(Xt=>{const Yt=u.get(Xt);if(Yt===void 0)throw new Error(`No path for ${Xt}`);if(Yt.includes(":"))throw new Error(`Cannot route to ${y} with parent ${Xt} as it has parameters`);return Yt});return`${Be(xt,...pn)}/`}class Ft{constructor(a,u,O,V,Oe){this.routePaths=a,this.routeParents=u,this.routeObjects=O,this.routeBindings=V,this.appBasePath=Oe}resolve(a,u){const[O,V]=$t(a,this.routePaths,this.routeBindings);if(!O)return;let Oe;typeof u=="string"?Oe=this.trimPath(u):u.pathname?Oe={...u,pathname:this.trimPath(u.pathname)}:Oe=u;const Fe=this.appBasePath+on(O,Oe,this.routePaths,this.routeParents,this.routeObjects);return(...[Pt])=>Be(Fe,(0,g.Gn)(V,Pt))}trimPath(a){return a&&(a.startsWith(this.appBasePath)?a.slice(this.appBasePath.length):a)}}const mn=(0,i.CT)("routing-context"),nn=({routePaths:y,routeParents:a,routeObjects:u,routeBindings:O,basePath:V="",children:Oe})=>{const Fe=new Ft(y,a,u,O,V),Ze=(0,i.EI)({1:Fe});return n.createElement(mn.Provider,{value:Ze},Oe)};function kn(y,a){const u=new Set(a.values());u.delete(void 0);for(const O of a.keys()){if(u.has(O))continue;let V=O,Oe="";for(;V;){const Ze=y.get(V);if(Ze===void 0)throw new Error(`No path for ${V}`);Oe=Be(Ze,Oe),V=a.get(V)}const Fe=Oe.match(/:(\w+)/g);if(Fe){for(let Ze=0;Ze<Fe.length;Ze++)for(let Pt=Ze+1;Pt<Fe.length;Pt++)if(Fe[Pt]===Fe[Ze])throw new Error(`Parameter ${Fe[Pt]} is duplicated in path ${Oe}`)}}}function Tn(y,a){for(const u of a)if(u.externalRoutes){for(const[O,V]of Object.entries(u.externalRoutes))if(!V.optional&&!y.has(V))throw new Error(`External route '${O}' of the '${u.getId()}' plugin must be bound to a target route. See https://backstage.io/link?bind-routes for details.`)}}const ur=(0,i.CT)("app-context"),Kn=({appContext:y,children:a})=>{const u=(0,i.EI)({1:y});return n.createElement(ur.Provider,{value:u,children:a})};var vr=Object.defineProperty,Kr=(y,a,u)=>a in y?vr(y,a,{enumerable:!0,configurable:!0,writable:!0,value:u}):y[a]=u,er=(y,a,u)=>(Kr(y,typeof a!="symbol"?a+"":a,u),u);function tr(y){return new Error(`Tried to access IdentityApi ${y} before app was loaded`)}function Jn(y){console.warn(`WARNING: Call to ${y} is deprecated and will break in the future`)}class kr{constructor(){er(this,"target"),er(this,"waitForTarget"),er(this,"resolveTarget",()=>{}),er(this,"signOutTargetUrl","/"),this.waitForTarget=new Promise(a=>{this.resolveTarget=a})}setTarget(a,u){this.target=a,this.signOutTargetUrl=u.signOutTargetUrl,this.resolveTarget(a)}getUserId(){if(!this.target)throw tr("getUserId");if(!this.target.getUserId)throw new Error("IdentityApi does not implement getUserId");return Jn("getUserId"),this.target.getUserId()}getProfile(){if(!this.target)throw tr("getProfile");if(!this.target.getProfile)throw new Error("IdentityApi does not implement getProfile");return Jn("getProfile"),this.target.getProfile()}async getProfileInfo(){return this.waitForTarget.then(a=>a.getProfileInfo())}async getBackstageIdentity(){const a=await this.waitForTarget.then(u=>u.getBackstageIdentity());return a.userEntityRef.match(/^.*:.*\/.*$/)||console.warn(`WARNING: The App IdentityApi provided an invalid userEntityRef, '${a.userEntityRef}'. It must be a full Entity Reference of the form '<kind>:<namespace>/<name>'.`),a}async getCredentials(){return this.waitForTarget.then(a=>a.getCredentials())}async getIdToken(){return this.waitForTarget.then(a=>{if(!a.getIdToken)throw new Error("IdentityApi does not implement getIdToken");return Jn("getIdToken"),a.getIdToken()})}async signOut(){await this.waitForTarget.then(a=>a.signOut()),window.location.href=this.signOutTargetUrl}}function Sr(y,a,u){if(y!==void 0){const V=u.find(Oe=>Oe.id===y);if(V)return V}if(a){const V=u.find(Oe=>Oe.variant==="dark");if(V)return V}const O=u.find(V=>V.variant==="light");return O||u[0]}const gr=()=>{const y=(0,n.useMemo)(()=>window.matchMedia("(prefers-color-scheme: dark)"),[]),[a,u]=(0,n.useState)(y.matches);return(0,n.useEffect)(()=>{const O=V=>{u(V.matches)};return y.addListener(O),()=>{y.removeListener(O)}},[y]),a};function Gr({children:y}){const a=(0,b.h_)(b.hg),u=(0,x.Z)(a.activeThemeId$(),a.getActiveThemeId()),O=Boolean(window.matchMedia)?gr():!1,V=Sr(u,O,a.getInstalledThemes());if(!V)throw new Error("App has no themes");return n.createElement(V.Provider,{children:y})}const Hr=async(y=/*__APP_INJECTED_CONFIG_MARKER__*/"[{\"context\":\"app\",\"deprecatedKeys\":[],\"data\":{\"app\":{\"title\":\"Telefnica Colombia\",\"baseUrl\":\"http://localhost:3000\"},\"organization\":{\"name\":\"Telefnica Colombia\"},\"backend\":{\"baseUrl\":\"http://localhost:7007\"},\"integrations\":{\"azure\":[{\"host\":\"dev.azure.com\"}]},\"techdocs\":{\"builder\":\"local\"},\"auth\":{\"environment\":\"development\",\"providers\":{\"github\":{}}},\"permission\":{\"enabled\":false},\"catalog\":{\"import\":{\"entityFilename\":\"catalog-info.yaml\",\"pullRequestBranchName\":\"backstage-integration\"}}}}]"/*__INJECTED_END__*/)=>{const a=[{context:"app-config.yaml",data:{app:{title:"Telef\xF3nica Colombia",baseUrl:"http://localhost:3000"},organization:{name:"Telef\xF3nica Colombia"},backend:{baseUrl:"http://localhost:7007"},integrations:{azure:[{host:"dev.azure.com"}]},techdocs:{builder:"local"},auth:{environment:"development",providers:{github:{}}},catalog:{import:{entityFilename:"catalog-info.yaml",pullRequestBranchName:"backstage-integration"}}}}];if(!a)throw new Error("No static configuration provided");if(!Array.isArray(a))throw new Error("Static configuration has invalid format");const u=a.slice();if(y!=="__app_injected_runtime_config__".toLocaleUpperCase("en-US"))try{const V=JSON.parse(y);Array.isArray(V)?u.push(...V):u.push({data:V,context:"env"})}catch(V){throw new Error(`Failed to load runtime configuration, ${V}`)}const O=window.__APP_CONFIG__;return O&&u.push({context:"window",data:O}),u};var na=Object.defineProperty,ca=(y,a,u)=>a in y?na(y,a,{enumerable:!0,configurable:!0,writable:!0,value:u}):y[a]=u,Sa=(y,a,u)=>(ca(y,typeof a!="symbol"?a+"":a,u),u);class Ra{constructor(){Sa(this,"apis",[])}add(a,u){return this.apis.push([a.id,u]),u}build(){return new Nr(new Map(this.apis))}}class Nr{constructor(a){this.apis=a}static builder(){return new Ra}static from(a){return new Nr(new Map(a.map(([u,O])=>[u.id,O])))}static with(a,u){return new Nr(new Map([[a.id,u]]))}with(a,u){return new Nr(new Map([...this.apis,[a.id,u]]))}get(a){return this.apis.get(a.id)}}function Aa(y){const a=new Map;return y&&y({bind:(O,V)=>{for(const[Oe,Fe]of Object.entries(V)){const Ze=O[Oe];if(!Ze)throw new Error(`Key ${Oe} is not an existing external route`);if(!Fe&&!Ze.optional)throw new Error(`External route ${Oe} is required but was undefined`);Fe&&a.set(Ze,Fe)}}}),a}var wa=Object.defineProperty,Ta=(y,a,u)=>a in y?wa(y,a,{enumerable:!0,configurable:!0,writable:!0,value:u}):y[a]=u,Rr=(y,a,u)=>(Ta(y,typeof a!="symbol"?a+"":a,u),u),Ea=(y,a,u)=>{if(!a.has(y))throw TypeError("Cannot "+u)},ma=(y,a,u)=>(Ea(y,a,"read from private field"),u?u.call(y):a.get(y)),Ia=(y,a,u)=>{if(a.has(y))throw TypeError("Cannot add the same private member more than once");a instanceof WeakSet?a.add(y):a.set(y,u)},Ba=(y,a,u,O)=>(Ea(y,a,"write to private field"),O?O.call(y,u):a.set(y,u),u),Q;function re(y){const a=new URL(y);return a.protocol=document.location.protocol,a.hostname=document.location.hostname,a.port=document.location.port,a.toString().replace(/\/$/,"")}function ve(y,a,u){var O;const V=Boolean(y),Oe=(0,J.default)(y||(()=>Promise.resolve([])));let Fe;if(V&&Oe.loading){const{Progress:xt}=a;Fe=n.createElement(xt,null)}else if(Oe.error){const{BootErrorPage:xt}=a;Fe=n.createElement(xt,{step:"load-config",error:Oe.error})}const{ThemeProvider:Ze=Gr}=a;if(Fe)return{node:n.createElement(Pe,{apis:Nr.with(b.hg,u)},n.createElement(Ze,null,Fe))};let Pt;if((O=Oe.value)!=null&&O.length){const xt=v.fromConfigs(Oe.value),pn=xt.getOptionalString("app.baseUrl"),Xt=xt.getOptionalString("backend.baseUrl");let Yt=Oe.value;const fn={data:{},context:"relative-resolver"};if(pn&&Xt){const vn=new URL(pn).origin,Yn=new URL(Xt).origin;if(vn===Yn){const Nn=re(Xt);Xt!==Nn&&(fn.data.backend={baseUrl:Nn})}}if(pn){const vn=re(pn);pn!==vn&&(fn.data.app={baseUrl:vn})}Object.keys(fn.data).length&&(Yt=Yt.concat([fn])),Pt=v.fromConfigs(Yt)}else Pt=v.fromConfigs([]);return{api:Pt}}class _e{constructor(a){this.app=a}getPlugins(){return this.app.getPlugins()}getSystemIcon(a){return this.app.getSystemIcon(a)}getSystemIcons(){return this.app.getSystemIcons()}getComponents(){return this.app.getComponents()}}class et{constructor(a){Rr(this,"apiHolder"),Rr(this,"configApi"),Rr(this,"apis"),Rr(this,"icons"),Rr(this,"plugins"),Rr(this,"featureFlags"),Rr(this,"components"),Rr(this,"themes"),Rr(this,"configLoader"),Rr(this,"defaultApis"),Rr(this,"bindRoutes"),Rr(this,"appIdentityProxy",new kr),Rr(this,"apiFactoryRegistry"),Ia(this,Q,!1);var u,O,V,Oe,Fe;this.apis=(u=a.apis)!=null?u:[],this.icons=a.icons,this.plugins=new Set((O=a.plugins)!=null?O:[]),this.featureFlags=(V=a.featureFlags)!=null?V:[],this.components=a.components,this.themes=a.themes,this.configLoader=(Oe=a.configLoader)!=null?Oe:Hr,this.defaultApis=(Fe=a.defaultApis)!=null?Fe:[],this.bindRoutes=a.bindRoutes,this.apiFactoryRegistry=new we}getPlugins(){return Array.from(this.plugins)}getSystemIcon(a){return this.icons[a]}getSystemIcons(){return this.icons}getComponents(){return this.components}createRoot(a){const u=this.getProvider();return()=>n.createElement(u,null,a)}getProvider(){if(ma(this,Q))throw new Error("app.getProvider() or app.createRoot() has already been called, and can only be called once");Ba(this,Q,!0);const a=new _e(this);let u=!1;return({children:V})=>{const Oe=(0,n.useRef)(!0),Fe=(0,n.useMemo)(()=>In.createWithStorage(this.themes),[]),{routing:Ze,featureFlags:Pt,routeBindings:xt}=(0,n.useMemo)(()=>{const fn=Gn({root:V,discoverers:[Hn,cr],collectors:{routing:Cn()?o:l,collectedPlugins:qn,featureFlags:f}});return fn.collectedPlugins.forEach(vn=>this.plugins.add(vn)),this.verifyPlugins(this.plugins),this.getApiHolder(),{...fn,routeBindings:Aa(this.bindRoutes)}},[V]);u||(u=!0,kn(Ze.paths,Ze.parents),Tn(xt,this.plugins));const pn=ve(this.configLoader,this.components,Fe),Xt="api"in pn;if(Xt){const{api:fn}=pn;this.configApi=fn}if("node"in pn)return pn.node;if(Xt&&Oe.current){Oe.current=!1;const fn=this.getApiHolder().get(b.W0);if(fn){for(const Nn of this.featureFlags)fn.registerFlag({...Nn,pluginId:""});for(const Nn of this.plugins.values())if("getFeatureFlags"in Nn)for(const Xn of Nn.getFeatureFlags())fn.registerFlag({name:Xn.name,pluginId:Nn.getId()});else for(const Xn of Nn.output())Xn.type==="feature-flag"&&fn.registerFlag({name:Xn.name,pluginId:Nn.getId()});const vn=fn.getRegisteredFlags(),Yn=new Set(vn.map(Nn=>Nn.name));for(const Nn of Pt)Yn.has(Nn)||fn.registerFlag({name:Nn,pluginId:""})}}const{ThemeProvider:Yt=Gr}=this.components;return n.createElement(Pe,{apis:this.getApiHolder()},n.createElement(Kn,{appContext:a},n.createElement(Yt,null,n.createElement(nn,{routePaths:Ze.paths,routeParents:Ze.parents,routeObjects:Ze.objects,routeBindings:xt,basePath:Qn(pn.api)},n.createElement(Ln.Provider,{value:{routeObjects:Ze.objects,appIdentityProxy:this.appIdentityProxy}},V)))))}}getRouter(){return Vn}getApiHolder(){if(this.apiHolder){for(const a of this.plugins)for(const u of a.getApis())this.apiFactoryRegistry.get(u.api)||this.apiFactoryRegistry.register("default",u);return rt.validateFactories(this.apiFactoryRegistry,this.apiFactoryRegistry.getAllApis()),this.apiHolder}this.apiFactoryRegistry.register("static",{api:b.hg,deps:{},factory:()=>In.createWithStorage(this.themes)}),this.apiFactoryRegistry.register("static",{api:b.Ds,deps:{},factory:()=>{if(!this.configApi)throw new Error("Tried to access config API before config was loaded");return this.configApi}}),this.apiFactoryRegistry.register("static",{api:b.$4,deps:{},factory:()=>this.appIdentityProxy}),this.apiFactoryRegistry.register("default",{api:b.W0,deps:{},factory:()=>new _r});for(const a of this.defaultApis)this.apiFactoryRegistry.register("default",a);for(const a of this.plugins)for(const u of a.getApis())if(!this.apiFactoryRegistry.register("default",u))throw new Error(`Plugin ${a.getId()} tried to register duplicate or forbidden API factory for ${u.api}`);for(const a of this.apis)if(!this.apiFactoryRegistry.register("app",a))throw new Error(`Duplicate or forbidden API factory for ${a.api} in app`);return rt.validateFactories(this.apiFactoryRegistry,this.apiFactoryRegistry.getAllApis()),this.apiHolder=new rt(this.apiFactoryRegistry),this.apiHolder}verifyPlugins(a){const u=new Set;for(const O of a){const V=O.getId();if(u.has(V))throw new Error(`Duplicate plugin found '${V}'`);u.add(V)}}}Q=new WeakMap;function ht(y){return new et(y)}let pt=!1;const Ot=y=>{const a=(0,b.qD)(),{NotFoundErrorPage:u}=a.getComponents(),O=(0,n.useMemo)(()=>Cn(),[]),Oe=[...(0,b.vJ)(y.children,Fe=>Fe.getElements().flatMap(Ze=>{var Pt;let xt=Ze.props.path;if(xt==="")return[];xt=(Pt=xt==null?void 0:xt.replace(/\/\*$/,""))!=null?Pt:"/";let pn=O?Ze:Ze.props.element;return!O&&!pn&&(pn=Ze,pt||(console.warn("DEPRECATION WARNING: All elements within <FlatRoutes> must be of type <Route> with an element prop. Existing usages of <Navigate key=[path] to=[to] /> should be replaced with <Route path=[path] element={<Navigate to=[to] />} />."),pt=!0)),[{path:xt,element:pn,children:Ze.props.children?[{path:xt==="/"?"/":"*",element:Ze.props.children}]:void 0}]}).sort((Ze,Pt)=>Pt.path.localeCompare(Ze.path)).map(Ze=>({...Ze,path:Ze.path==="/"?"/":`${Ze.path}/*`}))),{path:"*",element:n.createElement(u,null)}];return(0,F.V$)(Oe)}},80236:function(Dt,E,e){"use strict";e.d(E,{BT:function(){return zs},BV:function(){return nl},Ex:function(){return pa},FW:function(){return Fl},Fw:function(){return Ze},GB:function(){return ca},Gk:function(){return wa},Hz:function(){return Qa},J3:function(){return dr},Kq:function(){return Ai},M6:function(){return pt},NX:function(){return Vn},Oh:function(){return bl},Oi:function(){return xn},Oo:function(){return Lo},Or:function(){return aa},Pd:function(){return wi},Pf:function(){return Na},Ph:function(){return fo},Qj:function(){return Mn},R6:function(){return Qo},SA:function(){return vn},SX:function(){return Be},T3:function(){return Ka},VC:function(){return Di},VY:function(){return xa},XF:function(){return rr},YE:function(){return Ws},aR:function(){return So},db:function(){return Xi},dh:function(){return Mi},fy:function(){return qi},g9:function(){return Cl},h4:function(){return Fa},hB:function(){return Gl},hu:function(){return ti},i9:function(){return gl},iA:function(){return Mo},in:function(){return xr},k2:function(){return Yo},mZ:function(){return Da},mf:function(){return Rs},mn:function(){return fe},nU:function(){return xt},oZ:function(){return jl},oz:function(){return al},qE:function(){return Tt},qt:function(){return os},r0:function(){return qa},rJ:function(){return va},rU:function(){return Cn},sidebarConfig:function(){return oa},sk:function(){return tr},tB:function(){return es},tR:function(){return Ns},tn:function(){return Ro},ub:function(){return mn},uw:function(){return ds},v7:function(){return qo},vK:function(){return Ti},wA:function(){return Ii},xT:function(){return Gi},yW:function(){return $o},yu:function(){return Nr},zG:function(){return Qi}});var n=e(30705),d=e(61837),p=e(37265),i=e(90436),c=e(87685),m=e(99688),b=e(19928),R=e.n(b),t=e(2784),U=e(43434),w=e(79692),N=e(60364),K=e(41128),k=e(15459),H=e(12420),C=e(76600),v=e(41547),F=e(77277),g=e(86689),J=e(72779),x=e.n(J),B=e(76635),T=e.n(B),S=e(73557),ie=e(39857),Te=e(16060),Pe=e(95544),qe=e(56553),xe=e(26639),ke=e(39595),rt=e(80030),Kt=e(19353),Nt=e(95074),rn=e(41156),D=e(88188),we=e(13725),ue=e(11105),Ke=e(97963),$=e(46506),A=e.n($),z=e(54073),ae=e.n(z),$e=e(10368),Ge=e(76985),ft=e(39829),nt=e(19574),Rt=e.n(nt),q=e(72164),de=e(93657),Se=e(60905),Ne=e(79265),st=e(85910),pe=e(52059),Je=e(38225),ot=e(11776),Qe=e(38402),Et=e(49378),dt=e(27616),Vt=e(8284),jt=e(70660),Ht=e(91750),Ye=e(38016),St=e(85256),Mt=e(28316),Bt=e(35292),Ee=e(48049),De=e(51209),ct=e(47418),Ve=e(28156),yt=e(8629),ye=e(49429),mt=e(38724),Ct=e(79249),_t=e(3806),it=e(32272),At=e(15277),zt=e.n(At),ze=e(29862),Re=e(52084),We=e(67358),je=e(94339),W=e(14503),_=e(24579),h=e(32552),M=e(27597),X=e(39307),j=e(21324),Z=e(7089),oe=e(42494),se=e(74603),Ue=e(56939),lt=e(12231),ne=e(73698),ce=e(72379),Ce=e(74600),Y=e.n(Ce),te=e(37390),me=e(97485),Ie=e(15584),Le=e(89571),bt=e(86136),ut=e(50758),Ut=e(79784),wt=e(19126),kt=e.n(wt),Qt=e(80079),un=e(18671),ln=e(6487),tn=e(99152),Zt=e(67222),Wt=e(21070),hn=e(90324),gn=e(98281),yn=e(33375),bn=e(44233),In=e(27604),An=e(36444),On=e(37971),Sn=e(59709),Dn=e(17373),sr=e(3702),zn=e(93111),Dr=e(44311),Vr=e.n(Dr),Zr=e(53305),lr=e(16173),Wr=e(50023),jn=e(4190),$r=e(44882),_r=e(18473),Lr=e(57998),Ar=e(83543),mr=e(59797),Br=e(26739),br=e(86619),Pr=e(98989),Fn=e(30195),wr=e(63955),Mr=e(74828),Fr=e(45455),Ur=e.n(Fr);function xr(r){const[s,P]=(0,t.useState)([]),L=(0,n.h_)(n.$v),{anchorOrigin:G={vertical:"top",horizontal:"center"},transientTimeoutMs:le}=r,he=le!=null?le:5e3;(0,t.useEffect)(()=>{const He=L.alert$().subscribe(Lt=>P(It=>It.concat(Lt)));return()=>{He.unsubscribe()}},[L]);const[Me]=s;if((0,t.useEffect)(()=>{if(Me&&Me.display==="transient"){const He=setTimeout(()=>{P(Lt=>{const It=Lt.filter(qt=>qt!==Me);return It.length===Lt.length?Lt:It})},he);return()=>clearTimeout(He)}},[Me,he]),s.length===0)return null;const tt=()=>{P(He=>He.filter(Lt=>Lt!==Me))};return t.createElement(p.Z,{open:!0,anchorOrigin:G},t.createElement(m.Z,{action:t.createElement(d.Z,{color:"inherit",size:"small",onClick:tt,"data-testid":"error-button-close"},t.createElement(c.Z,null)),severity:Me.severity},t.createElement(i.Z,{component:"span"},String(Me.message),s.length>1&&t.createElement("em",null,` (${s.length-1} older ${R()("message",s.length-1)})`))))}function be(r){let s=0;for(let L=0;L<r.length;L++)s=r.charCodeAt(L)+((s<<5)-s);let P="#";for(let L=0;L<3;L++){const G=s>>L*8&255;P+=`00${G.toString(16)}`.slice(-2)}return P}function at(r){var s;return(s=r.match(/(?<!\p{L})\p{L}/gu))==null?void 0:s.join("").slice(0,2)}const vt=(0,w.Z)(r=>({avatar:{width:"4rem",height:"4rem",color:r.palette.common.white},avatarText:{fontWeight:r.typography.fontWeightBold,letterSpacing:"1px",textTransform:"uppercase"}}),{name:"BackstageAvatar"});function Tt(r){const{displayName:s,picture:P,customStyles:L}=r,G=vt();let le={...L};const he={fontFamily:le.fontFamily,fontSize:le.fontSize,fontWeight:le.fontWeight};return P||(le={backgroundColor:be(s||""),...L}),t.createElement(U.Z,{alt:s,src:P,className:G.avatar,style:le},s&&t.createElement(i.Z,{variant:"h6",component:"span",className:G.avatarText,style:he},at(s)))}function an(){const[r]=(0,S.is)(t.createElement(S.AW,{index:!0,element:t.createElement("div",null)}));return!r.index}const Jt=(0,w.Z)({visuallyHidden:{clip:"rect(0 0 0 0)",clipPath:"inset(50%)",overflow:"hidden",position:"absolute",whiteSpace:"nowrap",height:1,width:1},externalLink:{position:"relative"}},{name:"Link"}),en=r=>/^([a-z+.-]+):/.test(r),En=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*\:/i,cn=window.open;if(cn&&!cn.__backstage){const r=function(...P){const L=String(P[0]);if(En.test(L))throw new Error("Rejected window.open() with a javascript: URL as a security precaution");return cn.apply(this,P)};r.__backstage=!0,window.open=r}const sn=()=>{try{return(0,n.h_)(n.Ds).getOptionalString("app.baseUrl")}catch{return}},Rn=()=>{var r;const s="http://sample.dev",P=(r=sn())!=null?r:"/",{pathname:L}=new URL(P,s);return(0,B.trimEnd)(L,"/")},_n=r=>{let s=String(r);const P=Rn(),L=en(s),G=s.startsWith(P);return!L&&!G&&(s=P.concat(s)),s},Ln=r=>{var s;return r instanceof Array?r.map(Ln).join(" ").trim():typeof r=="object"&&r?Ln((s=r==null?void 0:r.props)==null?void 0:s.children):["string","number"].includes(typeof r)?String(r):""},Cn=t.forwardRef(({onClick:r,noTrack:s,...P},L)=>{const G=Jt(),le=(0,n.z$)(),he=an()?_n(P.to):P.to,Me=Ln(P.children)||he,tt=en(he),He=tt&&!!/^https?:/.exec(he);if(En.test(he))throw new Error("Link component rejected javascript: URL as a security precaution");const Lt=It=>{r==null||r(It),s||le.captureEvent("click",Me,{attributes:{to:he}})};return tt?t.createElement(g.Z,{...He?{target:"_blank",rel:"noopener"}:{},...P,...P["aria-label"]?{"aria-label":`${P["aria-label"]}, Opens in a new window`}:{},ref:L,href:he,onClick:Lt,className:x()(G.externalLink,P.className)},P.children,t.createElement(i.Z,{component:"span",className:G.visuallyHidden},", Opens in a new window")):t.createElement(g.Z,{...P,ref:L,component:ie.rU,to:he,onClick:Lt})}),Un=t.forwardRef((r,s)=>t.createElement(Cn,{ref:s,...r,color:"initial"})),Mn=t.forwardRef((r,s)=>t.createElement(F.Z,{ref:s,component:Un,...r})),Bn=null;function Qn(r){const{text:s,tooltipDelay:P=1e3,tooltipText:L="Text copied to clipboard","aria-label":G="Copy text"}=r,le=(0,n.h_)(n.VE),[he,Me]=(0,t.useState)(!1),[{error:tt},He]=(0,Nt.Z)();(0,t.useEffect)(()=>{tt&&le.post(tt)},[tt,le]);const Lt=It=>{It.stopPropagation(),Me(!0),He(s)};return t.createElement(t.Fragment,null,t.createElement(rt.ZP,{id:"copy-test-tooltip",title:L,placement:"top",leaveDelay:P,onClose:()=>Me(!1),open:he},t.createElement(d.Z,{onClick:Lt,"aria-label":G},t.createElement(Kt.Z,null))))}function xn(r){const{text:s,language:P,showLineNumbers:L=!1,highlightedNumbers:G,customStyle:le,showCopyCodeButton:he=!1}=r,Me=(0,N.Z)(),tt=Me.palette.type==="dark"?xe.Z:ke.Z,He=Me.palette.type==="dark"?"#256bf3":"#e6ffed";return t.createElement(Pe.Z,{position:"relative"},t.createElement(qe.Z,{customStyle:le,language:P,style:tt,showLineNumbers:L,wrapLines:!0,lineNumberStyle:{color:Me.palette.textVerySubtle},lineProps:Lt=>G!=null&&G.includes(Lt)?{style:{backgroundColor:He}}:{}},s),he&&t.createElement(Pe.Z,{position:"absolute",top:0,right:0},t.createElement(Qn,{text:s})))}function rr(r){const{title:s,to:P}=r,L=(0,rn.Z)(G=>G.breakpoints.down("xs"));return P?L?t.createElement(d.Z,{component:ie.rU,color:"primary",title:s,size:"small",to:P},t.createElement(D.Z,null)):t.createElement(F.Z,{component:ie.rU,variant:"contained",color:"primary",to:P},s):null}var Vn;(r=>{(s=>{s.TOP_BOTTOM="TB",s.BOTTOM_TOP="BT",s.LEFT_RIGHT="LR",s.RIGHT_LEFT="RL"})(r.Direction||(r.Direction={})),(s=>{s.UP_LEFT="UL",s.UP_RIGHT="UR",s.DOWN_LEFT="DL",s.DOWN_RIGHT="DR"})(r.Alignment||(r.Alignment={})),(s=>{s.NETWORK_SIMPLEX="network-simplex",s.TIGHT_TREE="tight-tree",s.LONGEST_PATH="longest-path"})(r.Ranker||(r.Ranker={})),(s=>{s.LEFT="l",s.RIGHT="r",s.CENTER="c"})(r.LabelPosition||(r.LabelPosition={}))})(Vn||(Vn={}));const Gn=(0,w.Z)(r=>({node:{fill:r.palette.primary.light,stroke:r.palette.primary.light},text:{fill:r.palette.primary.contrastText}}),{name:"BackstageDependencyGraphDefaultNode"});function Wn({node:{id:r}}){const s=Gn(),[P,L]=t.useState(0),[G,le]=t.useState(0),he=t.useRef(null);t.useLayoutEffect(()=>{if(he.current){let{height:Lt,width:It}=he.current.getBBox();Lt=Math.round(Lt),It=Math.round(It),(Lt!==G||It!==P)&&(L(It),le(Lt))}},[P,G]);const Me=10,tt=P+Me*2,He=G+Me*2;return t.createElement("g",null,t.createElement("rect",{className:s.node,width:tt,height:He,rx:10}),t.createElement("text",{ref:he,className:s.text,y:He/2,x:tt/2,textAnchor:"middle",alignmentBaseline:"middle"},r))}const Hn="arrow-marker",cr="node",qn="edge",Or="label",Zn=(0,$e.Z)(r=>({node:{transition:`${r.transitions.duration.shortest}ms`}}),{name:"BackstageDependencyGraphNode"}),Xe=r=>t.createElement(Wn,{...r});function ge({render:r=Xe,setNode:s,node:P}){const{width:L,height:G,x:le=0,y:he=0}=P,Me=P,tt=Zn(),He=t.useRef(null);return t.useLayoutEffect(()=>{if(He.current){let{height:Lt,width:It}=He.current.getBBox();Lt=Math.round(Lt),It=Math.round(It),(Lt!==G||It!==L)&&s(P.id,{...P,height:Lt,width:It})}},[P,L,G,s]),t.createElement("g",{ref:He,"data-testid":cr,className:tt.node,transform:`translate(${le-L/2},${he-G/2})`},r({node:Me}))}const gt=(0,$e.Z)(r=>({text:{fill:r.palette.textContrast}}),{name:"BackstageDependencyGraphDefaultLabel"});function l({edge:{label:r}}){const s=gt();return t.createElement("text",{className:s.text,textAnchor:"middle"},r)}const o=(0,$e.Z)(r=>({path:{strokeWidth:1,stroke:r.palette.textSubtle,fill:"none",transition:`${r.transitions.duration.shortest}ms`},label:{transition:`${r.transitions.duration.shortest}ms`}}),{name:"BackstageDependencyGraphEdge"}),f=r=>t.createElement(l,{...r});function I({render:r=f,setEdge:s,id:P,edge:L,curve:G}){const{x:le=0,y:he=0,width:Me,height:tt,points:He}=L,Lt=L,It=o(),qt=t.useRef(null);t.useLayoutEffect(()=>{if(qt.current){let{height:Pn,width:wn}=qt.current.getBBox();Pn=Math.round(Pn),wn=Math.round(wn),(Pn!==tt||wn!==Me)&&s(P,{...L,height:Pn,width:wn})}},[L,tt,Me,s,P]);let Gt="";const dn=t.useMemo(()=>Ge.Z().x(Pn=>Pn.x).y(Pn=>Pn.y).curve(ft[G]),[G]);if(He){const Pn=He.filter(wn=>Rt()(wn.x)&&Rt()(wn.y));Gt=dn(Pn)||""}return t.createElement(t.Fragment,null,Gt&&t.createElement("path",{"data-testid":qn,className:It.path,d:Gt}),Lt.label?t.createElement("g",{ref:qt,"data-testid":Or,className:It.label,transform:`translate(${le},${he})`},r({edge:Lt})):null)}const ee="workspace";function fe(r){var s,P;const{edges:L,nodes:G,renderNode:le,direction:he=Vn.Direction.TOP_BOTTOM,align:Me,nodeMargin:tt=50,edgeMargin:He=10,rankMargin:Lt=50,paddingX:It=0,paddingY:qt=0,acyclicer:Gt,ranker:dn=Vn.Ranker.NETWORK_SIMPLEX,labelPosition:Pn=Vn.LabelPosition.RIGHT,labelOffset:wn=10,edgeRanks:ar=1,edgeWeight:Cr=1,renderLabel:jr,defs:$n,zoom:ir="enabled",curve:or="curveMonotoneX",fit:Yr="grow",...ra}=r,Xr=(0,Ke.Z)(),[Qr,Ma]=t.useState(100),[ua,io]=t.useState(100),nr=t.useRef(new(A()).graphlib.Graph),[Pa,ja]=t.useState(((s=nr.current.graph())==null?void 0:s.width)||0),[da,so]=t.useState(((P=nr.current.graph())==null?void 0:P.height)||0),[Tr,ia]=t.useState([]),[fa,ha]=t.useState([]),fr=Math.max(Pa,Qr),yr=Math.max(da,ua),Ca=Math.min(da,ua),ga=Yr==="grow"?yr:Ca,$a=t.useMemo(()=>ae()(Er=>{if(!Er)return;const Ir=ue.Z(Er),hr=ue.Z(Er.getElementById(ee));function qr(){Ir.call(we.sP().scaleExtent([1,1/0]).on("zoom",sa=>{sa.transform.x=Math.min(0,Math.max(sa.transform.x,fr-fr*sa.transform.k)),sa.transform.y=Math.min(0,Math.max(sa.transform.y,yr-yr*sa.transform.k)),hr.attr("transform",sa.transform)}))}ir==="enabled"?qr():ir==="enable-on-click"&&Ir.on("click",()=>qr());const{width:ea,height:Va}=Er.getBoundingClientRect();Qr!==ea&&Ma(ea),ua!==Va&&io(Va)},100),[ua,Qr,fr,yr,ir]),ii=t.useCallback(()=>{const Er=nr.current.nodes(),Ir=nr.current.edges();Er.forEach(hr=>{G.some(ea=>ea.id===hr)||nr.current.removeNode(hr)}),Ir.forEach(hr=>{L.some(ea=>ea.from===hr.v&&ea.to===hr.w)||nr.current.removeEdge(hr.v,hr.w)}),G.forEach(hr=>{const qr=nr.current.nodes().find(ea=>hr.id===ea);if(qr&&nr.current.node(qr)){const{width:ea,height:Va,x:sa,y:Yl}=nr.current.node(qr);nr.current.setNode(qr,{...hr,width:ea,height:Va,x:sa,y:Yl})}else nr.current.setNode(hr.id,{...hr,width:0,height:0})}),L.forEach(hr=>{nr.current.setEdge(hr.from,hr.to,{...hr,label:hr.label,width:0,height:0,labelpos:Pn,labeloffset:wn,weight:Cr,minlen:ar})})},[L,G,Pn,wn,Cr,ar]),La=t.useMemo(()=>ae()(()=>{A().layout(nr.current);const{height:Er,width:Ir}=nr.current.graph(),hr=Math.max(0,Er||0),qr=Math.max(0,Ir||0);ja(qr),so(hr),ia(nr.current.nodes()),ha(nr.current.edges())},250,{leading:!0}),[]);t.useEffect(()=>(nr.current.setGraph({rankdir:he,align:Me,nodesep:tt,edgesep:He,ranksep:Lt,marginx:It,marginy:qt,acyclicer:Gt,ranker:dn}),ii(),La(),La.cancel),[Gt,Me,he,He,It,qt,tt,Lt,dn,ii,La]);function Hl(Er,Ir){return nr.current.setNode(Er,Ir),La(),nr.current}function Jl(Er,Ir){return nr.current.setEdge(Er,Ir),La(),nr.current}return t.createElement("svg",{ref:$a,...ra,width:"100%",height:ga,viewBox:`0 0 ${fr} ${yr}`},t.createElement("defs",null,t.createElement("marker",{id:Hn,viewBox:"0 0 24 24",markerWidth:"14",markerHeight:"14",refX:"16",refY:"12",orient:"auto",markerUnits:"strokeWidth"},t.createElement("path",{fill:Xr.palette.textSubtle,d:"M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"})),$n),t.createElement("g",{id:ee},t.createElement("svg",{width:Pa,height:da,y:yr/2-da/2,x:fr/2-Pa/2,viewBox:`0 0 ${Pa} ${da}`},fa.map(Er=>{const Ir=nr.current.edge(Er);return Ir?t.createElement(I,{key:`${Er.v}-${Er.w}`,id:Er,setEdge:Jl,render:jr,edge:Ir,curve:or}):null}),Tr.map(Er=>{const Ir=nr.current.node(Er);return Ir?t.createElement(ge,{key:Er,setNode:Hl,render:le,node:Ir}):null}))))}const Ae=(0,w.Z)(r=>{var s,P;return{root:{padding:r.spacing(0),marginBottom:r.spacing(0),marginTop:r.spacing(0),display:"flex",flexFlow:"row nowrap"},topPosition:{position:"relative",marginBottom:r.spacing(6),marginTop:-r.spacing(3),zIndex:"unset"},icon:{fontSize:r.typography.h6.fontSize},content:{width:"100%",maxWidth:"inherit",flexWrap:"nowrap",color:r.palette.banner.text},message:{display:"flex",alignItems:"center","& a":{color:r.palette.banner.link}},button:{color:(s=r.palette.banner.closeButtonColor)!=null?s:"inherit"},info:{backgroundColor:r.palette.banner.info},error:{backgroundColor:r.palette.banner.error},warning:{backgroundColor:(P=r.palette.banner.warning)!=null?P:r.palette.banner.error}}},{name:"BackstageDismissableBanner"}),Be=r=>{var s;const{variant:P,message:L,id:G,fixed:le=!1}=r,he=Ae(),tt=(0,n.h_)(n.E6).forBucket("notifications"),He=(s=tt.snapshot("dismissedBanners").value)!=null?s:[],[Lt,It]=(0,t.useState)(new Set(He)),qt=(0,q.Z)(tt.observe$("dismissedBanners"));(0,t.useEffect)(()=>{var dn;if(qt!=null&&qt.value){const Pn=(dn=qt==null?void 0:qt.value)!=null?dn:[];It(new Set(Pn))}},[qt==null?void 0:qt.value]);const Gt=()=>{tt.set("dismissedBanners",[...Lt,G])};return t.createElement(p.Z,{anchorOrigin:le?{vertical:"bottom",horizontal:"center"}:{vertical:"top",horizontal:"center"},open:!Lt.has(G),classes:{root:x()(he.root,!le&&he.topPosition)}},t.createElement(de.Z,{classes:{root:x()(he.content,he[P]),message:he.message},message:L,action:[t.createElement(d.Z,{key:"dismiss",title:"Permanently dismiss this message",className:he.button,onClick:Gt},t.createElement(c.Z,{className:he.icon}))]}))},$t=(0,w.Z)({generalImg:{width:"95%",zIndex:2,position:"relative",left:"50%",top:"50%",transform:"translate(-50%, 15%)"}},{name:"BackstageEmptyStateImage"}),on=({missing:r})=>{const s=$t();switch(r){case"field":return t.createElement("img",{src:Ne,className:s.generalImg,alt:"annotation is missing"});case"info":return t.createElement("img",{src:st,alt:"no Information",className:s.generalImg});case"content":return t.createElement("img",{src:pe,alt:"create Component",className:s.generalImg});case"data":return t.createElement("img",{src:Je,alt:"no Build",className:s.generalImg});default:return null}},Ft=(0,w.Z)(r=>({root:{backgroundColor:r.palette.background.default,padding:r.spacing(2,0,0,0)},action:{marginTop:r.spacing(2)},imageContainer:{position:"relative"}}),{name:"BackstageEmptyState"});function mn(r){const{title:s,description:P,missing:L,action:G}=r,le=Ft();return t.createElement(Se.Z,{container:!0,direction:"row",justifyContent:"space-around",alignItems:"flex-start",className:le.root,spacing:2},t.createElement(Se.Z,{item:!0,xs:12,md:6},t.createElement(Se.Z,{container:!0,direction:"column"},t.createElement(Se.Z,{item:!0,xs:!0},t.createElement(i.Z,{variant:"h5"},s)),t.createElement(Se.Z,{item:!0,xs:!0},t.createElement(i.Z,{variant:"body1"},P)),t.createElement(Se.Z,{item:!0,xs:!0,className:le.action},G))),t.createElement(Se.Z,{item:!0,xs:12,md:6,className:le.imageContainer},typeof L=="string"?t.createElement(on,{missing:L}):L.customImage))}const nn=`apiVersion: backstage.io/v1alpha1
kind: Component
metadata:
  name: example
  description: example.com
  annotations:
    ANNOTATION: value
spec:
  type: website
  lifecycle: production
  owner: user:guest`,kn=/^.*ANNOTATION.*$/m,Tn=nn.match(kn)[0],ur=nn.split(`
`).findIndex(r=>kn.test(r)),Kn=(0,w.Z)(r=>({code:{borderRadius:6,margin:r.spacing(2,0),background:r.palette.type==="dark"?"#444":r.palette.common.white}}),{name:"BackstageMissingAnnotationEmptyState"});function vr(r){return Array.from(Array(r+1).keys(),s=>s+ur)}function Kr(r){const s=r.map(P=>Tn.replace("ANNOTATION",P)).join(`
`);return nn.replace(Tn,s)}function er(r){const s=r.length<=1;return t.createElement(t.Fragment,null,"The ",s?"annotation":"annotations"," ",r.map(P=>t.createElement("code",null,P)).reduce((P,L)=>t.createElement(t.Fragment,null,P,", ",L))," ",s?"is":"are"," missing. You need to add the"," ",s?"annotation":"annotations"," to your component if you want to enable this tool.")}function tr(r){const{annotation:s,readMoreUrl:P}=r,L=Array.isArray(s)?s:[s],G=P||"https://backstage.io/docs/features/software-catalog/well-known-annotations",le=Kn();return t.createElement(mn,{missing:"field",title:"Missing Annotation",description:er(L),action:t.createElement(t.Fragment,null,t.createElement(i.Z,{variant:"body1"},"Add the annotation to your component YAML as shown in the highlighted example below:"),t.createElement(Pe.Z,{className:le.code},t.createElement(xn,{text:Kr(L),language:"yaml",showLineNumbers:!0,highlightedNumbers:vr(L.length),customStyle:{background:"inherit",fontSize:"115%"}})),t.createElement(F.Z,{color:"primary",component:Cn,to:G},"Read more"))})}const Jn=(r,s)=>(s.palette.type==="light"?K._j:K.$n)(s.palette[r].light,.6),kr=(r,s)=>(s.palette.type==="light"?K.$n:K._j)(s.palette[r].light,.9),Sr=(0,w.Z)(r=>({root:{marginRight:r.spacing(1),fill:({severity:s})=>Jn(s,r)}})),gr=({severity:r})=>{const s=Sr({severity:r});return t.createElement(Ht.Z,{classes:s})},Gr=({severity:r})=>{const s=Sr({severity:r});return t.createElement(Ye.Z,{classes:s})},Hr=(0,w.Z)(r=>({panel:{backgroundColor:({severity:s})=>kr(s,r),color:({severity:s})=>Jn(s,r),verticalAlign:"middle"},summary:{display:"flex",flexDirection:"row"},summaryText:{color:({severity:s})=>Jn(s,r),fontWeight:r.typography.fontWeightBold},message:{width:"100%",display:"block",color:({severity:s})=>Jn(s,r),backgroundColor:({severity:s})=>kr(s,r)},details:{width:"100%",display:"block",color:r.palette.textContrast,backgroundColor:r.palette.background.default,border:`1px solid ${r.palette.border}`,padding:r.spacing(2),fontFamily:"sans-serif"}}),{name:"BackstageWarningPanel"}),na=r=>r.charAt(0).toLocaleUpperCase("en-US")+r.slice(1);function ca(r){const{severity:s="warning",title:P,message:L,children:G,defaultExpanded:le}=r,he=Hr({severity:s}),Me=na(s)+(P?`: ${P}`:"");return t.createElement(dt.Z,{defaultExpanded:le!=null?le:!1,className:he.panel,role:"alert"},t.createElement(Vt.Z,{expandIcon:t.createElement(Gr,{severity:s}),className:he.summary},t.createElement(gr,{severity:s}),t.createElement(i.Z,{className:he.summaryText,variant:"subtitle1"},Me)),(L||G)&&t.createElement(jt.Z,null,t.createElement(Se.Z,{container:!0},L&&t.createElement(Se.Z,{item:!0,xs:12},t.createElement(i.Z,{className:he.message,variant:"body1"},L)),G&&t.createElement(Se.Z,{item:!0,xs:12,className:he.details},G))))}const Sa=(0,w.Z)(r=>({text:{fontFamily:"monospace",whiteSpace:"pre",overflowX:"auto",marginRight:r.spacing(2)},divider:{margin:r.spacing(2)}}),{name:"BackstageErrorPanel"}),Ra=({error:r,message:s,stack:P,children:L})=>{const G=Sa();return t.createElement(ot.Z,{dense:!0},t.createElement(Qe.Z,{alignItems:"flex-start"},t.createElement(Et.Z,{classes:{secondary:G.text},primary:"Error",secondary:r}),t.createElement(Qn,{text:r})),t.createElement(Qe.Z,{alignItems:"flex-start"},t.createElement(Et.Z,{classes:{secondary:G.text},primary:"Message",secondary:s}),t.createElement(Qn,{text:s})),P&&t.createElement(Qe.Z,{alignItems:"flex-start"},t.createElement(Et.Z,{classes:{secondary:G.text},primary:"Stack Trace",secondary:P}),t.createElement(Qn,{text:P})),L)};function Nr(r){const{title:s,error:P,defaultExpanded:L,children:G}=r;return t.createElement(ca,{severity:"error",title:s!=null?s:P.message,defaultExpanded:L},t.createElement(Ra,{error:P.name,message:P.message,stack:P.stack,children:G}))}const Aa=(0,w.Z)(r=>({text:{fontFamily:"monospace",whiteSpace:"pre",overflowX:"auto",marginRight:r.spacing(2)},divider:{margin:r.spacing(2)}}),{name:"BackstageResponseErrorPanel"});function wa(r){var s;const{title:P,error:L,defaultExpanded:G}=r,le=Aa();if(L.name!=="ResponseError")return t.createElement(Nr,{title:P!=null?P:L.message,defaultExpanded:G,error:L});const{body:he,cause:Me}=L,{request:tt,response:He}=he,Lt=`${He.statusCode}: ${Me.name}`,It=tt&&`${tt.method} ${tt.url}`,qt=Me.message.replace(/\\n/g,`
`),Gt=(s=Me.stack)==null?void 0:s.replace(/\\n/g,`
`),dn=JSON.stringify(he,void 0,2);return t.createElement(Nr,{title:P!=null?P:L.message,defaultExpanded:G,error:{name:Lt,message:qt,stack:Gt}},It&&t.createElement(Qe.Z,{alignItems:"flex-start"},t.createElement(Et.Z,{classes:{secondary:le.text},primary:"Request",secondary:tt?`${It}`:void 0}),t.createElement(Qn,{text:It})),t.createElement(t.Fragment,null,t.createElement(St.Z,{component:"li",className:le.divider}),t.createElement(Qe.Z,{alignItems:"flex-start"},t.createElement(Et.Z,{classes:{secondary:le.text},primary:"Full Error as JSON"})),t.createElement(xn,{language:"json",text:dn,showCopyCodeButton:!0})))}function Ta(r){const s=document.createElement("div");return s.setAttribute("id",r),s}function Rr(r){document.body.insertBefore(r,document.body.lastElementChild.nextElementSibling)}function Ea(r){const s=useRef(null);useEffect(function(){const G=document.querySelector(`#${r}`),le=G||Ta(r);return G||Rr(le),le.appendChild(s.current),function(){s.current.remove(),le.childNodes.length===-1&&le.remove()}},[r]);function P(){return s.current||(s.current=document.createElement("div")),s.current}return P()}const ma="core.calloutSeen";function Ia(){const[r,s]=useState(()=>{const L=localStorage.getItem(ma);return L?JSON.parse(L):{}}),P=useCallback((L,G)=>{const le=localStorage.getItem(ma),Me={...le?JSON.parse(le):{},[L]:G};s(Me),localStorage.setItem(ma,JSON.stringify(Me))},[]);return{states:r,setState:P}}function Ba(r){const{states:s,setState:P}=Ia(),L=useCallback(()=>{P(r,!0)},[P,r]);return{seen:s[r]===!0,markSeen:L}}function Q(r){const{seen:s,markSeen:P}=Ba(r);return{show:s===!1,hide:P}}const re=(0,w.Z)(r=>({"@keyframes pulsateSlightly":{"0%":{transform:"scale(1.0)"},"100%":{transform:"scale(1.1)"}},"@keyframes pulsateAndFade":{"0%":{transform:"scale(1.0)",opacity:.9},"100%":{transform:"scale(1.5)",opacity:0}},featureWrapper:{position:"relative"},backdrop:{zIndex:2e3,position:"fixed",overflow:"hidden",left:0,right:0,top:0,bottom:0},dot:{position:"absolute",backgroundColor:"transparent",borderRadius:"100%",border:"1px solid rgba(103, 146, 180, 0.98)",boxShadow:"0px 0px 0px 20000px rgba(0, 0, 0, 0.5)",zIndex:2001,transformOrigin:"center center",animation:"$pulsateSlightly 1744ms 1.2s cubic-bezier(0.4, 0, 0.2, 1) alternate infinite"},pulseCircle:{width:"100%",height:"100%",backgroundColor:"transparent",borderRadius:"100%",border:`2px solid ${r.palette.common.white}`,zIndex:2001,transformOrigin:"center center",animation:"$pulsateAndFade 872ms 1.2s cubic-bezier(0.4, 0, 0.2, 1) infinite"},text:{position:"absolute",color:r.palette.common.white,zIndex:2003}}),{name:"BackstageFeatureCalloutCircular"});function ve(r){const{featureId:s,title:P,description:L,children:G}=r,{show:le,hide:he}=Q(s),Me=Ea("core.callout"),tt=useRef(null),[He,Lt]=useState(),It=re(),qt=useCallback(()=>{if(tt.current){const Gt=tt.current.getBoundingClientRect(),dn=Math.max(Gt.width,Gt.height),Pn=800,wn=Gt.x-(dn-Gt.width)/2-Pn,ar=Gt.y-(dn-Gt.height)/2-Pn,Cr=dn+2*Pn,jr=450,$n=Gt.x+Gt.width/2-jr,ir=Gt.y-(dn-Gt.height)/2+dn+20;Lt({dotLeft:wn,dotTop:ar,dotSize:Cr,borderWidth:Pn,textTop:ir,textLeft:$n,textWidth:jr})}},[]);return useEffect(()=>(window.addEventListener("resize",qt),window.addEventListener("scroll",qt),()=>{window.removeEventListener("resize",qt),window.removeEventListener("scroll",qt)}),[qt]),useLayoutEffect(qt,[tt.current,qt]),le?React.createElement(React.Fragment,null,React.createElement(Box,{className:It.featureWrapper,ref:tt},G),createPortal(React.createElement(Box,{className:It.backdrop},React.createElement(ClickAwayListener,{onClickAway:he},React.createElement(React.Fragment,null,React.createElement(Box,{className:It.dot,"data-testid":"dot",style:{left:He==null?void 0:He.dotLeft,top:He==null?void 0:He.dotTop,width:He==null?void 0:He.dotSize,height:He==null?void 0:He.dotSize,borderWidth:He==null?void 0:He.borderWidth},onClick:he,onKeyDown:he,role:"button",tabIndex:0},React.createElement(Box,{className:It.pulseCircle})),React.createElement(Box,{className:It.text,"data-testid":"text",style:{left:He==null?void 0:He.textLeft,top:He==null?void 0:He.textTop,width:He==null?void 0:He.textWidth}},React.createElement(Typography,{variant:"h2",paragraph:!0},P),React.createElement(Typography,null,L))))),Me)):React.createElement(React.Fragment,null,G)}const _e=(0,w.Z)(r=>({link:{display:"grid",justifyItems:"center",gridGap:4,textAlign:"center"},disabled:{color:r.palette.text.secondary,cursor:"default"},primary:{color:r.palette.primary.main},secondary:{color:r.palette.secondary.main},label:{textTransform:"uppercase",fontWeight:r.typography.fontWeightBold,letterSpacing:1.2}}),{name:"BackstageIconLinkVertical"});function et({color:r="primary",disabled:s=!1,href:P="#",icon:L=t.createElement(Bt.Z,null),label:G,onClick:le,title:he}){const Me=_e();return s?t.createElement(Pe.Z,{title:he,className:x()(Me.link,Me.disabled)},L,t.createElement(i.Z,{variant:"caption",component:"span",className:Me.label},G)):t.createElement(Cn,{title:he,className:x()(Me.link,Me[r]),to:P,onClick:le},L,t.createElement(i.Z,{variant:"caption",component:"span",className:Me.label},G))}const ht=(0,w.Z)(r=>({links:{margin:r.spacing(2,0),display:"grid",gridAutoFlow:"column",gridAutoColumns:"min-content",gridGap:r.spacing(3)}}),{name:"BackstageHeaderIconLinkRow"});function pt(r){const{links:s}=r,P=ht();return t.createElement("nav",{className:P.links},s.map((L,G)=>t.createElement(et,{key:G+1,...L})))}const Ot=r=>{const s=r==="dark"?"16%":"97%";return`
    hsl(0, 0%, ${s}) 0%,
    hsla(0, 0%, ${s}, 0.987) 8.1%,
    hsla(0, 0%, ${s}, 0.951) 15.5%,
    hsla(0, 0%, ${s}, 0.896) 22.5%,
    hsla(0, 0%, ${s}, 0.825) 29%,
    hsla(0, 0%, ${s}, 0.741) 35.3%,
    hsla(0, 0%, ${s}, 0.648) 41.2%,
    hsla(0, 0%, ${s}, 0.55) 47.1%,
    hsla(0, 0%, ${s}, 0.45) 52.9%,
    hsla(0, 0%, ${s}, 0.352) 58.8%,
    hsla(0, 0%, ${s}, 0.259) 64.7%,
    hsla(0, 0%, ${s}, 0.175) 71%,
    hsla(0, 0%, ${s}, 0.104) 77.5%,
    hsla(0, 0%, ${s}, 0.049) 84.5%,
    hsla(0, 0%, ${s}, 0.013) 91.9%,
    hsla(0, 0%, ${s}, 0) 100%
  `},y=100,a=10,u=(0,w.Z)(r=>({root:{position:"relative",display:"flex",flexFlow:"row nowrap",alignItems:"center"},container:{overflow:"auto",scrollbarWidth:0,"&::-webkit-scrollbar":{display:"none"}},fade:{position:"absolute",width:y,height:`calc(100% + ${a}px)`,transition:"opacity 300ms",pointerEvents:"none"},fadeLeft:{left:-a,background:`linear-gradient(90deg, ${Ot(r.palette.type)})`},fadeRight:{right:-a,background:`linear-gradient(270deg, ${Ot(r.palette.type)})`},fadeHidden:{opacity:0},button:{position:"absolute"},buttonLeft:{left:-r.spacing(2)},buttonRight:{right:-r.spacing(2)}}),{name:"BackstageHorizontalScrollGrid"});function O(r){const[[s,P],L]=React.useState([0,0]);return React.useLayoutEffect(()=>{const G=r.current;if(!G){L([0,0]);return}const le=()=>{const he=G.scrollLeft,Me=G.scrollWidth-G.offsetWidth-G.scrollLeft;L([he,Me])};return le(),G.addEventListener("scroll",le),window.addEventListener("resize",le),()=>{G.removeEventListener("scroll",le),window.removeEventListener("resize",le)}},[r]),[s,P]}function V(r,s,P){const[L,G]=React.useState(0);return React.useLayoutEffect(()=>{if(L===0)return;const le=window.performance.now(),he=requestAnimationFrame(Me=>{if(!r.current)return;const tt=Me-le,He=Math.abs(L)*tt/s,It=Math.max(P,He)*Math.sign(L);r.current.scrollBy({left:It});const qt=L-It;Math.sign(L)!==Math.sign(qt)?G(0):G(qt)});return()=>cancelAnimationFrame(he)},[r,L,s,P]),G}function Oe(r){const{scrollStep:s=100,scrollSpeed:P=50,minScrollDistance:L=5,children:G,...le}=r,he=u(r),Me=React.useRef(),[tt,He]=O(Me),Lt=V(Me,P,L),It=qt=>{Me.current&&Lt(qt?s:-s)};return React.createElement(Box,{...le,className:he.root},React.createElement(Grid,{container:!0,direction:"row",wrap:"nowrap",className:he.container,ref:Me},G),React.createElement(Box,{className:classNames(he.fade,he.fadeLeft,{[he.fadeHidden]:tt===0})}),React.createElement(Box,{className:classNames(he.fade,he.fadeRight,{[he.fadeHidden]:He===0})}),tt>0&&React.createElement(IconButton,{title:"Scroll Left",onClick:()=>It(!1),className:classNames(he.button,he.buttonLeft,{})},React.createElement(ChevronLeftIcon,null)),He>0&&React.createElement(IconButton,{title:"Scroll Right",onClick:()=>It(!0),className:classNames(he.button,he.buttonRight,{})},React.createElement(ChevronRight,null)))}const Fe=(0,w.Z)(r=>({alpha:{color:r.palette.common.white,fontFamily:"serif",fontWeight:"normal",fontStyle:"italic"},beta:{color:"#4d65cc",fontFamily:"serif",fontWeight:"normal",fontStyle:"italic"}}),{name:"BackstageLifecycle"});function Ze(r){const s=Fe(r),{shorthand:P,alpha:L}=r;return P?t.createElement(i.Z,{component:"span",className:s[L?"alpha":"beta"],style:{fontSize:"120%"}},L?t.createElement(t.Fragment,null,"\u03B1"):t.createElement(t.Fragment,null,"\u03B2")):t.createElement(i.Z,{component:"span",className:s[L?"alpha":"beta"]},L?"Alpha":"Beta")}const Pt=(0,t.lazy)(()=>e.e(4612).then(e.bind(e,64612)).then(r=>({default:r.RealLogViewer})));function xt(r){const{Progress:s}=(0,n.qD)().getComponents();return t.createElement(t.Suspense,{fallback:t.createElement(s,null)},t.createElement(Pt,{...r}))}const pn=(0,w.Z)(r=>({markdown:{"& table":{borderCollapse:"collapse",border:`1px solid ${r.palette.border}`},"& th, & td":{border:`1px solid ${r.palette.border}`,padding:r.spacing(1)},"& td":{wordBreak:"break-word",overflow:"hidden",verticalAlign:"middle",lineHeight:"1",margin:0,padding:r.spacing(3,2,3,2.5),borderBottom:0},"& th":{backgroundColor:r.palette.background.paper},"& tr":{backgroundColor:r.palette.background.paper},"& tr:nth-child(odd)":{backgroundColor:r.palette.background.default},"& a":{color:r.palette.link},"& img":{maxWidth:"100%"}}}),{name:"BackstageMarkdownContent"}),Xt=(r,s)=>s?typeof s=="string"?r+s:t.Children.toArray(s.props.children).reduce(Xt,r):r,Yt=({level:r,children:s})=>{const G=t.Children.toArray(s).reduce(Xt,"").toLocaleLowerCase("en-US").replace(/\W/g,"-");return t.createElement(`h${r}`,{id:G},s)},fn={code:({inline:r,className:s,children:P,...L})=>{const G=String(P).replace(/\n+$/,""),le=/language-(\w+)/.exec(s||"");return!r&&le?t.createElement(xn,{language:le[1],text:G}):t.createElement("code",{className:s,...L},P)},h1:Yt,h2:Yt,h3:Yt,h4:Yt,h5:Yt,h6:Yt};function vn(r){const{content:s,dialect:P="gfm",linkTarget:L,transformLinkUri:G,transformImageUri:le,className:he}=r,Me=pn();return t.createElement(ct.D,{remarkPlugins:P==="gfm"?[Ve.Z]:[],className:`${Me.markdown} ${he}`,children:s,components:fn,linkTarget:L,transformLinkUri:G,transformImageUri:le})}const Yn=(0,w.Z)(r=>({root:{paddingLeft:r.spacing(3)}}),{name:"BackstageLoginRequestListItem"}),Nn=({request:r,busy:s,setBusy:P})=>{const L=Yn(),[G,le]=(0,t.useState)(),he=async()=>{P(!0);try{await r.trigger()}catch(tt){le((0,it.VZ)(tt)?tt.message:"An unspecified error occurred")}finally{P(!1)}},Me=r.provider.icon;return t.createElement(Qe.Z,{disabled:s,classes:{root:L.root}},t.createElement(_t.Z,null,t.createElement(Me,{fontSize:"large"})),t.createElement(Et.Z,{primary:r.provider.title,secondary:G&&t.createElement(i.Z,{color:"error"},G)}),t.createElement(F.Z,{color:"primary",variant:"contained",onClick:he},"Log in"))},Xn=(0,w.Z)(r=>({dialog:{paddingTop:r.spacing(1)},title:{minWidth:0},titleHeading:{fontSize:r.typography.h6.fontSize},contentList:{padding:0},actionButtons:{padding:r.spacing(2,0)}}),{name:"OAuthRequestDialog"});function dr(r){var s;const P=Xn(),[L,G]=(0,t.useState)(!1),le=(0,n.h_)(n.ZM),Me=(s=(0,n.h_)(n.Ds).getOptionalBoolean("enableExperimentalRedirectFlow"))!=null?s:!1,tt=(0,q.Z)((0,t.useMemo)(()=>le.authRequest$(),[le]),[]),He=()=>{tt.forEach(Lt=>Lt.reject())};return t.createElement(yt.Z,{open:Boolean(tt.length),fullWidth:!0,maxWidth:"xs",classes:{paper:P.dialog},"aria-labelledby":"oauth-req-dialog-title"},t.createElement("main",null,t.createElement(Ct.Z,{classes:{root:P.title},id:"oauth-req-dialog-title"},t.createElement(i.Z,{className:P.titleHeading,variant:"h1",variantMapping:{h1:"span"}},"Login Required"),Me?t.createElement(i.Z,null,"This will trigger a http redirect to OAuth Login."):null),t.createElement(mt.Z,{dividers:!0,classes:{root:P.contentList}},t.createElement(ot.Z,null,tt.map(Lt=>t.createElement(Nn,{key:Lt.provider.title,request:Lt,busy:L,setBusy:G}))))),t.createElement(ye.Z,{classes:{root:P.actionButtons}},t.createElement(F.Z,{onClick:He},"Reject All")))}const pr=(0,w.Z)({container:{overflow:"visible !important"}},{name:"BackstageOverflowTooltip"});function aa(r){var s;const[P,L]=(0,t.useState)(!1),G=(0,ze.t)(),le=pr(),he=Me=>{G()&&L(Me)};return t.createElement(rt.ZP,{title:(s=r.title)!=null?s:r.text||"",placement:r.placement,disableHoverListener:!P},t.createElement(zt(),{text:r.text,line:r.line,onToggled:he,containerClassName:le.container}))}function pa(r){const s=(0,N.Z)(),[P,L]=(0,t.useState)(!1);return(0,t.useEffect)(()=>{const G=setTimeout(()=>L(!0),s.transitions.duration.short);return()=>clearTimeout(G)},[s.transitions.duration.short]),P?t.createElement(We.Z,{...r,"data-testid":"progress"}):t.createElement(Pe.Z,{display:"none"})}const li=(0,w.Z)(r=>({root:{maxWidth:"fit-content",padding:r.spacing(2,2,2,2.5)},boxTitle:{margin:0,color:r.palette.textSubtle},arrow:{color:r.palette.textSubtle}}),{name:"BackstageBottomLink"});function lo(r){const{link:s,title:P,onClick:L}=r,G=li();return t.createElement(Pe.Z,null,t.createElement(St.Z,null),t.createElement(Cn,{to:s,onClick:L,underline:"none"},t.createElement(Pe.Z,{display:"flex",alignItems:"center",className:G.root},t.createElement(Pe.Z,{className:G.boxTitle,fontWeight:"fontWeightBold",m:1},t.createElement(i.Z,null,t.createElement("strong",null,P))),t.createElement(M.Z,{className:G.arrow}))))}const ci=r=>{const{slackChannel:s}=r;if(s){if(typeof s=="string")return t.createElement(i.Z,null,"Please contact ",s," for help.");if(!s.href)return t.createElement(i.Z,null,"Please contact ",s.name," for help.")}else return null;return t.createElement(Mn,{to:s.href,variant:"contained"},s.name)},co=class extends t.Component{constructor(s){super(s),this.state={error:void 0,errorInfo:void 0}}componentDidCatch(s,P){console.error(`ErrorBoundary, error: ${s}, info: ${P}`),this.setState({error:s,errorInfo:P})}render(){const{slackChannel:s,children:P}=this.props,{error:L}=this.state;return L?t.createElement(Nr,{title:"Something Went Wrong",error:L},t.createElement(ci,{slackChannel:s})):P}},ui=(0,w.Z)(r=>({noPadding:{padding:0,"&:last-child":{paddingBottom:0}},header:{padding:r.spacing(2,2,2,2.5)},headerTitle:{fontWeight:r.typography.fontWeightBold},headerSubheader:{paddingTop:r.spacing(1)},headerAvatar:{},headerAction:{},headerContent:{},subheader:{display:"flex"}}),{name:"BackstageInfoCard"}),di=(0,k.Z)(r=>({root:{display:"inline-block",padding:r.spacing(8,8,0,0),float:"right"}}),{name:"BackstageInfoCardCardActionsTopRight"})(W.Z),uo={card:{flex:{display:"flex",flexDirection:"column"},fullHeight:{display:"flex",flexDirection:"column",height:"100%"},gridItem:{display:"flex",flexDirection:"column",height:"calc(100% - 10px)",marginBottom:"10px",breakInside:"avoid-page","@media print":{height:"auto"}}},cardContent:{fullHeight:{flex:1},gridItem:{flex:1}}};function va(r){const{title:s,subheader:P,divider:L=!0,deepLink:G,slackChannel:le,errorBoundaryProps:he,variant:Me,children:tt,headerStyle:He,headerProps:Lt,icon:It,action:qt,actionsClassName:Gt,actions:dn,cardClassName:Pn,actionsTopRight:wn,className:ar,noPadding:Cr,titleTypographyProps:jr}=r,$n=ui();let ir={},or={};Me&&Me.split(/[\s]+/g).forEach(Qr=>{ir={...ir,...uo.card[Qr]},or={...or,...uo.cardContent[Qr]}});const Yr=()=>!P&&!It?null:t.createElement("div",{className:$n.headerSubheader,"data-testid":"info-card-subheader"},P&&t.createElement("div",{className:$n.subheader},P),It),ra=he||(le?{slackChannel:le}:{});return t.createElement(je.Z,{style:ir,className:ar},t.createElement(co,{...ra},s&&t.createElement(h.Z,{classes:{root:$n.header,title:$n.headerTitle,subheader:$n.headerSubheader,avatar:$n.headerAvatar,action:$n.headerAction,content:$n.headerContent},title:s,subheader:Yr(),action:qt,style:{...He},titleTypographyProps:jr,...Lt}),wn&&t.createElement(di,null,wn),L&&t.createElement(St.Z,null),t.createElement(_.Z,{className:x()(Pn,{[$n.noPadding]:Cr}),style:or},tt),dn&&t.createElement(W.Z,{className:Gt},dn),G&&t.createElement(lo,{...G})))}const mi=(0,w.Z)(r=>({root:{position:"relative",lineHeight:0},overlay:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -60%)",fontSize:r.typography.pxToRem(45),fontWeight:r.typography.fontWeightBold,color:r.palette.textContrast},description:{fontSize:"100%",top:"50%",left:"50%",transform:"translate(-50%, -50%)",position:"absolute",wordBreak:"break-all",display:"inline-block"},circle:{width:"80%",transform:"translate(10%, 0)"},colorUnknown:{}}),{name:"BackstageGauge"}),mo={fractional:!0,inverse:!1,unit:"%",max:100},po=({palette:r,value:s,inverse:P,max:L})=>{if(isNaN(s))return"#ddd";const G=L||mo.max,le=P?G-s:s;return le<G/3?r.status.error:le<G*(2/3)?r.status.warning:r.status.ok};function pi(r){const[s,P]=useState(null),{getColor:L=po}=r,G=mi(r),{palette:le}=useTheme(),{value:he,fractional:Me,inverse:tt,unit:He,max:Lt,description:It}={...mo,...r},qt=Me?Math.round(he*Lt):he,Gt=Lt!==100?Math.round(he):qt,[dn,Pn]=useState(!1);return useEffect(()=>{const wn=s,ar=()=>Pn(!0),Cr=()=>Pn(!1);return wn&&It?(wn.addEventListener("mouseenter",ar),wn.addEventListener("mouseleave",Cr),()=>{wn.removeEventListener("mouseenter",ar),wn.removeEventListener("mouseleave",Cr)}):()=>{Pn(!1)}},[It,s]),React.createElement(Box,{ref:P,className:G.root},React.createElement(Circle,{strokeLinecap:"butt",percent:qt,strokeWidth:12,trailWidth:12,strokeColor:L({palette:le,value:Gt,inverse:tt,max:Lt}),className:G.circle}),It&&dn?React.createElement(Box,{className:G.description},It):React.createElement(Box,{className:G.overlay},isNaN(he)?"N/A":`${Gt}${He}`))}const fi=(0,w.Z)({root:{height:"100%",width:250}},{name:"BackstageGaugeCard"});function Xl(r){const s=fi(r),{title:P,subheader:L,progress:G,inverse:le,deepLink:he,description:Me,icon:tt,variant:He,getColor:Lt}=r,It={inverse:le,description:Me,getColor:Lt,value:G};return React.createElement(Box,{className:s.root},React.createElement(va,{title:P,subheader:L,deepLink:he,variant:He,icon:tt},React.createElement(pi,{...It})))}function Ql(r){const{value:s,getColor:P=po,width:L="thick"}=r,{palette:G}=useTheme();if(isNaN(s))return null;let le=Math.round(s*100*100)/100;le>100&&(le=100);const he=L==="thick"?4:1,Me=P({palette:G,value:le,inverse:!1,max:100});return React.createElement(Tooltip,{title:`${le}%`},React.createElement(Typography,{component:"span"},React.createElement(Line,{percent:le,strokeWidth:he,trailWidth:he,strokeColor:Me})))}const hi=(0,w.Z)(r=>(0,H.Z)({icon:{position:"absolute",right:r.spacing(.5),pointerEvents:"none"}}),{name:"BackstageClosedDropdown"}),gi=()=>{const r=hi();return t.createElement(ce.Z,{className:r.icon,fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.createElement("path",{d:"M7.5 8L6 9.5L12.0703 15.5703L18.1406 9.5L16.6406 8L12.0703 12.5703L7.5 8Z",fill:"#616161"}))},Ei=(0,w.Z)(r=>(0,H.Z)({icon:{position:"absolute",right:r.spacing(.5),pointerEvents:"none"}}),{name:"BackstageOpenedDropdown"}),vi=()=>{const r=Ei();return t.createElement(ce.Z,{className:r.icon,fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.createElement("path",{d:"M16.5 16L18 14.5L11.9297 8.42969L5.85938 14.5L7.35938 16L11.9297 11.4297L16.5 16Z",fill:"#616161"}))},yi=(0,k.Z)(r=>(0,H.Z)({root:{"label + &":{marginTop:r.spacing(3)},"&.Mui-focused > div[role=button]":{borderColor:r.palette.primary.main}},input:{borderRadius:r.shape.borderRadius,position:"relative",backgroundColor:r.palette.background.paper,border:"1px solid #ced4da",fontSize:r.typography.body1.fontSize,padding:r.spacing(1.25,3.25,1.25,1.5),transition:r.transitions.create(["border-color","box-shadow"]),fontFamily:"Helvetica Neue","&:focus":{background:r.palette.background.paper,borderRadius:r.shape.borderRadius}}}),{name:"BackstageSelectInputBase"})(se.Z),_i=(0,w.Z)(r=>(0,H.Z)({formControl:{margin:r.spacing(1,0),maxWidth:300},label:{transform:"initial",fontWeight:"bold",fontSize:r.typography.body2.fontSize,fontFamily:r.typography.fontFamily,color:r.palette.text.primary,"&.Mui-focused":{color:r.palette.text.primary}},formLabel:{transform:"initial",fontWeight:"bold",fontSize:r.typography.body2.fontSize,fontFamily:r.typography.fontFamily,color:r.palette.text.primary,"&.Mui-focused":{color:r.palette.text.primary}},chips:{display:"flex",flexWrap:"wrap"},chip:{margin:2},checkbox:{},root:{display:"flex",flexDirection:"column"}}),{name:"BackstageSelect"});function fo(r){const{multiple:s,items:P,label:L,placeholder:G,selected:le,onChange:he,triggerReset:Me,native:tt=!1,disabled:He=!1,margin:Lt}=r,It=_i(),[qt,Gt]=(0,t.useState)(le||(s?[]:"")),[dn,Pn]=(0,t.useState)(!1);(0,t.useEffect)(()=>{Gt(s?[]:"")},[Me,s]),(0,t.useEffect)(()=>{Gt(le||(s?[]:""))},[le,s]);const wn=$n=>{Gt($n.target.value),he($n.target.value)},ar=$n=>{if(He){$n.preventDefault();return}Pn(ir=>s&&!($n.target instanceof HTMLElement)?!0:!ir)},Cr=()=>{Pn(!1)},jr=$n=>()=>{const ir=qt.filter(or=>or!==$n);Gt(ir),he(ir)};return t.createElement(Pe.Z,{className:It.root},t.createElement(oe.Z,{className:It.formControl},t.createElement(Ue.Z,{className:It.formLabel},L),t.createElement(ne.Z,{"aria-label":L,value:qt,native:tt,disabled:He,"data-testid":"select",displayEmpty:!0,multiple:s,margin:Lt,onChange:wn,open:dn,onOpen:ar,onClose:Cr,input:t.createElement(yi,null),label:L,renderValue:$n=>{var ir;return s&&qt.length!==0?t.createElement(Pe.Z,{className:It.chips},$n.map(or=>{var Yr,ra;return t.createElement(Z.Z,{key:(Yr=P.find(Xr=>Xr.value===or))==null?void 0:Yr.value,label:(ra=P.find(Xr=>Xr.value===or))==null?void 0:ra.label,clickable:!0,onDelete:jr(or),className:It.chip})})):t.createElement(i.Z,null,qt.length===0?G||"":(ir=P.find(or=>or.value===$n))==null?void 0:ir.label)},IconComponent:()=>dn?t.createElement(vi,null):t.createElement(gi,null),MenuProps:{anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},getContentAnchorEl:null}},G&&!s&&t.createElement(lt.Z,{value:[]},G),tt?P&&P.map($n=>t.createElement("option",{value:$n.value,key:$n.value},$n.label)):P&&P.map($n=>t.createElement(lt.Z,{key:$n.value,value:$n.value},s&&t.createElement(j.Z,{color:"primary",checked:qt.includes($n.value)||!1,className:It.checkbox}),$n.label)))))}const Ga=()=>{},ho=t.createContext({stepperLength:0,stepIndex:0,setStepIndex:Ga,stepHistory:[],setStepHistory:Ga,onStepChange:Ga});function ql(r){const{children:s,elevated:P,onStepChange:L,activeStep:G=0}=r,[le,he]=useState(G),[Me,tt]=useState([0]);useEffect(()=>{he(G)},[G]);const He=[];let Lt;return Children.forEach(s,It=>{isValidElement(It)&&(It.props.end?Lt=It:He.push(It))}),React.createElement(React.Fragment,null,React.createElement(ho.Provider,{value:{stepIndex:le,setStepIndex:he,stepHistory:Me,setStepHistory:tt,onStepChange:L,stepperLength:Children.count(s)}},React.createElement(MuiStepper,{activeStep:le,orientation:"vertical",elevation:P?2:0},He)),le>=Children.count(s)-1&&Lt)}const bi=(0,w.Z)(r=>({root:{marginTop:r.spacing(3),"& button":{marginRight:r.spacing(1)}}}),{name:"BackstageSimpleStepperFooter"}),Pi=({text:r,handleClick:s})=>React.createElement(Button$1,{onClick:s},r||"Reset"),Ci=({text:r,handleClick:s,disabled:P,last:L,stepIndex:G})=>React.createElement(Button$1,{variant:"contained",color:"primary",disabled:P,"data-testid":`nextButton-${G}`,onClick:s},r||(L?"Finish":"Next")),Oi=({text:r,handleClick:s,disabled:P,stepIndex:L})=>React.createElement(Button$1,{variant:"outlined",color:"primary",disabled:P,"data-testid":`skipButton-${L}`,onClick:s},r||"Skip"),Si=({text:r,handleClick:s,disabled:P,stepIndex:L})=>React.createElement(Button$1,{onClick:s,"data-testid":`backButton-${L}`,disabled:P},r||"Back"),go=({actions:r={},children:s})=>{const P=bi(),{stepperLength:L,stepIndex:G,setStepIndex:le,stepHistory:he,setStepHistory:Me,onStepChange:tt}=useContext(ho),He=(Gt,dn)=>{dn&&dn(),tt&&tt(G,Gt),le(Gt)},Lt=()=>{const Gt=r.nextStep?r.nextStep(G,L-1):G+1;He(Gt,r.onNext),Me([...he,Gt])},It=()=>{he.pop(),He(he[he.length-1],r.onBack),Me([...he])},qt=()=>{He(0,r.onRestart),Me([0])};return React.createElement(Box,{className:P.root},[void 0,!0].includes(r.showBack)&&G!==0&&React.createElement(Si,{text:r.backText,handleClick:It,disabled:G===0,stepIndex:G}),r.showSkip&&React.createElement(Oi,{text:r.skipText,handleClick:Lt,disabled:!!L&&G>=L||!!r.canSkip&&!r.canSkip(),stepIndex:G}),[void 0,!0].includes(r.showNext)&&React.createElement(Ci,{text:r.nextText,handleClick:Lt,disabled:!!L&&G>=L||!!r.canNext&&!r.canNext(),stepIndex:G}),r.showRestart&&G!==0&&React.createElement(Pi,{text:r.restartText,handleClick:qt,stepIndex:G}),s)},Ri=(0,w.Z)(r=>({end:{padding:r.spacing(3)}}),{name:"SimpleStepperStep"});function ec(r){const{title:s,children:P,end:L,actions:G,...le}=r,he=Ri();return L?React.createElement(Box,{className:he.end},React.createElement(Typography,{variant:"h6"},s),P,React.createElement(go,{actions:{...G||{},showNext:!1}})):React.createElement(MuiStep,{...le},React.createElement(StepLabel,null,React.createElement(Typography,{variant:"h6"},s)),React.createElement(StepContent,null,P,React.createElement(go,{actions:G})))}const ya=(0,w.Z)(r=>({status:{fontWeight:r.typography.fontWeightMedium,"&::before":{width:"0.7em",height:"0.7em",display:"inline-block",marginRight:r.spacing(1),borderRadius:"50%",content:'""'}},ok:{"&::before":{backgroundColor:r.palette.status.ok}},warning:{"&::before":{backgroundColor:r.palette.status.warning}},error:{"&::before":{backgroundColor:r.palette.status.error}},pending:{"&::before":{backgroundColor:r.palette.status.pending}},running:{"&::before":{backgroundColor:r.palette.status.running}},aborted:{"&::before":{backgroundColor:r.palette.status.aborted}}}),{name:"BackstageStatus"});function Ai(r){const s=ya(r);return t.createElement(i.Z,{component:"span",className:x()(s.status,s.ok),"aria-label":"Status ok","aria-hidden":"true",...r})}function wi(r){const s=ya(r);return t.createElement(i.Z,{component:"span",className:x()(s.status,s.warning),"aria-label":"Status warning","aria-hidden":"true",...r})}function Ti(r){const s=ya(r);return t.createElement(i.Z,{component:"span",className:x()(s.status,s.error),"aria-label":"Status error","aria-hidden":"true",...r})}function Ii(r){const s=ya(r);return t.createElement(i.Z,{component:"span",className:x()(s.status,s.pending),"aria-label":"Status pending","aria-hidden":"true",...r})}function Di(r){const s=ya(r);return t.createElement(i.Z,{component:"span",className:x()(s.status,s.running),"aria-label":"Status running","aria-hidden":"true",...r})}function Mi(r){const s=ya(r);return t.createElement(i.Z,{component:"span",className:x()(s.status,s.aborted),"aria-label":"Status aborted","aria-hidden":"true",...r})}const $i=r=>(0,H.Z)({root:{fontWeight:r.typography.fontWeightBold,whiteSpace:"nowrap",paddingRight:r.spacing(4),border:"0",verticalAlign:"top"}}),Li={root:{border:"0",verticalAlign:"top"}},Bi=r=>(0,H.Z)({root:{margin:r.spacing(0,0,-1,0)}}),Ui=r=>(0,H.Z)({root:{padding:r.spacing(0,0,1,0)},random:{}}),xi=(0,k.Z)($i,{name:"BackstageMetadataTableTitleCell"})(Ie.Z),ki=(0,k.Z)(Li,{name:"BackstageMetadataTableCell"})(Ie.Z),Ni=({dense:r,children:s})=>t.createElement(te.Z,{size:r?"small":"medium"},t.createElement(me.Z,null,s)),Zi=({title:r,children:s,...P})=>t.createElement(Le.Z,null,r&&t.createElement(xi,null,r),t.createElement(ki,{colSpan:r?1:2,...P},s)),Eo=(0,k.Z)(Bi,{name:"BackstageMetadataTableList"})(({classes:r,children:s})=>t.createElement(ot.Z,{disablePadding:!0,className:r.root},s)),vo=(0,k.Z)(Ui,{name:"BackstageMetadataTableListItem"})(({classes:r,children:s})=>t.createElement(Qe.Z,{className:r.root},s)),yo=(0,H.Z)({root:{margin:"0 0",listStyleType:"none"}}),Wi=r=>(0,H.Z)({root:{...yo.root,paddingLeft:r.spacing(1)}}),_o=(0,k.Z)(yo,{name:"BackstageStructuredMetadataTableList"})(({classes:r,children:s})=>t.createElement(Eo,{classes:r},s)),bo=(0,k.Z)(Wi,{name:"BackstageStructuredMetadataTableNestedList"})(({classes:r,children:s})=>t.createElement(Eo,{classes:r},s));function Fi(r,s){const P=r.map((L,G)=>t.createElement(vo,{key:G},Ha(L)));return s?t.createElement(bo,null,P):t.createElement(_o,null,P)}function Ki(r,s,P){const L=Object.keys(r).map(G=>{const le=Ha(r[G],!0),he=P&&P.titleFormat?P.titleFormat(G):Y()(G);return t.createElement(vo,{key:G},t.createElement(i.Z,{variant:"body2",component:"span"},`${he}: `),le)});return s?t.createElement(bo,null,L):t.createElement(_o,null,L)}function Ha(r,s,P){return t.isValidElement(r)?t.createElement(t.Fragment,null,r):typeof r=="object"&&!Array.isArray(r)?Ki(r,s,P):Array.isArray(r)?Fi(r,P):typeof r=="boolean"?t.createElement(t.Fragment,null,r?"\u2705":"\u274C"):t.createElement(i.Z,{variant:"body2",component:"span"},r)}const zi=({value:r,options:s})=>t.createElement(t.Fragment,null,Ha(r,s)),ji=({title:r,value:s,options:P})=>t.createElement(Zi,{title:P&&P.titleFormat?P.titleFormat(r):Y()(r)},t.createElement(zi,{value:s,options:P}));function Vi(r,s){return Object.keys(r).map(P=>t.createElement(ji,{key:P,title:P,value:r[P],options:s}))}function Gi(r){const{metadata:s,dense:P=!0,options:L}=r,G=Vi(s,L||{});return t.createElement(Ni,{dense:P},G)}function Hi(r){return qs.stringify(r,{strictNullHandling:!0})}function Po(r){return qs.parse(r,{ignoreQueryPrefix:!0,strictNullHandling:!0})}function Co(r,s){return Po(r)[s]}function Ji(r,s,P){const L={...Po(r),[s]:P};return Hi(L)}function tc(r,s=250){const[P,L]=useSearchParams(),G=P.toString(),[le,he]=useState(Co(G,r));return useEffect(()=>{const Me=Co(G,r);he(tt=>isEqual(Me,tt)?tt:Me)},[G,he,r]),useDebouncedEffect(()=>{const Me=Ji(G,r,le);G!==Me&&L(Me,{replace:!0})},[L,le,G,r],s),[le,he]}const Yi={url:"https://github.com/backstage/backstage/issues",items:[{title:"Support Not Configured",icon:"warning",links:[{title:"Add `app.support` config key",url:"https://github.com/backstage/backstage/blob/master/app-config.yaml"}]}]};function Oo(){const s=(0,n.I_)().get(n.Ds),P=s==null?void 0:s.getOptionalConfig("app.support");return P?{url:P.getString("url"),items:P.getConfigArray("items").flatMap(L=>{var G;return{title:L.getString("title"),icon:L.getOptionalString("icon"),links:((G=L.getOptionalConfigArray("links"))!=null?G:[]).flatMap(le=>({url:le.getString("url"),title:le.getString("title")}))}})}:Yi}function Jr(r,s){const L=(0,n.qD)().getSystemIcon(r);return L?t.createElement(L,{...s}):t.createElement(Qt.Z,{...s})}function nc(r){return Jr("brokenImage",r)}function Xi(r){return Jr("catalog",r)}function rc(r){return Jr("chat",r)}function ac(r){return Jr("dashboard",r)}function Qi(r){return Jr("docs",r)}function oc(r){return Jr("email",r)}function qi(r){return Jr("github",r)}function ic(r){return Jr("group",r)}function Ua(r){return Jr("help",r)}function es(r){return Jr("user",r)}function sc(r){return Jr("warning",r)}const ts=(0,w.Z)({popoverList:{minWidth:260,maxWidth:400}},{name:"BackstageSupportButton"}),ns=({icon:r})=>{var s;const P=(0,n.qD)(),L=r&&(s=P.getSystemIcon(r))!=null?s:Ua;return t.createElement(L,null)},rs=({link:r})=>{var s;return t.createElement(Cn,{to:r.url},(s=r.title)!=null?s:r.url)},as=({item:r})=>{var s;return t.createElement(lt.Z,null,t.createElement(bt.Z,null,t.createElement(ns,{icon:r.icon})),t.createElement(Et.Z,{primary:r.title,secondary:(s=r.links)==null?void 0:s.reduce((P,L,G)=>[...P,G>0&&t.createElement("br",{key:G}),t.createElement(rs,{link:L,key:L.url})],[])}))};function os(r){const{title:s,items:P,children:L}=r,{items:G}=Oo(),[le,he]=(0,t.useState)(!1),[Me,tt]=(0,t.useState)(null),He=ts(),Lt=(0,rn.Z)(Gt=>Gt.breakpoints.down("sm")),It=Gt=>{tt(Gt.currentTarget),he(!0)},qt=()=>{he(!1)};return t.createElement(t.Fragment,null,t.createElement(Pe.Z,{display:"flex",ml:1},Lt?t.createElement(d.Z,{color:"primary",size:"small",onClick:It,"data-testid":"support-button","aria-label":"Support"},t.createElement(Ua,null)):t.createElement(F.Z,{"data-testid":"support-button","aria-label":"Support",color:"primary",onClick:It,startIcon:t.createElement(Ua,null)},"Support")),t.createElement(Ut.ZP,{"data-testid":"support-button-popover",open:le,anchorEl:Me,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},onClose:qt},t.createElement(ut.Z,{className:He.popoverList,autoFocusItem:Boolean(Me)},s&&t.createElement(lt.Z,{alignItems:"flex-start"},t.createElement(i.Z,{variant:"subtitle1"},s)),t.Children.map(L,(Gt,dn)=>t.createElement(lt.Z,{alignItems:"flex-start",key:`child-${dn}`},Gt)),(P!=null?P:G).map((Gt,dn)=>t.createElement(as,{item:Gt,key:`item-${dn}`}))),t.createElement(ye.Z,null,t.createElement(F.Z,{color:"primary",onClick:qt,"aria-label":"Close"},"Close"))))}const is=(0,w.Z)(r=>({root:{gridArea:"pageContent",minWidth:0,paddingTop:r.spacing(3),paddingBottom:r.spacing(3),paddingLeft:r.spacing(2),paddingRight:r.spacing(2),[r.breakpoints.up("sm")]:{paddingLeft:r.spacing(3),paddingRight:r.spacing(3)}},stretch:{display:"flex",flexDirection:"column",flexGrow:1},noPadding:{padding:0}}),{name:"BackstageContent"});function xa(r){const{className:s,stretch:P,noPadding:L,children:G,...le}=r,he=is();return t.createElement("article",{...le,className:x()(he.root,s,{[he.stretch]:P,[he.noPadding]:L})},G)}const ss=(0,w.Z)(r=>({tabsWrapper:{gridArea:"pageSubheader",backgroundColor:r.palette.background.paper,paddingLeft:r.spacing(3),minWidth:0},defaultTab:{...r.typography.caption,padding:r.spacing(3,3),textTransform:"uppercase",fontWeight:r.typography.fontWeightBold,color:r.palette.text.secondary},selected:{color:r.palette.text.primary},tabRoot:{"&:hover":{backgroundColor:r.palette.background.default,color:r.palette.text.primary}}}),{name:"BackstageHeaderTabs"});function So(r){const{tabs:s,onChange:P,selectedIndex:L}=r,[G,le]=(0,t.useState)(L!=null?L:0),he=ss(),Me=(0,t.useCallback)((tt,He)=>{L===void 0&&le(He),P&&L!==He&&P(He)},[L,P]);return(0,t.useEffect)(()=>{L!==void 0&&le(L)},[L]),t.createElement(Pe.Z,{className:he.tabsWrapper},t.createElement(tn.Z,{selectionFollowsFocus:!0,indicatorColor:"primary",textColor:"inherit",variant:"scrollable",scrollButtons:"auto","aria-label":"tabs",onChange:Me,value:G},s.map((tt,He)=>t.createElement(ln.Z,{...tt.tabProps,"data-testid":`header-tab-${He}`,label:tt.label,key:tt.id,value:He,className:he.defaultTab,classes:{selected:he.selected,root:he.tabRoot}}))))}function ls(r){var s,P,L,G;const le=(0,S.UO)(),Me=r.map(({path:qt,children:Gt})=>({caseSensitive:!1,path:`${qt}/*`,element:Gt})).sort((qt,Gt)=>Gt.path.replace(/\/\*$/,"").localeCompare(qt.path.replace(/\/\*$/,""))),tt=(s=(0,S.V$)(Me))!=null?s:r[0].children;let He=(P=le["*"])!=null?P:"";He.startsWith("/")||(He=`/${He}`);const[Lt]=(L=(0,Te.fp)(Me,He))!=null?L:[],It=Lt?r.findIndex(qt=>`${qt.path}/*`===Lt.route.path):0;return{index:It===-1?0:It,element:tt,route:(G=r[It])!=null?G:r[0]}}function Ro(r){const{routes:s}=r,P=(0,S.s0)(),{index:L,route:G,element:le}=ls(s),he=(0,t.useMemo)(()=>s.map(tt=>({id:tt.path,label:tt.title,tabProps:tt.tabProps})),[s]),Me=tt=>{let{path:He}=s[tt];He=He.replace(/\/\*$/,""),He=He.replace(/^\//,""),P(He)};return t.createElement(t.Fragment,null,t.createElement(So,{tabs:he,selectedIndex:L,onChange:Me}),t.createElement(xa,null,t.createElement(un.q,{title:G.title}),le))}const Ja=()=>null;(0,n.R5)(Ja,"core.gatherMountPoints",!0);function Ao(r){const s=t.createElement(Ja,{path:"",title:""},t.createElement("div",null)).type;return t.Children.toArray(r).flatMap(P=>{if(!(0,t.isValidElement)(P))return[];if(P.type===t.Fragment)return Ao(P.props.children);if(P.type!==s)throw new Error("Child of TabbedLayout must be an TabbedLayout.Route");const{path:L,title:G,children:le,tabProps:he}=P.props;return[{path:L,title:G,children:le,tabProps:he}]})}function cs(r){const s=Ao(r.children);return t.createElement(Ro,{routes:s})}cs.Route=Ja;const us=(0,w.Z)(r=>({value:{marginBottom:r.spacing(.75)},subvalue:{color:r.palette.textSubtle,fontWeight:"normal"}}),{name:"BackstageSubvalueCell"});function ds(r){const{value:s,subvalue:P}=r,L=us();return t.createElement(t.Fragment,null,t.createElement(Pe.Z,{className:L.value},s),t.createElement(Pe.Z,{className:L.subvalue},P))}const ms=(0,w.Z)(r=>({root:{height:"100%",width:"315px",display:"flex",flexDirection:"column",marginRight:r.spacing(3)},value:{fontWeight:"bold",fontSize:18},header:{display:"flex",alignItems:"center",height:r.spacing(7.5),justifyContent:"space-between",borderBottom:`1px solid ${r.palette.grey[500]}`},filters:{display:"flex",flexDirection:"column","& > *":{marginTop:r.spacing(2)}}}),{name:"BackstageTableFilters"}),ps=r=>{var s;const P=ms(),{onChangeFilters:L}=r,[G,le]=(0,t.useState)({...r.selectedFilters}),[he,Me]=(0,t.useState)(!1),tt=()=>{le({}),Me(He=>!He)};return(0,t.useEffect)(()=>{L(G)},[G,L]),t.createElement(Pe.Z,{className:P.root},t.createElement(Pe.Z,{className:P.header},t.createElement(Pe.Z,{className:P.value},"Filters"),t.createElement(F.Z,{color:"primary",onClick:tt},"Clear all")),t.createElement(Pe.Z,{className:P.filters},((s=r.filters)==null?void 0:s.length)&&r.filters.map(He=>t.createElement(fo,{triggerReset:he,key:He.element.label,...He.element,selected:G[He.element.label],onChange:Lt=>le({...G,[He.element.label]:Lt})}))))},wo={Add:(0,t.forwardRef)((r,s)=>t.createElement(Wt.Z,{...r,ref:s})),Check:(0,t.forwardRef)((r,s)=>t.createElement(gn.Z,{...r,ref:s})),Clear:(0,t.forwardRef)((r,s)=>t.createElement(yn.Z,{...r,ref:s})),Delete:(0,t.forwardRef)((r,s)=>t.createElement(bn.Z,{...r,ref:s})),DetailPanel:(0,t.forwardRef)((r,s)=>t.createElement(De.Z,{...r,ref:s})),Edit:(0,t.forwardRef)((r,s)=>t.createElement(In.Z,{...r,ref:s})),Export:(0,t.forwardRef)((r,s)=>t.createElement(sr.Z,{...r,ref:s})),Filter:(0,t.forwardRef)((r,s)=>t.createElement(An.Z,{...r,ref:s})),FirstPage:(0,t.forwardRef)((r,s)=>t.createElement(On.Z,{...r,ref:s})),LastPage:(0,t.forwardRef)((r,s)=>t.createElement(Sn.Z,{...r,ref:s})),NextPage:(0,t.forwardRef)((r,s)=>t.createElement(De.Z,{...r,ref:s})),PreviousPage:(0,t.forwardRef)((r,s)=>t.createElement(Ee.Z,{...r,ref:s})),ResetSearch:(0,t.forwardRef)((r,s)=>t.createElement(yn.Z,{...r,ref:s})),Search:(0,t.forwardRef)((r,s)=>t.createElement(An.Z,{...r,ref:s})),SortArrow:(0,t.forwardRef)((r,s)=>t.createElement(hn.Z,{...r,ref:s})),ThirdStateCheck:(0,t.forwardRef)((r,s)=>t.createElement(Dn.Z,{...r,ref:s})),ViewColumn:(0,t.forwardRef)((r,s)=>t.createElement(zn.Z,{...r,ref:s}))};function To(r,s){const P=s.split(".");let L=r[P[0]];for(let G=1;G<P.length;++G){if(L===void 0)return L;const le=P[G];L=L[le]}return L}const fs=(0,k.Z)(r=>({header:{padding:r.spacing(1,2,1,2.5),borderTop:`1px solid ${r.palette.grey.A100}`,borderBottom:`1px solid ${r.palette.grey.A100}`,fontWeight:r.typography.fontWeightBold,position:"static",wordBreak:"normal"}}),{name:"BackstageTableHeader"})(Zt.W$),Io=(0,k.Z)(r=>({root:{padding:r.spacing(3,0,2.5,2.5)},title:{"& > h6":{fontWeight:r.typography.fontWeightBold}},searchField:{paddingRight:r.spacing(2)}}),{name:"BackstageTableToolbar"})(Zt.UW),hs=(0,w.Z)(r=>({root:{display:"flex",alignItems:"center",justifyContent:"space-between"},title:{fontWeight:r.typography.fontWeightBold,fontSize:18,whiteSpace:"nowrap"}}),{name:"BackstageTableFiltersContainer"}),gs=(0,w.Z)(()=>({root:{display:"flex",alignItems:"start"}}),{name:"BackstageTable"});function Es(r,s){return r.map(P=>{var L;const G=(L=P.headerStyle)!=null?L:{};let le=P.cellStyle||{};if(P.highlight)if(G.color=s.palette.textContrast,typeof le=="object")le.fontWeight=s.typography.fontWeightBold;else{const he=le;le=(Me,tt,He)=>({...he(Me,tt,He),fontWeight:s.typography.fontWeightBold})}return{...P,headerStyle:G,cellStyle:le}})}function vs(r,s){return(0,B.transform)(r,(P,L,G)=>{(0,B.isEqual)(L,s[G])||(P[G]=L)})}const Do={search:"",filtersOpen:!1,filters:{}};function ys(r){const{toolbarRef:s,setSearch:P,hasFilters:L,selectedFiltersLength:G,toggleFilters:le}=r,he=hs(),Me=(0,t.useCallback)(tt=>{r.onSearchChanged(tt),P(tt)},[r,P]);return L?t.createElement(Pe.Z,{className:he.root},t.createElement(Pe.Z,{className:he.root},t.createElement(d.Z,{onClick:le,"aria-label":"filter list"},t.createElement(An.Z,null)),t.createElement(i.Z,{className:he.title},"Filters (",G,")")),t.createElement(Io,{...r,ref:s,onSearchChanged:Me})):t.createElement(Io,{...r,ref:s,onSearchChanged:Me})}function Mo(r){const{data:s,columns:P,options:L,title:G,subtitle:le,filters:he,initialState:Me,emptyContent:tt,onStateChange:He,components:Lt,...It}=r,qt=gs(),Gt=(0,N.Z)(),dn={...Do,...Me},[Pn,wn]=(0,t.useState)(dn.filtersOpen),ar=(0,t.useCallback)(()=>wn(Tr=>!Tr),[wn]),[Cr,jr]=(0,t.useState)(0),[$n,ir]=(0,t.useState)(s),[or,Yr]=(0,t.useState)(dn.filters),ra=Es(P,Gt),[Xr,Qr]=(0,t.useState)(dn.search);(0,t.useEffect)(()=>{if(He){const Tr=vs({search:Xr,filtersOpen:Pn,filters:or},Do);He(Tr)}},[Xr,Pn,or,He]);const Ma={headerStyle:{textTransform:"uppercase"}},ua=(0,t.useCallback)(Tr=>{var ia;return(ia=P.find(fa=>fa.title===Tr))==null?void 0:ia.field},[P]);(0,t.useEffect)(()=>{if(typeof s=="function")return;if(!or){ir(s);return}const Tr=Object.values(or);if(s&&Tr.flat().length){const ia=s.filter(fa=>!!Object.entries(or).filter(([,ha])=>!!ha.length).every(([ha,fr])=>{const yr=To(fa,ua(ha));return Array.isArray(yr)&&Array.isArray(fr)?yr.some(Ca=>fr.includes(Ca)):Array.isArray(yr)?yr.includes(fr):Array.isArray(fr)?fr.includes(yr):yr===fr}));ir(ia)}else ir(s);jr(Tr.flat().length)},[s,or,ua]);const io=(Tr,ia)=>{const fa=fr=>{const yr=new Set,Ca=ga=>{ga!=null&&yr.add(ga)};return ia&&ia.forEach(ga=>{const $a=To(ga,ua(fr));Array.isArray($a)?$a.forEach(Ca):Ca($a)}),yr},ha=fr=>({placeholder:"All results",label:fr.column,multiple:fr.type==="multiple-select",items:[...fa(fr.column)].sort().map(yr=>({label:yr,value:yr}))});return Tr.map(fr=>({type:fr.type,element:ha(fr)}))},nr=!!(he!=null&&he.length),Pa=(0,t.useCallback)(Tr=>t.createElement(ys,{setSearch:Qr,hasFilters:nr,selectedFiltersLength:Cr,toggleFilters:ar,...Tr}),[ar,nr,Cr,Qr]),ja=typeof s!="function"&&s.length===0,da=P.length,so=(0,t.useCallback)(Tr=>tt&&ja?t.createElement("tbody",null,t.createElement("tr",null,t.createElement("td",{colSpan:da},tt))):t.createElement(Zt.os,{...Tr}),[ja,tt,da]);return t.createElement(Pe.Z,{className:qt.root},Pn&&s&&typeof s!="function"&&(he==null?void 0:he.length)&&t.createElement(ps,{filters:io(he,s),selectedFilters:or,onChangeFilters:Yr}),t.createElement(Zt.ZP,{components:{Header:fs,Toolbar:Pa,Body:so,...Lt},options:{...Ma,...L},columns:ra,icons:wo,title:t.createElement(t.Fragment,null,t.createElement(i.Z,{variant:"h5",component:"h2"},G),le&&t.createElement(i.Z,{color:"textSecondary",variant:"body1"},le)),data:typeof s=="function"?s:$n,style:{width:"100%"},localization:{toolbar:{searchPlaceholder:"Filter",searchTooltip:"Filter"}},...It}))}Mo.icons=Object.freeze(wo);function _s(r,s){const P=r[r.length-1];if(P)return P>=.9?s.palette.status.ok:P>=.5?s.palette.status.warning:s.palette.status.error}function lc(r){var s;const P=useTheme();return r.data?React.createElement(Sparklines,{width:120,height:30,min:0,max:1,...r},r.title&&React.createElement("title",null,r.title),React.createElement(SparklinesLine,{color:(s=r.color)!=null?s:_s(r.data,P)})):null}const bs=r=>(0,w.Z)(s=>({container:{width:"100%",display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"flex-end",alignItems:"center",marginBottom:s.spacing(2),textAlign:r.textAlign},leftItemsBox:{flex:"1 1 auto",minWidth:0,overflow:"visible"},rightItemsBox:{flex:"0 1 auto",display:"flex",flexDirection:"row",flexWrap:"wrap",alignItems:"center",marginLeft:s.spacing(1),minWidth:0,overflow:"visible"},description:{},title:{display:"inline-flex",marginBottom:0}}),{name:"BackstageContentHeader"}),Ps=({title:r="Unknown page",className:s})=>t.createElement(i.Z,{variant:"h4",component:"h2",className:s,"data-testid":"header-title"},r);function $o(r){const{description:s,title:P,titleComponent:L=void 0,children:G,textAlign:le="left"}=r,he=bs({textAlign:le})(),Me=L||t.createElement(Ps,{title:P,className:he.title});return t.createElement(t.Fragment,null,t.createElement(un.q,{title:P}),t.createElement(Pe.Z,{className:he.container},t.createElement(Pe.Z,{className:he.leftItemsBox},Me,s&&t.createElement(i.Z,{className:he.description,variant:"body2"},s)),t.createElement(Pe.Z,{className:he.rightItemsBox},G)))}const Cs=(0,w.Z)(r=>({micDrop:{maxWidth:"60%",bottom:r.spacing(2),right:r.spacing(2),[r.breakpoints.down("xs")]:{maxWidth:"96%",bottom:"unset",right:"unset",margin:r.spacing(10,"auto",4)}}}),{name:"BackstageErrorPageMicDrop"}),Os=()=>{const r=Cs();return t.createElement("img",{src:Zr,className:r.micDrop,alt:"Girl dropping mic from her hands"})},Ss=(0,w.Z)(r=>({container:{padding:r.spacing(8),[r.breakpoints.down("xs")]:{padding:r.spacing(2)}},title:{paddingBottom:r.spacing(5),[r.breakpoints.down("xs")]:{paddingBottom:r.spacing(4),fontSize:r.typography.h3.fontSize}},subtitle:{color:r.palette.textSubtle}}),{name:"BackstageErrorPage"});function Rs(r){const{status:s,statusMessage:P,additionalInfo:L,supportUrl:G}=r,le=Ss(),he=(0,S.s0)(),Me=Oo();return t.createElement(Se.Z,{container:!0,spacing:0,className:le.container},t.createElement(Se.Z,{item:!0,xs:12,sm:8,md:4},t.createElement(i.Z,{"data-testid":"error",variant:"body1",className:le.subtitle},"ERROR ",s,": ",P),t.createElement(i.Z,{variant:"body1",className:le.subtitle},L),t.createElement(i.Z,{variant:"h2",className:le.title},"Looks like someone dropped the mic!"),t.createElement(i.Z,{variant:"h6"},t.createElement(Cn,{to:"#","data-testid":"go-back-link",onClick:()=>he(-1)},"Go back"),"... or please"," ",t.createElement(Cn,{to:G||Me.url},"contact support")," if you think this is a bug.")),t.createElement(Os,null))}const As=(0,k.Z)({root:{textDecoration:"underline",cursor:"pointer"}},{name:"BackstageBreadcrumbsClickableText"})(i.Z),Ya=(0,k.Z)({root:{textDecoration:"underline",color:"inherit"}},{name:"BackstageBreadcrumbsStyledBox"})(Pe.Z);function Lo(r){const{children:s,...P}=r,[L,G]=t.useState(null),le=t.Children.toArray(s),[he,Me,...tt]=le,He=tt.length?tt.pop():le[le.length-1],Lt=le.length>3,It=dn=>{G(dn.currentTarget)},qt=()=>{G(null)},Gt=Boolean(L);return t.createElement(t.Fragment,null,t.createElement(lr.Z,{"aria-label":"breadcrumb",...P},le.length>1&&t.createElement(Ya,{clone:!0},he),le.length>2&&t.createElement(Ya,{clone:!0},Me),Lt&&t.createElement(As,{onClick:It},"..."),t.createElement(Pe.Z,{style:{fontStyle:"italic"}},He)),t.createElement(Ut.ZP,{open:Gt,anchorEl:L,onClose:qt,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"}},t.createElement(ot.Z,null,tt.map((dn,Pn)=>t.createElement(Qe.Z,{key:Pn,button:!0},t.createElement(Ya,{clone:!0},dn))))))}const ka=72,Bo=24,Uo=18,oa={drawerWidthClosed:ka,drawerWidthOpen:224,defaultOpenDelayMs:100,defaultCloseDelayMs:0,defaultFadeDuration:200,logoHeight:32,iconContainerWidth:ka,iconSize:ka-Bo*2,iconPadding:Bo,selectedIndicatorWidth:3,userBadgePadding:Uo,userBadgeDiameter:ka-Uo*2,mobileSidebarHeight:56},ws=r=>({...oa,...r,iconContainerWidth:oa.drawerWidthClosed,iconSize:oa.drawerWidthClosed-oa.iconPadding*2,userBadgeDiameter:oa.drawerWidthClosed-oa.userBadgePadding*2}),xo={drawerWidthClosed:0,drawerWidthOpen:202,defaultOpenDelayMs:oa.defaultOpenDelayMs+200},Ts=r=>({...xo,...r}),Is="@backstage/core/sidebar-intro-dismissed",zr=(0,t.createContext)({sidebarConfig:oa,submenuConfig:xo}),Xa=(0,t.createContext)({isHoveredOn:!1,setIsHoveredOn:()=>{}}),ko={isOpen:!1,setOpen:()=>{}},No=(0,t.createContext)(ko),Zo=(0,_r.CT)("sidebar-open-state-context");function Wo(r){const{children:s,value:P}=r;return t.createElement(No.Provider,{value:P},t.createElement(Zo.Provider,{value:(0,_r.EI)({1:P})},s))}const Da=()=>{const r=(0,t.useContext)(Zo),s=(0,t.useContext)(No);if(r===void 0)return s||ko;const P=r.atVersion(1);if(P===void 0)throw new Error("No context found for version 1.");return P},Fo={isPinned:!0,toggleSidebarPinState:()=>{},isMobile:!1},Ko=(0,t.createContext)(Fo),zo=(0,_r.CT)("sidebar-pin-state-context");function Ds(r){const{children:s,value:P}=r;return t.createElement(Ko.Provider,{value:P},t.createElement(zo.Provider,{value:(0,_r.EI)({1:P})},s))}const Na=()=>{const r=(0,t.useContext)(zo),s=(0,t.useContext)(Ko);if(r===void 0)return s||Fo;const P=r.atVersion(1);if(P===void 0)throw new Error("No context found for version 1.");return P},Ms=(0,w.Z)(r=>({root:{flexGrow:0,margin:r.spacing(0,2),color:r.palette.navigation.color},selected:s=>({color:`${r.palette.navigation.selectedColor}!important`,borderTop:`solid ${s.sidebarConfig.selectedIndicatorWidth}px ${r.palette.navigation.indicator}`,marginTop:"-1px"}),label:{display:"none"}})),$s=r=>{const{to:s,label:P,icon:L,value:G}=r,{sidebarConfig:le}=(0,t.useContext)(zr),he=Ms({sidebarConfig:le}),Me=(0,S.TH)(),{selectedMenuItemIndex:tt,setSelectedMenuItemIndex:He}=(0,t.useContext)(Vo),Lt=(qt,Gt)=>{He(Gt===tt?-1:Gt)},It=G===tt&&tt>=0||G!==tt&&!(tt>=0)&&s===Me.pathname;return t.createElement(Lr.Z,{"aria-label":P,label:P,icon:L,component:Cn,to:s||Me.pathname,onChange:Lt,value:G,selected:It,classes:he})},Qa=r=>{const{children:s,to:P,label:L,icon:G,value:le}=r,{isMobile:he}=Na();return he?t.createElement($s,{to:P,label:L,icon:G,value:le}):t.createElement(t.Fragment,null,s)},jo=(0,w.Z)(r=>({root:{position:"fixed",backgroundColor:r.palette.navigation.background,color:r.palette.navigation.color,bottom:0,left:0,right:0,zIndex:r.zIndex.snackbar,borderTop:"1px solid #383838","@media print":{display:"none"}},overlay:s=>({background:r.palette.navigation.background,width:"100%",bottom:`${s.sidebarConfig.mobileSidebarHeight}px`,height:`calc(100% - ${s.sidebarConfig.mobileSidebarHeight}px)`,flex:"0 1 auto",overflow:"auto"}),overlayHeader:{display:"flex",color:r.palette.text.primary,alignItems:"center",justifyContent:"space-between",padding:r.spacing(2,3)},overlayHeaderClose:{color:r.palette.text.primary},marginMobileSidebar:s=>({marginBottom:`${s.sidebarConfig.mobileSidebarHeight}px`})})),Ls=r=>(0,B.orderBy)(r,({props:{priority:s}})=>Number.isInteger(s)?s:-1,"desc"),Bs=t.createElement(Qa).type,Us=({children:r,label:s="Menu",open:P,onClose:L})=>{const{sidebarConfig:G}=(0,t.useContext)(zr),le=jo({sidebarConfig:G});return t.createElement(jn.ZP,{anchor:"bottom",open:P,onClose:L,ModalProps:{BackdropProps:{classes:{root:le.marginMobileSidebar}}},classes:{root:le.marginMobileSidebar,paperAnchorBottom:le.overlay}},t.createElement(Pe.Z,{className:le.overlayHeader},t.createElement(i.Z,{variant:"h3"},s),t.createElement(d.Z,{onClick:L,classes:{root:le.overlayHeaderClose}},t.createElement(c.Z,null))),t.createElement(Pe.Z,{component:"nav"},r))},Vo=(0,t.createContext)({selectedMenuItemIndex:-1,setSelectedMenuItemIndex:()=>{}}),xs=r=>{const{sidebarConfig:s}=(0,t.useContext)(zr),{children:P}=r,L=jo({sidebarConfig:s}),G=(0,S.TH)(),[le,he]=(0,t.useState)(-1);(0,t.useEffect)(()=>{he(-1)},[G.pathname]);let Me=(0,n.vJ)(P,He=>He.getElements().filter(Lt=>Lt.type===Bs));if(P)Me.length?Me=Ls(Me):Me.push(t.createElement(Qa,{key:"default_menu",icon:t.createElement($r.Z,null)},P));else return null;const tt=le>=0&&!Me[le].props.to;return t.createElement(Wo,{value:{isOpen:!0,setOpen:()=>{}}},t.createElement(Vo.Provider,{value:{selectedMenuItemIndex:le,setSelectedMenuItemIndex:he}},t.createElement(Us,{label:Me[le]&&Me[le].props.label,open:tt,onClose:()=>he(-1)},Me[le]&&Me[le].props.children),t.createElement(Wr.Z,{className:L.root,"data-testid":"mobile-sidebar-root",component:"nav"},Me)))},Go={getSidebarPinState(){let r;try{r=JSON.parse(window.localStorage.getItem("sidebarPinState")||"true")}catch{return!0}return!!r},setSidebarPinState(r){return window.localStorage.setItem("sidebarPinState",JSON.stringify(r))}},ks=(0,w.Z)(r=>({root:{width:"100%",transition:"padding-left 0.1s ease-out",isolation:"isolate",[r.breakpoints.up("sm")]:{paddingLeft:s=>s.isPinned?s.sidebarConfig.drawerWidthOpen:s.sidebarConfig.drawerWidthClosed},[r.breakpoints.down("xs")]:{paddingBottom:s=>s.sidebarConfig.mobileSidebarHeight},"@media print":{padding:"0px !important"}},content:{zIndex:0,isolation:"isolate","&:focus":{outline:0}}}),{name:"BackstageSidebarPage"}),Ho=(0,t.createContext)({content:{contentRef:void 0}});function Ns(r){const[s,P]=(0,t.useState)(()=>Go.getSidebarPinState()),{sidebarConfig:L}=(0,t.useContext)(zr),G=(0,t.useRef)(null),le=(0,t.useMemo)(()=>({content:{contentRef:G}}),[G]);(0,t.useEffect)(()=>{Go.setSidebarPinState(s)},[s]);const he=(0,rn.Z)(He=>He.breakpoints.down("xs"),{noSsr:!0}),Me=()=>P(!s),tt=ks({isPinned:s,sidebarConfig:L});return t.createElement(Ds,{value:{isPinned:s,toggleSidebarPinState:Me,isMobile:he}},t.createElement(Ho.Provider,{value:le},t.createElement(Pe.Z,{className:tt.root},r.children)))}function qa(){const{content:r}=(0,t.useContext)(Ho);return{focusContent:(0,t.useCallback)(()=>{var P,L;(L=(P=r==null?void 0:r.contentRef)==null?void 0:P.current)==null||L.focus()},[r]),contentRef:r==null?void 0:r.contentRef}}const Jo=(0,w.Z)(r=>({drawer:{display:"flex",flexFlow:"column nowrap",alignItems:"flex-start",position:"fixed",left:0,top:0,bottom:0,zIndex:r.zIndex.appBar,background:r.palette.navigation.background,overflowX:"hidden",msOverflowStyle:"none",scrollbarWidth:"none",transition:r.transitions.create("width",{easing:r.transitions.easing.sharp,duration:r.transitions.duration.shortest}),"& > *":{flexShrink:0},"&::-webkit-scrollbar":{display:"none"},"@media print":{display:"none"}},drawerWidth:s=>({width:s.sidebarConfig.drawerWidthClosed}),drawerOpen:s=>({width:s.sidebarConfig.drawerWidthOpen,transition:r.transitions.create("width",{easing:r.transitions.easing.sharp,duration:r.transitions.duration.shorter})}),visuallyHidden:{top:0,position:"absolute",zIndex:1e3,transform:"translateY(-200%)","&:focus":{transform:"translateY(5px)"}}}),{name:"BackstageSidebar"}),Zs=r=>{const{sidebarConfig:s}=(0,t.useContext)(zr),{openDelayMs:P=s.defaultOpenDelayMs,closeDelayMs:L=s.defaultCloseDelayMs,disableExpandOnHover:G,children:le}=r,he=Jo({sidebarConfig:s}),Me=(0,rn.Z)(ar=>ar.breakpoints.down("md"),{noSsr:!0}),[tt,He]=(0,t.useState)(0),Lt=(0,t.useRef)(),{isPinned:It,toggleSidebarPinState:qt}=Na(),Gt=()=>{It||G||(Lt.current&&(clearTimeout(Lt.current),Lt.current=void 0),tt!==2&&!Me&&(Lt.current=window.setTimeout(()=>{Lt.current=void 0,He(2)},P),He(1)))},dn=()=>{It||G||(Lt.current&&(clearTimeout(Lt.current),Lt.current=void 0),tt===1?He(0):tt===2&&(Lt.current=window.setTimeout(()=>{Lt.current=void 0,He(0)},L)))},Pn=tt===2&&!Me||It,wn=ar=>{ar?(He(2),qt()):(He(0),qt())};return t.createElement("nav",{style:{},"aria-label":"sidebar nav"},t.createElement(Fs,null),t.createElement(Wo,{value:{isOpen:Pn,setOpen:wn}},t.createElement(Pe.Z,{className:he.root,"data-testid":"sidebar-root",onMouseEnter:G?()=>{}:Gt,onFocus:G?()=>{}:Gt,onMouseLeave:G?()=>{}:dn,onBlur:G?()=>{}:dn},t.createElement(Pe.Z,{className:x()(he.drawer,he.drawerWidth,{[he.drawerOpen]:Pn})},le))))},Ws=r=>{var s,P;const L=ws((s=r.sidebarOptions)!=null?s:{}),G=Ts((P=r.submenuOptions)!=null?P:{}),{children:le,disableExpandOnHover:he,openDelayMs:Me,closeDelayMs:tt}=r,{isMobile:He}=Na();return He?t.createElement(xs,null,le):t.createElement(zr.Provider,{value:{sidebarConfig:L,submenuConfig:G}},t.createElement(Zs,{openDelayMs:Me,closeDelayMs:tt,disableExpandOnHover:he},le))};function Fs(){const{sidebarConfig:r}=(0,t.useContext)(zr),{focusContent:s,contentRef:P}=qa(),L=Jo({sidebarConfig:r});return P!=null&&P.current?t.createElement(F.Z,{onClick:s,variant:"contained",className:x()(L.visuallyHidden)},"Skip to content"):null}function Za(r,s,P=!1){const L=new URLSearchParams(s.search).toString(),G=kt().parse(L),le=new URLSearchParams(r.search).toString(),he=kt().parse(le),Me=P?B.isEqual:B.isMatch;return(0,B.isEqual)(s.pathname,r.pathname)&&Me(he,G)}const Ks=(0,w.Z)(r=>{var s,P;return{item:{height:48,width:"100%","&:hover":{background:((s=r.palette.navigation.navItem)==null?void 0:s.hoverBackground)||"#6f6f6f",color:r.palette.navigation.selectedColor},display:"flex",alignItems:"center",color:r.palette.navigation.color,padding:r.spacing(2.5),cursor:"pointer",position:"relative",background:"none",border:"none"},itemContainer:{width:"100%"},selected:{background:"#6f6f6f",color:r.palette.common.white},label:{margin:r.spacing(1.75),marginLeft:r.spacing(1),fontSize:r.typography.body2.fontSize,whiteSpace:"nowrap",overflow:"hidden","text-overflow":"ellipsis",lineHeight:1},subtitle:{fontSize:10,whiteSpace:"nowrap",overflow:"hidden","text-overflow":"ellipsis"},dropdownArrow:{position:"absolute",right:21},dropdown:{display:"flex",flexDirection:"column",alignItems:"end"},dropdownItem:{width:"100%",padding:"10px 0 10px 0","&:hover":{background:((P=r.palette.navigation.navItem)==null?void 0:P.hoverBackground)||"#6f6f6f",color:r.palette.navigation.selectedColor}},textContent:{color:r.palette.navigation.color,paddingLeft:r.spacing(4),paddingRight:r.spacing(1),fontSize:r.typography.body2.fontSize,whiteSpace:"nowrap",overflow:"hidden","text-overflow":"ellipsis"}}},{name:"BackstageSidebarSubmenuItem"}),zs=r=>{const{title:s,subtitle:P,to:L,icon:G,dropdownItems:le,exact:he}=r,Me=Ks(),{setIsHoveredOn:tt}=(0,t.useContext)(Xa),He=()=>{tt(!1)},Lt=(0,S.WU)(L!=null?L:""),It=(0,S.TH)();let qt=Za(It,Lt,he);const[Gt,dn]=(0,t.useState)(!1),Pn=()=>{dn(!Gt)};return le!==void 0?(le.some(wn=>{const ar=(0,Te.i3)(wn.to);return qt=Za(It,ar,he),qt}),t.createElement(Pe.Z,{className:Me.itemContainer},t.createElement(rt.ZP,{title:s,enterDelay:500,enterNextDelay:500},t.createElement(F.Z,{role:"button",onClick:Pn,onTouchStart:wn=>wn.stopPropagation(),className:x()(Me.item,qt?Me.selected:void 0)},G&&t.createElement(G,{fontSize:"small"}),t.createElement(i.Z,{variant:"subtitle1",component:"span",className:Me.label},s,t.createElement("br",null),P&&t.createElement(i.Z,{variant:"caption",component:"span",className:Me.subtitle},P)),Gt?t.createElement(mr.Z,{className:Me.dropdownArrow}):t.createElement(Ar.Z,{className:Me.dropdownArrow}))),le&&Gt&&t.createElement(Pe.Z,{className:Me.dropdown},le.map((wn,ar)=>t.createElement(rt.ZP,{key:ar,title:wn.title,enterDelay:500,enterNextDelay:500},t.createElement(Cn,{to:wn.to,underline:"none",className:Me.dropdownItem,onClick:He,onTouchStart:Cr=>Cr.stopPropagation()},t.createElement(i.Z,{component:"span",className:Me.textContent},wn.title))))))):t.createElement(Pe.Z,{className:Me.itemContainer},t.createElement(rt.ZP,{title:s,enterDelay:500,enterNextDelay:500},t.createElement(Cn,{to:L,underline:"none",className:x()(Me.item,qt?Me.selected:void 0),onClick:He,onTouchStart:wn=>wn.stopPropagation()},G&&t.createElement(G,{fontSize:"small"}),t.createElement(i.Z,{variant:"subtitle1",component:"span",className:Me.label},s,t.createElement("br",null),P&&t.createElement(i.Z,{variant:"caption",component:"span",className:Me.subtitle},P)))))},js=(0,w.Z)(r=>({root:{zIndex:1e3,position:"relative",overflow:"visible",width:r.spacing(7)+1},drawer:s=>{var P,L;return{display:"flex",flexFlow:"column nowrap",alignItems:"flex-start",position:"fixed",[r.breakpoints.up("sm")]:{marginLeft:s.left,transition:r.transitions.create("margin-left",{easing:r.transitions.easing.sharp,duration:r.transitions.duration.shortest})},top:0,bottom:0,padding:0,background:(L=(P=r.palette.navigation.submenu)==null?void 0:P.background)!=null?L:"#404040",overflowX:"hidden",msOverflowStyle:"none",scrollbarWidth:"none",cursor:"default",width:s.submenuConfig.drawerWidthClosed,transitionDelay:`${s.submenuConfig.defaultOpenDelayMs}ms`,"& > *":{flexShrink:0},"&::-webkit-scrollbar":{display:"none"}}},drawerOpen:s=>({width:s.submenuConfig.drawerWidthOpen,[r.breakpoints.down("xs")]:{width:"100%",position:"relative",paddingLeft:r.spacing(3),left:0,top:0}}),title:{fontSize:r.typography.h5.fontSize,fontWeight:r.typography.fontWeightMedium,color:r.palette.common.white,padding:r.spacing(2.5),[r.breakpoints.down("xs")]:{display:"none"}}}),{name:"BackstageSidebarSubmenu"}),Yo=r=>{const{isOpen:s}=Da(),{sidebarConfig:P,submenuConfig:L}=(0,t.useContext)(zr),G=s?P.drawerWidthOpen:P.drawerWidthClosed,le=js({left:G,submenuConfig:L}),{isHoveredOn:he}=(0,t.useContext)(Xa),[Me,tt]=(0,t.useState)(!1);return(0,t.useEffect)(()=>{tt(he)},[he]),t.createElement(Pe.Z,{className:x()(le.drawer,{[le.drawerOpen]:Me})},t.createElement(i.Z,{variant:"h5",component:"span",className:le.title},r.title),r.children)},Vs=(0,w.Z)({iconContainer:{display:"flex",position:"relative",width:"100%"},arrow1:{right:"6px",position:"absolute"}}),Gs=()=>{const r=Vs();return React.createElement(Box,{className:r.iconContainer},React.createElement(Box,{className:r.arrow1},React.createElement(ArrowBackIosIcon,{style:{fontSize:"12px"}})),React.createElement(Box,null,React.createElement(ArrowBackIosIcon,{style:{fontSize:"12px"}})))},Hs=(0,w.Z)({iconContainer:{display:"flex",position:"relative",width:"100%"},arrow1:{right:"6px",position:"absolute"}}),Js=()=>{const r=Hs();return React.createElement(Box,{className:r.iconContainer},React.createElement(Box,{className:r.arrow1},React.createElement(ArrowForwardIosIcon,{style:{fontSize:"12px"}})),React.createElement(Box,null,React.createElement(ArrowForwardIosIcon,{style:{fontSize:"12px"}})))},Ys=r=>(0,w.Z)(s=>{var P,L,G,le;return{root:{color:s.palette.navigation.color,display:"flex",flexFlow:"row nowrap",alignItems:"center",height:48,cursor:"pointer"},buttonItem:{background:"none",border:"none",width:"100%",margin:0,padding:0,textAlign:"inherit",font:"inherit",textTransform:"none"},closed:{width:r.drawerWidthClosed,justifyContent:"center"},open:{[s.breakpoints.up("sm")]:{width:r.drawerWidthOpen}},highlightable:{"&:hover":{background:(L=(P=s.palette.navigation.navItem)==null?void 0:P.hoverBackground)!=null?L:"#404040"}},highlighted:{background:(le=(G=s.palette.navigation.navItem)==null?void 0:G.hoverBackground)!=null?le:"#404040"},label:{fontWeight:"bold",whiteSpace:"nowrap",lineHeight:"auto",flex:"3 1 auto",width:"110px",overflow:"hidden","text-overflow":"ellipsis"},iconContainer:{boxSizing:"border-box",height:"100%",width:r.iconContainerWidth,marginRight:-s.spacing(2),display:"flex",alignItems:"center",justifyContent:"center",lineHeight:"0"},searchRoot:{marginBottom:12},searchField:{color:"#b5b5b5",fontWeight:s.typography.fontWeightBold,fontSize:s.typography.fontSize},searchFieldHTMLInput:{padding:s.spacing(2,0,2)},searchContainer:{width:r.drawerWidthOpen-r.iconContainerWidth},secondaryAction:{width:s.spacing(6),textAlign:"center",marginRight:s.spacing(1)},closedItemIcon:{width:"100%",justifyContent:"center"},submenuArrow:{display:"flex"},expandButton:{background:"none",border:"none",color:s.palette.navigation.color,width:"100%",cursor:"pointer",position:"relative",height:48},arrows:{position:"absolute",right:10},selected:{"&$root":{borderLeft:`solid ${r.selectedIndicatorWidth}px ${s.palette.navigation.indicator}`,color:s.palette.navigation.selectedColor},"&$closed":{width:r.drawerWidthClosed},"& $closedItemIcon":{paddingRight:r.selectedIndicatorWidth},"& $iconContainer":{marginLeft:-r.selectedIndicatorWidth}}}},{name:"BackstageSidebarItem"});function Wa(r){return(0,t.useMemo)(()=>Ys(r),[r])()}const Xs=(r,s)=>(0,n.vJ)(r.props.children,P=>{let L=!1;return P.getElements().forEach(({props:{to:G,dropdownItems:le}})=>{if(!L){if(le!=null&&le.length){le.forEach(({to:he})=>L=L||Za(s,(0,Te.i3)(he)));return}G&&(L=Za(s,(0,Te.i3)(G)))}}),L},[s.pathname]);function eo(r){return r.to===void 0}const Qs=t.createElement(Yo).type,el=t.forwardRef(function({to:s,end:P,style:L,className:G,activeStyle:le,caseSensitive:he,activeClassName:Me="active","aria-current":tt="page",...He},Lt){let{pathname:It}=(0,S.TH)(),{pathname:qt}=(0,S.WU)(s);he||(It=It.toLocaleLowerCase("en-US"),qt=qt.toLocaleLowerCase("en-US"));let Gt=It===qt;!Gt&&!P&&(Gt=It.startsWith(`${qt}/`));const dn=Gt?tt:void 0;return t.createElement(ie.rU,{...He,to:s,ref:Lt,"aria-current":dn,style:{...L,...Gt?le:void 0},className:x()([G,Gt?Me:void 0])})}),Xo=(0,t.forwardRef)((r,s)=>{const{icon:P,text:L,hasNotifications:G=!1,hasSubmenu:le=!1,disableHighlight:he=!1,onClick:Me,noTrack:tt,children:He,className:Lt,...It}=r,{sidebarConfig:qt}=(0,t.useContext)(zr),Gt=Wa(qt),{isOpen:dn}=Da(),Pn=!dn&&le?{display:"flex",marginLeft:"20px"}:{lineHeight:"0"},wn=t.createElement(Pe.Z,{style:Pn},t.createElement(P,{fontSize:"small"}),!dn&&le?t.createElement(Pr.Z,{fontSize:"small"}):t.createElement(t.Fragment,null)),ar=t.createElement(Br.Z,{color:"secondary",variant:"dot",overlap:"circular",invisible:!G,className:x()({[Gt.closedItemIcon]:!dn})},wn),Cr=t.createElement(t.Fragment,null,t.createElement(Pe.Z,{"data-testid":"login-button",className:Gt.iconContainer},ar),L&&t.createElement(i.Z,{variant:"subtitle2",component:"span",className:Gt.label},L),t.createElement("div",{className:Gt.secondaryAction},He)),jr=dn?Cr:ar,$n={onClick:Me,className:x()(Lt,Gt.root,dn?Gt.open:Gt.closed,eo(r)&&Gt.buttonItem,{[Gt.highlightable]:!he})},ir=(0,n.z$)(),{pathname:or}=(0,S.WU)(!eo(r)&&r.to?r.to:""),Yr=(0,t.useCallback)(ra=>{if(!tt){const Xr="click",Qr=L!=null?L:"Sidebar Item",Ma=or?{attributes:{to:or}}:void 0;ir.captureEvent(Xr,Qr,Ma)}Me==null||Me(ra)},[ir,L,or,tt,Me]);return eo(r)?t.createElement(F.Z,{role:"button","aria-label":L,...$n,ref:s,onClick:Yr},jr):t.createElement(el,{...$n,activeClassName:Gt.selected,to:r.to?r.to:"",ref:s,"aria-label":L||r.to,...It,onClick:Yr},jr)}),tl=({children:r,...s})=>{const{sidebarConfig:P}=(0,t.useContext)(zr),L=Wa(P),[G,le]=(0,t.useState)(!1),he=(0,S.TH)(),Me=Xs(r,he),tt=(0,rn.Z)(qt=>qt.breakpoints.down("sm")),He=()=>{le(!0)},Lt=()=>{le(!1)},It=()=>tt?G?t.createElement(mr.Z,{fontSize:"small",className:L.submenuArrow}):t.createElement(Ar.Z,{fontSize:"small",className:L.submenuArrow}):!G&&t.createElement(Pr.Z,{fontSize:"small",className:L.submenuArrow});return t.createElement(Xa.Provider,{value:{isHoveredOn:G,setIsHoveredOn:le}},t.createElement("div",{"data-testid":"item-with-submenu",onMouseLeave:Lt,onTouchStart:G?Lt:He,onMouseEnter:He,className:x()(G&&L.highlighted)},t.createElement(Xo,{hasSubmenu:!0,className:Me?L.selected:"",...s},It()),G&&r))},Qo=(0,t.forwardRef)((r,s)=>{const[P]=(0,n.vJ)(r.children,L=>L.getElements().filter(G=>G.type===Qs));return P?t.createElement(tl,{...r},P):t.createElement(Xo,{...r,ref:s})});function cc(r){const{sidebarConfig:s}=useContext(zr),[P,L]=useState(""),G=Wa(s),le=r.icon?r.icon:SearchIcon,he=()=>{r.onSearch(P),L("")},Me=It=>{It.key==="Enter"&&(It.preventDefault(),he())},tt=It=>{L(It.target.value)},He=It=>{It.preventDefault(),It.stopPropagation()},Lt=It=>{he(),It.preventDefault()};return React.createElement(Box,{className:G.searchRoot},React.createElement(Qo,{icon:le,to:r.to,onClick:Lt,disableHighlight:!0},React.createElement(TextField,{placeholder:"Search",value:P,onClick:He,onChange:tt,onKeyDown:Me,className:G.searchContainer,InputProps:{disableUnderline:!0,className:G.searchField},inputProps:{className:G.searchFieldHTMLInput}})))}const nl=(0,C.Z)("div")({flex:1},{name:"BackstageSidebarSpace"}),uc=(0,C.Z)("div")({height:8},{name:"BackstageSidebarSpacer"}),qo=(0,C.Z)("hr")(({theme:r})=>({height:1,width:"100%",background:"#383838",border:"none",margin:r.spacing(1.2,0)}),{name:"BackstageSidebarDivider"}),rl=r=>({overflowY:"auto","&::-webkit-scrollbar":{backgroundColor:r.palette.background.default,width:"5px",borderRadius:"5px"},"&::-webkit-scrollbar-thumb":{backgroundColor:r.palette.text.secondary,borderRadius:"5px"}}),al=(0,C.Z)("div")(({theme:r})=>{const s=rl(r);return{flex:"0 1 auto",overflowX:"hidden",width:"calc(100% - 5px)",minHeight:"48px",overflowY:"hidden","@media (hover: none)":s,"&:hover":s}}),dc=()=>{const{sidebarConfig:r}=useContext(zr),s=Wa(r),{isOpen:P,setOpen:L}=Da();if(useMediaQuery(he=>he.breakpoints.down("md"),{noSsr:!0}))return null;const le=()=>{L(!P)};return React.createElement(Button$1,{role:"button",onClick:le,className:s.expandButton,"aria-label":"Expand Sidebar","data-testid":"sidebar-expand-button"},React.createElement(Box,{className:s.arrows},P?React.createElement(Gs,null):React.createElement(Js,null)))},ol=(0,w.Z)(r=>({introCard:s=>({color:"#b5b5b5",fontSize:12,width:s.sidebarConfig.drawerWidthOpen,marginTop:r.spacing(2.25),marginBottom:r.spacing(1.5),paddingLeft:s.sidebarConfig.iconPadding,paddingRight:s.sidebarConfig.iconPadding}),introDismiss:{display:"flex",justifyContent:"flex-end",alignItems:"center",marginTop:r.spacing(1.5)},introDismissLink:{color:"#dddddd",display:"flex",alignItems:"center",marginBottom:r.spacing(.5),"&:hover":{color:r.palette.linkHover,transition:r.transitions.create("color",{easing:r.transitions.easing.sharp,duration:r.transitions.duration.shortest})}},introDismissText:{fontSize:"0.7rem",fontWeight:"bold",textTransform:"uppercase",letterSpacing:1},introDismissIcon:{width:18,height:18,marginRight:r.spacing(1.5)}}),{name:"BackstageSidebarIntro"});function il(r){const{sidebarConfig:s}=useContext(zr),P=ol({sidebarConfig:s}),{text:L,onClose:G}=r,le=()=>G();return React.createElement(Box,{className:P.introCard},React.createElement(Typography,{variant:"subtitle2"},L),React.createElement(Box,{className:P.introDismiss},React.createElement(IconButton,{onClick:le,className:P.introDismissLink},React.createElement(CloseIcon,{className:P.introDismissIcon}),React.createElement(Typography,{component:"span",className:P.introDismissText},"Dismiss"))))}const ei=r=>{const{text:s,onDismiss:P}=r,[L,G]=useState(!1),le=()=>{G(!0)};return React.createElement(Collapse,{in:!L,onExited:P},React.createElement(il,{text:s,onClose:le}))},sl=null,ll="And your recently viewed plugins will pop up here!";function mc(r){const{isOpen:s}=Da(),P={starredItemsDismissed:!1,recentlyViewedItemsDismissed:!1},{value:L,set:G}=useLocalStorageValue(Is),{starredItemsDismissed:le,recentlyViewedItemsDismissed:he}=L!=null?L:{},Me=()=>{G(He=>({...P,...He,starredItemsDismissed:!0}))},tt=()=>{G(He=>({...P,...He,recentlyViewedItemsDismissed:!0}))};return s?React.createElement(React.Fragment,null,!le&&React.createElement(React.Fragment,null,React.createElement(ei,{text:sl,onDismiss:Me}),React.createElement(qo,null)),!he&&React.createElement(ei,{text:ll,onDismiss:tt})):null}const cl=(0,w.Z)(r=>({header:{gridArea:"pageHeader",padding:r.spacing(3),width:"100%",boxShadow:r.shadows[4],position:"relative",zIndex:100,display:"flex",flexDirection:"row",alignItems:"center",backgroundImage:r.page.backgroundImage,backgroundPosition:"center",backgroundSize:"cover",[r.breakpoints.down("sm")]:{flexWrap:"wrap"}},leftItemsBox:{maxWidth:"100%",flexGrow:1},rightItemsBox:{width:"auto",alignItems:"center"},title:{color:r.page.fontColor,wordBreak:"break-word",fontSize:r.typography.h3.fontSize,marginBottom:0},subtitle:{color:r.page.fontColor,opacity:.8,display:"inline-block",marginTop:r.spacing(1),maxWidth:"75ch"},type:{textTransform:"uppercase",fontSize:11,opacity:.8,marginBottom:r.spacing(1),color:r.page.fontColor},breadcrumb:{color:r.page.fontColor},breadcrumbType:{fontSize:"inherit",opacity:.7,marginRight:-r.spacing(.3),marginBottom:r.spacing(.3)},breadcrumbTitle:{fontSize:"inherit",marginLeft:-r.spacing(.3),marginBottom:r.spacing(.3)}}),{name:"BackstageHeader"}),ul=({type:r,typeLink:s,classes:P,pageTitle:L})=>r?s?t.createElement(Lo,{className:P.breadcrumb},t.createElement(Cn,{to:s},r),t.createElement(i.Z,null,L)):t.createElement(i.Z,{className:P.type},r):null,dl=({pageTitle:r,classes:s,tooltip:P})=>{const{contentRef:L}=qa(),G=t.createElement(i.Z,{ref:L,tabIndex:-1,className:s.title,variant:"h1"},r);return P?t.createElement(rt.ZP,{title:P,placement:"top-start"},G):G},ml=({classes:r,subtitle:s})=>s?typeof s!="string"?t.createElement(t.Fragment,null,s):t.createElement(i.Z,{className:r.subtitle,variant:"subtitle2",component:"span"},s):null;function Fa(r){const{children:s,pageTitleOverride:P,style:L,subtitle:G,title:le,tooltip:he,type:Me,typeLink:tt}=r,He=cl(),It=(0,n.h_)(n.Ds).getOptionalString("app.title")||"Backstage",qt=P||le,Gt=le||P,dn=`${qt} | %s | ${It}`,Pn=`${qt} | ${It}`;return t.createElement(t.Fragment,null,t.createElement(un.q,{titleTemplate:dn,defaultTitle:Pn}),t.createElement("header",{style:L,className:He.header},t.createElement(Pe.Z,{className:He.leftItemsBox},t.createElement(ul,{classes:He,type:Me,typeLink:tt,pageTitle:Gt}),t.createElement(dl,{classes:He,pageTitle:Gt,tooltip:he}),t.createElement(ml,{classes:He,subtitle:G})),t.createElement(Se.Z,{container:!0,className:He.rightItemsBox,spacing:4},s)))}const pl=({label:r,secondaryLabel:s,icon:P,disabled:L=!1,onClick:G})=>React.createElement(Fragment,null,React.createElement(ListItem,{"data-testid":"header-action-item",disabled:L,button:!0,onClick:le=>{G&&G(le)}},P&&React.createElement(ListItemIcon,null,P),React.createElement(ListItemText,{primary:r,secondary:s})));function pc(r){const{palette:{common:{white:s}}}=useTheme(),{actionItems:P}=r,[L,G]=React.useState(!1),le=React.useRef(null);return React.createElement(Fragment,null,React.createElement(IconButton,{onClick:()=>G(!0),"data-testid":"header-action-menu",ref:le,style:{color:s,height:56,width:56,marginRight:-4,padding:0}},React.createElement(MoreVert,null)),React.createElement(Popover,{open:L,anchorEl:le.current,anchorOrigin:{horizontal:"right",vertical:"bottom"},transformOrigin:{horizontal:"right",vertical:"top"},onClose:()=>G(!1)},React.createElement(List,null,P.map((he,Me)=>React.createElement(pl,{key:`header-action-menu-${Me}`,...he})))))}const fl=(0,w.Z)(r=>({root:{textAlign:"left"},label:{color:r.page.fontColor,fontWeight:r.typography.fontWeightBold,letterSpacing:0,fontSize:r.typography.fontSize,marginBottom:r.spacing(1)/2,lineHeight:1},value:{color:(0,K.Fq)(r.page.fontColor,.8),fontSize:r.typography.fontSize,lineHeight:1}}),{name:"BackstageHeaderLabel"}),hl=({value:r,className:s})=>t.createElement(i.Z,{component:typeof r=="string"?"p":"span",className:s},r);function gl(r){const{label:s,value:P,url:L}=r,G=fl(),le=t.createElement(hl,{className:G.value,value:P||"<Unknown>"});return t.createElement(Se.Z,{item:!0},t.createElement(i.Z,{component:"span",className:G.root},t.createElement(i.Z,{className:G.label},s),L?t.createElement(Cn,{to:L},le):le))}const El=r=>(0,H.Z)({root:{color:r.palette.common.white,padding:r.spacing(2,2,3),backgroundImage:r.getPageTheme({themeId:"card"}).backgroundImage,backgroundPosition:0,backgroundSize:"inherit"}}),vl=(0,w.Z)(El,{name:"BackstageItemCardHeader"});function ti(r){const{title:s,subtitle:P,children:L}=r,G=vl(r);return t.createElement(Pe.Z,{className:G.root},P&&t.createElement(i.Z,{variant:"subtitle2",component:"h3"},P),s&&t.createElement(i.Z,{variant:"h6",component:"h4"},s),L)}function fc(r){const{description:s,tags:P,title:L,type:G,subtitle:le,label:he,onClick:Me,href:tt}=r;return React.createElement(Card,null,React.createElement(CardMedia,null,React.createElement(ti,{title:L,subtitle:le||G})),React.createElement(CardContent,null,P!=null&&P.length?React.createElement(Box,null,P.map((He,Lt)=>React.createElement(Chip,{size:"small",label:He,key:Lt}))):null,s),React.createElement(CardActions,null,!tt&&React.createElement(Mn,{to:"#",onClick:Me,color:"primary"},he),tt&&React.createElement(Mn,{to:tt,color:"primary"},he)))}const yl=r=>(0,H.Z)({root:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(22em, 1fr))",gridAutoRows:"1fr",gridGap:r.spacing(2)}}),_l=(0,w.Z)(yl,{name:"BackstageItemCardGrid"});function bl(r){const{children:s,...P}=r,L=_l(P);return t.createElement(Pe.Z,{className:L.root,...P},s)}const Pl=(0,w.Z)(r=>({root:{display:"grid",gridTemplateAreas:"'pageHeader pageHeader pageHeader' 'pageSubheader pageSubheader pageSubheader' 'pageNav pageContent pageSidebar'",gridTemplateRows:"max-content auto 1fr",gridTemplateColumns:"auto 1fr auto",overflowY:"auto",height:"100vh",[r.breakpoints.down("xs")]:{height:"100%"},"@media print":{display:"block",height:"auto",overflowY:"inherit"}}}),{name:"BackstagePage"});function Ka(r){const{themeId:s,children:P}=r,L=Pl();return t.createElement(v.Z,{theme:G=>({...G,page:G.getPageTheme({themeId:s})})},t.createElement("main",{className:L.root},P))}function Cl(r){const{themeId:s,children:P,...L}=r;return t.createElement(Ka,{themeId:s},t.createElement(Fa,{...L}),P)}const Ol=Fn.z.object({providerInfo:Fn.z.object({}).catchall(Fn.z.unknown()).optional(),profile:Fn.z.object({email:Fn.z.string().optional(),displayName:Fn.z.string().optional(),picture:Fn.z.string().optional()}),backstageIdentity:Fn.z.object({token:Fn.z.string(),identity:Fn.z.object({type:Fn.z.literal("user"),userEntityRef:Fn.z.string(),ownershipEntityRefs:Fn.z.array(Fn.z.string())})})});var Sl=Object.defineProperty,Rl=(r,s,P)=>s in r?Sl(r,s,{enumerable:!0,configurable:!0,writable:!0,value:P}):r[s]=P,to=(r,s,P)=>(Rl(r,typeof s!="symbol"?s+"":s,P),P);const ni={defaultTokenExpiryMillis:5*60*1e3,tokenExpiryMarginMillis:5*60*1e3};function Al(r){const s=new Date(Date.now()+ni.defaultTokenExpiryMillis);if(!r)return s;const[P,L,G]=r.split("."),le=JSON.parse(window.atob(L));return typeof le.exp!="number"?s:new Date(le.exp*1e3-ni.tokenExpiryMarginMillis)}class wl{constructor(s){to(this,"options"),to(this,"abortController"),to(this,"state"),this.options=s,this.abortController=new AbortController,this.state={type:"empty"}}async start(){await this.getSessionAsync()}getUserId(){const{backstageIdentity:s}=this.getSessionSync(),P=s.identity.userEntityRef,L=/^([^:/]+:)?([^:/]+\/)?([^:/]+)$/.exec(P);if(!L)throw new TypeError(`Invalid user entity reference "${P}"`);return L[3]}async getIdToken(){return(await this.getSessionAsync()).backstageIdentity.token}getProfile(){return this.getSessionSync().profile}async getProfileInfo(){return(await this.getSessionAsync()).profile}async getBackstageIdentity(){return(await this.getSessionAsync()).backstageIdentity.identity}async getCredentials(){return{token:(await this.getSessionAsync()).backstageIdentity.token}}async signOut(){this.abortController.abort()}getSessionSync(){if(this.state.type==="active")return this.state.session;if(this.state.type==="fetching"&&this.state.previous)return this.state.previous;throw new Error("No session available. Try reloading your browser page.")}async getSessionAsync(){if(this.state.type==="fetching")return this.state.promise;if(this.state.type==="active"&&new Date<this.state.expiresAt)return this.state.session;const s=this.state.type==="active"?this.state.session:void 0,P=this.fetchSession().then(L=>(this.state={type:"active",session:L,expiresAt:Al(L.backstageIdentity.token)},L),L=>{throw this.state={type:"failed",error:L},L});return this.state={type:"fetching",promise:P,previous:s},P}async fetchSession(){const s=await this.options.discoveryApi.getBaseUrl("auth"),P=typeof this.options.headers=="function"?await this.options.headers():this.options.headers,L=new Headers(P);L.set("X-Requested-With","XMLHttpRequest");const G=await fetch(`${s}/${this.options.provider}/refresh`,{signal:this.abortController.signal,headers:L,credentials:"include"});if(!G.ok)throw await ResponseError.fromResponse(G);return Ol.parse(await G.json())}}const hc=r=>{const s=useApi(discoveryApiRef),[{status:P,error:L},{execute:G}]=useAsync(async()=>{const le=new wl({provider:r.provider,discoveryApi:s,headers:r.headers});await le.start(),r.onSignInSuccess(le)});return useMountEffect(G),P==="loading"?React.createElement(pa,null):L?React.createElement(Nr,{title:"You do not appear to be signed in. Please try reloading the browser page.",error:L}):null};class no{getUserId(){return"guest"}async getIdToken(){}getProfile(){return{email:"guest@example.com",displayName:"Guest"}}async getProfileInfo(){return{email:"guest@example.com",displayName:"Guest"}}async getBackstageIdentity(){const s="user:default/guest";return{type:"user",userEntityRef:s,ownershipEntityRefs:[s]}}async getCredentials(){return{}}async signOut(){}}function Tl(r){const[s,P,L]=r.split(".");return JSON.parse(window.atob(P))}class ro{constructor(s){this.result=s}getUserId(){return this.result.userId}static fromResult(s){return new ro(s)}async getIdToken(){var s,P;return(P=(s=this.result).getIdToken)==null?void 0:P.call(s)}getProfile(){return this.result.profile}async getProfileInfo(){return this.result.profile}async getBackstageIdentity(){const s=await this.getIdToken();if(!s){const G=`user:default/${this.getUserId()}`;return{type:"user",userEntityRef:G,ownershipEntityRefs:[G]}}const{sub:P,ent:L}=Tl(s);return{type:"user",userEntityRef:P,ownershipEntityRefs:L!=null?L:[]}}async getCredentials(){var s,P;return{token:await((P=(s=this.result).getIdToken)==null?void 0:P.call(s))}}async signOut(){var s,P;return(P=(s=this.result).signOut)==null?void 0:P.call(s)}}var Il=Object.defineProperty,Dl=(r,s,P)=>s in r?Il(r,s,{enumerable:!0,configurable:!0,writable:!0,value:P}):r[s]=P,Ml=(r,s,P)=>(Dl(r,typeof s!="symbol"?s+"":s,P),P);class _a{constructor(s,P,L){this.identity=s,this.authApi=P,this.profile=L,Ml(this,"profilePromise")}static createGuest(){return new no}static fromLegacy(s){return ro.fromResult(s)}static create(s){return new _a(s.identity,s.authApi,s.profile)}getUserId(){const s=this.identity.userEntityRef,P=/^([^:/]+:)?([^:/]+\/)?([^:/]+)$/.exec(s);if(!P)throw new TypeError(`Invalid user entity reference "${s}"`);return P[3]}async getIdToken(){return(await this.authApi.getBackstageIdentity()).token}getProfile(){if(!this.profile)throw new Error("The identity API does not implement synchronous profile fetching, use getProfileInfo() instead");return this.profile}async getProfileInfo(){if(this.profilePromise)return await this.profilePromise;try{return this.profilePromise=this.authApi.getProfile(),await this.profilePromise}catch(s){throw this.profilePromise=void 0,s}}async getBackstageIdentity(){return this.identity}async getCredentials(){return{token:(await this.authApi.getBackstageIdentity()).token}}async signOut(){return this.authApi.signOut()}}const ao=(0,w.Z)({container:{padding:0,listStyle:"none"},item:{display:"flex",flexDirection:"column",width:"100%",maxWidth:"400px",margin:0,padding:0}},{name:"BackstageSignInPage"}),za=({children:r})=>{const s=ao();return t.createElement(Se.Z,{component:"li",item:!0,classes:s},r)},$l={Component:({config:r,onSignInStarted:s,onSignInSuccess:P,onSignInFailure:L})=>{const{apiRef:G,title:le,message:he}=r,Me=(0,n.h_)(G),tt=(0,n.h_)(n.VE),He=async()=>{try{s();const Lt=await Me.getBackstageIdentity({instantPopup:!0});if(!Lt)throw L(),new Error(`The ${le} provider is not configured to support sign-in`);const It=await Me.getProfile();P(_a.create({identity:Lt.identity,profile:It,authApi:Me}))}catch(Lt){L(),tt.post(new it.SP("Login failed",Lt))}};return t.createElement(za,null,t.createElement(va,{variant:"fullHeight",title:le,actions:t.createElement(F.Z,{color:"primary",variant:"outlined",onClick:He},"Sign In")},t.createElement(i.Z,{variant:"body1"},he)))},loader:async(r,s)=>{const P=r.get(s),L=await P.getBackstageIdentity({optional:!0});if(!L)return;const G=await P.getProfile();return _a.create({identity:L.identity,profile:G,authApi:P})}},Ll={Component:({onSignInStarted:r,onSignInSuccess:s})=>t.createElement(za,null,t.createElement(va,{title:"Guest",variant:"fullHeight",actions:t.createElement(F.Z,{color:"primary",variant:"outlined",onClick:()=>{r(),s(new no)}},"Enter")},t.createElement(i.Z,{variant:"body1"},"Enter as a Guest User.",t.createElement("br",null),"You will not have a verified identity,",t.createElement("br",null),"meaning some features might be unavailable."))),loader:async()=>new no},Bl=/^[a-z0-9_\-]+\.[a-z0-9_\-]+\.[a-z0-9_\-]+$/i,Ul=(0,w.Z)(r=>({form:{display:"flex",flexFlow:"column nowrap"},button:{alignSelf:"center",marginTop:r.spacing(2)}}),{name:"BackstageCustomProvider"}),ri=r=>{const{ref:s,...P}=r;return{inputRef:s,...P}},xl={Component:({onSignInStarted:r,onSignInSuccess:s})=>{const P=Ul(),{register:L,handleSubmit:G,formState:le}=(0,wr.cI)({mode:"onChange"}),{errors:he}=le,Me=({userId:tt,idToken:He})=>{r(),s(_a.fromLegacy({userId:tt,getIdToken:He!==void 0?async()=>He:void 0,profile:{email:`${tt}@example.com`}}))};return t.createElement(za,null,t.createElement(va,{title:"Custom User",variant:"fullHeight"},t.createElement(i.Z,{variant:"body1"},"Enter your own User ID and credentials.",t.createElement("br",null),"This selection will not be stored."),t.createElement("form",{className:P.form,onSubmit:G(Me)},t.createElement(oe.Z,null,t.createElement(br.Z,{...ri(L("userId",{required:!0})),label:"User ID",margin:"normal",error:Boolean(he.userId)}),he.userId&&t.createElement(Mr.Z,{error:!0},he.userId.message)),t.createElement(oe.Z,null,t.createElement(br.Z,{...ri(L("idToken",{required:!1,validate:tt=>!tt||Bl.test(tt)||"Token is not a valid OpenID Connect JWT Token"})),label:"ID Token (optional)",margin:"normal",autoComplete:"off",error:Boolean(he.idToken)}),he.idToken&&t.createElement(Mr.Z,{error:!0},he.idToken.message)),t.createElement(F.Z,{type:"submit",color:"primary",variant:"outlined",className:P.button,disabled:!(le!=null&&le.isDirty)||!Ur()(he)},"Continue"))))},loader:async()=>{}};class oo{constructor(s){this.config=s}static from(s){return new oo(s)}getUserId(){if(!this.config.identityApi.getUserId)throw new Error("SignOutProxy IdentityApi.getUserId is not implemented");return this.config.identityApi.getUserId()}getIdToken(){if(!this.config.identityApi.getIdToken)throw new Error("SignOutProxy IdentityApi.getIdToken is not implemented");return this.config.identityApi.getIdToken()}getProfile(){if(!this.config.identityApi.getProfile)throw new Error("SignOutProxy IdentityApi.getProfile is not implemented");return this.config.identityApi.getProfile()}getProfileInfo(){return this.config.identityApi.getProfileInfo()}getBackstageIdentity(){return this.config.identityApi.getBackstageIdentity()}getCredentials(){return this.config.identityApi.getCredentials()}signOut(){return this.config.signOut()}}const ba="@backstage/core:SignInPage:provider",ai={guest:Ll,custom:xl,common:$l};function oi(r,s){if(r in s)throw new Error(`"${r}" ID is duplicated. IDs of identity providers have to be unique.`)}function kl(r){return r.reduce((P,L)=>{if(typeof L=="string")return oi(L,P),P[L]={components:ai[L],id:L},P;const{id:G}=L;return oi(G,P),P[G]={components:ai.common,id:G,config:L},P},{})}const Nl=(r,s)=>{const P=(0,n.h_)(n.VE),L=(0,n.I_)(),[G,le]=(0,t.useState)(!0),he=(0,t.useCallback)(tt=>{s(oo.from({identityApi:tt,signOut:async()=>{var He;localStorage.removeItem(ba),await((He=tt.signOut)==null?void 0:He.call(tt))}}))},[s]);(0,t.useLayoutEffect)(()=>{var tt;if(!G)return;const He=localStorage.getItem(ba);if(He===null){le(!1);return}const Lt=r[He];if(!Lt){le(!1);return}let It=!1;return Lt.components.loader(L,(tt=Lt.config)==null?void 0:tt.apiRef).then(qt=>{if(It){localStorage.removeItem(ba);return}qt?he(qt):le(!1)}).catch(qt=>{localStorage.removeItem(ba),!It&&(P.post(qt),le(!1))}),()=>{It=!0}},[G,P,s,L,r,he]);const Me=(0,t.useMemo)(()=>Object.keys(r).map(tt=>{const He=r[tt],{Component:Lt}=He.components,It=dn=>{he(dn)},qt=()=>{var dn;localStorage.setItem(ba,((dn=He==null?void 0:He.config)==null?void 0:dn.id)||He.id)},Gt=()=>{localStorage.removeItem(ba)};return t.createElement(Lt,{key:He.id,config:He.config,onSignInStarted:qt,onSignInSuccess:It,onSignInFailure:Gt})}),[r,he]);return[G,Me]},Zl=({onSignInSuccess:r,providers:s=[],title:P,align:L="left"})=>{const G=(0,n.h_)(n.Ds),le=ao(),he=kl(s),[Me,tt]=Nl(he,r);return Me?t.createElement(pa,null):t.createElement(Ka,{themeId:"home"},t.createElement(Fa,{title:G.getString("app.title")}),t.createElement(xa,null,P&&t.createElement($o,{title:P,textAlign:L}),t.createElement(Se.Z,{container:!0,justifyContent:L==="center"?L:"flex-start",spacing:2,component:"ul",classes:le},tt)))},Wl=({provider:r,auto:s,onSignInSuccess:P})=>{const L=ao(),G=(0,n.h_)(r.apiRef),le=(0,n.h_)(n.Ds),[he,Me]=(0,t.useState)(),[tt,He]=(0,t.useState)(!1),Lt=async({checkExisting:It,showPopup:qt})=>{try{let Gt;if(It&&(Gt=await G.getBackstageIdentity({optional:!0})),!Gt&&(qt||s)&&(He(!0),Gt=await G.getBackstageIdentity({instantPopup:!0}),!Gt))throw new Error(`The ${r.title} provider is not configured to support sign-in`);if(!Gt){He(!0);return}const dn=await G.getProfile();P(_a.create({identity:Gt.identity,authApi:G,profile:dn}))}catch(Gt){Me(Gt),He(!0)}};return(0,Re.n)(()=>Lt({checkExisting:!0})),tt?t.createElement(Ka,{themeId:"home"},t.createElement(Fa,{title:le.getString("app.title")}),t.createElement(xa,null,t.createElement(Se.Z,{container:!0,justifyContent:"center",spacing:2,component:"ul",classes:L},t.createElement(za,null,t.createElement(va,{variant:"fullHeight",title:r.title,actions:t.createElement(F.Z,{color:"primary",variant:"outlined",onClick:()=>{Lt({showPopup:!0})}},"Sign In")},t.createElement(i.Z,{variant:"body1"},r.message),he&&he.name!=="PopupRejectedError"&&t.createElement(i.Z,{variant:"body1",color:"error"},he.message)))))):t.createElement(pa,null)};function Fl(r){return"provider"in r?t.createElement(Wl,{...r}):t.createElement(Zl,{...r})}const Kl=(0,w.Z)(r=>({root:{padding:r.spacing(0,2,0,2.5),minHeight:r.spacing(3)},indicator:{backgroundColor:r.palette.info.main,height:r.spacing(.3)}}),{name:"BackstageTabbedCard"}),zl=(0,k.Z)(r=>({root:{padding:r.spacing(2,2,2,2.5),display:"inline-block"},title:{fontWeight:700},subheader:{paddingTop:r.spacing(1)}}),{name:"BackstageTabbedCardBoldHeader"})(h.Z);function jl(r){const{slackChannel:s,errorBoundaryProps:P,children:L,title:G,deepLink:le,value:he,onChange:Me}=r,tt=Kl(),[He,Lt]=(0,t.useState)(0),It=Me||((dn,Pn)=>Lt(Pn));let qt;he?t.Children.map(L,dn=>{t.isValidElement(dn)&&(dn==null?void 0:dn.props.value)===he&&(qt=dn==null?void 0:dn.props.children)}):t.Children.map(L,(dn,Pn)=>{t.isValidElement(dn)&&Pn===He&&(qt=dn==null?void 0:dn.props.children)});const Gt=P||(s?{slackChannel:s}:{});return t.createElement(je.Z,null,t.createElement(co,{...Gt},G&&t.createElement(zl,{title:G}),t.createElement(tn.Z,{selectionFollowsFocus:!0,classes:tt,value:he||He,onChange:It},L),t.createElement(St.Z,null),t.createElement(_.Z,null,qt),le&&t.createElement(lo,{...le})))}const Vl=(0,w.Z)(r=>({root:{minWidth:r.spacing(6),minHeight:r.spacing(3),margin:r.spacing(0,2,0,0),padding:r.spacing(.5,0,.5,0),textTransform:"none","&:hover":{opacity:1,backgroundColor:"transparent",color:r.palette.text.primary}},selected:{fontWeight:r.typography.fontWeightBold}}),{name:"BackstageCardTab"});function Gl(r){const{children:s,...P}=r,L=Vl();return t.createElement(ln.Z,{disableRipple:!0,classes:L,...P})}},49408:function(Dt,E,e){"use strict";e.d(E,{P:function(){return i},u:function(){return c}});var n=e(18473),d=e(2784);const p="plugin-context",i=m=>{const{children:b,plugin:R}=m,{Provider:t}=(0,n.CT)(p);return d.createElement(t,{value:(0,n.EI)({1:{plugin:R}})},b)};function c(){const m=(0,n.Vt)(p);if(!m)throw new Error("Plugin Options context is not available");const b=m.atVersion(1);if(!b)throw new Error("Plugin Options v1 is not available");return b.plugin.getPluginOptions()}},30705:function(Dt,E,e){"use strict";e.d(E,{$4:function(){return Nt},$v:function(){return S},CL:function(){return ke},CO:function(){return Ct},D:function(){return v},Ds:function(){return Pe},E6:function(){return D},F4:function(){return C},IY:function(){return ft},I_:function(){return R},Km:function(){return B},Kp:function(){return H},NT:function(){return st},NW:function(){return qe},Oi:function(){return De},P4:function(){return mt},R5:function(){return Ge},Rz:function(){return Vt},T0:function(){return N},VE:function(){return xe},W0:function(){return rt},YO:function(){return _t},ZM:function(){return rn},bq:function(){return x},fC:function(){return b},gP:function(){return Kt},gW:function(){return J},h_:function(){return t},hg:function(){return Te},ni:function(){return K},p_:function(){return g},qD:function(){return z},rx:function(){return W},sM:function(){return k},tg:function(){return Ee},uB:function(){return T},ux:function(){return F},vJ:function(){return zt},v_:function(){return ie},x8:function(){return Bt},z$:function(){return A}});var n=e(18473),d=e(2784),p=e(73557),i=e(49408);const c=(0,n.CT)("analytics-context"),m=()=>{const _=(0,d.useContext)(c);if(_===void 0)return{routeRef:"unknown",pluginId:"root",extension:"App"};const h=_.atVersion(1);if(h===void 0)throw new Error("No context found for version 1.");return h},b=_=>{const{attributes:h,children:M}=_,j={...m(),...h},Z=(0,n.EI)({1:j});return d.createElement(c.Provider,{value:Z},M)};function R(){const _=(0,n.Vt)("api-context");if(!_)throw new Error("API context is not available");const h=_.atVersion(1);if(!h)throw new Error("ApiContext v1 not available");return h}function t(_){const M=R().get(_);if(!M)throw new Error(`No implementation available for ${_}`);return M}function U(_){return function(M){const X=Z=>{const oe=R(),se={};for(const Ue in _)if(_.hasOwnProperty(Ue)){const lt=_[Ue],ne=oe.get(lt);if(!ne)throw new Error(`No implementation available for ${lt}`);se[Ue]=ne}return React.createElement(M,{...Z,...se})},j=M.displayName||M.name||"Component";return X.displayName=`withApis(${j})`,X}}class w{constructor(h){if(this.config=h,!h.id.split(".").flatMap(X=>X.split("-")).every(X=>X.match(/^[a-z][a-z0-9]*$/)))throw new Error(`API id must only contain period separated lowercase alphanum tokens with dashes, got '${h.id}'`)}get id(){return this.config.id}get T(){throw new Error(`tried to read ApiRef.T of ${this}`)}toString(){return`apiRef{${this.config.id}}`}}function N(_){return new w(_)}function K(_,h){return"id"in _?{api:_,deps:{},factory:()=>h}:_}var k=(_=>(_.SignedIn="SignedIn",_.SignedOut="SignedOut",_))(k||{});const H=N({id:"core.auth.google"}),C=N({id:"core.auth.github"}),v=N({id:"core.auth.okta"}),F=N({id:"core.auth.gitlab"}),g=N({id:"core.auth.microsoft"}),J=N({id:"core.auth.onelogin"}),x=N({id:"core.auth.bitbucket"}),B=N({id:"core.auth.bitbucket-server"}),T=N({id:"core.auth.atlassian"}),S=N({id:"core.alert"}),ie=N({id:"core.analytics"}),Te=N({id:"core.apptheme"}),Pe=N({id:"core.config"}),qe=N({id:"core.discovery"}),xe=N({id:"core.error"});var ke=(_=>(_[_.None=0]="None",_[_.Active=1]="Active",_))(ke||{});const rt=N({id:"core.featureflags"}),Kt=N({id:"core.fetch"}),Nt=N({id:"core.identity"}),rn=N({id:"core.oauthrequest"}),D=N({id:"core.storage"}),we=(0,n.uW)("core-plugin-api:analytics-tracker-events",()=>({mostRecentGatheredNavigation:void 0,mostRecentRoutableExtensionRender:void 0,beforeUnloadRegistered:!1})),ue="_ROUTABLE-EXTENSION-RENDERED";class Ke{constructor(h,M={routeRef:"unknown",pluginId:"root",extension:"App"}){this.analyticsApi=h,this.context=M,we.beforeUnloadRegistered||(addEventListener("beforeunload",()=>{we.mostRecentGatheredNavigation&&(this.analyticsApi.captureEvent({...we.mostRecentGatheredNavigation,...we.mostRecentRoutableExtensionRender}),we.mostRecentGatheredNavigation=void 0,we.mostRecentRoutableExtensionRender=void 0)},{once:!0,passive:!0}),we.beforeUnloadRegistered=!0)}setContext(h){this.context=h}captureEvent(h,M,{value:X,attributes:j}={}){const{_routeNodeType:Z,...oe}=this.context;if(h===ue){we.mostRecentGatheredNavigation&&(we.mostRecentRoutableExtensionRender={context:{...oe,extension:"App"}});return}if(we.mostRecentGatheredNavigation){try{this.analyticsApi.captureEvent({...we.mostRecentGatheredNavigation,...we.mostRecentRoutableExtensionRender})}catch(se){console.warn("Error during analytics event capture. %o",se)}we.mostRecentGatheredNavigation=void 0,we.mostRecentRoutableExtensionRender=void 0}if(h==="navigate"&&Z==="gathered"&&oe.pluginId==="root"){we.mostRecentGatheredNavigation={action:h,subject:M,value:X,attributes:j,context:oe};return}try{this.analyticsApi.captureEvent({action:h,subject:M,value:X,attributes:j,context:oe})}catch(se){console.warn("Error during analytics event capture. %o",se)}}}function $(){try{return t(ie)}catch{return{captureEvent:()=>{}}}}function A(){const _=(0,d.useRef)(null),h=m(),M=$();function X(){return _.current===null&&(_.current=new Ke(M)),_.current}const j=X();return j.setContext(h),j}const z=()=>{const _=(0,n.Vt)("app-context");if(!_)throw new Error("App context is not available");const h=_.atVersion(1);if(!h)throw new Error("AppContext v1 not available");return h},ae=(0,n.uW)("component-data-store",()=>new WeakMap),$e="__backstage_data";function Ge(_,h,M){var X;const j=_;let Z=(X=j[$e])!=null?X:ae.get(_);if(Z||(Z={map:new Map},Object.defineProperty(j,$e,{enumerable:!1,configurable:!0,writable:!1,value:Z}),ae.set(_,Z)),Z.map.has(h)){const oe=_.displayName||_.name;throw new Error(`Attempted to attach duplicate data "${h}" to component "${oe}"`)}Z.map.set(h,M)}function ft(_,h){var M;if(!_)return;const X=_.type;if(!X)return;const j=(M=X[$e])!=null?M:ae.get(X);if(j)return j.map.get(h)}const nt=(0,n.uW)("route-ref-type",()=>Symbol("route-ref-type"));var Rt=Object.defineProperty,q=(_,h,M)=>h in _?Rt(_,h,{enumerable:!0,configurable:!0,writable:!0,value:M}):_[h]=M,de=(_,h,M)=>(q(_,typeof h!="symbol"?h+"":h,M),M),Se;class Ne{constructor(h,M){this.id=h,this.params=M,de(this,Se,"absolute")}get title(){return this.id}toString(){return`routeRef{type=absolute,id=${this.id}}`}}Se=nt;function st(_){var h;return new Ne(_.id,(h=_.params)!=null?h:[])}var pe=Object.defineProperty,Je=(_,h,M)=>h in _?pe(_,h,{enumerable:!0,configurable:!0,writable:!0,value:M}):_[h]=M,ot=(_,h,M)=>(Je(_,typeof h!="symbol"?h+"":h,M),M),Qe;const Et=/^\w+$/;class dt{constructor(h,M,X,j){this.id=h,this.path=M,this.parent=X,this.params=j,ot(this,Qe,"sub")}toString(){return`routeRef{type=sub,id=${this.id}}`}}Qe=nt;function Vt(_){const{id:h,path:M,parent:X}=_,j=M.split("/").filter(se=>se.startsWith(":")).map(se=>se.substring(1)),Z=[...X.params,...j];if(X.params.some(se=>j.includes(se)))throw new Error("SubRouteRef may not have params that overlap with its parent");if(!M.startsWith("/"))throw new Error(`SubRouteRef path must start with '/', got '${M}'`);if(M.endsWith("/"))throw new Error(`SubRouteRef path must not end with '/', got '${M}'`);for(const se of j)if(!Et.test(se))throw new Error(`SubRouteRef path has invalid param, got '${se}'`);return new dt(h,M,X,Z)}var jt=Object.defineProperty,Ht=(_,h,M)=>h in _?jt(_,h,{enumerable:!0,configurable:!0,writable:!0,value:M}):_[h]=M,Ye=(_,h,M)=>(Ht(_,typeof h!="symbol"?h+"":h,M),M),St;class Mt{constructor(h,M,X){this.id=h,this.params=M,this.optional=X,Ye(this,St,"external")}toString(){return`routeRef{type=external,id=${this.id}}`}}St=nt;function Bt(_){var h;return new Mt(_.id,(h=_.params)!=null?h:[],Boolean(_.optional))}function Ee(_){const{pathname:h}=(0,p.TH)(),M=(0,n.Vt)("routing-context");if(!M)throw new Error("Routing context is not available");const X=M.atVersion(1),j=(0,d.useMemo)(()=>X&&X.resolve(_,{pathname:h}),[X,_,h]);if(!M)throw new Error("useRouteRef used outside of routing context");if(!X)throw new Error("RoutingContext v1 not available");const Z="optional"in _&&_.optional;if(!j&&!Z)throw new Error(`No path for ${_}`);return j}function De(_){return(0,p.UO)()}var ct=Object.defineProperty,Ve=(_,h,M)=>h in _?ct(_,h,{enumerable:!0,configurable:!0,writable:!0,value:M}):_[h]=M,yt=(_,h,M)=>(Ve(_,typeof h!="symbol"?h+"":h,M),M);class ye extends d.Component{constructor(){super(...arguments),yt(this,"state",{error:void 0}),yt(this,"handleErrorReset",()=>{this.setState({error:void 0})})}static getDerivedStateFromError(h){return{error:h}}render(){const{error:h}=this.state,{app:M,plugin:X}=this.props,{ErrorBoundaryFallback:j}=M.getComponents();return h?d.createElement(j,{error:h,resetError:this.handleErrorReset,plugin:X}):this.props.children}}function mt(_){const{component:h,mountPoint:M,name:X}=_;return _t({component:{lazy:()=>h().then(j=>{const Z=se=>{const Ue=A();try{Ee(M)}catch(lt){if(typeof lt=="object"&&lt!==null){const{message:ne}=lt;if(typeof ne=="string"&&ne.startsWith("No path for "))throw new Error(`Routable extension component with mount point ${M} was not discovered in the app element tree. Routable extension components may not be rendered by other components and must be directly available as an element within the App provider component.`)}throw lt}return(0,d.useEffect)(()=>{Ue.captureEvent(ue,"")},[Ue]),d.createElement(j,{...se})},oe=X||j.displayName||j.name||"LazyComponent";return Z.displayName=`RoutableExtension(${oe})`,Z},j=>oe=>{const se=z(),{BootErrorPage:Ue}=se.getComponents();return d.createElement(Ue,{step:"load-chunk",error:j})})},data:{"core.mountPoint":M},name:X})}function Ct(_){const{component:h,name:M}=_;return _t({component:h,name:M})}function _t(_){const{data:h={},name:M}=_;M||console.warn("Declaring extensions without name is DEPRECATED. Make sure that all usages of createReactExtension, createComponentExtension and createRoutableExtension provide a name.");let X;if("lazy"in _.component){const Z=_.component.lazy;X=(0,d.lazy)(()=>Z().then(oe=>({default:oe})))}else X=_.component.sync;const j=M||X.displayName||X.name||"Component";return{expose(Z){const oe=se=>{const Ue=z(),{Progress:lt}=Ue.getComponents(),ne=h==null?void 0:h["core.mountPoint"];return d.createElement(d.Suspense,{fallback:d.createElement(lt,null)},d.createElement(ye,{app:Ue,plugin:Z},d.createElement(b,{attributes:{pluginId:Z.getId(),...M&&{extension:M},...ne&&{routeRef:ne.id}}},d.createElement(i.P,{plugin:Z},d.createElement(X,{...se})))))};Ge(oe,"core.plugin",Z),Ge(oe,"core.extensionName",M);for(const[se,Ue]of Object.entries(h))Ge(oe,se,Ue);return oe.displayName=`Extension(${j})`,oe}}}function it(_,h,M,X){return d.Children.toArray(_).flatMap(j=>{if(!(0,d.isValidElement)(j))return[];if(j.type===d.Fragment)return it(j.props.children,h,M,X);if(ft(j,"core.featureFlagged")){const Z=j.props;return("with"in Z?h.isActive(Z.with):!h.isActive(Z.without))?it(j.props.children,h,M,X):[]}if(M===void 0||M(j))return[j];if(X)throw new Error(X);return it(j.props.children,h,M,X)})}class At{constructor(h,M){this.node=h,this.featureFlagsApi=M}selectByComponentData(h){const M=it(this.node,this.featureFlagsApi,X=>ft(X,h.key)!==void 0,h.withStrictError);return new At(M,this.featureFlagsApi)}findComponentData(h){return it(this.node,this.featureFlagsApi,X=>ft(X,h.key)!==void 0).map(X=>ft(X,h.key)).filter(X=>X!==void 0)}getElements(){return it(this.node,this.featureFlagsApi)}}function zt(_,h,M=[]){const X=t(rt),j=new At(_,X);return(0,d.useMemo)(()=>h(j),[_,...M])}var ze=Object.defineProperty,Re=(_,h,M)=>h in _?ze(_,h,{enumerable:!0,configurable:!0,writable:!0,value:M}):_[h]=M,We=(_,h,M)=>(Re(_,typeof h!="symbol"?h+"":h,M),M);class je{constructor(h){this.config=h,We(this,"options")}getId(){return this.config.id}getApis(){var h;return(h=this.config.apis)!=null?h:[]}getFeatureFlags(){var h,M;return(M=(h=this.config.featureFlags)==null?void 0:h.slice())!=null?M:[]}get routes(){var h;return(h=this.config.routes)!=null?h:{}}get externalRoutes(){var h;return(h=this.config.externalRoutes)!=null?h:{}}provide(h){return h.expose(this)}__experimentalReconfigure(h){this.config.__experimentalConfigure&&(this.options=this.config.__experimentalConfigure(h))}getPluginOptions(){var h;return this.config.__experimentalConfigure&&!this.options&&(this.options=this.config.__experimentalConfigure()),(h=this.options)!=null?h:{}}toString(){return`plugin{${this.config.id}}`}}function W(_){return new je(_)}},32272:function(Dt,E,e){"use strict";e.d(E,{BD:function(){return i},SP:function(){return T},VL:function(){return qe},VZ:function(){return p},dR:function(){return F}});var n=e(24852),d=e.n(n);function p(xe){if(typeof xe!="object"||xe===null||Array.isArray(xe))return!1;const ke=xe;return!(typeof ke.name!="string"||ke.name===""||typeof ke.message!="string")}function i(xe){if(typeof xe!="object"||xe===null||Array.isArray(xe))throw new Error(`Encountered invalid error, not an object, got '${xe}'`);const ke=xe;if(typeof ke.name!="string"||ke.name==="")throw new Error(`Encountered error object without a name, got '${xe}'`);if(typeof ke.message!="string")throw new Error(`Encountered error object without a message, got '${xe}'`)}function c(xe,ke){const Kt={name:"Unknown",message:"<no reason given>",...serializeError$1(xe)};return ke!=null&&ke.includeStack||delete Kt.stack,Kt}function m(xe){const ke=(0,n.deserializeError)(xe);return xe.stack||(ke.stack=void 0),ke}function b(xe){if(p(xe)){const ke=String(xe);return ke!=="[object Object]"?ke:`${xe.name}: ${xe.message}`}return`unknown error '${xe}'`}var R=Object.defineProperty,t=(xe,ke,rt)=>ke in xe?R(xe,ke,{enumerable:!0,configurable:!0,writable:!0,value:rt}):xe[ke]=rt,U=(xe,ke,rt)=>(t(xe,typeof ke!="symbol"?ke+"":ke,rt),rt);class w extends Error{constructor(ke,rt){var Kt;let Nt=ke;if(rt!==void 0){const rn=b(rt);Nt?Nt+=`; caused by ${rn}`:Nt=`caused by ${rn}`}super(Nt),U(this,"cause"),(Kt=Error.captureStackTrace)==null||Kt.call(Error,this,this.constructor),(!this.name||this.name==="Error")&&this.constructor.name!=="Error"&&(this.name=this.constructor.name),this.cause=p(rt)?rt:void 0}}var N=Object.defineProperty,K=(xe,ke,rt)=>ke in xe?N(xe,ke,{enumerable:!0,configurable:!0,writable:!0,value:rt}):xe[ke]=rt,k=(xe,ke,rt)=>(K(xe,typeof ke!="symbol"?ke+"":ke,rt),rt);class H extends null{constructor(){super(...arguments),k(this,"name","InputError")}}class C extends null{constructor(){super(...arguments),k(this,"name","AuthenticationError")}}class v extends null{constructor(){super(...arguments),k(this,"name","NotAllowedError")}}class F extends w{constructor(){super(...arguments),k(this,"name","NotFoundError")}}class g extends null{constructor(){super(...arguments),k(this,"name","ConflictError")}}class J extends null{constructor(){super(...arguments),k(this,"name","NotModifiedError")}}class x extends null{constructor(){super(...arguments),k(this,"name","NotImplementedError")}}class B extends null{}class T extends w{constructor(ke,rt){super(ke,rt),this.name=p(rt)?rt.name:"Error"}}async function S(xe){var ke;try{const rt=await xe.text();if(rt){if((ke=xe.headers.get("content-type"))!=null&&ke.startsWith("application/json"))try{const Kt=JSON.parse(rt);if(Kt.error&&Kt.response)return Kt}catch{}return{error:{name:"Error",message:`Request failed with status ${xe.status} ${xe.statusText}, ${rt}`},response:{statusCode:xe.status}}}}catch{}return{error:{name:"Error",message:`Request failed with status ${xe.status} ${xe.statusText}`},response:{statusCode:xe.status}}}var ie=Object.defineProperty,Te=(xe,ke,rt)=>ke in xe?ie(xe,ke,{enumerable:!0,configurable:!0,writable:!0,value:rt}):xe[ke]=rt,Pe=(xe,ke,rt)=>(Te(xe,typeof ke!="symbol"?ke+"":ke,rt),rt);class qe extends Error{constructor(ke){super(ke.message),Pe(this,"response"),Pe(this,"body"),Pe(this,"cause"),this.name="ResponseError",this.response=ke.response,this.body=ke.data,this.cause=ke.cause}static async fromResponse(ke){const rt=await S(ke),Kt=rt.response.statusCode||ke.status,Nt=rt.error.name||ke.statusText,rn=`Request failed with ${Kt} ${Nt}`,D=m(rt.error);return new qe({message:rn,response:ke,data:rt,cause:D})}}},49462:function(Dt,E,e){"use strict";e.d(E,{Om:function(){return c},ae:function(){return F},nW:function(){return J},q3:function(){return g},zN:function(){return v}});var n=e(30705),d=e(1854),p=e(73250),i=e(2784);const c=(0,n.T0)({id:"core.scmauth"});var m=(x,B,T)=>{if(!B.has(x))throw TypeError("Cannot "+T)},b=(x,B,T)=>(m(x,B,"read from private field"),T?T.call(x):B.get(x)),R=(x,B,T)=>{if(B.has(x))throw TypeError("Cannot add the same private member more than once");B instanceof WeakSet?B.add(x):B.set(x,T)},t=(x,B,T,S)=>(m(x,B,"write to private field"),S?S.call(x,T):B.set(x,T),T),U,w,N,K,k;class H{constructor(B){R(this,U,void 0),t(this,U,B)}async getCredentials(B){const T=new URL(B.url),S=b(this,U).find(ie=>ie.isUrlSupported(T));if(!S)throw new Error(`No auth provider available for '${B.url}', see https://backstage.io/link?scm-auth`);return S.getCredentials(B)}}U=new WeakMap;const C=class ta{constructor(B,T,S,ie){R(this,w,void 0),R(this,N,void 0),R(this,K,void 0),R(this,k,void 0),t(this,w,T),t(this,N,S),t(this,K,ie),t(this,k,B)}static createDefaultApiFactory(){return(0,n.ni)({api:c,deps:{github:n.F4,gitlab:n.ux,azure:n.p_,bitbucket:n.bq},factory:({github:B,gitlab:T,azure:S,bitbucket:ie})=>ta.merge(ta.forGithub(B),ta.forGitlab(T),ta.forAzure(S),ta.forBitbucket(ie))})}static forAuthApi(B,T){return new ta("generic",B,T.host,T.scopeMapping)}static forGithub(B,T){var S;const ie=(S=T==null?void 0:T.host)!=null?S:"github.com";return new ta("github",B,ie,{default:["repo","read:org","read:user"],repoWrite:["gist"]})}static forGitlab(B,T){var S;const ie=(S=T==null?void 0:T.host)!=null?S:"gitlab.com";return new ta("gitlab",B,ie,{default:["read_user","read_api","read_repository"],repoWrite:["write_repository","api"]})}static forAzure(B,T){var S;const ie=(S=T==null?void 0:T.host)!=null?S:"dev.azure.com";return new ta("azure",B,ie,{default:["vso.build","vso.code","vso.graph","vso.project","vso.profile"],repoWrite:["vso.code_manage"]})}static forBitbucket(B,T){var S;const ie=(S=T==null?void 0:T.host)!=null?S:"bitbucket.org";return new ta("bitbucket",B,ie,{default:["account","team","pullrequest","snippet","issue"],repoWrite:["pullrequest:write","snippet:write","issue:write"]})}static merge(...B){return new H(B)}isUrlSupported(B){return B.host===b(this,N)}getAdditionalScopesForProvider(B){var T,S;return!(B!=null&&B.customScopes)||b(this,k)==="generic"?[]:(S=(T=B.customScopes)==null?void 0:T[b(this,k)])!=null?S:[]}async getCredentials(B){const{url:T,additionalScope:S,...ie}=B,Te=b(this,K).default.slice();S!=null&&S.repoWrite&&Te.push(...b(this,K).repoWrite);const Pe=this.getAdditionalScopesForProvider(S);Pe.length&&Te.push(...Pe);const qe=[...new Set(Te)],xe=await b(this,w).getAccessToken(qe,ie);return{token:xe,headers:{Authorization:`Bearer ${xe}`}}}};w=new WeakMap,N=new WeakMap,K=new WeakMap,k=new WeakMap;let v=C;class F{static fromConfig(B){return d.Lx.fromConfig(B)}}const g=(0,n.T0)({id:"integration.scmintegrations"}),J=x=>{var B;const{type:T}=x,S=(0,n.qD)(),ie=p.Z,Te=T&&(B=S.getSystemIcon(T))!=null?B:ie;return i.createElement(Te,null)}},1854:function(Dt,E,e){"use strict";e.d(E,{BT:function(){return Mr},Lx:function(){return gt},MY:function(){return Dn},ah:function(){return rr}});var n=e(82717),d=e.n(n),p=e(76635),i=e.n(p),c=e(96279),m=e.n(c),b=e(42851),R=e(89393),t=e(26228),U=e(48834).Buffer;function w(l){const o=new URL("http://example.com");return o.host=l,o.host===l}function N(l){try{return new URL(l),!0}catch{return!1}}function K(l,o){return{list(){return l},byUrl(f){try{const I=typeof f=="string"?new URL(f):f;return l.find(ee=>o(ee)===I.host)}catch{return}},byHost(f){return l.find(I=>o(I)===f)}}}function k(l){const{url:o,base:f,lineNumber:I}=l;try{return new URL(o),o}catch{}let ee;if(o.startsWith("/")){const{filepath:fe}=d()(f);ee=new URL(f);const Ae=(0,p.trimEnd)(ee.pathname.substring(0,ee.pathname.length-fe.length),"/");ee.pathname=`${Ae}${o}`}else ee=new URL(o,f);return ee.search=new URL(f).search,I&&(ee.hash=`L${I}`),ee.toString()}const H="amazonaws.com";function C(l){var o;const f=l.getOptionalString("endpoint"),I=(o=l.getOptionalBoolean("s3ForcePathStyle"))!=null?o:!1;let ee,fe;if(f){try{const Ft=new URL(f);ee=Ft.host,fe=Ft.pathname}catch{throw new Error(`invalid awsS3 integration config, endpoint '${f}' is not a valid URL`)}if(fe!=="/")throw new Error(`invalid awsS3 integration config, endpoints cannot contain path, got '${f}'`)}else ee=H;const Ae=l.getOptionalString("accessKeyId"),Be=l.getOptionalString("secretAccessKey"),$t=l.getOptionalString("roleArn"),on=l.getOptionalString("externalId");return{host:ee,endpoint:f,s3ForcePathStyle:I,accessKeyId:Ae,secretAccessKey:Be,roleArn:$t,externalId:on}}function v(l){const o=l.map(C);return o.some(f=>f.host===H)||o.push({host:H}),o}var F=Object.defineProperty,g=(l,o,f)=>o in l?F(l,o,{enumerable:!0,configurable:!0,writable:!0,value:f}):l[o]=f,J=(l,o,f)=>(g(l,typeof o!="symbol"?o+"":o,f),f);const x=class{constructor(o){this.integrationConfig=o}get type(){return"awsS3"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(o){return k(o)}resolveEditUrl(o){return o}};J(x,"factory",({config:l})=>{var o;const f=v((o=l.getOptionalConfigArray("integrations.awsS3"))!=null?o:[]);return K(f.map(I=>new x(I)),I=>I.config.host)});let B=x;var T=(l,o,f)=>{if(!o.has(l))throw TypeError("Cannot "+f)},S=(l,o,f)=>(T(l,o,"read from private field"),f?f.call(l):o.get(l)),ie=(l,o,f)=>{if(o.has(l))throw TypeError("Cannot add the same private member more than once");o instanceof WeakSet?o.add(l):o.set(l,f)},Te=(l,o,f,I)=>(T(l,o,"write to private field"),I?I.call(l,f):o.set(l,f),f),Pe,qe,xe,ke,rt,Kt,Nt;const rn="GB",D=class si{constructor(o,f,I,ee,fe,Ae){ie(this,Pe,void 0),ie(this,qe,void 0),ie(this,xe,void 0),ie(this,ke,void 0),ie(this,rt,void 0),ie(this,Kt,void 0),ie(this,Nt,(...Be)=>{const $t=new URL(S(this,Pe));return $t.pathname=Be.map(on=>encodeURIComponent(on)).join("/"),$t}),Te(this,Pe,o),Te(this,qe,f),Te(this,xe,I),Te(this,ke,ee),Te(this,rt,fe),Te(this,Kt,Ae)}static fromRepoUrl(o){var f;const I=new URL(o);let ee,fe,Ae;const Be=I.pathname.split("/").map(mn=>decodeURIComponent(mn));if(Be[2]==="_git"?(ee=Be[1],fe=Ae=Be[3]):Be[3]==="_git"?(ee=Be[1],fe=Be[2],Ae=Be[4]):Be[4]==="_git"&&(ee=`${Be[1]}/${Be[2]}`,fe=Be[3],Ae=Be[5]),!ee||!fe||!Ae)throw new Error("Azure URL must point to a git repository");const $t=(f=I.searchParams.get("path"))!=null?f:void 0;let on;const Ft=I.searchParams.get("version");if(Ft){if(Ft.slice(0,2)!=="GB")throw new Error("Azure URL version must point to a git branch");on=Ft.slice(2)}return new si(I.origin,ee,fe,Ae,$t,on)}toRepoUrl(){let o;return S(this,xe)===S(this,ke)?o=S(this,Nt).call(this,S(this,qe),"_git",S(this,ke)):o=S(this,Nt).call(this,S(this,qe),S(this,xe),"_git",S(this,ke)),S(this,rt)&&o.searchParams.set("path",S(this,rt)),S(this,Kt)&&o.searchParams.set("version",rn+S(this,Kt)),o.toString()}toFileUrl(){if(!S(this,rt))throw new Error("Azure URL must point to a specific path to be able to download a file");const o=S(this,Nt).call(this,S(this,qe),S(this,xe),"_apis","git","repositories",S(this,ke),"items");return o.searchParams.set("api-version","6.0"),o.searchParams.set("path",S(this,rt)),S(this,Kt)&&o.searchParams.set("version",S(this,Kt)),o.toString()}toArchiveUrl(){const o=S(this,Nt).call(this,S(this,qe),S(this,xe),"_apis","git","repositories",S(this,ke),"items");return o.searchParams.set("recursionLevel","full"),o.searchParams.set("download","true"),o.searchParams.set("api-version","6.0"),S(this,rt)&&o.searchParams.set("scopePath",S(this,rt)),S(this,Kt)&&o.searchParams.set("version",S(this,Kt)),o.toString()}toCommitsUrl(){const o=S(this,Nt).call(this,S(this,qe),S(this,xe),"_apis","git","repositories",S(this,ke),"commits");return o.searchParams.set("api-version","6.0"),S(this,Kt)&&o.searchParams.set("searchCriteria.itemVersion.version",S(this,Kt)),o.toString()}getOwner(){return S(this,qe)}getProject(){return S(this,xe)}getRepo(){return S(this,ke)}getPath(){return S(this,rt)}getRef(){return S(this,Kt)}};Pe=new WeakMap,qe=new WeakMap,xe=new WeakMap,ke=new WeakMap,rt=new WeakMap,Kt=new WeakMap,Nt=new WeakMap;let we=D;const ue="dev.azure.com",Ke=l=>{const o=l;return Object.keys(l).length===3&&o.clientId!==void 0&&o.clientSecret!==void 0&&o.tenantId!==void 0},$=l=>Object.keys(l).length===1&&l.clientId!==void 0;function A(l){var o;const f=(o=l.getOptionalString("host"))!=null?o:ue,I=l.getOptionalString("token"),ee=l.getOptional("credential")?{tenantId:l.getOptionalString("credential.tenantId"),clientId:l.getOptionalString("credential.clientId"),clientSecret:l.getOptionalString("credential.clientSecret")}:void 0;if(!w(f))throw new Error(`Invalid Azure integration config, '${f}' is not a valid host`);if(ee&&!Ke(ee)&&!$(ee))throw new Error("Invalid Azure integration config, credential is not valid");if(ee&&f!==ue)throw new Error(`Invalid Azure integration config, credential can only be used with ${ue}`);if(ee&&I)throw new Error("Invalid Azure integration config, specify either a token or a credential but not both");return{host:f,token:I,credential:ee}}function z(l){const o=l.map(A);return o.some(f=>f.host===ue)||o.push({host:ue}),o}var ae=Object.defineProperty,$e=(l,o,f)=>o in l?ae(l,o,{enumerable:!0,configurable:!0,writable:!0,value:f}):l[o]=f,Ge=(l,o,f)=>($e(l,typeof o!="symbol"?o+"":o,f),f);const ft=class{constructor(o){this.integrationConfig=o}get type(){return"azure"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(o){var f;const{url:I,base:ee}=o;if(N(I))return I;try{const fe=we.fromRepoUrl(ee),Ae=new URL(ee),Be=new URL(`https://a.com${(f=fe.getPath())!=null?f:""}`),$t=new URL(I,Be).pathname;return Ae.searchParams.set("path",$t),o.lineNumber&&(Ae.searchParams.set("line",String(o.lineNumber)),Ae.searchParams.set("lineEnd",String(o.lineNumber+1)),Ae.searchParams.set("lineStartColumn","1"),Ae.searchParams.set("lineEndColumn","1")),Ae.toString()}catch{return new URL(I,ee).toString()}}resolveEditUrl(o){return o}};Ge(ft,"factory",({config:l})=>{var o;const f=z((o=l.getOptionalConfigArray("integrations.azure"))!=null?o:[]);return K(f.map(I=>new ft(I)),I=>I.config.host)});let nt=ft;function Rt(l){return we.fromRepoUrl(l).toFileUrl()}function q(l){return we.fromRepoUrl(l).toArchiveUrl()}function de(l){return we.fromRepoUrl(l).toCommitsUrl()}async function Se(l,o){const f="499b84ac-1321-427f-aa17-267ca6975798/.default",I=o?{...o}:{},{token:ee,credential:fe}=l;if(fe){if(Ke(fe)){const Be=await new ClientSecretCredential(fe.tenantId,fe.clientId,fe.clientSecret).getToken(f);I.Authorization=`Bearer ${Be.token}`}else if($(fe)){const Be=await new ManagedIdentityCredential(fe.clientId).getToken(f);I.Authorization=`Bearer ${Be.token}`}}else if(ee){const Ae=U.from(`:${l.token}`,"utf8");I.Authorization=`Basic ${Ae.toString("base64")}`}return{headers:I}}const Ne="bitbucket.org",st="https://api.bitbucket.org/2.0";function pe(l){var o;const f=(o=l.getOptionalString("host"))!=null?o:Ne;let I=l.getOptionalString("apiBaseUrl");const ee=l.getOptionalString("token"),fe=l.getOptionalString("username"),Ae=l.getOptionalString("appPassword");if(!w(f))throw new Error(`Invalid Bitbucket integration config, '${f}' is not a valid host`);return I?I=(0,p.trimEnd)(I,"/"):f===Ne?I=st:I=`https://${f}/rest/api/1.0`,{host:f,apiBaseUrl:I,token:ee,username:fe,appPassword:Ae}}function Je(l){const o=l.map(pe);return o.some(f=>f.host===Ne)||o.push({host:Ne,apiBaseUrl:st}),o}var ot=Object.defineProperty,Qe=(l,o,f)=>o in l?ot(l,o,{enumerable:!0,configurable:!0,writable:!0,value:f}):l[o]=f,Et=(l,o,f)=>(Qe(l,typeof o!="symbol"?o+"":o,f),f);const dt=class{constructor(o){this.integrationConfig=o}get type(){return"bitbucket"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(o){const f=k(o);if(!o.lineNumber)return f;const I=new URL(f);return this.integrationConfig.host==="bitbucket.org"?I.hash=`lines-${o.lineNumber}`:I.hash=`${o.lineNumber}`,I.toString()}resolveEditUrl(o){const f=d()(o),I=new URL(o);return I.searchParams.set("mode","edit"),I.searchParams.set("spa","0"),I.searchParams.set("at",f.ref),I.toString()}};Et(dt,"factory",({config:l})=>{var o,f,I;const ee=Je((I=l.getOptionalConfigArray("integrations.bitbucket"))!=null?I:[...(o=l.getOptionalConfigArray("integrations.bitbucketCloud"))!=null?o:[],...(f=l.getOptionalConfigArray("integrations.bitbucketServer"))!=null?f:[]]);return K(ee.map(fe=>new dt(fe)),fe=>fe.config.host)});let Vt=dt;async function jt(l,o){const{name:f,owner:I,resource:ee}=parseGitUrl(l),fe=ee==="bitbucket.org";let Ae=fe?`${o.apiBaseUrl}/repositories/${I}/${f}`:`${o.apiBaseUrl}/projects/${I}/repos/${f}/default-branch`,Be=await fetch(Ae,St(o));if(Be.status===404&&!fe&&(Ae=`${o.apiBaseUrl}/projects/${I}/repos/${f}/branches/default`,Be=await fetch(Ae,St(o))),!Be.ok){const on=`Failed to retrieve default branch from ${Ae}, ${Be.status} ${Be.statusText}`;throw new Error(on)}let $t;if(fe)$t=(await Be.json()).mainbranch.name;else{const{displayId:on}=await Be.json();$t=on}if(!$t)throw new Error(`Failed to read default branch from ${Ae}. Response ${Be.status} ${Be.json()}`);return $t}async function Ht(l,o){const{name:f,owner:I,ref:ee,protocol:fe,resource:Ae,filepath:Be}=parseGitUrl(l),$t=Ae==="bitbucket.org";let on=ee;on||(on=await jt(l,o));const Ft=Be?`&path=${encodeURIComponent(decodeURIComponent(Be))}`:"";return $t?`${fe}://${Ae}/${I}/${f}/get/${on}.tar.gz`:`${o.apiBaseUrl}/projects/${I}/repos/${f}/archive?format=tgz&at=${on}&prefix=${I}-${f}${Ft}`}function Ye(l,o){try{const{owner:f,name:I,ref:ee,filepathtype:fe,filepath:Ae}=parseGitUrl(l);if(!f||!I||fe!=="browse"&&fe!=="raw"&&fe!=="src")throw new Error("Invalid Bitbucket URL or file path");const Be=Ae.replace(/^\//,"");if(o.host==="bitbucket.org"){if(!ee)throw new Error("Invalid Bitbucket URL or file path");return`${o.apiBaseUrl}/repositories/${f}/${I}/src/${ee}/${Be}`}return`${o.apiBaseUrl}/projects/${f}/repos/${I}/raw/${Be}?at=${ee}`}catch(f){throw new Error(`Incorrect URL: ${l}, ${f}`)}}function St(l){const o={};if(l.token)o.Authorization=`Bearer ${l.token}`;else if(l.username&&l.appPassword){const f=U.from(`${l.username}:${l.appPassword}`,"utf8");o.Authorization=`Basic ${f.toString("base64")}`}return{headers:o}}const Mt="bitbucket.org",Bt="https://api.bitbucket.org/2.0";function Ee(l){const o=Mt,f=Bt,I=l.getString("username"),ee=l.getString("appPassword");return{host:o,apiBaseUrl:f,username:I,appPassword:ee}}function De(l){const o=l.map(Ee);return o.length===0&&o.push({host:Mt,apiBaseUrl:Bt}),o}var ct=Object.defineProperty,Ve=(l,o,f)=>o in l?ct(l,o,{enumerable:!0,configurable:!0,writable:!0,value:f}):l[o]=f,yt=(l,o,f)=>(Ve(l,typeof o!="symbol"?o+"":o,f),f);const ye=class{constructor(o){this.integrationConfig=o}get type(){return"bitbucketCloud"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(o){const f=k(o);if(o.lineNumber){const I=new URL(f);return I.hash=`lines-${o.lineNumber}`,I.toString()}return f}resolveEditUrl(o){const f=d()(o),I=new URL(o);return I.searchParams.set("mode","edit"),I.searchParams.set("at",f.ref),I.toString()}};yt(ye,"factory",({config:l})=>{var o;const f=De((o=l.getOptionalConfigArray("integrations.bitbucketCloud"))!=null?o:[]);return K(f.map(I=>new ye(I)),I=>I.config.host)});let mt=ye;async function Ct(l,o){const{name:f,owner:I}=parseGitUrl(l),ee=`${o.apiBaseUrl}/repositories/${I}/${f}`,fe=await fetch(ee,At(o));if(!fe.ok){const $t=`Failed to retrieve default branch from ${ee}, ${fe.status} ${fe.statusText}`;throw new Error($t)}const Be=(await fe.json()).mainbranch.name;if(!Be)throw new Error(`Failed to read default branch from ${ee}. Response ${fe.status} ${fe.json()}`);return Be}async function _t(l,o){const{name:f,owner:I,ref:ee,protocol:fe,resource:Ae}=parseGitUrl(l);let Be=ee;return Be||(Be=await Ct(l,o)),`${fe}://${Ae}/${I}/${f}/get/${Be}.tar.gz`}function it(l,o){try{const{owner:f,name:I,ref:ee,filepathtype:fe,filepath:Ae}=parseGitUrl(l);if(!f||!I||fe!=="src"&&fe!=="raw")throw new Error("Invalid Bitbucket Cloud URL or file path");const Be=Ae.replace(/^\//,"");if(!ee)throw new Error("Invalid Bitbucket Cloud URL or file path");return`${o.apiBaseUrl}/repositories/${f}/${I}/src/${ee}/${Be}`}catch(f){throw new Error(`Incorrect URL: ${l}, ${f}`)}}function At(l){const o={};if(l.username&&l.appPassword){const f=U.from(`${l.username}:${l.appPassword}`,"utf8");o.Authorization=`Basic ${f.toString("base64")}`}return{headers:o}}function zt(l){const o=l.getString("host");let f=l.getOptionalString("apiBaseUrl");const I=l.getOptionalString("token"),ee=l.getOptionalString("username"),fe=l.getOptionalString("password");if(!w(o))throw new Error(`Invalid Bitbucket Server integration config, '${o}' is not a valid host`);return f?f=(0,p.trimEnd)(f,"/"):f=`https://${o}/rest/api/1.0`,{host:o,apiBaseUrl:f,token:I,username:ee,password:fe}}function ze(l){return l.map(zt)}var Re=Object.defineProperty,We=(l,o,f)=>o in l?Re(l,o,{enumerable:!0,configurable:!0,writable:!0,value:f}):l[o]=f,je=(l,o,f)=>(We(l,typeof o!="symbol"?o+"":o,f),f);const W=class{constructor(o){this.integrationConfig=o}get type(){return"bitbucketServer"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(o){const f=k(o);if(o.lineNumber){const I=new URL(f);return I.hash=o.lineNumber.toString(),I.toString()}return f}resolveEditUrl(o){return o.includes("?")?o.substring(0,o.indexOf("?")):o}};je(W,"factory",({config:l})=>{var o;const f=ze((o=l.getOptionalConfigArray("integrations.bitbucketServer"))!=null?o:[]);return K(f.map(I=>new W(I)),I=>I.config.host)});let _=W;async function h(l,o){const{name:f,owner:I}=parseGitUrl(l);let ee=`${o.apiBaseUrl}/projects/${I}/repos/${f}/default-branch`,fe=await fetch(ee,j(o));if(fe.status===404&&(ee=`${o.apiBaseUrl}/projects/${I}/repos/${f}/branches/default`,fe=await fetch(ee,j(o))),!fe.ok){const $t=`Failed to retrieve default branch from ${ee}, ${fe.status} ${fe.statusText}`;throw new Error($t)}const{displayId:Ae}=await fe.json(),Be=Ae;if(!Be)throw new Error(`Failed to read default branch from ${ee}. Response ${fe.status} ${fe.json()}`);return Be}async function M(l,o){const{name:f,owner:I,ref:ee,filepath:fe}=parseGitUrl(l);let Ae=ee;Ae||(Ae=await h(l,o));const Be=fe?`&path=${encodeURIComponent(decodeURIComponent(fe))}`:"";return`${o.apiBaseUrl}/projects/${I}/repos/${f}/archive?format=tgz&at=${Ae}&prefix=${I}-${f}${Be}`}function X(l,o){try{const{owner:f,name:I,ref:ee,filepathtype:fe,filepath:Ae}=parseGitUrl(l);if(!f||!I||fe!=="browse"&&fe!=="raw"&&fe!=="src")throw new Error("Invalid Bitbucket Server URL or file path");const Be=Ae.replace(/^\//,"");return`${o.apiBaseUrl}/projects/${f}/repos/${I}/raw/${Be}?at=${ee}`}catch(f){throw new Error(`Incorrect URL: ${l}, ${f}`)}}function j(l){const o={};if(l.token)o.Authorization=`Bearer ${l.token}`;else if(l.username&&l.password){const f=U.from(`${l.username}:${l.password}`,"utf8");o.Authorization=`Basic ${f.toString("base64")}`}return{headers:o}}function Z(l){const o=l.getString("host");let f=l.getOptionalString("baseUrl"),I=l.getOptionalString("cloneUrl"),ee=l.getOptionalString("gitilesBaseUrl");const fe=l.getOptionalString("username"),Ae=l.getOptionalString("password");if(w(o)){if(f&&!N(f))throw new Error(`Invalid Gerrit integration config, '${f}' is not a valid baseUrl`);if(I&&!N(I))throw new Error(`Invalid Gerrit integration config, '${I}' is not a valid cloneUrl`);if(ee&&!N(ee))throw new Error(`Invalid Gerrit integration config, '${ee}' is not a valid gitilesBaseUrl`)}else throw new Error(`Invalid Gerrit integration config, '${o}' is not a valid host`);return f?f=(0,p.trimEnd)(f,"/"):f=`https://${o}`,ee?ee=(0,p.trimEnd)(ee,"/"):ee=`https://${o}`,I?I=(0,p.trimEnd)(I,"/"):I=f,{host:o,baseUrl:f,cloneUrl:I,gitilesBaseUrl:ee,username:fe,password:Ae}}function oe(l){return l.map(Z)}const se=")]}'";function Ue(l,o){const f=new URL(l.gitilesBaseUrl),I=new URL(o),fe=I.pathname.substring(I.pathname.startsWith("/a/")?2:0).replace(f.pathname,"").split("/").filter(mn=>!!mn),Ae=fe.indexOf("+");if(Ae<=0)throw new Error(`Unable to parse project from url: ${o}`);const Be=(0,p.trimStart)(fe.slice(0,Ae).join("/"),"/"),$t=fe.indexOf("heads");if($t<=0)throw new Error(`Unable to parse branch from url: ${o}`);const on=fe[$t+1],Ft=fe.slice($t+2).join("/");return{branch:on,filePath:Ft===""?"/":Ft,project:Be}}function lt(l,o,f,I){return`${l.gitilesBaseUrl}/${o}/+/refs/heads/${f}/${(0,p.trimStart)(I,"/")}`}function ne(l,o,f,I){const ee=I==="/"||I===""?".tar.gz":`/${I}.tar.gz`;return`${Ce(l)}/${o}/+archive/refs/heads/${f}${ee}`}function ce(l){return l.password?"/a/":"/"}function Ce(l){if(!l.baseUrl||!l.gitilesBaseUrl)throw new Error("Unexpected Gerrit config values. baseUrl or gitilesBaseUrl not set.");if(l.gitilesBaseUrl.startsWith(l.baseUrl))return l.gitilesBaseUrl.replace(l.baseUrl.concat("/"),l.baseUrl.concat(ce(l)));if(l.password)throw new Error("Since the baseUrl (Gerrit) is not part of the gitilesBaseUrl, an authentication URL could not be constructed.");return l.gitilesBaseUrl}function Y(l,o){const{branch:f,project:I}=Ue(l,o);return`${l.baseUrl}${ce(l)}projects/${encodeURIComponent(I)}/branches/${f}`}function te(l,o){const{project:f}=Ue(l,o);return`${l.cloneUrl}${ce(l)}${f}`}function me(l,o){const{branch:f,filePath:I,project:ee}=Ue(l,o);return`${l.baseUrl}${ce(l)}projects/${encodeURIComponent(ee)}/branches/${f}/files/${encodeURIComponent(I)}/content`}function Ie(l){return`${l.baseUrl}${ce(l)}projects/`}function Le(l){const o={};if(!l.password)return o;const f=U.from(`${l.username}:${l.password}`,"utf8");return o.Authorization=`Basic ${f.toString("base64")}`,{headers:o}}async function bt(l){const o=await l.text();if(o.startsWith(se))try{return JSON.parse(o.slice(se.length))}catch(f){throw new Error(`Invalid response from Gerrit: ${o.slice(0,10)} - ${f}`)}throw new Error(`Gerrit JSON body prefix missing. Found: ${o.slice(0,10)}`)}var ut=Object.defineProperty,Ut=(l,o,f)=>o in l?ut(l,o,{enumerable:!0,configurable:!0,writable:!0,value:f}):l[o]=f,wt=(l,o,f)=>(Ut(l,typeof o!="symbol"?o+"":o,f),f);const kt=class{constructor(o){this.integrationConfig=o}get type(){return"gerrit"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(o){const{url:f,base:I,lineNumber:ee}=o;let fe;if(f.startsWith("/")){const{branch:Ae,project:Be}=Ue(this.config,I);return lt(this.config,Be,Ae,f)}return f?fe=new URL(f,I):fe=new URL(I),ee&&(fe.hash=ee.toString()),fe.toString()}resolveEditUrl(o){return o}};wt(kt,"factory",({config:l})=>{var o;const f=oe((o=l.getOptionalConfigArray("integrations.gerrit"))!=null?o:[]);return K(f.map(I=>new kt(I)),I=>I.config.host)});let Qt=kt;function un(l){const o=l.getString("host");let f=l.getOptionalString("baseUrl");const I=l.getOptionalString("username"),ee=l.getOptionalString("password");if(!w(o))throw new Error(`Invalid Gitea integration config, '${o}' is not a valid host`);return f?f=(0,p.trimEnd)(f,"/"):f=`https://${o}`,{host:o,baseUrl:f,username:I,password:ee}}function ln(l,o){var f;try{const I=(f=l.baseUrl)!=null?f:`https://${l.host}`,[ee,fe,Ae,Be,$t,on,...Ft]=o.replace(I,"").split("/"),mn=Ft.join("/").replace(/^\//,"");return`${I}/${fe}/${Ae}/_edit/${on}/${mn}`}catch(I){throw new Error(`Incorrect URL: ${o}, ${I}`)}}function tn(l,o){var f;try{const I=(f=l.baseUrl)!=null?f:`https://${l.host}`,[ee,fe,Ae,Be,$t,on,...Ft]=o.replace(I,"").split("/"),mn=Ft.join("/").replace(/^\//,"");return`${I}/api/v1/repos/${fe}/${Ae}/contents/${mn}?ref=${on}`}catch(I){throw new Error(`Incorrect URL: ${o}, ${I}`)}}function Zt(l){const o={},{username:f,password:I}=l;return I?(f?o.Authorization=`basic ${U.from(`${f}:${I}`).toString("base64")}`:o.Authorization=`token ${I}`,{headers:o}):o}var Wt=Object.defineProperty,hn=(l,o,f)=>o in l?Wt(l,o,{enumerable:!0,configurable:!0,writable:!0,value:f}):l[o]=f,gn=(l,o,f)=>(hn(l,typeof o!="symbol"?o+"":o,f),f);const yn=class{constructor(o){this.config=o}get type(){return"gitea"}get title(){return this.config.host}resolveUrl(o){return k(o)}resolveEditUrl(o){return ln(this.config,o)}};gn(yn,"factory",({config:l})=>{var o;const I=((o=l.getOptionalConfigArray("integrations.gitea"))!=null?o:[]).map(ee=>un(ee));return K(I.map(ee=>new yn(ee)),ee=>ee.config.host)});let bn=yn;const In="github.com",An="https://api.github.com",On="https://raw.githubusercontent.com";function Sn(l){var o,f;const I=(o=l.getOptionalString("host"))!=null?o:In;let ee=l.getOptionalString("apiBaseUrl"),fe=l.getOptionalString("rawBaseUrl");const Ae=l.getOptionalString("token"),Be=(f=l.getOptionalConfigArray("apps"))==null?void 0:f.map($t=>({appId:$t.getNumber("appId"),clientId:$t.getString("clientId"),clientSecret:$t.getString("clientSecret"),webhookSecret:$t.getString("webhookSecret"),privateKey:$t.getString("privateKey"),allowedInstallationOwners:$t.getOptionalStringArray("allowedInstallationOwners")}));if(!w(I))throw new Error(`Invalid GitHub integration config, '${I}' is not a valid host`);return ee?ee=(0,p.trimEnd)(ee,"/"):I===In&&(ee=An),fe?fe=(0,p.trimEnd)(fe,"/"):I===In&&(fe=On),{host:I,apiBaseUrl:ee,rawBaseUrl:fe,token:Ae,apps:Be}}function Dn(l){const o=l.map(Sn);return o.some(f=>f.host===In)||o.push({host:In,apiBaseUrl:An,rawBaseUrl:On}),o}function sr(l,o,f){try{const{owner:I,name:ee,ref:fe,filepathtype:Ae,filepath:Be}=parseGitUrl(l);if(!I||!ee||!fe||Ae!=="blob"&&Ae!=="raw"&&Ae!=="tree")throw new Error("Invalid GitHub URL or file path");const $t=Be.replace(/^\//,"");return Dr(o,f)==="api"?`${o.apiBaseUrl}/repos/${I}/${ee}/contents/${$t}?ref=${fe}`:`${o.rawBaseUrl}/${I}/${ee}/${fe}/${$t}`}catch(I){throw new Error(`Incorrect URL: ${l}, ${I}`)}}function zn(l,o){const f={};return Dr(l,o)==="api"&&(f.Accept="application/vnd.github.v3.raw"),o.token&&(f.Authorization=`token ${o.token}`),{headers:f}}function Dr(l,o){return l.apiBaseUrl&&(o.token||!l.rawBaseUrl)?"api":"raw"}var Vr=Object.defineProperty,Zr=(l,o,f)=>o in l?Vr(l,o,{enumerable:!0,configurable:!0,writable:!0,value:f}):l[o]=f,lr=(l,o,f)=>(Zr(l,typeof o!="symbol"?o+"":o,f),f);class Wr{constructor(){lr(this,"tokenCache",new Map),lr(this,"isExpired",o=>t.ou.local()>o)}async getOrCreateToken(o,f,I){let ee=this.tokenCache.get(o);if((!ee||this.isExpired(ee.expiresAt))&&(ee=await I(),ee.expiresAt=ee.expiresAt.minus({minutes:10}),this.tokenCache.set(o,ee)),!this.appliesToRepo(ee,f))throw new Error(`The Backstage GitHub application used in the ${o} organization does not have access to a repository with the name ${f}`);return{accessToken:ee.token}}appliesToRepo(o,f){return f===void 0?!0:o.repositories!==void 0?o.repositories.includes(f):!0}}const jn={Accept:"application/vnd.github.machine-man-preview+json"};class $r{constructor(o,f){lr(this,"appClient"),lr(this,"baseUrl"),lr(this,"baseAuthConfig"),lr(this,"cache",new Wr),lr(this,"allowedInstallationOwners"),this.allowedInstallationOwners=o.allowedInstallationOwners,this.baseUrl=f,this.baseAuthConfig={appId:o.appId,privateKey:o.privateKey.replace(/\\n/gm,`
`)},this.appClient=new R.v({baseUrl:f,headers:jn,authStrategy:b.i,auth:this.baseAuthConfig})}async getInstallationCredentials(o,f){var I;return this.allowedInstallationOwners&&!((I=this.allowedInstallationOwners)!=null&&I.includes(o))?{accessToken:void 0}:this.cache.getOrCreateToken(o,f,async()=>{var ee;const{installationId:fe,suspended:Ae}=await this.getInstallationData(o);if(Ae)throw new Error(`The GitHub application for ${o} is suspended`);const Be=await this.appClient.apps.createInstallationAccessToken({installation_id:fe,headers:jn});let $t;if(Be.data.repository_selection==="selected"){const on=new R.v({baseUrl:this.baseUrl,auth:Be.data.token}),Ft=await on.paginate(on.apps.listReposAccessibleToInstallation);$t=((ee=Ft.repositories)!=null?ee:Ft).map(nn=>nn.name)}return{token:Be.data.token,expiresAt:t.ou.fromISO(Be.data.expires_at),repositories:$t}})}getInstallations(){return this.appClient.paginate(this.appClient.apps.listInstallations)}async getInstallationData(o){const I=(await this.getInstallations()).find(fe=>{var Ae;return fe.account&&"login"in fe.account&&((Ae=fe.account.login)==null?void 0:Ae.toLocaleLowerCase("en-US"))===o.toLocaleLowerCase("en-US")});if(I)return{installationId:I.id,suspended:Boolean(I.suspended_by)};const ee=new Error(`No app installation found for ${o} in ${this.baseAuthConfig.appId}`);throw ee.name="NotFoundError",ee}}class _r{constructor(o){lr(this,"apps");var f,I;this.apps=(I=(f=o.apps)==null?void 0:f.map(ee=>new $r(ee,o.apiBaseUrl)))!=null?I:[]}async getAllInstallations(){return this.apps.length?(await Promise.all(this.apps.map(f=>f.getInstallations()))).flat():[]}async getAppToken(o,f){if(this.apps.length===0)return;const I=await Promise.all(this.apps.map(Be=>Be.getInstallationCredentials(o,f).then($t=>({credentials:$t,error:void 0}),$t=>({credentials:void 0,error:$t})))),ee=I.find(Be=>{var $t;return($t=Be.credentials)==null?void 0:$t.accessToken});if(ee)return ee.credentials.accessToken;const Ae=I.map(Be=>Be.error).find(Be=>(Be==null?void 0:Be.name)!=="NotFoundError");if(Ae)throw Ae}}const Lr=class{constructor(o,f){this.githubAppCredentialsMux=o,this.token=f}async getCredentials(o){const f=d()(o.url),I=f.owner||f.name,ee=f.owner?f.name:void 0;let fe="app",Ae=await this.githubAppCredentialsMux.getAppToken(I,ee);return Ae||(fe="token",Ae=this.token),{headers:Ae?{Authorization:`Bearer ${Ae}`}:void 0,token:Ae,type:fe}}};lr(Lr,"create",l=>new Lr(new _r(l),l.token));let Ar=null;class mr{constructor(o){this.providers=o}static fromIntegrations(o){const f=new Map;return o.github.list().forEach(I=>{const ee=Ar.create(I.config);f.set(I.config.host,ee)}),new mr(f)}async getCredentials(o){const f=new URL(o.url),I=this.providers.get(f.host);if(!I)throw new Error(`There is no GitHub integration that matches ${o.url}. Please add a configuration for an integration.`);return I.getCredentials(o)}}var Br=Object.defineProperty,br=(l,o,f)=>o in l?Br(l,o,{enumerable:!0,configurable:!0,writable:!0,value:f}):l[o]=f,Pr=(l,o,f)=>(br(l,typeof o!="symbol"?o+"":o,f),f);const Fn=class{constructor(o){this.integrationConfig=o}get type(){return"github"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(o){return Mr(k(o),"tree")}resolveEditUrl(o){return Mr(o,"edit")}};Pr(Fn,"factory",({config:l})=>{var o;const f=Dn((o=l.getOptionalConfigArray("integrations.github"))!=null?o:[]);return K(f.map(I=>new Fn(I)),I=>I.config.host)});let wr=Fn;function Mr(l,o){return l.replace(/\/\/([^/]+)\/([^/]+)\/([^/]+)\/(blob|tree|edit)\//,(f,I,ee,fe)=>`//${I}/${ee}/${fe}/${o}/`)}var Fr=Object.defineProperty,Ur=(l,o,f)=>o in l?Fr(l,o,{enumerable:!0,configurable:!0,writable:!0,value:f}):l[o]=f,xr=(l,o,f)=>(Ur(l,typeof o!="symbol"?o+"":o,f),f);const be=null;class at extends wr{constructor(o){super(o)}get config(){return super.config}}xr(at,"factory",wr.factory);const vt=null,Tt=null,an=null,Jt="gitlab.com",en="https://gitlab.com/api/v4";function En(l){const o=l.getString("host");let f=l.getOptionalString("apiBaseUrl");const I=l.getOptionalString("token");let ee=l.getOptionalString("baseUrl");if(f?f=(0,p.trimEnd)(f,"/"):o===Jt&&(f=en),ee?ee=(0,p.trimEnd)(ee,"/"):ee=`https://${o}`,w(o)){if(!f||!N(f))throw new Error(`Invalid GitLab integration config, '${f}' is not a valid apiBaseUrl`);if(!N(ee))throw new Error(`Invalid GitLab integration config, '${ee}' is not a valid baseUrl`)}else throw new Error(`Invalid GitLab integration config, '${o}' is not a valid host`);return{host:o,token:I,apiBaseUrl:f,baseUrl:ee}}function cn(l){const o=l.map(En);return o.some(f=>f.host===Jt)||o.push({host:Jt,apiBaseUrl:en,baseUrl:`https://${Jt}`}),o}function sn(l){let o="";return l.host!==Jt&&(o=new URL(l.baseUrl).pathname),trimEnd(o,"/")}async function Rn(l,o){const f=await Cn(l,o);return Ln(l,f,o).toString()}function _n(l){const{token:o=""}=l;return{headers:{"PRIVATE-TOKEN":o}}}function Ln(l,o,f){try{const I=new URL(l),ee=I.pathname.split("/blob/").slice(1).join("/blob/"),[fe,...Ae]=ee.split("/"),Be=sn(f);return I.pathname=[...Be?[Be]:[],"api/v4/projects",o,"repository/files",encodeURIComponent(decodeURIComponent(Ae.join("/"))),"raw"].join("/"),I.search=`?ref=${fe}`,I}catch(I){throw new Error(`Incorrect url: ${l}, ${I}`)}}async function Cn(l,o){const f=new URL(l);if(!f.pathname.includes("/blob/"))throw new Error("Please provide full path to yaml file from GitLab");try{let I=f.pathname.split("/-/blob/")[0].split("/blob/")[0];const ee=sn(o);ee&&(I=I.replace(ee,""));const fe=new URL(`${f.origin}${ee}/api/v4/projects/${encodeURIComponent(I.replace(/^\//,""))}`),Ae=await fetch(fe.toString(),_n(o)),Be=await Ae.json();if(!Ae.ok)throw new Error(`GitLab Error '${Be.error}', ${Be.error_description}`);return Number(Be.id)}catch(I){throw new Error(`Could not get GitLab project ID for: ${l}, ${I}`)}}var Un=Object.defineProperty,Mn=(l,o,f)=>o in l?Un(l,o,{enumerable:!0,configurable:!0,writable:!0,value:f}):l[o]=f,Bn=(l,o,f)=>(Mn(l,typeof o!="symbol"?o+"":o,f),f);const Qn=class{constructor(o){this.integrationConfig=o}get type(){return"gitlab"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(o){return k(o)}resolveEditUrl(o){return rr(o,"edit")}};Bn(Qn,"factory",({config:l})=>{var o;const f=cn((o=l.getOptionalConfigArray("integrations.gitlab"))!=null?o:[]);return K(f.map(I=>new Qn(I)),I=>I.config.host)});let xn=Qn;function rr(l,o){return l.replace(/\/\-\/(blob|tree|edit)\//,`/-/${o}/`)}var Vn=Object.defineProperty,Gn=(l,o,f)=>o in l?Vn(l,o,{enumerable:!0,configurable:!0,writable:!0,value:f}):l[o]=f,Wn=(l,o,f)=>(Gn(l,typeof o!="symbol"?o+"":o,f),f);const Hn=class{constructor(o){this.token=o}async getCredentials(o){return this.token?{headers:{Authorization:`Bearer ${this.token}`},token:this.token}:{}}};Wn(Hn,"create",l=>new Hn(l.token));let cr=null;class qn{constructor(o){this.providers=o}static fromIntegrations(o){const f=new Map;return o.gitlab.list().forEach(I=>{const ee=cr.create(I.config);f.set(I.config.host,ee)}),new qn(f)}async getCredentials(o){const f=new URL(o.url),I=this.providers.get(f.host);if(!I)throw new Error(`There is no GitLab integration that matches ${o.url}. Please add a configuration for an integration.`);return I.getCredentials(o)}}function Or(l){if(!l)return{};if(!l.has("clientEmail")&&!l.has("privateKey"))return{};const o=l.getString("privateKey").split("\\n").join(`
`);return{clientEmail:l.getString("clientEmail"),privateKey:o}}var Zn=Object.defineProperty,Xe=(l,o,f)=>o in l?Zn(l,o,{enumerable:!0,configurable:!0,writable:!0,value:f}):l[o]=f,ge=(l,o,f)=>(Xe(l,typeof o!="symbol"?o+"":o,f),f);class gt{constructor(o){ge(this,"byType"),this.byType=o}static fromConfig(o){return new gt({awsS3:B.factory({config:o}),azure:nt.factory({config:o}),bitbucket:Vt.factory({config:o}),bitbucketCloud:mt.factory({config:o}),bitbucketServer:_.factory({config:o}),gerrit:Qt.factory({config:o}),github:wr.factory({config:o}),gitlab:xn.factory({config:o}),gitea:bn.factory({config:o})})}get awsS3(){return this.byType.awsS3}get azure(){return this.byType.azure}get bitbucket(){return this.byType.bitbucket}get bitbucketCloud(){return this.byType.bitbucketCloud}get bitbucketServer(){return this.byType.bitbucketServer}get gerrit(){return this.byType.gerrit}get github(){return this.byType.github}get gitlab(){return this.byType.gitlab}get gitea(){return this.byType.gitea}list(){return Object.values(this.byType).flatMap(o=>o.list())}byUrl(o){let f=Object.values(this.byType).map(I=>I.byUrl(o)).filter(Boolean);if(f.length>1){const I=f.filter(ee=>!(ee instanceof Vt));I.length!==0&&(f=I)}return f[0]}byHost(o){return Object.values(this.byType).map(f=>f.byHost(o)).find(Boolean)}resolveUrl(o){const f=this.byUrl(o.base);return f?f.resolveUrl(o):k(o)}resolveEditUrl(o){const f=this.byUrl(o);return f?f.resolveEditUrl(o):o}}},63115:function(Dt,E,e){"use strict";e.d(E,{Cy:function(){return xe},DC:function(){return Qe},OO:function(){return Vt},RE:function(){return Te},XQ:function(){return dt},Yq:function(){return Ke},ap:function(){return Ht},bM:function(){return q},cm:function(){return Se},d1:function(){return Je},fP:function(){return ie},fe:function(){return Ne},gC:function(){return jt},hK:function(){return ot},hs:function(){return st},nE:function(){return $},x1:function(){return Et},zJ:function(){return pe}});var n=e(2784),d=e(73557),p=e(80236),i=e(30705),c=e(16673),m=e(64304),b=e(99688),R=e(13737),t=e(60364),U=e(90436),w=e(79692),N=e(95544),K=e(8629),k=e(79249),H=e(38724),C=e(99152),v=e(6487),F=e(49429),g=e(77277),J=e(34520),x=e(15933);const B=(0,i.NT)({id:"api-docs"}),T=(0,i.x8)({id:"register-component",optional:!0}),S=[c.Es.columns.createTitleColumn({hidden:!0}),c.Es.columns.createNameColumn({defaultKind:"API"}),c.Es.columns.createSystemColumn(),c.Es.columns.createOwnerColumn(),c.Es.columns.createSpecTypeColumn(),c.Es.columns.createSpecLifecycleColumn(),c.Es.columns.createMetadataDescriptionColumn(),c.Es.columns.createTagsColumn()],ie=Ye=>{var St;const{initiallySelectedFilter:Mt="all",columns:Bt,actions:Ee}=Ye,ct=`${(St=(0,i.h_)(i.Ds).getOptionalString("organization.name"))!=null?St:"Backstage"} API Explorer`,Ve=(0,i.tg)(T);return n.createElement(p.g9,{themeId:"apis",title:"APIs",subtitle:ct,pageTitleOverride:"APIs"},n.createElement(p.VY,null,n.createElement(p.yW,{title:""},n.createElement(p.XF,{title:"Register Existing API",to:Ve==null?void 0:Ve()}),n.createElement(p.qt,null,"All your APIs")),n.createElement(m.UO,null,n.createElement(m._i,null,n.createElement(m._i.Filters,null,n.createElement(m.tW,{initialFilter:"api",hidden:!0}),n.createElement(m.sL,null),n.createElement(m.EW,{initialFilter:Mt}),n.createElement(m.dq,null),n.createElement(m.df,null),n.createElement(m.xE,null)),n.createElement(m._i.Content,null,n.createElement(c.Es,{columns:Bt||S,actions:Ee}))))))},Te=Ye=>(0,d.pC)()||n.createElement(ie,{...Ye}),Pe=(0,i.T0)({id:"plugin.api-docs.config"}),qe=Ye=>n.createElement(p.Oi,{text:Ye.definition,language:Ye.language,showCopyCodeButton:!0}),xe=()=>{var Ye;const{entity:St}=(0,m.X2)(),Mt=(0,i.h_)(Pe),{getApiDefinitionWidget:Bt}=Mt;if(!St)return n.createElement(b.Z,{severity:"error"},"Could not fetch the API");const Ee=Bt(St),De=(Ye=St.metadata.title)!=null?Ye:St.metadata.name;return Ee?n.createElement(p.oZ,{title:De},n.createElement(p.hB,{label:Ee.title,key:"widget"},Ee.component(St.spec.definition)),n.createElement(p.hB,{label:"Raw",key:"raw"},n.createElement(qe,{definition:St.spec.definition,language:Ee.rawLanguage||St.spec.type}))):n.createElement(p.oZ,{title:De,children:[n.createElement(p.hB,{label:St.spec.type,key:"raw"},n.createElement(qe,{definition:St.spec.definition,language:St.spec.type}))]})},ke=n.lazy(()=>Promise.all([e.e(4778),e.e(1978),e.e(7700),e.e(8847),e.e(4971)]).then(e.bind(e,64971)).then(Ye=>({default:Ye.AsyncApiDefinition}))),rt=Ye=>n.createElement(n.Suspense,{fallback:n.createElement(p.Ex,null)},n.createElement(ke,{...Ye})),Kt=n.lazy(()=>e.e(4774).then(e.bind(e,14774)).then(Ye=>({default:Ye.GraphQlDefinition}))),Nt=Ye=>n.createElement(n.Suspense,{fallback:n.createElement(p.Ex,null)},n.createElement(Kt,{...Ye})),rn=n.lazy(()=>Promise.all([e.e(1978),e.e(931),e.e(7700),e.e(8939)]).then(e.bind(e,48939)).then(Ye=>({default:Ye.OpenApiDefinition}))),D=Ye=>n.createElement(n.Suspense,{fallback:n.createElement(p.Ex,null)},n.createElement(rn,{...Ye})),we=Ye=>{const St=(0,t.Z)();return n.createElement(p.Oi,{customStyle:{backgroundColor:St.palette.background.default},text:Ye.definition,language:"protobuf",showCopyCodeButton:!0})},ue=Ye=>{const{definition:St}=Ye,Mt=(0,t.Z)();return n.createElement(p.Oi,{customStyle:{backgroundColor:Mt.palette.background.default},text:St,language:"typescript",showCopyCodeButton:!0})};function Ke(){return[{type:"openapi",title:"OpenAPI",rawLanguage:"yaml",component:Ye=>n.createElement(D,{definition:Ye})},{type:"asyncapi",title:"AsyncAPI",rawLanguage:"yaml",component:Ye=>n.createElement(rt,{definition:Ye})},{type:"graphql",title:"GraphQL",rawLanguage:"graphql",component:Ye=>n.createElement(Nt,{definition:Ye})},{type:"grpc",title:"gRPC",component:Ye=>n.createElement(we,{definition:Ye})},{type:"trpc",title:"tRPC",component:Ye=>n.createElement(ue,{definition:Ye})}]}const $=Ye=>{const{apiEntity:St}=Ye,Bt=(0,i.h_)(Pe).getApiDefinitionWidget(St),Ee=Bt?Bt.title:St.spec.type;return n.createElement(U.Z,{component:"span"},Ee)},A=(0,w.Z)(Ye=>({fullHeightDialog:{height:"calc(100% - 64px)"},root:{display:"flex",flexGrow:1,width:"100%",height:"100%"},tabs:{borderRight:`1px solid ${Ye.palette.divider}`,flexShrink:0},tabContents:{flexGrow:1,overflowX:"auto"},title:{color:Ye.palette.text.primary,wordBreak:"break-word",fontSize:Ye.typography.h3.fontSize,marginBottom:0},type:{textTransform:"uppercase",fontSize:11,opacity:.8,marginBottom:Ye.spacing(1),color:Ye.palette.text.primary}}));function z(Ye){const{children:St,value:Mt,index:Bt,...Ee}=Ye,De=A();return n.createElement("div",{role:"tabpanel",hidden:Mt!==Bt,id:`vertical-tabpanel-${Bt}`,"aria-labelledby":`vertical-tab-${Bt}`,className:De.tabContents,...Ee},Mt===Bt&&n.createElement(N.Z,{pl:3,pr:3},St))}function ae(Ye){return{id:`vertical-tab-${Ye}`,"aria-controls":`vertical-tabpanel-${Ye}`}}function $e(Ye){var St,Mt,Bt;const{open:Ee,entity:De,onClose:ct}=Ye,[Ve,yt]=n.useState(0),ye=A();(0,n.useEffect)(()=>{yt(0)},[Ee]);const Ct=(0,i.h_)(Pe).getApiDefinitionWidget(De);let _t=0,it=0;return n.createElement(K.Z,{fullWidth:!0,maxWidth:"xl",open:Ee,onClose:ct,"aria-labelledby":"api-definition-dialog-title",PaperProps:{className:ye.fullHeightDialog}},n.createElement(k.Z,{id:"api-definition-dialog-title",disableTypography:!0},n.createElement(U.Z,{className:ye.type},"API - ",(St=Ct==null?void 0:Ct.title)!=null?St:"Raw"),n.createElement(U.Z,{className:ye.title,variant:"h1"},(Mt=De.metadata.title)!=null?Mt:De.metadata.name)),n.createElement(H.Z,{dividers:!0,className:ye.root},n.createElement(C.Z,{orientation:"vertical",variant:"scrollable",value:Ve,onChange:(At,zt)=>yt(zt),"aria-label":"API definition options",className:ye.tabs},Ct?n.createElement(v.Z,{label:Ct.title,...ae(_t++)}):null,n.createElement(v.Z,{label:"Raw",...ae(_t++)})),Ct?n.createElement(z,{value:Ve,index:it++},Ct.component(De.spec.definition)):null,n.createElement(z,{value:Ve,index:it++},n.createElement(qe,{definition:De.spec.definition,language:(Bt=Ct==null?void 0:Ct.rawLanguage)!=null?Bt:De.spec.type}))),n.createElement(F.Z,null,n.createElement(g.Z,{onClick:ct,color:"primary"},"Close")))}function Ge(){return{title:"Type",field:"spec.type",render:Ye=>n.createElement($,{apiEntity:Ye})}}const ft=({apiEntity:Ye})=>{const[St,Mt]=(0,n.useState)(!1);return n.createElement(n.Fragment,null,n.createElement(R.Z,{onClick:()=>Mt(!St)},n.createElement(x.Z,null)),n.createElement($e,{entity:Ye,open:St,onClose:()=>Mt(!1)}))};function nt(){return{title:"API Definition",render:Ye=>n.createElement(ft,{apiEntity:Ye})}}const Rt=[m.u3.columns.createEntityRefColumn({defaultKind:"API"}),m.u3.columns.createSystemColumn(),m.u3.columns.createOwnerColumn(),Ge(),m.u3.columns.createSpecLifecycleColumn(),m.u3.columns.createMetadataDescriptionColumn(),nt()],q=Ye=>{const{variant:St="gridItem",columns:Mt=Rt}=Ye,{entity:Bt}=(0,m.X2)(),{entities:Ee,loading:De,error:ct}=(0,m.eK)(Bt,{type:J.Dg});return De?n.createElement(p.rJ,{variant:St,title:"Consumed APIs"},n.createElement(p.Ex,null)):ct||!Ee?n.createElement(p.rJ,{variant:St,title:"Consumed APIs"},n.createElement(p.GB,{severity:"error",title:"Could not load APIs",message:n.createElement(p.Oi,{text:`${ct}`,language:"text"})})):n.createElement(m.u3,{title:"Consumed APIs",variant:St,emptyContent:n.createElement("div",{style:{textAlign:"center"}},n.createElement(U.Z,{variant:"body1"},"This ",Bt.kind.toLocaleLowerCase("en-US")," does not consume any APIs."),n.createElement(U.Z,{variant:"body2"},n.createElement(p.rU,{to:"https://backstage.io/docs/features/software-catalog/descriptor-format#specconsumesapis-optional"},"Learn how to change this."))),columns:Mt,entities:Ee})},de=[m.u3.columns.createEntityRefColumn({defaultKind:"API"}),m.u3.columns.createOwnerColumn(),Ge(),m.u3.columns.createSpecLifecycleColumn(),m.u3.columns.createMetadataDescriptionColumn()],Se=Ye=>{const{variant:St="gridItem",columns:Mt=de}=Ye,{entity:Bt}=(0,m.X2)(),{entities:Ee,loading:De,error:ct}=(0,m.eK)(Bt,{type:J.aS,kind:"API"});return De?n.createElement(p.rJ,{variant:St,title:"APIs"},n.createElement(p.Ex,null)):ct||!Ee?n.createElement(p.rJ,{variant:St,title:"APIs"},n.createElement(p.GB,{severity:"error",title:"Could not load APIs",message:n.createElement(p.Oi,{text:`${ct}`,language:"text"})})):n.createElement(m.u3,{title:"APIs",variant:St,emptyContent:n.createElement("div",{style:{textAlign:"center"}},n.createElement(U.Z,{variant:"body1"},"This ",Bt.kind.toLocaleLowerCase("en-US")," does not contain any APIs."),n.createElement(U.Z,{variant:"body2"},n.createElement(p.rU,{to:"https://backstage.io/docs/features/software-catalog/descriptor-format#kind-api"},"Learn how to change this."))),columns:Mt,entities:Ee})},Ne=Ye=>{const{variant:St="gridItem",columns:Mt=Rt}=Ye,{entity:Bt}=(0,m.X2)(),{entities:Ee,loading:De,error:ct}=(0,m.eK)(Bt,{type:J.M_});return De?n.createElement(p.rJ,{variant:St,title:"Provided APIs"},n.createElement(p.Ex,null)):ct||!Ee?n.createElement(p.rJ,{variant:St,title:"Provided APIs"},n.createElement(p.GB,{severity:"error",title:"Could not load APIs",message:n.createElement(p.Oi,{text:`${ct}`,language:"text"})})):n.createElement(m.u3,{title:"Provided APIs",variant:St,emptyContent:n.createElement("div",{style:{textAlign:"center"}},n.createElement(U.Z,{variant:"body1"},"This ",Bt.kind.toLocaleLowerCase("en-US")," does not provide any APIs."),n.createElement(U.Z,{variant:"body2"},n.createElement(p.rU,{to:"https://backstage.io/docs/features/software-catalog/descriptor-format#specprovidesapis-optional"},"Learn how to change this."))),columns:Mt,entities:Ee})},st=Ye=>{const{variant:St="gridItem"}=Ye,{entity:Mt}=(0,m.X2)(),{entities:Bt,loading:Ee,error:De}=(0,m.eK)(Mt,{type:J.X9});return Ee?n.createElement(p.rJ,{variant:St,title:"Consumers"},n.createElement(p.Ex,null)):De||!Bt?n.createElement(p.rJ,{variant:St,title:"Consumers"},n.createElement(p.GB,{severity:"error",title:"Could not load components",message:n.createElement(p.Oi,{text:`${De}`,language:"text"})})):n.createElement(m.u3,{title:"Consumers",variant:St,emptyContent:n.createElement("div",{style:{textAlign:"center"}},n.createElement(U.Z,{variant:"body1"},"No component consumes this API."),n.createElement(U.Z,{variant:"body2"},n.createElement(p.rU,{to:"https://backstage.io/docs/features/software-catalog/descriptor-format#specconsumesapis-optional"},"Learn how to change this."))),columns:m.u3.componentEntityColumns,entities:Bt})},pe=Ye=>{const{variant:St="gridItem"}=Ye,{entity:Mt}=(0,m.X2)(),{entities:Bt,loading:Ee,error:De}=(0,m.eK)(Mt,{type:J.Zj});return Ee?n.createElement(p.rJ,{variant:St,title:"Providers"},n.createElement(p.Ex,null)):De||!Bt?n.createElement(p.rJ,{variant:St,title:"Providers"},n.createElement(p.GB,{severity:"error",title:"Could not load components",message:n.createElement(p.Oi,{text:`${De}`,language:"text"})})):n.createElement(m.u3,{title:"Providers",variant:St,emptyContent:n.createElement("div",{style:{textAlign:"center"}},n.createElement(U.Z,{variant:"body1"},"No component provides this API."),n.createElement(U.Z,{variant:"body2"},n.createElement(p.rU,{to:"https://backstage.io/docs/features/software-catalog/descriptor-format#specprovidesapis-optional"},"Learn how to change this."))),columns:m.u3.componentEntityColumns,entities:Bt})},Je=(0,i.rx)({id:"api-docs",routes:{root:B},apis:[(0,i.ni)({api:Pe,deps:{},factory:()=>{const Ye=Ke();return{getApiDefinitionWidget:St=>Ye.find(Mt=>Mt.type===St.spec.type)}}})],externalRoutes:{registerApi:T}}),ot=Je.provide((0,i.P4)({name:"ApiExplorerPage",component:()=>e.e(2045).then(e.bind(e,22045)).then(Ye=>Ye.ApiExplorerIndexPage),mountPoint:B})),Qe=Je.provide((0,i.CO)({name:"EntityApiDefinitionCard",component:{lazy:()=>e.e(4105).then(e.bind(e,44105)).then(Ye=>Ye.ApiDefinitionCard)}})),Et=Je.provide((0,i.CO)({name:"EntityConsumedApisCard",component:{lazy:()=>e.e(4355).then(e.bind(e,14355)).then(Ye=>Ye.ConsumedApisCard)}})),dt=Je.provide((0,i.CO)({name:"EntityConsumingComponentsCard",component:{lazy:()=>e.e(5584).then(e.bind(e,65584)).then(Ye=>Ye.ConsumingComponentsCard)}})),Vt=Je.provide((0,i.CO)({name:"EntityProvidedApisCard",component:{lazy:()=>e.e(4355).then(e.bind(e,14355)).then(Ye=>Ye.ProvidedApisCard)}})),jt=Je.provide((0,i.CO)({name:"EntityProvidingComponentsCard",component:{lazy:()=>e.e(5584).then(e.bind(e,65584)).then(Ye=>Ye.ProvidingComponentsCard)}})),Ht=Je.provide((0,i.CO)({name:"EntityHasApisCard",component:{lazy:()=>e.e(4355).then(e.bind(e,14355)).then(Ye=>Ye.HasApisCard)}}))},75650:function(Dt,E,e){"use strict";e.d(E,{j8:function(){return c},x7:function(){return i}});var n=e(5083);const d="catalog-entity",p=(0,n.J$)({name:"catalog.entity.read",attributes:{action:"read"},resourceType:d}),i=(0,n.J$)({name:"catalog.entity.create",attributes:{action:"create"}}),c=(0,n.J$)({name:"catalog.entity.delete",attributes:{action:"delete"},resourceType:d}),m=(0,n.J$)({name:"catalog.entity.refresh",attributes:{action:"update"},resourceType:d}),b=(0,n.J$)({name:"catalog.location.read",attributes:{action:"read"}}),R=(0,n.J$)({name:"catalog.location.create",attributes:{action:"create"}}),t=(0,n.J$)({name:"catalog.location.delete",attributes:{action:"delete"}}),U=[p,i,c,m,b,R,t]},98487:function(Dt,E,e){"use strict";e.d(E,{Az:function(){return Nt},Ho:function(){return ke},Nm:function(){return T},_U:function(){return xe},t0:function(){return rn},vw:function(){return B}});var n=e(34520),d=e(80236),p=e(30705),i=e(79692),c=e(60364),m=e(4614),b=e(72779),R=e.n(b),t=e(2784),U=e(10368),w=e(64304),N=e(39412),K=e(48760),k=e(14162),H=e.n(k),C=e(69294);const v=(0,U.Z)(D=>({text:{fill:D.palette.textContrast},secondary:{fill:D.palette.textSubtle}}),{name:"PluginCatalogGraphCustomLabel"});function F({edge:{relations:D}}){const we=v();return t.createElement("text",{className:we.text,textAnchor:"middle"},D.map((ue,Ke)=>t.createElement("tspan",{key:ue,className:R()(Ke>0&&we.secondary)},Ke>0&&t.createElement("tspan",null," / "),ue)))}function g({kind:D,...we}){var ue;const $=(ue=(0,p.qD)().getSystemIcon(`kind:${D.toLocaleLowerCase("en-US")}`))!=null?ue:N.Z;return t.createElement($,{...we})}const J=(0,i.Z)(D=>({node:{fill:D.palette.grey[300],stroke:D.palette.grey[300],"&.primary":{fill:D.palette.primary.light,stroke:D.palette.primary.light},"&.secondary":{fill:D.palette.secondary.light,stroke:D.palette.secondary.light}},text:{fill:D.palette.getContrastText(D.palette.grey[300]),"&.primary":{fill:D.palette.primary.contrastText},"&.secondary":{fill:D.palette.secondary.contrastText},"&.focused":{fontWeight:"bold"}},clickable:{cursor:"pointer"}}),{name:"PluginCatalogGraphCustomNode"});function x({node:{id:D,kind:we,namespace:ue,name:Ke,color:$="default",focused:A,title:z,onClick:ae}}){const $e=J(),[Ge,ft]=(0,t.useState)(0),[nt,Rt]=(0,t.useState)(0),q=(0,t.useRef)(null);(0,t.useLayoutEffect)(()=>{if(q.current){let{height:ot,width:Qe}=q.current.getBBox();ot=Math.round(ot),Qe=Math.round(Qe),(ot!==nt||Qe!==Ge)&&(ft(Qe),Rt(ot))}},[Ge,nt]);const de=10,Se=nt,Ne=we?Se+de:0,st=Ne+Ge+de*2,pe=nt+de*2,Je=z!=null?z:we&&Ke&&ue?(0,w.$3)({kind:we,name:Ke,namespace:ue}):D;return t.createElement("g",{onClick:ae,className:R()(ae&&$e.clickable)},t.createElement("rect",{className:R()($e.node,$==="primary"&&"primary",$==="secondary"&&"secondary"),width:st,height:pe,rx:10}),we&&t.createElement(g,{kind:we,y:de,x:de,width:Se,height:Se,className:R()($e.text,A&&"focused",$==="primary"&&"primary",$==="secondary"&&"secondary")}),t.createElement("text",{ref:q,className:R()($e.text,A&&"focused",$==="primary"&&"primary",$==="secondary"&&"secondary"),y:pe/2,x:Ne+(Ge+de*2)/2,textAnchor:"middle",alignmentBaseline:"middle"},Je))}const B=[[n.$1,n.S4],[n.Dg,n.X9],[n.Zj,n.M_],[n.aS,n.cz],[n._b,n.wP],[n.KS,n.hr],[n.nP,n.w$]];var T=(D=>(D.TOP_BOTTOM="TB",D.BOTTOM_TOP="BT",D.LEFT_RIGHT="LR",D.RIGHT_LEFT="RL",D))(T||{});const S=H()(10);function ie(){const D=(0,p.h_)(w.Ah),we=(0,t.useRef)({requestedEntities:new Set,outstandingEntities:new Map,cachedEntities:new Map}),[ue,Ke]=(0,t.useState)({}),$=(0,t.useCallback)(()=>{const{cachedEntities:ft,requestedEntities:nt}=we.current,Rt={};nt.forEach(q=>{const de=ft.get(q);de&&(Rt[q]=de)}),Ke(Rt)},[we,Ke]),[A,z]=(0,C.default)(async()=>{const{requestedEntities:ft,outstandingEntities:nt,cachedEntities:Rt}=we.current;await Promise.all(Array.from(ft).map(q=>S(async()=>{if(Rt.has(q))return;if(nt.has(q)){await nt.get(q);return}const de=D.getEntityByRef(q);nt.set(q,de);try{const Se=await de;Se&&(Rt.set(q,Se),$())}finally{nt.delete(q)}})))},[we,$]),{loading:ae,error:$e}=A,Ge=(0,t.useCallback)(ft=>{const nt=new Set(ft),{requestedEntities:Rt}=we.current;(nt.size!==Rt.size||Array.from(nt).some(q=>!Rt.has(q)))&&(we.current.requestedEntities=nt,z(),$())},[we,z,$]);return{entities:ue,loading:ae,error:$e,requestEntities:Ge}}function Te({rootEntityRefs:D,filter:{maxDepth:we=Number.POSITIVE_INFINITY,relations:ue,kinds:Ke}={}}){const{entities:$,loading:A,error:z,requestEntities:ae}=ie();return(0,t.useEffect)(()=>{const $e=new Set([...D]),Ge=new Set;let ft=[...D],nt=0;for(;ft.length>0&&(!isFinite(we)||nt<we);){const Rt=ft;for(ft=[];Rt.length>0;){const q=Rt.shift(),de=$[q];if(Ge.add(q),de&&de.relations)for(const Se of de.relations)(!ue||ue.includes(Se.type))&&(!Ke||Ke.some(Ne=>Se.targetRef.startsWith(`${Ne.toLocaleLowerCase("en-US")}:`)))&&(Ge.has(Se.targetRef)||(ft.push(Se.targetRef),$e.add(Se.targetRef)))}++nt}ae([...$e])},[$,D,we,ue,Ke,ae]),{entities:$,loading:A,error:z}}function Pe({rootEntityRefs:D,maxDepth:we=Number.POSITIVE_INFINITY,unidirectional:ue=!0,mergeRelations:Ke=!0,kinds:$,relations:A,onNodeClick:z,relationPairs:ae=B}){const[$e,Ge]=(0,t.useState)({}),{entities:ft,loading:nt,error:Rt}=Te({rootEntityRefs:D,filter:{maxDepth:we,kinds:$,relations:A}});return(0,K.Z)(()=>{var q;if(!ft||Object.keys(ft).length===0){Ge({});return}const de=Object.entries(ft).map(([pe,Je])=>{var ot,Qe,Et,dt;const Vt=D.includes(pe),jt={id:pe,title:(Qe=(ot=Je.metadata)==null?void 0:ot.title)!=null?Qe:void 0,kind:Je.kind,name:Je.metadata.name,namespace:(Et=Je.metadata.namespace)!=null?Et:n.zG,spec:(dt=Je.spec)!=null?dt:void 0,focused:Vt,color:Vt?"secondary":"primary"};return z&&(jt.onClick=Ht=>z(jt,Ht)),jt}),Se=[],Ne=new Set,st=[...D];for(;st.length>0;){const pe=st.pop(),Je=ft[pe];Ne.add(pe),Je&&((q=Je==null?void 0:Je.relations)==null||q.forEach(ot=>{var Qe;if(ft[ot.targetRef]&&!(A&&!A.includes(ot.type))&&!($&&!$.some(Et=>ot.targetRef.startsWith(`${Et.toLocaleLowerCase("en-US")}:`)))){if(!ue||!Ne.has(ot.targetRef))if(Ke){const Et=(Qe=ae.find(([Vt,jt])=>Vt===ot.type||jt===ot.type))!=null?Qe:[ot.type],[dt]=Et;Se.push({from:dt===ot.type?pe:ot.targetRef,to:dt===ot.type?ot.targetRef:pe,relations:Et,label:"visible"})}else Se.push({from:pe,to:ot.targetRef,relations:[ot.type],label:"visible"});Ne.has(ot.targetRef)||(st.push(ot.targetRef),Ne.add(ot.targetRef))}}))}Ge({nodes:de,edges:Se})},100,[ft,D,$,A,ue,Ke,z,ae]),{loading:nt,error:Rt,...$e}}const qe=(0,i.Z)(D=>({progress:{position:"absolute",left:"50%",top:"50%",marginLeft:"-20px",marginTop:"-20px"},container:{position:"relative",width:"100%",display:"flex",flexDirection:"column"},graph:{width:"100%",flex:1,"& path[marker-end]":{transition:"filter 0.1s ease-in-out"},"& path[marker-end]:hover":{filter:`drop-shadow(2px 2px 4px ${D.palette.primary.dark});`},"& g[data-testid=label]":{transition:"transform 0s"}}}),{name:"PluginCatalogGraphEntityRelationsGraph"}),xe=D=>{const{rootEntityNames:we,maxDepth:ue=2,unidirectional:Ke=!0,mergeRelations:$=!0,kinds:A,relations:z,direction:ae=T.LEFT_RIGHT,onNodeClick:$e,relationPairs:Ge=B,className:ft,zoom:nt="enabled",renderNode:Rt,renderLabel:q,curve:de}=D,Se=(0,c.Z)(),Ne=qe(),st=(0,t.useMemo)(()=>(Array.isArray(we)?we:[we]).map(dt=>(0,n.eE)(dt)),[we]),pe=(0,p.h_)(p.VE),{loading:Je,error:ot,nodes:Qe,edges:Et}=Pe({rootEntityRefs:st,maxDepth:ue,unidirectional:Ke,mergeRelations:$,kinds:A,relations:z,onNodeClick:$e,relationPairs:Ge});return(0,t.useEffect)(()=>{ot&&pe.post(ot)},[pe,ot]),t.createElement("div",{className:R()(Ne.container,ft)},Je&&t.createElement(m.Z,{className:Ne.progress}),Qe&&Et&&t.createElement(d.mn,{nodes:Qe,edges:Et,renderNode:Rt||x,renderLabel:q||F,direction:ae,className:Ne.graph,paddingX:Se.spacing(4),paddingY:Se.spacing(4),labelPosition:d.NX.LabelPosition.RIGHT,labelOffset:Se.spacing(1),zoom:nt,curve:de}))},ke=(0,p.NT)({id:"catalog-graph"}),rt=(0,p.x8)({id:"catalog-entity",params:["namespace","kind","name"],optional:!0}),Kt=(0,p.rx)({id:"catalog-graph",routes:{catalogGraph:ke},externalRoutes:{catalogEntity:rt}}),Nt=Kt.provide((0,p.CO)({name:"EntityCatalogGraphCard",component:{lazy:()=>e.e(9474).then(e.bind(e,9474)).then(D=>D.CatalogGraphCard)}})),rn=Kt.provide((0,p.P4)({name:"CatalogGraphPage",component:()=>e.e(3194).then(e.bind(e,18063)).then(D=>D.CatalogGraphPage),mountPoint:ke}))},93316:function(Dt,E,e){"use strict";e.d(E,{gA:function(){return lt},vr:function(){return St},wS:function(){return Ye}});var n=e(30705),d=e(49462),p=e(64304),i=e(89393),c=e(49431),m=e(82717),b=e.n(m),R=e(80236),t=e(90436),U=e(7089),w=e(77277),N=e(4614),K=e(11776),k=e(38402),H=e(86136),C=e(49378),v=e(9520),F=e(61837),g=e(82113),J=e(60905),x=e(86619),B=e(74828),T=e(94339),S=e(32552),ie=e(24579),Te=e(95544),Pe=e(21324),qe=e(34546),xe=e(5806),ke=e(31377),rt=e(67471),Kt=e(31625),Nt=e(60364),rn=e(41156),D=e(2784),we=e(79692),ue=e(4989),Ke=e(84905),$=e(38016),A=e(39412),z=e(96795),ae=e.n(z),$e=e(63955),Ge=e(88013),ft=e(10921),nt=e(76635),Rt=e.n(nt),q=e(32272),de=e(64279),Se=e(34520);const Ne=(0,n.T0)({id:"plugin.catalog-import.service"}),st=(ne,ce)=>{const Ce=ne.github.byUrl(ce);if(!Ce)return;const{name:Y,owner:te}=b()(ce);return{repo:Y,owner:te,githubIntegrationConfig:Ce.config}};function pe(ne){const{ref:ce,...Ce}=ne;return{inputRef:ce,...Ce}}function Je(ne){var ce;return(ce=ne.getOptionalString("catalog.import.entityFilename"))!=null?ce:"catalog-info.yaml"}function ot(ne){var ce;return(ce=ne.getOptionalString("catalog.import.pullRequestBranchName"))!=null?ce:"backstage-integration"}var Qe=Object.defineProperty,Et=(ne,ce,Ce)=>ce in ne?Qe(ne,ce,{enumerable:!0,configurable:!0,writable:!0,value:Ce}):ne[ce]=Ce,dt=(ne,ce,Ce)=>(Et(ne,typeof ce!="symbol"?ce+"":ce,Ce),Ce);class Vt{constructor(ce){dt(this,"discoveryApi"),dt(this,"identityApi"),dt(this,"scmAuthApi"),dt(this,"scmIntegrationsApi"),dt(this,"catalogApi"),dt(this,"configApi"),this.discoveryApi=ce.discoveryApi,this.scmAuthApi=ce.scmAuthApi,this.identityApi=ce.identityApi,this.scmIntegrationsApi=ce.scmIntegrationsApi,this.catalogApi=ce.catalogApi,this.configApi=ce.configApi}async analyzeUrl(ce){var Ce;if(new URL(ce).pathname.match(/\.ya?ml$/)||(Ce=new URL(ce).searchParams.get("path"))!=null&&Ce.match(/.ya?ml$/)){const me=await this.catalogApi.addLocation({type:"url",target:ce,dryRun:!0});return{type:"locations",locations:[{exists:me.exists,target:me.location.target,entities:me.entities.map(Ie=>{var Le;return{kind:Ie.kind,namespace:(Le=Ie.metadata.namespace)!=null?Le:"default",name:Ie.metadata.name}})}]}}if(!st(this.scmIntegrationsApi,ce)){const me=this.scmIntegrationsApi.byUrl(ce),Ie=Je(this.configApi);throw me?new Error(`The ${me.title} integration only supports full URLs to ${Ie} files. Did you try to pass in the URL of a directory instead?`):new Error(`This URL was not recognized as a valid GitHub URL because there was no configured integration that matched the given host name. You could try to paste the full URL to a ${Ie} file instead.`)}const te=await this.analyzeLocation({repo:ce});if(te.existingEntityFiles.length>0){const me=te.existingEntityFiles.reduce((Ie,Le)=>{var bt;return Ie[Le.location.target]={target:Le.location.target,exists:Le.isRegistered,entities:[...Le.location.target in Ie?Ie[Le.location.target].entities:[],{name:Le.entity.metadata.name,namespace:(bt=Le.entity.metadata.namespace)!=null?bt:"default",kind:Le.entity.kind}]},Ie},{});return{type:"locations",locations:Object.values(me)}}return{type:"repository",integrationType:"github",url:ce,generatedEntities:te.generateEntities.map(me=>me.entity)}}async preparePullRequest(){var ce;const Ce=(ce=this.configApi.getOptionalString("app.title"))!=null?ce:"Backstage",Y=this.configApi.getString("app.baseUrl");return{title:`Add ${Je(this.configApi)} config file`,body:`This pull request adds a **Backstage entity metadata file** to this repository so that the component can be added to the [${Ce} software catalog](${Y}).

After this pull request is merged, the component will become available.

For more information, read an [overview of the Backstage software catalog](https://backstage.io/docs/features/software-catalog/).`}}async submitPullRequest(ce){const{repositoryUrl:Ce,fileContent:Y,title:te,body:me}=ce,Ie=st(this.scmIntegrationsApi,Ce);if(Ie)return await this.submitGitHubPrToRepo({...Ie,repositoryUrl:Ce,fileContent:Y,title:te,body:me});throw new Error("unimplemented!")}async analyzeLocation(ce){const{token:Ce}=await this.identityApi.getCredentials(),Y=await fetch(`${await this.discoveryApi.getBaseUrl("catalog")}/analyze-location`,{headers:{"Content-Type":"application/json",...Ce&&{Authorization:`Bearer ${Ce}`}},method:"POST",body:JSON.stringify({location:{type:"url",target:ce.repo},...this.configApi.getOptionalString("catalog.import.entityFilename")&&{catalogFilename:this.configApi.getOptionalString("catalog.import.entityFilename")}})}).catch(me=>{throw new Error(`Failed to generate entity definitions, ${me.message}`)});if(!Y.ok)throw new Error(`Failed to generate entity definitions. Received http response ${Y.status}: ${Y.statusText}`);return await Y.json()}async submitGitHubPrToRepo(ce){const{owner:Ce,repo:Y,title:te,body:me,fileContent:Ie,repositoryUrl:Le,githubIntegrationConfig:bt}=ce,{token:ut}=await this.scmAuthApi.getCredentials({url:Le,additionalScope:{repoWrite:!0}}),Ut=new i.v({auth:ut,baseUrl:bt.apiBaseUrl}),wt=ot(this.configApi),kt=Je(this.configApi),Qt=await Ut.repos.get({owner:Ce,repo:Y}).catch(tn=>{throw new Error(jt("Couldn't fetch repo data",tn))}),un=await Ut.git.getRef({owner:Ce,repo:Y,ref:`heads/${Qt.data.default_branch}`}).catch(tn=>{throw new Error(jt("Couldn't fetch default branch data",tn))});return await Ut.git.createRef({owner:Ce,repo:Y,ref:`refs/heads/${wt}`,sha:un.data.object.sha}).catch(tn=>{throw new Error(jt(`Couldn't create a new branch with name '${wt}'`,tn))}),await Ut.repos.createOrUpdateFileContents({owner:Ce,repo:Y,path:kt,message:te,content:c.DS.encode(Ie),branch:wt}).catch(tn=>{throw new Error(jt(`Couldn't create a commit with ${kt} file added`,tn))}),{link:(await Ut.pulls.create({owner:Ce,repo:Y,title:te,head:wt,body:me,base:Qt.data.default_branch}).catch(tn=>{throw new Error(jt(`Couldn't create a pull request for ${wt} branch`,tn))})).data.html_url,location:`https://${bt.host}/${Ce}/${Y}/blob/${Qt.data.default_branch}/${kt}`}}}function jt(ne,ce){return`${ne}, received http response status code ${ce.status}: ${ce.message}`}const Ht=(0,n.NT)({id:"catalog-import"}),Ye=(0,n.rx)({id:"catalog-import",apis:[(0,n.ni)({api:Ne,deps:{discoveryApi:n.NW,scmAuthApi:d.Om,identityApi:n.$4,scmIntegrationsApi:d.q3,catalogApi:p.Ah,configApi:n.Ds},factory:({discoveryApi:ne,scmAuthApi:ce,identityApi:Ce,scmIntegrationsApi:Y,catalogApi:te,configApi:me})=>new Vt({discoveryApi:ne,scmAuthApi:ce,scmIntegrationsApi:Y,identityApi:Ce,catalogApi:te,configApi:me})})],routes:{importPage:Ht}}),St=Ye.provide((0,n.P4)({name:"CatalogImportPage",component:()=>e.e(4398).then(e.bind(e,44398)).then(ne=>ne.ImportPage),mountPoint:Ht}));function Mt(){const ne=(0,n.h_)(n.Ds);return Je(ne)}const Bt=ne=>{const{exampleLocationUrl:ce="https://github.com/backstage/backstage/blob/master/catalog-info.yaml",exampleRepositoryUrl:Ce="https://github.com/backstage/backstage"}=ne,Y=(0,n.h_)(n.Ds),te=Y.getOptional("app.title")||"Backstage",me=(0,n.h_)(Ne),Ie=Y.has("integrations.github"),Le=Mt();return D.createElement(R.rJ,{title:"Register an existing component",titleTypographyProps:{component:"h3"},deepLink:{title:"Learn more about the Software Catalog",link:"https://backstage.io/docs/features/software-catalog/"}},D.createElement(t.Z,{variant:"body2",paragraph:!0},"Enter the URL to your source code repository to add it to ",te,"."),D.createElement(t.Z,{component:"h4",variant:"h6"},"Link to an existing entity file"),D.createElement(t.Z,{variant:"subtitle2",color:"textSecondary",paragraph:!0},"Example: ",D.createElement("code",null,ce)),D.createElement(t.Z,{variant:"body2",paragraph:!0},"The wizard analyzes the file, previews the entities, and adds them to the ",te," catalog."),Ie&&D.createElement(D.Fragment,null,D.createElement(t.Z,{component:"h4",variant:"h6"},"Link to a repository"," ",D.createElement(U.Z,{label:"GitHub only",variant:"outlined",size:"small"})),D.createElement(t.Z,{variant:"subtitle2",color:"textSecondary",paragraph:!0},"Example: ",D.createElement("code",null,Ce)),D.createElement(t.Z,{variant:"body2",paragraph:!0},"The wizard discovers all ",D.createElement("code",null,Le)," files in the repository, previews the entities, and adds them to the ",te," ","catalog."),me.preparePullRequest&&D.createElement(t.Z,{variant:"body2",paragraph:!0},"If no entities are found, the wizard will prepare a Pull Request that adds an example ",D.createElement("code",null,Le)," and prepares the ",te," catalog to load all entities as soon as the Pull Request is merged.")))};function Ee(ne){return{activeFlow:"unknown",activeState:"analyze",analysisUrl:ne,previousStates:[]}}function De(ne,ce){switch(ce.type){case"onAnalysis":{if(ne.activeState!=="analyze")return ne;const{activeState:Ce,previousStates:Y}=ne,[te,me,Ie,Le]=ce.args;return{...ne,analysisUrl:me,activeFlow:te,analyzeResult:Ie,prepareResult:Le==null?void 0:Le.prepareResult,activeState:(Le==null?void 0:Le.prepareResult)===void 0?"prepare":"review",previousStates:Y.concat(Ce)}}case"onPrepare":{if(ne.activeState!=="prepare")return ne;const{activeState:Ce,previousStates:Y}=ne,[te,me]=ce.args;return{...ne,prepareResult:te,activeState:"review",previousStates:me!=null&&me.notRepeatable?[]:Y.concat(Ce)}}case"onReview":{if(ne.activeState!=="review")return ne;const{activeState:Ce,previousStates:Y}=ne,[te]=ce.args;return{...ne,reviewResult:te,activeState:"finish",previousStates:Y.concat(Ce)}}case"onGoBack":{const{activeState:Ce,previousStates:Y}=ne;return{...ne,activeState:Y.length>0?Y[Y.length-1]:Ce,previousStates:Y.slice(0,Y.length-1)}}case"onReset":return{...Ee(ce.initialUrl),prepareResult:ne.prepareResult};default:throw new Error}}const ct=ne=>{const[ce,Ce]=(0,D.useReducer)(De,ne==null?void 0:ne.initialUrl,Ee),{activeFlow:Y,activeState:te,analysisUrl:me,previousStates:Ie}=ce;return{activeFlow:Y,activeState:te,activeStepNumber:["analyze","prepare","review","finish"].indexOf(te),analysisUrl:me,analyzeResult:ce.analyzeResult,prepareResult:ce.prepareResult,reviewResult:ce.reviewResult,onAnalysis:(Le,bt,ut,Ut)=>Ce({type:"onAnalysis",args:[Le,bt,ut,Ut]}),onPrepare:(Le,bt)=>Ce({type:"onPrepare",args:[Le,bt]}),onReview:Le=>Ce({type:"onReview",args:[Le]}),onGoBack:Ie.length>0?()=>Ce({type:"onGoBack"}):void 0,onReset:()=>Ce({type:"onReset",initialUrl:ne==null?void 0:ne.initialUrl})}},Ve=(0,we.Z)(ne=>({wrapper:{marginTop:ne.spacing(1),marginRight:ne.spacing(1),position:"relative"},buttonProgress:{position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12},button:{marginTop:ne.spacing(1),marginRight:ne.spacing(1)}})),yt=ne=>{const{loading:ce,...Ce}=ne,Y=Ve();return D.createElement("div",{className:Y.wrapper},D.createElement(w.Z,{color:"primary",variant:"contained",...Ce,disabled:ne.disabled||ne.loading}),ne.loading&&D.createElement(N.Z,{size:"1.5rem",className:Y.buttonProgress}),ne.loading)},ye=ne=>{const ce=Ve();return D.createElement(w.Z,{variant:"outlined",className:ce.button,...ne},ne.children||"Back")},mt=ne=>{const ce=Ve();return D.createElement(R.Qj,{color:"primary",variant:"contained",className:ce.button,...ne},ne.children)},Ct=(0,we.Z)(ne=>({nested:{paddingLeft:ne.spacing(4)}}));function _t(ne){return ne.sort((ce,Ce)=>(0,p.$3)(ce).localeCompare((0,p.$3)(Ce)))}const it=ne=>{const{locations:ce,collapsed:Ce=!1,locationListItemIcon:Y,onItemClick:te,firstListItem:me,withLinks:Ie=!1}=ne,Le=(0,n.qD)(),bt=Ct(),[ut,Ut]=(0,D.useState)([]),wt=kt=>{Ut(Qt=>Qt.includes(kt)?Qt.filter(un=>un!==kt):Qt.concat(kt))};return D.createElement(K.Z,null,me,ce.map(kt=>D.createElement(D.Fragment,{key:kt.target},D.createElement(k.Z,{dense:!0,button:Boolean(te),onClick:()=>te==null?void 0:te(kt.target)},D.createElement(H.Z,null,Y(kt.target)),D.createElement(C.Z,{primary:kt.target,secondary:`Entities: ${kt.entities.length}`}),Ce&&D.createElement(v.Z,null,D.createElement(F.Z,{edge:"end",onClick:()=>wt(kt.target)},ut.includes(kt.target)?D.createElement(Ke.Z,null):D.createElement($.Z,null)))),D.createElement(g.Z,{in:!Ce||ut.includes(kt.target),timeout:"auto",unmountOnExit:!0},D.createElement(K.Z,{component:"div",disablePadding:!0,dense:!0},_t(kt.entities).map(Qt=>{var un;const ln=(un=Le.getSystemIcon(`kind:${Qt.kind.toLocaleLowerCase("en-US")}`))!=null?un:A.Z;return D.createElement(k.Z,{key:(0,p.$3)(Qt),className:bt.nested,...Ie?{component:p.dx,entityRef:Qt,button:Ie}:{}},D.createElement(H.Z,null,D.createElement(ln,null)),D.createElement(C.Z,{primary:(0,p.$3)(Qt)}))}))))))},At=ne=>{for(const ce of ne)for(const Ce of ce.entities)if(["component","api","resource"].includes(Ce.kind.toLocaleLowerCase("en-US")))return Ce;return null},zt=({prepareResult:ne,onReset:ce})=>{const Ce=(0,n.tg)(p.wi);if(ne.type==="repository")return D.createElement(D.Fragment,null,D.createElement(t.Z,{paragraph:!0},"The following Pull Request has been opened:"," ",D.createElement(R.rU,{to:ne.pullRequest.url,target:"_blank",rel:"noreferrer"},ne.pullRequest.url)),D.createElement(t.Z,{paragraph:!0},"Your entities will be imported as soon as the Pull Request is merged."),D.createElement(J.Z,{container:!0,spacing:0},D.createElement(ye,{onClick:ce},"Register another")),";");const[Y,te]=ae()(ne.locations,Ie=>Ie.exists),me=At(te);return D.createElement(D.Fragment,null,te.length>0&&D.createElement(D.Fragment,null,D.createElement(t.Z,null,"The following entities have been added to the catalog:"),D.createElement(it,{locations:te,locationListItemIcon:()=>D.createElement(ue.Z,null),withLinks:!0})),Y.length>0&&D.createElement(D.Fragment,null,D.createElement(t.Z,null,"A refresh was triggered for the following locations:"),D.createElement(it,{locations:Y,locationListItemIcon:()=>D.createElement(ue.Z,null),withLinks:!0})),D.createElement(J.Z,{container:!0,spacing:0},me&&D.createElement(mt,{to:Ce(me)},"View Component"),D.createElement(ye,{onClick:ce},"Register another")))},ze=ne=>{const{onAnalysis:ce,analysisUrl:Ce="",disablePullRequest:Y=!1,exampleLocationUrl:te="https://github.com/backstage/backstage/blob/master/catalog-info.yaml"}=ne,me=(0,n.h_)(n.VE),Ie=(0,n.h_)(Ne),{register:Le,handleSubmit:bt,formState:{errors:ut},watch:Ut}=(0,$e.cI)({mode:"onTouched",defaultValues:{url:Ce}}),[wt,kt]=(0,D.useState)(!1),[Qt,un]=(0,D.useState)(void 0),ln=(0,D.useCallback)(async({url:tn})=>{var Zt,Wt,hn;kt(!0);try{const gn=await Ie.analyzeUrl(tn);switch(gn.type){case"repository":!Y&&gn.generatedEntities.length>0?ce("no-location",tn,gn):(un("Couldn't generate entities for your repository"),kt(!1));break;case"locations":{gn.locations.length===1?ce("single-location",tn,gn,{prepareResult:gn}):gn.locations.length>1?ce("multiple-locations",tn,gn):(un("There are no entities at this location"),kt(!1));break}default:{const yn=`Received unknown analysis result of type ${gn.type}. Please contact the support team.`;un(yn),kt(!1),me.post(new Error(yn));break}}}catch(gn){un((hn=(Wt=(Zt=gn==null?void 0:gn.data)==null?void 0:Zt.error)==null?void 0:Wt.message)!=null?hn:gn.message),kt(!1)}},[Ie,Y,me,ce]);return D.createElement("form",{onSubmit:bt(ln)},D.createElement(x.Z,{...pe(Le("url",{required:!0,validate:{httpsValidator:tn=>typeof tn=="string"&&tn.match(/^http[s]?:\/\//)!==null||"Must start with http:// or https://."}})),fullWidth:!0,id:"url",label:"URL",placeholder:te,helperText:"Enter the full path to your entity file to start tracking your component",margin:"normal",variant:"outlined",error:Boolean(ut.url),required:!0}),ut.url&&D.createElement(B.Z,{error:!0},ut.url.message),Qt&&D.createElement(B.Z,{error:!0},Qt),D.createElement(J.Z,{container:!0,spacing:0},D.createElement(yt,{disabled:Boolean(ut.url)||!Ut("url"),loading:wt,type:"submit"},"Analyze")))},Re=ne=>{const{name:ce,options:Ce,required:Y,errors:te,rules:me,loading:Ie=!1,loadingText:Le,helperText:bt,errorHelperText:ut,textFieldProps:Ut={}}=ne;return D.createElement($e.Qr,{name:ce,rules:me,render:({field:{onChange:wt}})=>D.createElement(Ge.ZP,{loading:Ie,loadingText:Le,options:Ce||[],autoSelect:!0,freeSolo:!0,onChange:(kt,Qt)=>wt(Qt),renderInput:kt=>D.createElement(x.Z,{...kt,helperText:(te==null?void 0:te[ce])&&ut||bt,error:Boolean(te==null?void 0:te[ce]),margin:"normal",variant:"outlined",required:Y,InputProps:{...kt.InputProps,endAdornment:D.createElement(D.Fragment,null,Ie?D.createElement(N.Z,{color:"inherit",size:"1em"}):null,kt.InputProps.endAdornment)},...Ut})})})},We=ne=>{const{defaultValues:ce,onSubmit:Ce,render:Y}=ne,te=(0,$e.cI)({mode:"onTouched",defaultValues:ce}),{handleSubmit:me,watch:Ie,control:Le,register:bt,formState:ut,setValue:Ut}=te;return D.createElement($e.RV,{...te},D.createElement("form",{onSubmit:me(Ce)},Y({values:Ie(),formState:ut,register:bt,control:Le,setValue:Ut})))},je=ne=>{const{repositoryUrl:ce,entities:Ce,classes:Y}=ne,te=Mt();return D.createElement(T.Z,{variant:"outlined",className:Y==null?void 0:Y.card},D.createElement(S.Z,{title:D.createElement("code",null,`${(0,nt.trimEnd)(ce,"/")}/${te}`)}),D.createElement(ie.Z,{className:Y==null?void 0:Y.cardContent},D.createElement(R.Oi,{text:Ce.map(me=>ft.ZP.stringify(me)).join(`---
`).trim(),language:"yaml"})))},W=ne=>{const{title:ce,description:Ce,classes:Y}=ne;return D.createElement(T.Z,{variant:"outlined",className:Y==null?void 0:Y.card},D.createElement(S.Z,{title:ce,subheader:"Create a new Pull Request"}),D.createElement(ie.Z,{className:Y==null?void 0:Y.cardContent},D.createElement(R.SA,{content:Ce})))},_=(0,we.Z)(ne=>({previewCard:{marginTop:ne.spacing(1)},previewCardContent:{paddingTop:0}}));function h(ne,ce,Ce){return ne.map(Y=>({...Y,apiVersion:Y.apiVersion,kind:Y.kind,metadata:{...Y.metadata,name:ce},spec:{...Y.spec,...Ce?{owner:Ce}:{}}}))}const M=ne=>{var ce,Ce,Y,te,me,Ie;const{analyzeResult:Le,onPrepare:bt,onGoBack:ut,renderFormFields:Ut}=ne,wt=_(),kt=(0,n.h_)(p.Ah),Qt=(0,n.h_)(Ne),un=(0,n.h_)(n.VE),[ln,tn]=(0,D.useState)(!1),[Zt,Wt]=(0,D.useState)(),hn=Mt(),{loading:gn,value:yn,error:bn}=(0,de.default)(()=>Qt.preparePullRequest(),[Qt.preparePullRequest]);(0,D.useEffect)(()=>{bn&&un.post(bn)},[bn,un]);const{loading:In,value:An}=(0,de.default)(async()=>(await kt.getEntities({filter:{kind:"group"}})).items.map(Dn=>(0,p.$3)(Dn,{defaultKind:"group"})).sort()),On=(0,D.useCallback)(async Sn=>{tn(!0);try{const Dn=await Qt.submitPullRequest({repositoryUrl:Le.url,title:Sn.title,body:Sn.body,fileContent:h(Le.generatedEntities,Sn.componentName,Sn.owner).map(sr=>ft.ZP.stringify(sr)).join(`---
`)});bt({type:"repository",url:Le.url,integrationType:Le.integrationType,pullRequest:{url:Dn.link},locations:[{target:Dn.location,entities:h(Le.generatedEntities,Sn.componentName,Sn.owner).map(sr=>({kind:sr.kind,namespace:sr.metadata.namespace,name:sr.metadata.name}))}]},{notRepeatable:!0})}catch(Dn){(0,q.BD)(Dn),Wt(Dn.message),tn(!1)}},[Le.generatedEntities,Le.integrationType,Le.url,Qt,bt]);return D.createElement(D.Fragment,null,D.createElement(t.Z,null,"You entered a link to a ",Le.integrationType," repository but a"," ",D.createElement("code",null,hn)," could not be found. Use this form to open a Pull Request that creates one."),!gn&&D.createElement(We,{onSubmit:On,defaultValues:{title:(ce=yn==null?void 0:yn.title)!=null?ce:"",body:(Ce=yn==null?void 0:yn.body)!=null?Ce:"",owner:((te=(Y=Le.generatedEntities[0])==null?void 0:Y.spec)==null?void 0:te.owner)||"",componentName:((Ie=(me=Le.generatedEntities[0])==null?void 0:me.metadata)==null?void 0:Ie.name)||"",useCodeowners:!1},render:({values:Sn,formState:Dn,register:sr,setValue:zn})=>D.createElement(D.Fragment,null,Ut({values:Sn,formState:Dn,register:sr,setValue:zn,groups:An!=null?An:[],groupsLoading:In}),D.createElement(Te.Z,{marginTop:2},D.createElement(t.Z,{variant:"h6"},"Preview Pull Request")),D.createElement(W,{title:Sn.title,description:Sn.body,classes:{card:wt.previewCard,cardContent:wt.previewCardContent}}),D.createElement(Te.Z,{marginTop:2,marginBottom:1},D.createElement(t.Z,{variant:"h6"},"Preview Entities")),D.createElement(je,{entities:h(Le.generatedEntities,Sn.componentName,Sn.owner),repositoryUrl:Le.url,classes:{card:wt.previewCard,cardContent:wt.previewCardContent}}),Zt&&D.createElement(B.Z,{error:!0},Zt),D.createElement(J.Z,{container:!0,spacing:0},ut&&D.createElement(ye,{onClick:ut,disabled:ln}),D.createElement(yt,{type:"submit",disabled:Boolean(Dn.errors.title||Dn.errors.body||Dn.errors.owner),loading:ln},"Create PR")))}))},X=({analyzeResult:ne,prepareResult:ce,onPrepare:Ce,onGoBack:Y})=>{const[te,me]=(0,D.useState)((ce==null?void 0:ce.locations.map(wt=>wt.target))||[]),[Ie,Le]=ae()(ne==null?void 0:ne.locations,wt=>wt.exists),bt=(0,D.useCallback)(async()=>{Ce({type:"locations",locations:Le.filter(wt=>te.includes(wt.target))})},[Le,Ce,te]),ut=wt=>{me(kt=>kt.includes(wt)?kt.filter(Qt=>Qt!==wt):kt.concat(wt))},Ut=()=>{me(wt=>wt.length<Le.length?Le.map(kt=>kt.target):[])};return D.createElement(D.Fragment,null,Le.length>0&&D.createElement(D.Fragment,null,D.createElement(t.Z,null,"Select one or more locations that are present in your git repository:"),D.createElement(it,{firstListItem:D.createElement(k.Z,{dense:!0,button:!0,onClick:Ut},D.createElement(H.Z,null,D.createElement(Pe.Z,{edge:"start",checked:te.length===Le.length,indeterminate:te.length>0&&te.length<Le.length,tabIndex:-1,disableRipple:!0})),D.createElement(C.Z,{primary:"Select All"})),onItemClick:ut,locations:Le,locationListItemIcon:wt=>D.createElement(Pe.Z,{edge:"start",checked:te.includes(wt),tabIndex:-1,disableRipple:!0}),collapsed:!0})),Ie.length>0&&D.createElement(D.Fragment,null,D.createElement(t.Z,null,"These locations already exist in the catalog:"),D.createElement(it,{locations:Ie,locationListItemIcon:()=>D.createElement(ue.Z,null),withLinks:!0,collapsed:!0})),D.createElement(J.Z,{container:!0,spacing:0},Y&&D.createElement(ye,{onClick:Y}),D.createElement(yt,{disabled:te.length===0,onClick:bt},"Review")))},j=({prepareResult:ne,onReview:ce,onGoBack:Ce})=>{const Y=(0,n.h_)(p.Ah),te=(0,n.h_)(n.Ds),me=(0,n.z$)(),Ie=te.getOptional("app.title")||"Backstage",[Le,bt]=(0,D.useState)(!1),[ut,Ut]=(0,D.useState)(),wt=!!(ne.type==="locations"&&ne.locations.some(Qt=>Qt.exists)),kt=(0,D.useCallback)(async()=>{bt(!0),me.captureEvent("click","import entity");try{let Qt=new Array;ne.type==="locations"&&(Qt=await Promise.all(ne.locations.filter(ln=>ln.exists).map(async ln=>{var tn;const Zt=(0,Se.eE)((tn=ln.entities[0])!=null?tn:ln);return await Y.refreshEntity(Zt),{target:ln.target}})));const un=await Promise.all(ne.locations.filter(ln=>!ln.exists).map(async ln=>{const tn=await Y.addLocation({type:"url",target:ln.target});return{target:tn.location.target,entities:tn.entities}}));ce({...ne,refreshed:Qt,locations:un})}catch(Qt){(0,q.BD)(Qt),ne.type==="repository"&&Qt.message.startsWith("Location was added but has no entities specified yet")?ce({...ne,locations:ne.locations.map(un=>({target:un.target,entities:[]}))}):(Ut(Qt.message),bt(!1))}},[ne,ce,Y,me]);return D.createElement(D.Fragment,null,ne.type==="repository"&&D.createElement(D.Fragment,null,D.createElement(t.Z,{paragraph:!0},"The following Pull Request has been opened:"," ",D.createElement(R.rU,{to:ne.pullRequest.url,target:"_blank",rel:"noopener noreferrer"},ne.pullRequest.url)),D.createElement(t.Z,{paragraph:!0},"You can already import the location and ",Ie," will fetch the entities as soon as the Pull Request is merged.")),D.createElement(t.Z,null,wt?"The following locations already exist in the catalog:":"The following entities will be added to the catalog:"),D.createElement(it,{locations:ne.locations,locationListItemIcon:()=>D.createElement(ue.Z,null)}),ut&&D.createElement(B.Z,{error:!0},ut),D.createElement(J.Z,{container:!0,spacing:0},Ce&&D.createElement(ye,{onClick:Ce,disabled:Le}),D.createElement(yt,{disabled:Le,loading:Le,onClick:()=>kt()},wt?"Refresh":"Import")))};function Z(ne,ce){switch(ne){case"single-location":return{...ce,prepare:()=>({stepLabel:D.createElement(qe.Z,{optional:D.createElement(t.Z,{variant:"caption"},"Discovered Locations: 1")},"Select Locations"),content:D.createElement(D.Fragment,null)})};case"multiple-locations":return{...ce,prepare:(Ce,Y)=>Ce.analyzeResult.type!=="locations"?ce.prepare(Ce,Y):{stepLabel:D.createElement(qe.Z,{optional:D.createElement(t.Z,{variant:"caption"},"Discovered Locations: ",Ce.analyzeResult.locations.length)},"Select Locations"),content:D.createElement(X,{analyzeResult:Ce.analyzeResult,prepareResult:Ce.prepareResult,onPrepare:Ce.onPrepare,onGoBack:Ce.onGoBack})}};case"no-location":return{...ce,prepare:(Ce,Y)=>Ce.analyzeResult.type!=="repository"?ce.prepare(Ce,Y):{stepLabel:D.createElement(qe.Z,null,"Create Pull Request"),content:D.createElement(M,{analyzeResult:Ce.analyzeResult,onPrepare:Ce.onPrepare,onGoBack:Ce.onGoBack,renderFormFields:({values:te,setValue:me,formState:Ie,groupsLoading:Le,groups:bt,register:ut})=>D.createElement(D.Fragment,null,D.createElement(Te.Z,{marginTop:2},D.createElement(t.Z,{variant:"h6"},"Pull Request Details")),D.createElement(x.Z,{...pe(ut("title",{required:!0})),label:"Pull Request Title",placeholder:"Add Backstage catalog entity descriptor files",margin:"normal",variant:"outlined",fullWidth:!0,error:Boolean(Ie.errors.title),required:!0}),D.createElement(x.Z,{...pe(ut("body",{required:!0})),label:"Pull Request Body",placeholder:"A describing text with Markdown support",margin:"normal",variant:"outlined",fullWidth:!0,error:Boolean(Ie.errors.body),multiline:!0,required:!0}),D.createElement(Te.Z,{marginTop:2},D.createElement(t.Z,{variant:"h6"},"Entity Configuration")),D.createElement(x.Z,{...pe(ut("componentName",{required:!0})),label:"Name of the created component",placeholder:"my-component",margin:"normal",variant:"outlined",fullWidth:!0,error:Boolean(Ie.errors.componentName),required:!0}),!te.useCodeowners&&D.createElement(Re,{name:"owner",errors:Ie.errors,options:bt||[],loading:Le,loadingText:"Loading groups\u2026",helperText:"Select an owner from the list or enter a reference to a Group or a User",errorHelperText:"required value",textFieldProps:{label:"Entity Owner",placeholder:"my-group"},rules:{required:!0},required:!0}),D.createElement(xe.Z,{control:D.createElement(Pe.Z,{...pe(ut("useCodeowners")),onChange:(Ut,wt)=>{wt&&me("owner","")}}),label:D.createElement(D.Fragment,null,"Use ",D.createElement("em",null,"CODEOWNERS")," file as Entity Owner")}),D.createElement(B.Z,null,"WARNING: This may fail if no CODEOWNERS file is found at the target location."))})}};default:return ce}}const oe={analyze:(ne,{apis:ce})=>({stepLabel:D.createElement(qe.Z,null,"Select URL"),content:D.createElement(ze,{key:"analyze",analysisUrl:ne.analysisUrl,onAnalysis:ne.onAnalysis,disablePullRequest:!ce.catalogImportApi.preparePullRequest})}),prepare:ne=>({stepLabel:D.createElement(qe.Z,{optional:D.createElement(t.Z,{variant:"caption"},"Optional")},"Import Actions"),content:D.createElement(ye,{onClick:ne.onGoBack})}),review:ne=>({stepLabel:D.createElement(qe.Z,null,"Review"),content:D.createElement(j,{prepareResult:ne.prepareResult,onReview:ne.onReview,onGoBack:ne.onGoBack})}),finish:ne=>({stepLabel:D.createElement(qe.Z,null,"Finish"),content:D.createElement(zt,{prepareResult:ne.prepareResult,onReset:ne.onReset})})},se=(0,we.Z)(()=>({stepperRoot:{padding:0}})),Ue=ne=>{const{initialUrl:ce,generateStepper:Ce=Z,variant:Y}=ne,te=(0,n.h_)(Ne),me=se(),Ie=ct({initialUrl:ce}),Le=(0,D.useMemo)(()=>Ce(Ie.activeFlow,oe),[Ce,Ie.activeFlow]),bt=ut=>D.createElement(ke.Z,null,ut.stepLabel,D.createElement(rt.Z,null,ut.content));return D.createElement(R.rJ,{variant:Y},D.createElement(Kt.Z,{classes:{root:me.stepperRoot},activeStep:Ie.activeStepNumber,orientation:"vertical"},bt(Le.analyze(Ie,{apis:{catalogImportApi:te}})),bt(Le.prepare(Ie,{apis:{catalogImportApi:te}})),bt(Le.review(Ie,{apis:{catalogImportApi:te}})),bt(Le.finish(Ie,{apis:{catalogImportApi:te}}))))},lt=()=>{const ne=(0,Nt.Z)(),ce=(0,n.h_)(n.Ds),Ce=(0,rn.Z)(ne.breakpoints.down("sm")),Y=ce.getOptional("app.title")||"Backstage",te=[D.createElement(J.Z,{item:!0,xs:12,md:4,lg:6,xl:8},D.createElement(Bt,null)),D.createElement(J.Z,{item:!0,xs:12,md:8,lg:6,xl:4},D.createElement(Ue,null))];return D.createElement(R.T3,{themeId:"home"},D.createElement(R.h4,{title:"Register an existing component"}),D.createElement(R.VY,null,D.createElement(R.yW,{title:`Start tracking your component in ${Y}`},D.createElement(R.qt,null,"Start tracking your component in ",Y," by adding it to the software catalog.")),D.createElement(J.Z,{container:!0,spacing:2},Ce?te:te.reverse())))}},52963:function(Dt,E,e){"use strict";e.d(E,{N:function(){return R}});var n=e(34520),d=e(78373),p=e(56563),i=e(30705),c=e(18473),m=e(2784);function b(t,U){const w=new Set([...getEntityRelations(t,RELATION_MEMBER_OF,{kind:"group"}),...t?[getCompoundEntityRef(t)]:[]].map(stringifyEntityRef)),N=getEntityRelations(U,RELATION_OWNED_BY).map(stringifyEntityRef);for(const K of N)if(w.has(K))return!0;return!1}function R(t){const{entity:U,loading:w,error:N}=(0,d.a)(),{allowed:K,loading:k,error:H}=(0,p.gI)({permission:t,resourceRef:U?(0,n.eE)(U):void 0});return w||k?{loading:!0,allowed:!1}:N?{loading:!1,allowed:!1,error:N}:{loading:!1,allowed:K,error:H}}},78373:function(Dt,E,e){"use strict";e.d(E,{A:function(){return b},a:function(){return U},g:function(){return c},u:function(){return t}});var n=e(34520),d=e(30705),p=e(18473),i=e(2784);function c(w,N,K){var k;let H=((k=w==null?void 0:w.relations)==null?void 0:k.filter(C=>C.type===N).map(C=>(0,n.of)(C.targetRef)))||[];return K!=null&&K.kind&&(H=H.filter(C=>C.kind.toLocaleLowerCase("en-US")===K.kind.toLocaleLowerCase("en-US"))),H}const m=(0,p.CT)("entity-context"),b=w=>{const{children:N,entity:K,loading:k,error:H,refresh:C}=w,v={entity:K,loading:k,error:H,refresh:C};return i.createElement(m.Provider,{value:(0,p.EI)({1:v})},i.createElement(d.fC,{attributes:{...K?{entityRef:(0,n.eE)(K)}:void 0}},N))},R=w=>React.createElement(b,{entity:w.entity,loading:!Boolean(w.entity),error:void 0,refresh:void 0,children:w.children});function t(){const w=(0,p.Vt)("entity-context");if(!w)throw new Error("Entity context is not available");const N=w.atVersion(1);if(!N)throw new Error("EntityContext v1 not available");if(!N.entity)throw new Error("useEntity hook is being called outside of an EntityLayout where the entity has not been loaded. If this is intentional, please use useAsyncEntity instead.");return{entity:N.entity}}function U(){const w=(0,p.Vt)("entity-context");if(!w)throw new Error("Entity context is not available");const N=w.atVersion(1);if(!N)throw new Error("EntityContext v1 not available");const{entity:K,loading:k,error:H,refresh:C}=N;return{entity:K,loading:k,error:H,refresh:C}}},64304:function(Dt,E,e){"use strict";e.d(E,{h$:function(){return $e.A},n3:function(){return n.n3},_i:function(){return ne},tW:function(){return Dr},df:function(){return Ar},UO:function(){return Wt},ph:function(){return Ia},dq:function(){return Tt},nl:function(){return Ea},dx:function(){return en},rI:function(){return cn},nN:function(){return Qn},u3:function(){return Wn},xE:function(){return cr},sL:function(){return qn},LH:function(){return Zn},U_:function(){return Gr},pp:function(){return Sa},EW:function(){return Aa},Ah:function(){return M},wi:function(){return an},hF:function(){return $e.g},CV:function(){return Y},$3:function(){return mr},p3:function(){return X},ce:function(){return $e.a},X2:function(){return $e.u},wp:function(){return hn},ZW:function(){return Sn},Uh:function(){return gn},eK:function(){return yn},CR:function(){return In}});var n=e(88285),d=e(30705),p=e(82394),i=e(2784),c=e(41156),m=e(60364),b=e(77277),R=e(4190),t=e(95544),U=e(90436),w=e(60905),N=e(21324),K=e(5806),k=e(79692),H=e(86619),C=e(80030),v=e(15223),F=e(42494),g=e(29611),J=e(50581),x=e(61837),B=e(15459),T=e(55999),S=e(49378),ie=e(54506),Te=e(94339),Pe=e(24579),qe=e(38402),xe=e(86136),ke=e(11776),rt=e(8629),Kt=e(79249),Nt=e(38724),rn=e(99152),D=e(6487),we=e(49429),ue=e(85256),Ke=e(12231),$=e(9520),A=e(36444),z=e(80236),ae=e(34520),$e=e(78373),Ge=e(76635),ft=e(19126),nt=e.n(ft),Rt=e(73557),q=e(69294),de=e(48760),Se=e(90736),Ne=e(64279),st=e(18149),pe=e.n(st),Je=e(829),ot=e.n(Je),Qe=e(72164),Et=e(38016),dt=e(88013),Vt=e(99688),jt=e(19996),Ht=e(25505),Ye=e(72779),St=e.n(Ye);function Mt(Q){(0,i.useEffect)(()=>{Q()},[])}function Bt(Q){const re=(0,i.useRef)(Q);return re.current=Q,(0,i.useMemo)(()=>Object.freeze({get current(){return re.current}}),[])}function Ee(Q){const re=Bt(Q);(0,i.useEffect)(()=>()=>{re.current()},[])}function De(Q,re,ve,_e=0){const et=(0,i.useRef)(),ht=(0,i.useRef)(),pt=(0,i.useRef)(),Ot=()=>{et.current&&(clearTimeout(et.current),et.current=void 0),ht.current&&(clearTimeout(ht.current),ht.current=void 0)};return Ee(Ot),(0,i.useMemo)(()=>{const y=()=>{if(!pt.current)return;const u=pt.current;pt.current=void 0,Q.apply(u.this,u.args),Ot()},a=function(...u){et.current&&clearTimeout(et.current),pt.current={args:u,this:this},et.current=setTimeout(y,ve),_e>0&&!ht.current&&(ht.current=setTimeout(y,_e))};return Object.defineProperties(a,{length:{value:Q.length},name:{value:`${Q.name||"anonymous"}__debounced__${ve}`}}),a},[ve,_e,...re])}function ct(Q,re,ve,_e=0){(0,i.useEffect)(De(Q,re,ve,_e),re)}var Ve=e(98685),yt=e(62367),ye=e(72579),mt=e.n(ye),Ct=e(18473),_t=e(33375),it=e(21853),At=e(11640),zt=e(28347),ze=e(39412),Re=e(27685),We=e(3440),je=e.n(We),W=e(10921),_=e(32272),h=e(47603);const M=(0,d.T0)({id:"plugin.catalog.service"}),X=(0,d.T0)({id:"catalog-react.starred-entities"});var j=Object.defineProperty,Z=(Q,re,ve)=>re in Q?j(Q,re,{enumerable:!0,configurable:!0,writable:!0,value:ve}):Q[re]=ve,oe=(Q,re,ve)=>(Z(Q,typeof re!="symbol"?re+"":re,ve),ve);class se{constructor(){oe(this,"starredEntities",new Set),oe(this,"subscribers",new Set),oe(this,"observable",new ObservableImpl(re=>(re.next(new Set(this.starredEntities)),this.subscribers.add(re),()=>{this.subscribers.delete(re)})))}async toggleStarred(re){this.starredEntities.delete(re)||this.starredEntities.add(re);for(const ve of this.subscribers)ve.next(new Set(this.starredEntities))}starredEntitie$(){return this.observable}}const Ue=Q=>{var re,ve;const _e=(0,c.Z)(Ot=>{var y,a;return Ot.breakpoints.down((a=(y=Q.options)==null?void 0:y.drawerBreakpoint)!=null?a:"md")}),et=(0,m.Z)(),[ht,pt]=(0,i.useState)(!1);return _e?i.createElement(i.Fragment,null,i.createElement(b.Z,{style:{marginTop:et.spacing(1),marginLeft:et.spacing(1)},onClick:()=>pt(!0),startIcon:i.createElement(A.Z,null)},"Filters"),i.createElement(R.ZP,{open:ht,onClose:()=>pt(!1),anchor:(ve=(re=Q.options)==null?void 0:re.drawerAnchor)!=null?ve:"left",disableAutoFocus:!0,keepMounted:!0,variant:"temporary"},i.createElement(t.Z,{m:2},i.createElement(U.Z,{variant:"h6",component:"h2",style:{marginBottom:et.spacing(1)}},"Filters"),Q.children))):i.createElement(w.Z,{item:!0,lg:2},Q.children)},lt=Q=>i.createElement(w.Z,{item:!0,xs:12,lg:10},Q.children),ne=Q=>i.createElement(w.Z,{container:!0,style:{position:"relative"}},Q.children);ne.Filters=Ue,ne.Content=lt;function ce(Q){return Q.reduce((re,ve)=>({...re,...ve.getCatalogFilters?ve.getCatalogFilters():{}}),{})}function Ce(Q){return re=>Q.every(ve=>!ve.filterEntity||ve.filterEntity(re))}function Y(Q,re){var ve;const _e=(ve=Q.metadata.annotations)==null?void 0:ve[ae.M6];if(_e)try{const et=(0,ae.Ou)(_e),ht=re.byUrl(et.target);return{locationTargetUrl:et.target,integrationType:ht==null?void 0:ht.type}}catch{return}}var te=Object.defineProperty,me=(Q,re,ve)=>re in Q?te(Q,re,{enumerable:!0,configurable:!0,writable:!0,value:ve}):Q[re]=ve,Ie=(Q,re,ve)=>(me(Q,typeof re!="symbol"?re+"":re,ve),ve);class Le{constructor(re){this.value=re}getCatalogFilters(){return{kind:this.value}}toQueryValue(){return this.value}}class bt{constructor(re){this.value=re}getTypes(){return Array.isArray(this.value)?this.value:[this.value]}getCatalogFilters(){return{"spec.type":this.getTypes()}}toQueryValue(){return this.getTypes()}}class ut{constructor(re){this.values=re}filterEntity(re){return this.values.every(ve=>{var _e;return((_e=re.metadata.tags)!=null?_e:[]).includes(ve)})}toQueryValue(){return this.values}}class Ut{constructor(re){this.value=re}filterEntity(re){const ve=this.toUpperArray(this.value.split(/\s/)),_e=this.toUpperArray([re.metadata.tags]),et=this.toUpperArray([re.metadata.name,re.metadata.title]);for(const ht of ve)if(_e.every(pt=>pt!==ht)&&et.every(pt=>!pt.includes(ht)))return!1;return!0}toUpperArray(re){return re.flat().filter(ve=>Boolean(ve)).map(ve=>ve.toLocaleUpperCase("en-US"))}}class wt{constructor(re){Ie(this,"values"),this.values=re.reduce((ve,_e)=>{try{return ve.push((0,ae.eE)((0,ae.of)(_e,{defaultKind:"Group"}))),ve}catch{return ve}},[])}filterEntity(re){return this.values.some(ve=>(0,$e.g)(re,ae.S4).some(_e=>(0,ae.eE)(_e)===ve))}toQueryValue(){return this.values}}class kt{constructor(re){this.values=re}filterEntity(re){return this.values.some(ve=>{var _e;return((_e=re.spec)==null?void 0:_e.lifecycle)===ve})}toQueryValue(){return this.values}}class Qt{constructor(re){this.values=re}filterEntity(re){return this.values.some(ve=>re.metadata.namespace===ve)}toQueryValue(){return this.values}}class un{constructor(re,ve,_e){this.value=re,this.isOwnedEntity=ve,this.isStarredEntity=_e}filterEntity(re){switch(this.value){case"owned":return this.isOwnedEntity(re);case"starred":return this.isStarredEntity(re);default:return!0}}toQueryValue(){return this.value}}class ln{constructor(re){this.value=re}filterEntity(re){var ve;const _e=(ve=re.metadata.annotations)==null?void 0:ve["backstage.io/orphan"];return _e!==void 0&&this.value.toString()===_e}}class tn{constructor(re){this.value=re}filterEntity(re){var ve,_e;const et=((_e=(ve=re==null?void 0:re.status)==null?void 0:ve.items)==null?void 0:_e.length)>0;return et!==void 0&&this.value===et}}const Zt=(0,i.createContext)(void 0),Wt=Q=>{const re=(0,Se.default)(),ve=(0,d.h_)(M),[_e,et]=(0,i.useState)({}),ht=(0,Rt.TH)(),pt=(0,i.useMemo)(()=>{var Fe;return(Fe=nt().parse(ht.search,{ignoreQueryPrefix:!0}).filters)!=null?Fe:{}},[ht]),[Ot,y]=(0,i.useState)(()=>({appliedFilters:{},entities:[],backendEntities:[]})),[{loading:a,error:u},O]=(0,q.default)(async()=>{var Fe;const Ze=(0,Ge.compact)(Object.values(_e)),Pt=Ce(Ze),xt=ce(Ze),pn=ce((0,Ge.compact)(Object.values(Ot.appliedFilters))),Xt=Object.keys(_e).reduce((Yt,fn)=>{const vn=_e[fn];return vn!=null&&vn.toQueryValue&&(Yt[fn]=vn.toQueryValue()),Yt},{});if((0,Ge.isEqual)(pn,xt))y({appliedFilters:_e,backendEntities:Ot.backendEntities,entities:Ot.backendEntities.filter(Pt)});else{const Yt=await ve.getEntities({filter:xt});y({appliedFilters:_e,backendEntities:Yt.items,entities:Yt.items.filter(Pt)})}if(re()){const Yt=nt().parse(ht.search,{ignoreQueryPrefix:!0}),fn=nt().stringify({...Yt,filters:Xt},{addQueryPrefix:!0,arrayFormat:"repeat"}),vn=`${window.location.pathname}${fn}`;(Fe=window.history)==null||Fe.replaceState(null,document.title,vn)}},[ve,pt,_e,Ot],{loading:!0});(0,de.Z)(O,10,[_e]);const V=(0,i.useCallback)(Fe=>{et(Ze=>{const Pt=typeof Fe=="function"?Fe(Ze):Fe;return{...Ze,...Pt}})},[]),Oe=(0,i.useMemo)(()=>({filters:Ot.appliedFilters,entities:Ot.entities,backendEntities:Ot.backendEntities,updateFilters:V,queryParameters:pt,loading:a,error:u}),[Ot,V,pt,a,u]);return i.createElement(Zt.Provider,{value:Oe},Q.children)};function hn(){const Q=(0,i.useContext)(Zt);if(!Q)throw new Error("useEntityList must be used within EntityListProvider");return Q}function gn(){var Q;const re=(0,d.h_)(M),{filters:{kind:ve,type:_e},queryParameters:{type:et},updateFilters:ht}=hn(),pt=(0,i.useMemo)(()=>[et].flat().filter(Boolean),[et]),[Ot,y]=(0,i.useState)(pt.length?pt:(Q=_e==null?void 0:_e.getTypes())!=null?Q:[]);(0,i.useEffect)(()=>{pt.length&&y(pt)},[pt]);const[a,u]=(0,i.useState)([]),O=(0,i.useMemo)(()=>ve==null?void 0:ve.value,[ve]),{error:V,loading:Oe,value:Fe}=(0,Ne.default)(async()=>O?await re.getEntityFacets({filter:{kind:O},facets:["spec.type"]}).then(xt=>xt.facets["spec.type"]||[]):[],[O,re]),Ze=(0,i.useRef)(Fe);return(0,i.useEffect)(()=>{const Pt=Ze.current;if(Ze.current=Fe,Oe||!O||Pt===Fe||!Fe)return;const xt=[...new Set(ot()(Fe,Xt=>-Xt.count).map(Xt=>Xt.value.toLocaleLowerCase("en-US")))];u(xt);const pn=Ot.filter(Xt=>xt.includes(Xt));pe()(Ot,pn)||y(pn)},[Oe,O,Ot,y,Fe]),(0,i.useEffect)(()=>{ht({type:Ot.length?new bt(Ot):void 0})},[Ot,ht]),{loading:Oe,error:V,availableTypes:a,selectedTypes:Ot,setSelectedTypes:y}}function yn(Q,re){var ve,_e;const et=(ve=re==null?void 0:re.type)==null?void 0:ve.toLocaleLowerCase("en-US"),ht=(_e=re==null?void 0:re.kind)==null?void 0:_e.toLocaleLowerCase("en-US"),pt=(0,d.h_)(M),{loading:Ot,value:y,error:a}=(0,Ne.default)(async()=>{var u;const O=(u=Q.relations)==null?void 0:u.filter(Oe=>(!et||Oe.type.toLocaleLowerCase("en-US")===et)&&(!ht||(0,ae.of)(Oe.targetRef).kind===ht));if(!(O!=null&&O.length))return[];const{items:V}=await pt.getEntitiesByRefs({entityRefs:O.map(Oe=>Oe.targetRef)});return V.filter(Oe=>Boolean(Oe))},[Q,et,ht]);return{entities:y,loading:Ot,error:a}}function bn(Q){return typeof Q=="string"?Q:(0,ae.eE)(Q)}function In(){const Q=(0,d.h_)(X),re=(0,Qe.Z)(Q.starredEntitie$(),new Set),ve=(0,i.useCallback)(et=>re.has(bn(et)),[re]),_e=(0,i.useCallback)(et=>Q.toggleStarred(bn(et)).then(),[Q]);return{starredEntities:re,toggleStarredEntity:_e,isStarredEntity:ve}}function An(Q){return typeof Q=="string"?Q:(0,ae.eE)(Q)}function On(Q){const re=(0,d.h_)(X),[ve,_e]=(0,i.useState)(!1);return(0,i.useEffect)(()=>{const ht=re.starredEntitie$().subscribe({next(pt){_e(pt.has(An(Q)))}});return()=>{ht.unsubscribe()}},[Q,re]),{toggleStarredEntity:(0,i.useCallback)(()=>re.toggleStarred(An(Q)).then(),[Q,re]),isStarredEntity:ve}}function Sn(){const Q=(0,d.h_)(d.$4),{loading:re,value:ve}=(0,Ne.default)(async()=>{const{ownershipEntityRefs:et}=await Q.getBackstageIdentity();return et},[]),_e=(0,i.useMemo)(()=>{const et=new Set(ve!=null?ve:[]);return ht=>{const pt=(0,$e.g)(ht,ae.S4).map(ae.eE);for(const Ot of pt)if(et.has(Ot))return!0;return!1}},[ve]);return(0,i.useMemo)(()=>({loading:re,isOwnedEntity:_e}),[re,_e])}function Dn(){const Q=(0,d.h_)(M),{error:re,loading:ve,value:_e}=(0,Ne.default)(async()=>await Q.getEntityFacets({facets:["kind"]}).then(ht=>{var pt;return((pt=ht.facets.kind)==null?void 0:pt.map(Ot=>Ot.value).sort())||[]}),[Q]);return{loading:ve,error:re,allKinds:_e!=null?_e:[]}}function sr(Q,re,ve){let _e=Q;return re&&(_e=_e.filter(ht=>re.some(pt=>pt.toLocaleLowerCase("en-US")===ht.toLocaleLowerCase("en-US")))),ve&&!Q.some(ht=>ht.toLocaleLowerCase("en-US")===ve.toLocaleLowerCase("en-US"))&&(_e=_e.concat([ve])),_e.sort().reduce((ht,pt)=>(ht[pt.toLocaleLowerCase("en-US")]=pt,ht),{})}function zn(Q){var re,ve;const{filters:_e,queryParameters:{kind:et},updateFilters:ht}=hn(),pt=(0,i.useMemo)(()=>[et].flat()[0],[et]),[Ot,y]=(0,i.useState)((ve=pt!=null?pt:(re=_e.kind)==null?void 0:re.value)!=null?ve:Q.initialFilter);(0,i.useEffect)(()=>{pt&&y(pt)},[pt]),(0,i.useEffect)(()=>{var V,Oe;(V=_e.kind)!=null&&V.value&&y((Oe=_e.kind)==null?void 0:Oe.value)},[_e.kind]),(0,i.useEffect)(()=>{ht({kind:Ot?new Le(Ot):void 0})},[Ot,ht]);const{allKinds:a,loading:u,error:O}=Dn();return{loading:u,error:O,allKinds:a!=null?a:[],selectedKind:Ot,setSelectedKind:y}}const Dr=Q=>{const{allowedKinds:re,hidden:ve,initialFilter:_e="component"}=Q,et=(0,d.h_)(d.$v),{error:ht,allKinds:pt,selectedKind:Ot,setSelectedKind:y}=zn({initialFilter:_e});if((0,i.useEffect)(()=>{ht&&et.post({message:"Failed to load entity kinds",severity:"error"})},[ht,et]),ht)return null;const a=sr(pt,re,Ot),u=Object.keys(a).map(O=>({value:O,label:a[O]}));return ve?null:i.createElement(t.Z,{pb:1,pt:1},i.createElement(z.Ph,{label:"Kind",items:u,selected:Ot.toLocaleLowerCase("en-US"),onChange:O=>y(String(O))}))},Vr=i.createElement(Ht.Z,{fontSize:"small"}),Zr=i.createElement(jt.Z,{fontSize:"small"});function lr({selected:Q}){return i.createElement(N.Z,{icon:Vr,checkedIcon:Zr,checked:Q})}const Wr=(0,i.memo)(Q=>{const{selected:re,value:ve,availableOptions:_e,showCounts:et}=Q,ht=et?`${ve} (${_e==null?void 0:_e[ve]})`:ve;return i.createElement(K.Z,{control:i.createElement(lr,{selected:re}),label:ht,onClick:pt=>pt.preventDefault()})}),jn=(0,k.Z)({input:{}},{name:"CatalogReactEntityAutocompletePickerInput"});function $r(Q){const re=jn();return i.createElement(H.Z,{variant:"outlined",...Q,className:St()(re.input,Q.className)})}function _r(Q){var re,ve;const{label:_e,name:et,path:ht,showCounts:pt,Filter:Ot,InputProps:y,initialSelectedOptions:a=[]}=Q,{updateFilters:u,filters:O,queryParameters:{[et]:V}}=hn(),Oe=(0,d.h_)(M),{value:Fe}=(0,Ne.default)(async()=>{var fn;const vn=ht,{facets:Yn}=await Oe.getEntityFacets({facets:[vn],filter:(fn=O.kind)==null?void 0:fn.getCatalogFilters()});return Object.fromEntries(Yn[vn].map(({value:Nn,count:Xn})=>[Nn,Xn]))},[O.kind]),Ze=(0,i.useMemo)(()=>[V].flat().filter(Boolean),[V]),[Pt,xt]=(0,i.useState)(Ze.length?Ze:(ve=(re=O[et])==null?void 0:re.values)!=null?ve:a);(0,i.useEffect)(()=>{Ze.length&&xt(Ze)},[Ze]);const pn=Object.keys(Fe!=null?Fe:{}),Xt=Pt.length&&pn.length;(0,i.useEffect)(()=>{u({[et]:Xt?new Ot(Pt):void 0})},[et,Xt,Pt,Ot,u]);const Yt=O[et];return Yt&&typeof Yt=="object"&&!("values"in Yt)||!pn.length||pn.length<=1?null:i.createElement(t.Z,{pb:1,pt:1},i.createElement(U.Z,{variant:"button",component:"label"},_e,i.createElement(dt.ZP,{multiple:!0,disableCloseOnSelect:!0,options:pn,value:Pt,onChange:(fn,vn)=>xt(vn),renderOption:(fn,{selected:vn})=>i.createElement(Wr,{selected:vn,value:fn,availableOptions:Fe,showCounts:!!pt}),size:"small",popupIcon:i.createElement(Et.Z,{"data-testid":`${String(et)}-picker-expand`}),renderInput:fn=>i.createElement($r,{...fn,...y})})))}const Lr=(0,k.Z)({input:{}},{name:"CatalogReactEntityLifecyclePicker"}),Ar=Q=>{const{initialFilter:re=[]}=Q,ve=Lr();return i.createElement(_r,{label:"Lifecycle",name:"lifecycles",path:"spec.lifecycle",Filter:kt,InputProps:{className:ve.input},initialSelectedOptions:re})};function mr(Q,re){const ve=re==null?void 0:re.defaultKind;let _e,et,ht;return"metadata"in Q?(_e=Q.kind,et=Q.metadata.namespace,ht=Q.metadata.name):(_e=Q.kind,et=Q.namespace,ht=Q.name),(et===void 0||et==="")&&(et=ae.zG),(re==null?void 0:re.defaultNamespace)!==void 0?(re==null?void 0:re.defaultNamespace)===et&&(et=void 0):et===ae.zG&&(et=void 0),_e=_e.toLocaleLowerCase("en-US"),_e=ve&&ve.toLocaleLowerCase("en-US")===_e?void 0:_e,`${_e?`${_e}:`:""}${et?`${et}/`:""}${ht}`}function Br(Q,re){for(const ve of["spec.profile.displayName","metadata.title"]){const _e=mt()(Q,ve);if(_e&&typeof _e=="string")return _e}return re}function br({enabled:Q}){const re=(0,d.h_)(M),[ve]=(0,i.useState)(async()=>{if(!Q)return[];const _e="relations.ownedBy";return re.getEntityFacets({facets:[_e]}).then(et=>et.facets[_e].map(ht=>ht.value).map(ht=>{const{kind:pt,name:Ot,namespace:y}=(0,ae.of)(ht);return{apiVersion:"backstage.io/v1beta1",kind:pt,metadata:{name:Ot,namespace:y}}}).sort((ht,pt)=>(ht.metadata.namespace||"").localeCompare(pt.metadata.namespace||"","en-US")||ht.metadata.name.localeCompare(pt.metadata.name,"en-US")||ht.kind.localeCompare(pt.kind,"en-US"))).catch(()=>[])});return(0,q.default)(async(_e,et)=>{var ht;const pt=await ve;if(!pt)return{items:[]};const Ot=(ht=et==null?void 0:et.limit)!=null?ht:20,{text:y,start:a}=Pr(_e),u=pt.filter(V=>Mr(y,V)),O=a+Ot;return{items:u.slice(0,O),...wr({entities:u,limit:O,payload:{text:y,start:O}})}},[ve],{loading:!0,value:{items:[]}})}function Pr(Q){return Fn(Q)&&Q.cursor?JSON.parse(atob(Q.cursor)):{text:Q.text||"",start:0}}function Fn(Q){return!!Q.cursor}function wr({entities:Q,limit:re,payload:ve}){return Q.length>re?{cursor:btoa(JSON.stringify(ve))}:{}}function Mr(Q,re){var ve;const _e=Q.trim();return re.kind.includes(_e)||((ve=re.metadata.namespace)==null?void 0:ve.includes(_e))||re.metadata.name.includes(_e)}function Fr(){const Q=(0,d.h_)(M);return(0,q.default)(async(re,ve)=>{var _e;const et=re,ht=re,pt=(_e=ve==null?void 0:ve.limit)!=null?_e:20;if(ht.cursor){const y=await Q.queryEntities({cursor:ht.cursor,limit:pt});return{cursor:y.pageInfo.nextCursor,items:[...ht.items,...y.items]}}const Ot=await Q.queryEntities({fullTextFilter:{term:et.text||"",fields:["metadata.name","kind","spec.profile.displayname","metadata.title"]},filter:{kind:["User","Group"]},orderFields:[{field:"metadata.name",order:"asc"}],limit:pt});return{cursor:Ot.pageInfo.nextCursor,items:Ot.items}},[],{loading:!0})}function Ur({mode:Q,initialSelectedOwnersRefs:re}){const ve=Q==="owners-only",_e=Fr(),et=br({enabled:ve}),[ht,pt]=ve?et:_e;return[ht,pt,xr({enabled:!ve,initialSelectedOwnersRefs:re})]}function xr({enabled:Q,initialSelectedOwnersRefs:re}){const ve=(0,i.useRef)({}),_e=(0,d.h_)(M),[,et]=(0,q.default)(async()=>{(await _e.getEntitiesByRefs({entityRefs:re})).items.forEach(pt=>{pt&&(ve.current[(0,ae.eE)(pt)]=pt)})},[]);return Mt(()=>{Q&&re.length>0&&et()}),{getEntity:ht=>ve.current[ht],setEntity:ht=>{ve.current[(0,ae.eE)(ht)]=ht}}}const be=(0,k.Z)({input:{}},{name:"CatalogReactEntityOwnerPicker"}),at=i.createElement(Ht.Z,{fontSize:"small"}),vt=i.createElement(jt.Z,{fontSize:"small"}),Tt=Q=>{var re,ve,_e;const et=be(),{mode:ht="owners-only"}=Q||{},{updateFilters:pt,filters:Ot,queryParameters:{owners:y}}=hn(),[a,u]=(0,i.useState)(""),O=(0,i.useMemo)(()=>[y].flat().filter(Boolean),[y]),[V,Oe]=(0,i.useState)(O.length?O:(ve=(re=Ot.owners)==null?void 0:re.values)!=null?ve:[]),[{value:Fe,loading:Ze},Pt,xt]=Ur({mode:ht,initialSelectedOwnersRefs:V});ct(()=>Pt({text:a}),[a,Pt],250);const pn=(Fe==null?void 0:Fe.items)||[];return(0,i.useEffect)(()=>{if(O.length){const Xt=new wt(O);Oe(Xt.values)}},[O]),(0,i.useEffect)(()=>{pt({owners:V.length?new wt(V):void 0})},[V,pt]),["user","group"].includes(((_e=Ot.kind)==null?void 0:_e.value.toLocaleLowerCase("en-US"))||"")?null:i.createElement(t.Z,{pb:1,pt:1},i.createElement(U.Z,{variant:"button",component:"label"},"Owner",i.createElement(dt.ZP,{multiple:!0,disableCloseOnSelect:!0,loading:Ze,options:pn,value:V,getOptionSelected:(Xt,Yt)=>typeof Yt=="string"?(0,ae.eE)(Xt)===Yt:Xt===Yt,getOptionLabel:Xt=>{const Yt=typeof Xt=="string"?xt.getEntity(Xt)||(0,ae.of)(Xt,{defaultKind:"group",defaultNamespace:"default"}):Xt;return Br(Yt,mr(Yt))},onChange:(Xt,Yt)=>{u(""),Oe(Yt.map(fn=>{const vn=typeof fn=="string"?fn:(0,ae.eE)(fn);return typeof fn!="string"&&xt.setEntity(fn),vn}))},filterOptions:Xt=>Xt,renderOption:(Xt,{selected:Yt})=>{const fn=Xt.kind.toLocaleLowerCase("en-US")==="group";return i.createElement(K.Z,{control:i.createElement(N.Z,{icon:at,checkedIcon:vt,checked:Yt}),onClick:vn=>vn.preventDefault(),label:i.createElement(t.Z,{display:"flex",flexWrap:"wrap",alignItems:"center"},fn?i.createElement(yt.Z,{fontSize:"small"}):i.createElement(Ve.Z,{fontSize:"small"}),"\xA0",Br(Xt,mr(Xt,{defaultKind:Xt.kind})))})},size:"small",popupIcon:i.createElement(Et.Z,{"data-testid":"owner-picker-expand"}),renderInput:Xt=>i.createElement(H.Z,{...Xt,className:et.input,onChange:Yt=>{u(Yt.currentTarget.value)},variant:"outlined"}),ListboxProps:{onScroll:Xt=>{const Yt=Xt.currentTarget;Math.abs(Yt.scrollHeight-Yt.clientHeight-Yt.scrollTop)<1&&(Fe!=null&&Fe.cursor)&&Pt({items:Fe.items,cursor:Fe.cursor})},"data-testid":"owner-picker-listbox"}})))},an=(0,Ct.uW)("catalog:entity-route-ref",()=>(0,d.NT)({id:"catalog:entity",params:["namespace","kind","name"]}));function Jt(Q){var re,ve;return{kind:Q.kind.toLocaleLowerCase("en-US"),namespace:(ve=(re=Q.metadata.namespace)==null?void 0:re.toLocaleLowerCase("en-US"))!=null?ve:DEFAULT_NAMESPACE,name:Q.metadata.name}}const en=(0,i.forwardRef)((Q,re)=>{var ve;const{entityRef:_e,defaultKind:et,title:ht,children:pt,...Ot}=Q,y=(0,d.tg)(an);let a,u,O;if(typeof _e=="string"){const Ze=(0,ae.of)(_e);a=Ze.kind,u=Ze.namespace,O=Ze.name}else"metadata"in _e?(a=_e.kind,u=_e.metadata.namespace,O=_e.metadata.name):(a=_e.kind,u=_e.namespace,O=_e.name);a=a.toLocaleLowerCase("en-US"),u=(ve=u==null?void 0:u.toLocaleLowerCase("en-US"))!=null?ve:ae.zG;const V={kind:a,namespace:u,name:O},Oe=mr({kind:a,namespace:u,name:O},{defaultKind:et}),Fe=i.createElement(z.rU,{...Ot,ref:re,to:y(V)},pt,!pt&&(ht!=null?ht:Oe));return ht?i.createElement(C.ZP,{title:Oe},Fe):Fe});function En(Q){const{entityRefs:re,defaultKind:ve,getTitle:_e,...et}=Q,ht=(0,d.h_)(M),{value:pt=new Array,loading:Ot,error:y}=(0,Ne.default)(async()=>{const a=re.reduce((O,V)=>typeof V=="object"&&"metadata"in V?O:[...O,(0,ae.of)(V)],new Array),u=re.filter(O=>typeof O=="object"&&"metadata"in O);return a.length>0?[...(await ht.getEntities({filter:a.map(O=>({kind:O.kind,"metadata.namespace":O.namespace,"metadata.name":O.name}))})).items,...u]:u},[re]);return Ot?i.createElement(z.Ex,null):y?i.createElement(z.yu,{error:y}):i.createElement(i.Fragment,null,pt.map((a,u)=>i.createElement(i.Fragment,{key:u},u>0&&", ",i.createElement(en,{...et,defaultKind:ve,entityRef:a,title:_e(a)}))))}function cn(Q){const{entityRefs:re,defaultKind:ve,fetchEntities:_e,getTitle:et,...ht}=Q;return _e?i.createElement(En,{...ht,defaultKind:ve,entityRefs:re,getTitle:et}):i.createElement(i.Fragment,null,re.map((pt,Ot)=>i.createElement(i.Fragment,{key:Ot},Ot>0&&", ",i.createElement(en,{...ht,defaultKind:ve,entityRef:pt,title:et?et(pt):void 0}))))}const sn=Q=>{const re=useRouteRef(an);return React.createElement(IconButton,{component:Link,"aria-label":"Show",title:"Show details",to:re(getCompoundEntityRef(Q.entity))},React.createElement(InfoIcon,null))},Rn=Q=>React.createElement(IconButton,{component:Link,"aria-label":"Email",title:`Email ${Q.email}`,to:`mailto:${Q.email}`},React.createElement(EmailIcon,null)),_n=Q=>{var re;const ve=(re=Q.entity.spec.profile)==null?void 0:re.email;return ve?React.createElement(Rn,{email:ve}):null},Ln=Q=>{var re;const ve=(re=Q.entity.spec.profile)==null?void 0:re.email;return ve?React.createElement(Rn,{email:ve}):null},Cn=(0,k.Z)(()=>({popoverPaper:{width:"30em"},descriptionTypography:{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"}})),Un=4,Mn=Q=>{var re,ve,_e;const{entityRef:et,children:ht,delayTime:pt=500}=Q,Ot=Cn(),y=useApiHolder(),a=usePopupState({variant:"popover",popupId:"entity-peek-ahead"}),[u,O]=useState(!1),V=useMemo(()=>debounce(()=>O(!0),pt),[pt]),[{loading:Oe,error:Fe,value:Ze},Pt]=useAsyncFn(async()=>{const pn=y.get(M);if(pn){const Xt=await pn.getEntityByRef(et);if(!Xt)throw new Error(`${et} not found`);return Xt}},[y,et]),xt=()=>{O(!1),V.cancel()};return useEffect(()=>{a.isOpen&&!Ze&&!Fe&&!Oe&&Pt()},[a.isOpen,Pt,Ze,Fe,Oe]),React.createElement(React.Fragment,null,React.createElement(Typography,{component:"span",onMouseEnter:V},React.createElement(Typography,{component:"span","data-testid":"trigger",...bindHover(a)},ht)),u&&React.createElement(HoverPopover,{PaperProps:{className:Ot.popoverPaper},...bindPopover(a),anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},onMouseLeave:xt},React.createElement(Card,null,React.createElement(CardContent,null,Fe&&React.createElement(ResponseErrorPanel,{error:Fe}),Oe&&React.createElement(Progress,null),Ze&&React.createElement(React.Fragment,null,React.createElement(Typography,{color:"textSecondary"},Ze.metadata.namespace),React.createElement(Typography,{variant:"h5",component:"div"},Ze.metadata.name),React.createElement(Typography,{color:"textSecondary",gutterBottom:!0},Ze.kind),Ze.metadata.description&&React.createElement(Typography,{className:Ot.descriptionTypography,paragraph:!0},Ze.metadata.description),React.createElement(Typography,null,(re=Ze.spec)==null?void 0:re.type),React.createElement(Box,{marginTop:"0.5em"},(Ze.metadata.tags||[]).slice(0,Un).map(pn=>React.createElement(Chip,{key:pn,size:"small",label:pn})),((ve=Ze.metadata.tags)==null?void 0:ve.length)&&((_e=Ze.metadata.tags)==null?void 0:_e.length)>Un&&React.createElement(Tooltip,{title:"Drill into the entity to see all of the tags."},React.createElement(Chip,{key:"other-tags",size:"small",label:"..."}))))),!Fe&&Ze&&React.createElement(CardActions,null,React.createElement(React.Fragment,null,isUserEntity(Ze)&&React.createElement(Ln,{entity:Ze}),isGroupEntity(Ze)&&React.createElement(_n,{entity:Ze}),React.createElement(sn,{entity:Ze}))))))},Bn=(0,k.Z)(Q=>({searchToolbar:{paddingLeft:0,paddingRight:0},input:{}}),{name:"CatalogReactEntitySearchBar"}),Qn=()=>{var Q,re;const ve=Bn(),{filters:_e,updateFilters:et}=hn(),[ht,pt]=(0,i.useState)((re=(Q=_e.text)==null?void 0:Q.value)!=null?re:"");return(0,de.Z)(()=>{et({text:ht.length?new Ut(ht):void 0})},250,[ht,et]),i.createElement(v.Z,{className:ve.searchToolbar},i.createElement(F.Z,null,i.createElement(g.Z,{"aria-label":"search",id:"input-with-icon-adornment",className:ve.input,placeholder:"Search",autoComplete:"off",onChange:Ot=>pt(Ot.target.value),value:ht,startAdornment:i.createElement(J.Z,{position:"start"},i.createElement(it.Z,null)),endAdornment:i.createElement(J.Z,{position:"end"},i.createElement(x.Z,{"aria-label":"clear search",onClick:()=>pt(""),edge:"end",disabled:ht.length===0},i.createElement(_t.Z,null)))})))},xn=Object.freeze({createEntityRefColumn(Q){const{defaultKind:re}=Q;function ve(_e){var et;return((et=_e.metadata)==null?void 0:et.title)||mr(_e,{defaultKind:re})}return{title:"Name",highlight:!0,customFilterAndSearch(_e,et){return ve(et).includes(_e)},customSort(_e,et){return ve(_e).localeCompare(ve(et))},render:_e=>{var et;return i.createElement(en,{entityRef:_e,defaultKind:re,title:(et=_e.metadata)==null?void 0:et.title})}}},createEntityRelationColumn(Q){const{title:re,relation:ve,defaultKind:_e,filter:et}=Q;function ht(Ot){return(0,$e.g)(Ot,ve,et)}function pt(Ot){return ht(Ot).map(y=>mr(y,{defaultKind:_e})).join(", ")}return{title:re,customFilterAndSearch(Ot,y){return pt(y).includes(Ot)},customSort(Ot,y){return pt(Ot).localeCompare(pt(y))},render:Ot=>i.createElement(cn,{entityRefs:ht(Ot),defaultKind:_e})}},createOwnerColumn(){return this.createEntityRelationColumn({title:"Owner",relation:ae.S4,defaultKind:"group"})},createDomainColumn(){return this.createEntityRelationColumn({title:"Domain",relation:ae.cz,defaultKind:"domain",filter:{kind:"domain"}})},createSystemColumn(){return this.createEntityRelationColumn({title:"System",relation:ae.cz,defaultKind:"system",filter:{kind:"system"}})},createMetadataDescriptionColumn(){return{title:"Description",field:"metadata.description",render:Q=>i.createElement(z.Or,{text:Q.metadata.description,placement:"bottom-start",line:2})}},createSpecLifecycleColumn(){return{title:"Lifecycle",field:"spec.lifecycle"}},createSpecTypeColumn(){return{title:"Type",field:"spec.type"}}}),rr=[xn.createEntityRefColumn({defaultKind:"system"}),xn.createDomainColumn(),xn.createOwnerColumn(),xn.createMetadataDescriptionColumn()],Vn=[xn.createEntityRefColumn({defaultKind:"component"}),xn.createSystemColumn(),xn.createOwnerColumn(),xn.createSpecTypeColumn(),xn.createSpecLifecycleColumn(),xn.createMetadataDescriptionColumn()],Gn=(0,k.Z)(Q=>({empty:{padding:Q.spacing(2),display:"flex",justifyContent:"center"}})),Wn=Q=>{const{entities:re,title:ve,emptyContent:_e,variant:et="gridItem",columns:ht,tableOptions:pt={}}=Q,Ot=Gn(),y={minWidth:"0",width:"100%"};return et==="gridItem"&&(y.height="calc(100% - 10px)"),i.createElement(z.iA,{columns:ht,title:ve,style:y,emptyContent:_e&&i.createElement("div",{className:Ot.empty},_e),options:{search:!1,paging:!1,actionsColumnIndex:-1,padding:"dense",draggable:!1,...pt},data:re})};Wn.columns=xn,Wn.systemEntityColumns=rr,Wn.componentEntityColumns=Vn;const Hn=(0,k.Z)({input:{}},{name:"CatalogReactEntityTagPicker"}),cr=Q=>{const re=Hn();return i.createElement(_r,{label:"Tags",name:"tags",path:"metadata.tags",Filter:ut,showCounts:Q.showCounts,InputProps:{className:re.input}})},qn=Q=>{var re;const{hidden:ve,initialFilter:_e}=Q,et=(0,d.h_)(d.$v),{error:ht,availableTypes:pt,selectedTypes:Ot,setSelectedTypes:y}=gn();if((0,i.useEffect)(()=>{ht&&et.post({message:"Failed to load entity types",severity:"error"}),_e&&y([_e])},[ht,et,_e,y]),pt.length===0||ht)return null;const a=[{value:"all",label:"all"},...pt.map(u=>({value:u,label:u}))];return ve?null:i.createElement(t.Z,{pb:1,pt:1},i.createElement(z.Ph,{label:"Type",items:a,selected:(re=a.length>1?Ot[0]:void 0)!=null?re:"all",onChange:u=>y(u==="all"?[]:[String(u)])}))},Or=(0,B.Z)({root:{color:"#f3ba37"}})(At.Z),Zn=Q=>{const{toggleStarredEntity:re,isStarredEntity:ve}=On(Q.entity);return i.createElement(x.Z,{"aria-label":"favorite",color:"inherit",...Q,onClick:()=>re()},i.createElement(C.ZP,{title:ve?"Remove from favorites":"Add to favorites"},ve?i.createElement(Or,null):i.createElement(zt.Z,null)))},Xe=ze.Z;function ge(Q,re){if(Q)return Q.toLocaleLowerCase("en-US");if(re)try{return(0,ae.of)(re).kind.toLocaleLowerCase("en-US")}catch{return}}function gt(Q,re){const ve=(0,d.qD)(),_e=ge(Q,re);return _e&&ve.getSystemIcon(`kind:${_e}`)||Xe}function l(Q){const{kind:re,entityRef:ve,..._e}=Q,et=gt(re,ve);return i.createElement(et,{..._e})}const o=(0,k.Z)(Q=>({node:{fill:Q.palette.grey[300],stroke:Q.palette.grey[300],"&.primary":{fill:Q.palette.primary.light,stroke:Q.palette.primary.light},"&.secondary":{fill:Q.palette.secondary.light,stroke:Q.palette.secondary.light}},text:{fill:Q.palette.getContrastText(Q.palette.grey[300]),"&.primary":{fill:Q.palette.primary.contrastText},"&.secondary":{fill:Q.palette.secondary.contrastText},"&.focused":{fontWeight:"bold"}},clickable:{cursor:"pointer"}}));function f(Q){const re=(0,d.h_)(M),ve=(0,ae.eE)(Q),{loading:_e,error:et,value:ht}=(0,Ne.default)(async()=>{const pt=await re.getEntityAncestors({entityRef:ve}),Ot=new Array,y=new Array;for(const a of pt.items){const u=(0,ae.eE)(a.entity),O=u===pt.rootEntityRef;Ot.push({id:u,root:O,...a.entity});for(const V of a.parentEntityRefs)y.push({from:u,to:V})}return{nodes:Ot,edges:y}},[ve]);return{loading:_e,error:et,nodes:(ht==null?void 0:ht.nodes)||[],edges:(ht==null?void 0:ht.edges)||[]}}function I({node:Q}){const re=o(),ve=(0,Rt.s0)(),_e=(0,d.tg)(an),[et,ht]=(0,i.useState)(0),[pt,Ot]=(0,i.useState)(0),y=(0,i.useRef)(null);(0,i.useLayoutEffect)(()=>{if(y.current){let{height:Pt,width:xt}=y.current.getBBox();Pt=Math.round(Pt),xt=Math.round(xt),(Pt!==pt||xt!==et)&&(ht(xt),Ot(Pt))}},[et,pt]);const a=10,u=pt,O=u+a,V=O+et+a*2,Oe=pt+a*2,Fe=Q.metadata.title||(Q.kind&&Q.metadata.name&&Q.metadata.namespace?mr({kind:Q.kind,name:Q.metadata.name,namespace:Q.metadata.namespace||""}):Q.id),Ze=()=>{ve(_e({kind:Q.kind,namespace:Q.metadata.namespace||ae.zG,name:Q.metadata.name}))};return i.createElement("g",{onClick:Ze,className:re.clickable},i.createElement("rect",{className:St()(re.node,Q.root?"secondary":"primary"),width:V,height:Oe,rx:10}),i.createElement(l,{kind:Q.kind,y:a,x:a,width:u,height:u,className:St()(re.text,Q.root?"secondary":"primary")}),i.createElement("text",{ref:y,className:St()(re.text,Q.root?"secondary":"primary"),y:Oe/2,x:O+(et+a*2)/2,textAnchor:"middle",alignmentBaseline:"middle"},Fe))}function ee(Q){const{loading:re,error:ve,nodes:_e,edges:et}=f(Q.entity);return re?i.createElement(z.Ex,null):ve?i.createElement(z.Gk,{error:ve}):i.createElement(i.Fragment,null,i.createElement(T.Z,{variant:"h2"},"Ancestry"),i.createElement(T.Z,{gutterBottom:!0},"This is the ancestry of entities above the current one - as in, the chain(s) of entities down to the current one, where"," ",i.createElement(z.rU,{to:"https://backstage.io/docs/features/software-catalog/life-of-an-entity"},"processors emitted")," ","child entities that ultimately led to the current one existing. Note that this is a completely different mechanism from relations."),i.createElement(t.Z,{mt:4},i.createElement(z.mn,{nodes:_e,edges:et,renderNode:I,direction:z.NX.Direction.BOTTOM_TOP,zoom:"enable-on-click"})))}const fe=(0,k.Z)(Q=>({root:{display:"flex",flexDirection:"column"},marginTop:{marginTop:Q.spacing(2)},helpIcon:{marginLeft:Q.spacing(1),color:Q.palette.text.disabled},monospace:{fontFamily:"monospace"}}));function Ae(Q){const re=fe();return i.createElement(S.Z,{...Q,primaryTypographyProps:{className:re.monospace},secondaryTypographyProps:{className:re.monospace}})}function Be(Q){const re=fe();return i.createElement(ie.Z,{className:re.monospace},Q.children)}function $t(Q){return i.createElement(t.Z,{mt:2},i.createElement(Te.Z,{variant:"outlined"},i.createElement(Pe.Z,null,i.createElement(U.Z,{variant:"h6",gutterBottom:!0},Q.title,Q.helpLink&&i.createElement(mn,{to:Q.helpLink})),Q.children)))}function on(Q){if(Q.match(/^url:https?:\/\//))return Q.slice(4);if(Q.match(/^https?:\/\//))return Q}function Ft(Q){const[re,ve]=Q.entry,_e=on(ve);return i.createElement(qe.Z,null,Q.indent&&i.createElement(xe.Z,null),i.createElement(Ae,{primary:re,secondary:_e?i.createElement(z.rU,{to:_e},ve):ve}))}function mn(Q){const re=fe();return i.createElement(z.rU,{to:Q.to,className:re.helpIcon},i.createElement(Re.Z,{fontSize:"inherit"}))}const nn=(0,k.Z)({root:{display:"flex",flexDirection:"column"}});function kn(Q){var re,ve;const _e=(0,d.h_)(M),et=(0,ae.eE)(Q),ht=(re=Q.metadata.annotations)==null?void 0:re[ae.P1],pt=(ve=Q.metadata.annotations)==null?void 0:ve[ae.q1],{loading:Ot,error:y,value:a}=(0,Ne.default)(async()=>!ht&&!pt?[]:(await _e.getEntities({filter:[...ht?[{[`metadata.annotations.${ae.P1}`]:ht}]:[],...pt?[{[`metadata.annotations.${ae.q1}`]:pt}]:[]]})).items,[ht,pt]);return{loading:Ot,error:y,location:ht,originLocation:pt,colocatedEntities:a==null?void 0:a.filter(u=>(0,ae.eE)(u)!==et)}}function Tn(Q){return i.createElement(ke.Z,{dense:!0},Q.header&&i.createElement(Ft,{key:"header",entry:Q.header}),Q.entities.map(re=>i.createElement(qe.Z,{key:(0,ae.eE)(re)},i.createElement(xe.Z,null,i.createElement(l,{kind:re.kind})),i.createElement(Ae,{primary:i.createElement(en,{entityRef:re})}))))}function ur(Q){const{entity:re}=Q,{loading:ve,error:_e,location:et,originLocation:ht,colocatedEntities:pt}=kn(re);if(ve)return i.createElement(z.Ex,null);if(_e)return i.createElement(z.Gk,{error:_e});if(!et&&!ht)return i.createElement(Vt.Z,{severity:"warning"},"Entity had no location information.");if(!(pt!=null&&pt.length))return i.createElement(Vt.Z,{severity:"info"},"There were no other entities on this location.");if(et===ht)return i.createElement(Tn,{entities:pt});const Ot=pt.filter(a=>{var u;return((u=a.metadata.annotations)==null?void 0:u[ae.P1])===et}),y=pt.filter(a=>{var u;return((u=a.metadata.annotations)==null?void 0:u[ae.q1])===ht});return i.createElement(i.Fragment,null,Ot.length>0&&i.createElement(Tn,{entities:Ot,header:["At the same location",et]}),y.length>0&&i.createElement(Tn,{entities:y,header:["At the same origin",ht]}))}function Kn(Q){const re=nn();return i.createElement(i.Fragment,null,i.createElement(T.Z,{variant:"h2"},"Colocated"),i.createElement(T.Z,null,"These are the entities that are colocated with this entity - as in, they originated from the same data source (e.g. came from the same YAML file), or from the same origin (e.g. the originally registered URL)."),i.createElement("div",{className:re.root},i.createElement(ur,{entity:Q.entity})))}function vr(Q){return Object.fromEntries([...Object.entries(Q)].sort((re,ve)=>re[0]<ve[0]?-1:1))}function Kr(Q){return i.createElement(i.Fragment,null,i.createElement(T.Z,{variant:"h2"},"Entity as JSON"),i.createElement(T.Z,null,"This is the raw entity data as received from the catalog, on JSON form."),i.createElement(T.Z,null,i.createElement("div",{style:{fontSize:"75%"},"data-testid":"code-snippet"},i.createElement(z.Oi,{text:JSON.stringify(vr(Q.entity),void 0,2),language:"json",showCopyCodeButton:!0}))))}const er=(0,k.Z)({root:{display:"flex",flexDirection:"column"}});function tr(Q){var re,ve;const _e=er(),{apiVersion:et,kind:ht,metadata:pt,spec:Ot,relations:y=[],status:a={}}=Q.entity,u=je()(ot()(y,O=>O.targetRef),"type");return i.createElement(i.Fragment,null,i.createElement(T.Z,{variant:"h2"},"Overview"),i.createElement("div",{className:_e.root},i.createElement($t,{title:"Identity"},i.createElement(ke.Z,{dense:!0},i.createElement(qe.Z,null,i.createElement(Ae,{primary:"apiVersion",secondary:et})),i.createElement(qe.Z,null,i.createElement(Ae,{primary:"kind",secondary:ht})),(Ot==null?void 0:Ot.type)&&i.createElement(qe.Z,null,i.createElement(Ae,{primary:"spec.type",secondary:Ot.type})),pt.uid&&i.createElement(qe.Z,null,i.createElement(Ae,{primary:"uid",secondary:pt.uid})),pt.etag&&i.createElement(qe.Z,null,i.createElement(Ae,{primary:"etag",secondary:pt.etag})))),i.createElement($t,{title:"Metadata"},!!Object.keys(pt.annotations||{}).length&&i.createElement(ke.Z,{dense:!0,subheader:i.createElement(Be,null,"Annotations",i.createElement(mn,{to:"https://backstage.io/docs/features/software-catalog/well-known-annotations"}))},Object.entries(pt.annotations).map(O=>i.createElement(Ft,{key:O[0],indent:!0,entry:O}))),!!Object.keys(pt.labels||{}).length&&i.createElement(ke.Z,{dense:!0,subheader:i.createElement(Be,null,"Labels")},Object.entries(pt.labels).map(O=>i.createElement(Ft,{key:O[0],indent:!0,entry:O}))),!!((re=pt.tags)!=null&&re.length)&&i.createElement(ke.Z,{dense:!0,subheader:i.createElement(Be,null,"Tags")},pt.tags.map((O,V)=>i.createElement(qe.Z,{key:`${O}-${V}`},i.createElement(xe.Z,null),i.createElement(Ae,{primary:O}))))),!!y.length&&i.createElement($t,{title:"Relations",helpLink:"https://backstage.io/docs/features/software-catalog/well-known-relations"},Object.entries(u).map(([O,V],Oe)=>i.createElement("div",{key:Oe},i.createElement(ke.Z,{dense:!0,subheader:i.createElement(Be,null,O)},V.map(Fe=>i.createElement(qe.Z,{key:Fe.targetRef},i.createElement(xe.Z,null,i.createElement(l,{entityRef:Fe.targetRef})),i.createElement(Ae,{primary:i.createElement(en,{entityRef:Fe.targetRef})}))))))),!!((ve=a.items)!=null&&ve.length)&&i.createElement($t,{title:"Status",helpLink:"https://backstage.io/docs/features/software-catalog/well-known-statuses"},a.items.map((O,V)=>i.createElement("div",{key:V},i.createElement(U.Z,null,O.level,": ",O.type),i.createElement(t.Z,{ml:2},O.message))))))}function Jn(Q){return i.createElement(i.Fragment,null,i.createElement(T.Z,{variant:"h2"},"Entity as YAML"),i.createElement(T.Z,null,"This is the raw entity data as received from the catalog, on YAML form."),i.createElement(T.Z,null,i.createElement("div",{style:{fontSize:"75%"},"data-testid":"code-snippet"},i.createElement(z.Oi,{text:W.ZP.stringify(vr(Q.entity)),language:"yaml",showCopyCodeButton:!0}))))}const kr=(0,k.Z)(Q=>({fullHeightDialog:{height:"calc(100% - 64px)"},root:{display:"flex",flexGrow:1,width:"100%",backgroundColor:Q.palette.background.paper},tabs:{borderRight:`1px solid ${Q.palette.divider}`,flexShrink:0},tabContents:{flexGrow:1,overflowX:"auto"}}));function Sr(Q){const{children:re,value:ve,index:_e,...et}=Q,ht=kr();return i.createElement("div",{role:"tabpanel",hidden:ve!==_e,id:`vertical-tabpanel-${_e}`,"aria-labelledby":`vertical-tab-${_e}`,className:ht.tabContents,...et},ve===_e&&i.createElement(t.Z,{pl:3,pr:3},re))}function gr(Q){return{id:`vertical-tab-${Q}`,"aria-controls":`vertical-tabpanel-${Q}`}}function Gr(Q){const re=kr(),[ve,_e]=i.useState(0);return(0,i.useEffect)(()=>{_e(0)},[Q.open]),Q.entity?i.createElement(rt.Z,{fullWidth:!0,maxWidth:"xl",open:Q.open,onClose:Q.onClose,"aria-labelledby":"entity-inspector-dialog-title",PaperProps:{className:re.fullHeightDialog}},i.createElement(Kt.Z,{id:"entity-inspector-dialog-title"},"Entity Inspector"),i.createElement(Nt.Z,{dividers:!0},i.createElement("div",{className:re.root},i.createElement(rn.Z,{orientation:"vertical",variant:"scrollable",value:ve,onChange:(et,ht)=>_e(ht),"aria-label":"Inspector options",className:re.tabs},i.createElement(D.Z,{label:"Overview",...gr(0)}),i.createElement(D.Z,{label:"Ancestry",...gr(1)}),i.createElement(D.Z,{label:"Colocated",...gr(2)}),i.createElement(D.Z,{label:"Raw JSON",...gr(3)}),i.createElement(D.Z,{label:"Raw YAML",...gr(4)})),i.createElement(Sr,{value:ve,index:0},i.createElement(tr,{entity:Q.entity})),i.createElement(Sr,{value:ve,index:1},i.createElement(ee,{entity:Q.entity})),i.createElement(Sr,{value:ve,index:2},i.createElement(Kn,{entity:Q.entity})),i.createElement(Sr,{value:ve,index:3},i.createElement(Kr,{entity:Q.entity})),i.createElement(Sr,{value:ve,index:4},i.createElement(Jn,{entity:Q.entity})))),i.createElement(we.Z,null,i.createElement(b.Z,{onClick:Q.onClose,color:"primary"},"Close"))):null}function Hr(Q){var re;const ve=(0,d.h_)(M),_e=(re=Q.metadata.annotations)==null?void 0:re[ae.q1],et=Q.metadata.uid,ht=_e==="bootstrap:bootstrap",pt=(0,Ne.default)(async()=>{const Fe=ve.getLocationByRef(_e);let Ze;if(!_e)Ze=Promise.resolve([]);else{const Pt=`metadata.annotations.${ae.q1}`;Ze=ve.getEntities({filter:{[Pt]:_e},fields:["kind","metadata.uid","metadata.name","metadata.namespace"]}).then(xt=>xt.items)}return Promise.all([Fe,Ze]).then(([Pt,xt])=>({location:Pt,colocatedEntities:xt}))},[ve,Q]),Ot=(0,i.useCallback)(async function(){const{location:Ze}=pt.value;await ve.removeLocationById(Ze.id)},[ve,pt]),y=(0,i.useCallback)(async function(){await ve.removeEntityByUid(et)},[ve,et]);if(ht)return{type:"bootstrap",location:_e,deleteEntity:y};const{loading:a,error:u,value:O}=pt;if(a)return{type:"loading"};if(u)return{type:"error",error:u};const{location:V,colocatedEntities:Oe}=O;return V?{type:"unregister",location:_e,colocatedEntities:Oe.map(ae.iB),unregisterLocation:Ot,deleteEntity:y}:{type:"only-delete",deleteEntity:y}}const na=(0,k.Z)({advancedButton:{fontSize:"0.7em"},dialogActions:{display:"inline-block"}}),ca=({entity:Q,onConfirm:re,onClose:ve})=>{var _e;const et=(0,d.h_)(d.$v),ht=(0,d.h_)(d.Ds),pt=na(),Ot=Hr(Q),[y,a]=(0,i.useState)(!1),[u,O]=(0,i.useState)(!1),V=(_e=ht.getOptionalString("app.title"))!=null?_e:"Backstage",Oe=(0,i.useCallback)(async function(){if("unregisterLocation"in Ot){O(!0);try{await Ot.unregisterLocation(),re()}catch(xt){(0,_.BD)(xt),et.post({message:xt.message})}finally{O(!1)}}},[et,re,Ot]),Fe=(0,i.useCallback)(async function(){if("deleteEntity"in Ot){O(!0);try{await Ot.deleteEntity(),re()}catch(xt){(0,_.BD)(xt),et.post({message:xt.message})}finally{O(!1)}}},[et,re,Ot]),Ze=()=>i.createElement(we.Z,{className:pt.dialogActions},i.createElement(b.Z,{onClick:ve,color:"primary"},"Cancel"));return Ot.type==="loading"?i.createElement(z.Ex,null):Ot.type==="error"?i.createElement(z.Gk,{error:Ot.error}):Ot.type==="bootstrap"?i.createElement(i.Fragment,null,i.createElement(Vt.Z,{severity:"info"},'You cannot unregister this entity, since it originates from a protected Backstage configuration (location "',Ot.location,'"). If you believe this is in error, please contact the ',V," ","integrator."),i.createElement(t.Z,{marginTop:2},!y&&i.createElement(i.Fragment,null,i.createElement(b.Z,{variant:"text",size:"small",color:"primary",className:pt.advancedButton,onClick:()=>a(!0)},"Advanced Options"),i.createElement(Ze,null)),y&&i.createElement(i.Fragment,null,i.createElement(T.Z,null,"You have the option to delete the entity itself from the catalog. Note that this should only be done if you know that the catalog file has been deleted at, or moved from, its origin location. If that is not the case, the entity will reappear shortly as the next refresh round is performed by the catalog."),i.createElement(b.Z,{variant:"contained",color:"secondary",disabled:u,onClick:Fe},"Delete Entity"),i.createElement(Ze,null)))):Ot.type==="only-delete"?i.createElement(i.Fragment,null,i.createElement(T.Z,null,"This entity does not seem to originate from a registered location. You therefore only have the option to delete it outright from the catalog."),i.createElement(b.Z,{variant:"contained",color:"secondary",disabled:u,onClick:Fe},"Delete Entity"),i.createElement(Ze,null)):Ot.type==="unregister"?i.createElement(i.Fragment,null,i.createElement(T.Z,null,"This action will unregister the following entities:"),i.createElement(T.Z,{component:"ul"},Ot.colocatedEntities.map(Pt=>i.createElement("li",{key:`${Pt.kind}:${Pt.namespace}/${Pt.name}`},i.createElement(en,{entityRef:Pt})))),i.createElement(T.Z,null,"Located at the following location:"),i.createElement(T.Z,{component:"ul"},i.createElement("li",null,Ot.location)),i.createElement(T.Z,null,"To undo, just re-register the entity in ",V,"."),i.createElement(t.Z,{marginTop:2},i.createElement(b.Z,{variant:"contained",color:"secondary",disabled:u,onClick:Oe},"Unregister Location"),!y&&i.createElement(t.Z,{component:"span",marginLeft:2},i.createElement(b.Z,{variant:"text",size:"small",color:"primary",className:pt.advancedButton,onClick:()=>a(!0)},"Advanced Options"))),y&&i.createElement(i.Fragment,null,i.createElement(t.Z,{paddingTop:4,paddingBottom:4},i.createElement(ue.Z,null)),i.createElement(T.Z,null,"You also have the option to delete the entity itself from the catalog. Note that this should only be done if you know that the catalog file has been deleted at, or moved from, its origin location. If that is not the case, the entity will reappear shortly as the next refresh round is performed by the catalog."),i.createElement(b.Z,{variant:"contained",color:"secondary",disabled:u,onClick:Fe},"Delete Entity"))):i.createElement(Vt.Z,{severity:"error"},"Internal error: Unknown state")},Sa=Q=>{const{open:re,onConfirm:ve,onClose:_e,entity:et}=Q;return i.createElement(rt.Z,{open:re,onClose:_e},i.createElement(Kt.Z,{id:"responsive-dialog-title"},"Are you sure you want to unregister this entity?"),i.createElement(Nt.Z,null,i.createElement(ca,{entity:et,onConfirm:ve,onClose:_e})))},Ra=(0,k.Z)(Q=>({root:{backgroundColor:"rgba(0, 0, 0, .11)",boxShadow:"none",margin:Q.spacing(1,0,1,0)},title:{margin:Q.spacing(1,0,0,1),textTransform:"uppercase",fontSize:12,fontWeight:"bold"},listIcon:{minWidth:30,color:Q.palette.text.primary},menuItem:{minHeight:Q.spacing(6)},groupWrapper:{margin:Q.spacing(1,1,2,1)}}),{name:"CatalogReactUserListPicker"});function Nr(Q){return[{name:"Personal",items:[{id:"owned",label:"Owned",icon:h.Z},{id:"starred",label:"Starred",icon:At.Z}]},{name:Q!=null?Q:"Company",items:[{id:"all",label:"All"}]}]}const Aa=Q=>{var re;const{initialFilter:ve,availableFilters:_e}=Q,et=Ra(),pt=(re=(0,d.h_)(d.Ds).getOptionalString("organization.name"))!=null?re:"Company",{filters:Ot,updateFilters:y,backendEntities:a,queryParameters:{kind:u,user:O},loading:V}=hn(),Oe=["starred","all"],Fe=Nr(pt).map(dr=>({...dr,items:dr.items.filter(({id:pr})=>["group","user"].some(aa=>aa===u)?Oe.includes(pr):!_e||_e.includes(pr))})).filter(({items:dr})=>!!dr.length),{isStarredEntity:Ze}=In(),{isOwnedEntity:Pt,loading:xt}=Sn(),pn=V||xt,Xt=(0,i.useMemo)(()=>new un("owned",Pt,Ze),[Pt,Ze]),Yt=(0,i.useMemo)(()=>new un("starred",Pt,Ze),[Pt,Ze]),fn=(0,i.useMemo)(()=>[O].flat()[0],[O]),[vn,Yn]=(0,i.useState)(fn!=null?fn:ve),Nn=(0,i.useMemo)(()=>a.filter(Ce((0,Ge.compact)(Object.values({...Ot,user:void 0})))),[Ot,a]),Xn=(0,i.useMemo)(()=>({all:Nn.length,starred:Nn.filter(dr=>Yt.filterEntity(dr)).length,owned:Nn.filter(dr=>Xt.filterEntity(dr)).length}),[Nn,Yt,Xt]);return(0,i.useEffect)(()=>{fn&&Yn(fn)},[fn]),(0,i.useEffect)(()=>{!pn&&vn&&vn!=="all"&&Xn[vn]===0&&Yn("all")},[pn,Xn,vn,Yn]),(0,i.useEffect)(()=>{y({user:vn?new un(vn,Pt,Ze):void 0})},[vn,Pt,Ze,y]),i.createElement(Te.Z,{className:et.root},Fe.map(dr=>i.createElement(i.Fragment,{key:dr.name},i.createElement(U.Z,{variant:"subtitle2",component:"span",className:et.title},dr.name),i.createElement(Te.Z,{className:et.groupWrapper},i.createElement(ke.Z,{disablePadding:!0,dense:!0,role:"menu","aria-label":dr.name},dr.items.map(pr=>{var aa,pa;return i.createElement(Ke.Z,{role:"none presentation",key:pr.id,button:!0,divider:!0,onClick:()=>Yn(pr.id),selected:pr.id===((aa=Ot.user)==null?void 0:aa.value),className:et.menuItem,disabled:Xn[pr.id]===0,"data-testid":`user-picker-${pr.id}`,tabIndex:0,ContainerProps:{role:"menuitem"}},pr.icon&&i.createElement(xe.Z,{className:et.listIcon},i.createElement(pr.icon,{fontSize:"small"})),i.createElement(S.Z,null,i.createElement(U.Z,{variant:"body1"},pr.label," ")),i.createElement($.Z,null,(pa=Xn[pr.id])!=null?pa:"-"))}))))))},wa=(0,k.Z)({input:{}},{name:"CatalogReactEntityProcessingStatusPickerPicker"}),Ta=i.createElement(Ht.Z,{fontSize:"small"}),Rr=i.createElement(jt.Z,{fontSize:"small"}),Ea=()=>{const Q=wa(),{updateFilters:re}=hn(),[ve,_e]=(0,i.useState)([]);function et(Ot){re({orphan:Ot?new ln(Ot):void 0})}function ht(Ot){re({error:Ot?new tn(Ot):void 0})}const pt=["Is Orphan","Has Error"];return i.createElement(t.Z,{pb:1,pt:1},i.createElement(U.Z,{variant:"button",component:"label"},"Processing Status",i.createElement(dt.ZP,{multiple:!0,disableCloseOnSelect:!0,options:pt,value:ve,onChange:(Ot,y)=>{_e(y),et(y.includes("Is Orphan")),ht(y.includes("Has Error"))},renderOption:(Ot,{selected:y})=>i.createElement(K.Z,{control:i.createElement(N.Z,{icon:Ta,checkedIcon:Rr,checked:y}),onClick:a=>a.preventDefault(),label:Ot}),size:"small",popupIcon:i.createElement(Et.Z,{"data-testid":"processing-status-picker-expand"}),renderInput:Ot=>i.createElement(H.Z,{...Ot,className:Q.input,variant:"outlined"})})))},ma=(0,k.Z)({input:{}},{name:"CatalogReactEntityNamespacePicker"}),Ia=()=>{const Q=ma();return i.createElement(_r,{label:"Namespace",name:"namespace",path:"metadata.namespace",Filter:Qt,InputProps:{className:Q.input}})};function Ba(Q){var re;const{children:ve,value:_e}=Q,[et,ht]=useState((re=_e==null?void 0:_e.filters)!=null?re:{}),pt=useCallback(a=>{ht(u=>{const O=typeof a=="function"?a(u):a;return{...u,...O}})},[]),Ot=useMemo(()=>({entities:[],backendEntities:[],queryParameters:{}}),[]),y=useMemo(()=>{var a,u,O,V,Oe;return{entities:(a=_e==null?void 0:_e.entities)!=null?a:Ot.entities,backendEntities:(u=_e==null?void 0:_e.backendEntities)!=null?u:Ot.backendEntities,updateFilters:(O=_e==null?void 0:_e.updateFilters)!=null?O:pt,filters:et,loading:(V=_e==null?void 0:_e.loading)!=null?V:!1,queryParameters:(Oe=_e==null?void 0:_e.queryParameters)!=null?Oe:Ot.queryParameters,error:_e==null?void 0:_e.error}},[_e,Ot,et,pt]);return React.createElement(Zt.Provider,{value:y},ve)}},36215:function(Dt,E,e){"use strict";e.d(E,{A:function(){return Re},B:function(){return tn},C:function(){return j},E:function(){return lr},F:function(){return yn},H:function(){return bn},L:function(){return _t},a:function(){return zt},b:function(){return Ve},c:function(){return Mt},d:function(){return _r},e:function(){return $r},f:function(){return jn},g:function(){return Lr},h:function(){return Wr},j:function(){return wr},k:function(){return Fr},l:function(){return br},m:function(){return Fn},n:function(){return Pr},o:function(){return Br},p:function(){return Ar},r:function(){return xr},t:function(){return Y},u:function(){return Ie},v:function(){return me},y:function(){return Qt},z:function(){return kt}});var n=e(82394),d=e.n(n),p=e(34520),i=e(76635),c=e.n(i),m=e(80236),b=e(30705),R=e(49462),t=e(64304),U=e(67898),w=e(79692),N=e(90436),K=e(60905),k=e(95544),H=e(41156),C=e(90348),v=e(11861),F=e(7089),g=e(94339),J=e(32552),x=e(61837),B=e(85256),T=e(24579),S=e(12420),ie=e(12231),Te=e(86136),Pe=e(49378),qe=e(80030),xe=e(79784),ke=e(50758),rt=e(8629),Kt=e(79249),Nt=e(49429),rn=e(77277),D=e(88188),we=e(52866),ue=e(30254),Ke=e(27604),$=e(2784),A=e(52160),z=e(19928),ae=e.n(z),$e=e(64279),Ge=e(15459),ft=e(2997),nt=e(11640),Rt=e(28347),q=e(99688),de=e(73557),Se=e(31654),Ne=e(43054),st=e(65759),pe=e(52963),Je=e(75650),ot=e(49166),Qe=e(32272),Et=e(88285),dt=e(92573);async function Vt({storageApi:be}){var at;const vt=be.forBucket("settings"),Tt=be.forBucket("starredEntities"),an=vt.snapshot("starredEntities").value;if(!(0,i.isArray)(an))return;const Jt=new Set((at=Tt.snapshot("entityRefs").value)!=null?at:[]);an.filter(i.isString).map(en=>en.split(":")).filter(en=>en.length===4&&en[0]==="entity").map(([en,En,cn,sn])=>(0,p.eE)({kind:En,namespace:cn,name:sn})).forEach(en=>Jt.add(en)),await Tt.set("entityRefs",Array.from(Jt)),await vt.remove("starredEntities")}var jt=Object.defineProperty,Ht=(be,at,vt)=>at in be?jt(be,at,{enumerable:!0,configurable:!0,writable:!0,value:vt}):be[at]=vt,Ye=(be,at,vt)=>(Ht(be,typeof at!="symbol"?at+"":at,vt),vt);class St{constructor(at){Ye(this,"settingsStore"),Ye(this,"starredEntities"),Ye(this,"subscribers",new Set),Ye(this,"observable",new(d())(Tt=>(Tt.next(new Set(this.starredEntities)),this.subscribers.add(Tt),()=>{this.subscribers.delete(Tt)})));var vt;Vt(at).then(),this.settingsStore=at.storageApi.forBucket("starredEntities"),this.starredEntities=new Set((vt=this.settingsStore.snapshot("entityRefs").value)!=null?vt:[]),this.settingsStore.observe$("entityRefs").subscribe({next:Tt=>{var an;this.starredEntities=new Set((an=Tt.value)!=null?an:[]),this.notifyChanges()}})}async toggleStarred(at){this.starredEntities.has(at)?this.starredEntities.delete(at):this.starredEntities.add(at),await this.settingsStore.set("entityRefs",Array.from(this.starredEntities))}starredEntitie$(){return this.observable}notifyChanges(){for(const at of this.subscribers)at.next(new Set(this.starredEntities))}}const Mt=(0,b.x8)({id:"create-component",optional:!0}),Bt=(0,b.x8)({id:"view-techdoc",optional:!0,params:["namespace","kind","name"]}),Ee=(0,b.x8)({id:"create-from-template",optional:!0,params:["namespace","templateName"]}),De=(0,b.NT)({id:"catalog"}),ct=(0,w.Z)(be=>({value:{fontWeight:"bold",overflow:"hidden",lineHeight:"24px",wordBreak:"break-word"},label:{color:be.palette.text.secondary,textTransform:"uppercase",fontSize:"10px",fontWeight:"bold",letterSpacing:.5,overflow:"hidden",whiteSpace:"nowrap"}}));function Ve(be){const{label:at,value:vt,gridSizes:Tt,children:an}=be,Jt=ct(),en=(0,b.vJ)(an,cn=>cn.getElements()),En=en.length>0?en:$.createElement(N.Z,{variant:"body2",className:Jt.value},vt||"unknown");return $.createElement(K.Z,{item:!0,...Tt},$.createElement(N.Z,{variant:"h2",className:Jt.label},at),En)}const yt=(0,w.Z)({svgIcon:{display:"inline-block","& svg":{display:"inline-block",fontSize:"inherit",verticalAlign:"baseline"}}});function ye(be){const{href:at,text:vt,Icon:Tt}=be,an=yt();return $.createElement(k.Z,{display:"flex"},$.createElement(k.Z,{mr:1,className:an.svgIcon},$.createElement(N.Z,{component:"div"},Tt?$.createElement(Tt,null):$.createElement(A.Z,null))),$.createElement(k.Z,{flexGrow:"1"},$.createElement(m.rU,{to:at,target:"_blank",rel:"noopener"},vt||at)))}const mt={xs:1,sm:1,md:1,lg:2,xl:3};function Ct(be){var at,vt;const Tt=[(0,H.Z)(Jt=>Jt.breakpoints.up("xl"))?"xl":null,(0,H.Z)(Jt=>Jt.breakpoints.up("lg"))?"lg":null,(0,H.Z)(Jt=>Jt.breakpoints.up("md"))?"md":null,(0,H.Z)(Jt=>Jt.breakpoints.up("sm"))?"sm":null,(0,H.Z)(Jt=>Jt.breakpoints.up("xs"))?"xs":null];let an=1;if(typeof be=="number")an=be;else{const Jt=(at=Tt.find(en=>en!==null))!=null?at:"xs";an=(vt=be==null?void 0:be[Jt])!=null?vt:mt[Jt]}return an}function _t(be){const{items:at,cols:vt=void 0}=be,Tt=Ct(vt);return $.createElement(C.Z,{rowHeight:"auto",cols:Tt},at.map(({text:an,href:Jt,Icon:en},En)=>$.createElement(v.Z,{key:En},$.createElement(ye,{href:Jt,text:an!=null?an:Jt,Icon:en}))))}const it=(0,w.Z)({description:{wordBreak:"break-word"}});function At(be,at,vt){if(at==="url"||be.includes("://"))return be;const Tt=vt.type==="file"?`file://${vt.target}`:vt.target;return at==="file"||vt.type==="file"?new URL(be,Tt).href:Tt}function zt(be){var at,vt,Tt,an,Jt,en,En,cn;const{entity:sn}=be,Rn=it(),_n=sn.kind.toLocaleLowerCase("en-US")==="system",Ln=sn.kind.toLocaleLowerCase("en-US")==="resource",Cn=sn.kind.toLocaleLowerCase("en-US")==="component",Un=sn.kind.toLocaleLowerCase("en-US")==="api",Mn=sn.kind.toLocaleLowerCase("en-US")==="template",Bn=sn.kind.toLocaleLowerCase("en-US")==="location",Qn=sn.kind.toLocaleLowerCase("en-US")==="group",xn=(0,t.hF)(sn,p.cz,{kind:"system"}),rr=(0,t.hF)(sn,p.cz,{kind:"component"}),Vn=(0,t.hF)(sn,p.cz,{kind:"domain"}),Gn=(0,t.hF)(sn,p.S4);let Wn;try{Wn=(0,p.CV)(sn)}catch{Wn=void 0}return $.createElement(K.Z,{container:!0},$.createElement(Ve,{label:"Description",gridSizes:{xs:12}},$.createElement(m.SA,{className:Rn.description,content:((at=sn==null?void 0:sn.metadata)==null?void 0:at.description)||"No description"})),$.createElement(Ve,{label:"Owner",value:"No Owner",gridSizes:{xs:12,sm:6,lg:4}},Gn.length>0&&$.createElement(t.rI,{entityRefs:Gn,defaultKind:"group"})),(_n||Vn.length>0)&&$.createElement(Ve,{label:"Domain",value:"No Domain",gridSizes:{xs:12,sm:6,lg:4}},Vn.length>0&&$.createElement(t.rI,{entityRefs:Vn,defaultKind:"domain"})),(Un||Cn||Ln||xn.length>0)&&$.createElement(Ve,{label:"System",value:"No System",gridSizes:{xs:12,sm:6,lg:4}},xn.length>0&&$.createElement(t.rI,{entityRefs:xn,defaultKind:"system"})),Cn&&rr.length>0&&$.createElement(Ve,{label:"Parent Component",value:"No Parent Component",gridSizes:{xs:12,sm:6,lg:4}},$.createElement(t.rI,{entityRefs:rr,defaultKind:"component"})),(Un||Cn||Ln||Mn||Qn||Bn||typeof((vt=sn==null?void 0:sn.spec)==null?void 0:vt.type)=="string")&&$.createElement(Ve,{label:"Type",value:(Tt=sn==null?void 0:sn.spec)==null?void 0:Tt.type,gridSizes:{xs:12,sm:6,lg:4}}),(Un||Cn||typeof((an=sn==null?void 0:sn.spec)==null?void 0:an.lifecycle)=="string")&&$.createElement(Ve,{label:"Lifecycle",value:(Jt=sn==null?void 0:sn.spec)==null?void 0:Jt.lifecycle,gridSizes:{xs:12,sm:6,lg:4}}),$.createElement(Ve,{label:"Tags",value:"No Tags",gridSizes:{xs:12,sm:6,lg:4}},(((en=sn==null?void 0:sn.metadata)==null?void 0:en.tags)||[]).map(Hn=>$.createElement(F.Z,{key:Hn,size:"small",label:Hn}))),Bn&&(((En=sn==null?void 0:sn.spec)==null?void 0:En.targets)||((cn=sn==null?void 0:sn.spec)==null?void 0:cn.target))&&$.createElement(Ve,{label:"Targets",gridSizes:{xs:12}},$.createElement(_t,{cols:1,items:(sn.spec.targets||[sn.spec.target]).map(Hn=>Hn).map(Hn=>{var cr;return{text:Hn,href:At(Hn,((cr=sn==null?void 0:sn.spec)==null?void 0:cr.type)||"unknown",Wn)}})})))}const ze=(0,w.Z)({gridItemCard:{display:"flex",flexDirection:"column",height:"calc(100% - 10px)",marginBottom:"10px"},fullHeightCard:{display:"flex",flexDirection:"column",height:"100%"},gridItemCardContent:{flex:1},fullHeightCardContent:{flex:1}});function Re(be){var at,vt,Tt,an;const{variant:Jt}=be,en=(0,b.qD)(),En=ze(),{entity:cn}=(0,t.X2)(),sn=(0,b.h_)(R.q3),Rn=(0,b.h_)(t.Ah),_n=(0,b.h_)(b.$v),Ln=(0,b.h_)(b.VE),Cn=(0,b.tg)(Bt),Un=(0,b.tg)(Ee),Mn=(0,t.CV)(cn,sn),Bn=(at=cn.metadata.annotations)==null?void 0:at[p.Tf],Qn={label:"View Source",disabled:!Mn,icon:$.createElement(R.nW,{type:Mn==null?void 0:Mn.integrationType}),href:Mn==null?void 0:Mn.locationTargetUrl},xn={label:"View TechDocs",disabled:!((vt=cn.metadata.annotations)!=null&&vt["backstage.io/techdocs-ref"])||!Cn,icon:$.createElement(ue.Z,null),href:Cn&&Cn({namespace:cn.metadata.namespace||p.zG,kind:cn.kind,name:cn.metadata.name})},rr=[Qn,xn];if((0,U.t)(cn)){const qn=(Tt=en.getSystemIcon("scaffolder"))!=null?Tt:D.Z,Or={label:"Launch Template",icon:$.createElement(qn,null),disabled:!Un,href:Un&&Un({templateName:cn.metadata.name,namespace:cn.metadata.namespace||p.zG})};rr.push(Or)}let Vn="";Jt==="gridItem"?Vn=En.gridItemCard:Jt==="fullHeight"&&(Vn=En.fullHeightCard);let Gn="";Jt==="gridItem"?Gn=En.gridItemCardContent:Jt==="fullHeight"&&(Gn=En.fullHeightCardContent);const Wn=(an=cn.metadata.annotations)==null?void 0:an[p.P1],Hn=(Wn==null?void 0:Wn.startsWith("url:"))||(Wn==null?void 0:Wn.startsWith("file:")),cr=(0,$.useCallback)(async()=>{try{await Rn.refreshEntity((0,p.eE)(cn)),_n.post({message:"Refresh scheduled",severity:"info",display:"transient"})}catch(qn){Ln.post(qn)}},[Rn,_n,Ln,cn]);return $.createElement(g.Z,{className:Vn},$.createElement(J.Z,{title:"About",action:$.createElement($.Fragment,null,Hn&&$.createElement(x.Z,{"aria-label":"Refresh",title:"Schedule entity refresh",onClick:cr},$.createElement(we.Z,null)),$.createElement(x.Z,{component:m.rU,"aria-label":"Edit",disabled:!Bn,title:"Edit Metadata",to:Bn!=null?Bn:"#"},$.createElement(Ke.Z,null))),subheader:$.createElement(m.M6,{links:rr})}),$.createElement(B.Z,null),$.createElement(T.Z,{className:Gn},$.createElement(zt,{entity:cn})))}function We(){const be=useApi(catalogApiRef),{error:at,loading:vt,value:Tt}=useAsync(async()=>await be.getEntityFacets({facets:["kind"]}).then(Jt=>{var en;return((en=Jt.facets.kind)==null?void 0:en.map(En=>En.value).sort())||[]}),[be]);return{loading:vt,error:at,allKinds:Tt!=null?Tt:[]}}function je(be,at,vt){let Tt=be;return at&&(Tt=Tt.filter(Jt=>at.some(en=>en.toLocaleLowerCase("en-US")===Jt.toLocaleLowerCase("en-US")))),vt&&!be.some(Jt=>Jt.toLocaleLowerCase("en-US")===vt.toLocaleLowerCase("en-US"))&&(Tt=Tt.concat([vt])),Tt.sort().reduce((Jt,en)=>(Jt[en.toLocaleLowerCase("en-US")]=en,Jt),{})}const W=(0,w.Z)(be=>(0,S.Z)({root:{...be.typography.h4}}));function _(be){var at,vt;const{initialFilter:Tt="component",allowedKinds:an}=be,Jt=W(),{allKinds:en}=We(),{filters:En,updateFilters:cn,queryParameters:{kind:sn}}=useEntityList(),Rn=useMemo(()=>[sn].flat()[0],[sn]),[_n,Ln]=useState((vt=Rn!=null?Rn:(at=En.kind)==null?void 0:at.value)!=null?vt:Tt);useEffect(()=>{Rn&&Ln(Rn)},[Rn]),useEffect(()=>{var Un,Mn;(Un=En.kind)!=null&&Un.value&&Ln((Mn=En.kind)==null?void 0:Mn.value)},[En.kind]),useEffect(()=>{cn({kind:_n?new EntityKindFilter(_n):void 0})},[_n,cn]);const Cn=je(en,an,_n);return React.createElement(Select,{input:React.createElement(InputBase,null),value:_n.toLocaleLowerCase("en-US"),onChange:Un=>Ln(Un.target.value),classes:Jt},Object.keys(Cn).map(Un=>React.createElement(MenuItem,{value:Un,key:Un},`${pluralize(Cn[Un])}`)))}const h=Object.freeze({createNameColumn(be){function at(vt){var Tt;return((Tt=vt.metadata)==null?void 0:Tt.title)||(0,t.$3)(vt,{defaultKind:be==null?void 0:be.defaultKind})}return{title:"Name",field:"resolved.name",highlight:!0,customSort({entity:vt},{entity:Tt}){return at(vt).localeCompare(at(Tt))},render:({entity:vt})=>{var Tt;return $.createElement(t.dx,{entityRef:vt,defaultKind:(be==null?void 0:be.defaultKind)||"Component",title:(Tt=vt.metadata)==null?void 0:Tt.title})}}},createSystemColumn(){return{title:"System",field:"resolved.partOfSystemRelationTitle",render:({resolved:be})=>$.createElement(t.rI,{entityRefs:be.partOfSystemRelations,defaultKind:"system"})}},createOwnerColumn(){return{title:"Owner",field:"resolved.ownedByRelationsTitle",render:({resolved:be})=>$.createElement(t.rI,{entityRefs:be.ownedByRelations,defaultKind:"group"})}},createSpecTargetsColumn(){return{title:"Targets",field:"entity.spec.targets",render:({entity:be})=>{var at,vt;return $.createElement($.Fragment,null,(((at=be==null?void 0:be.spec)==null?void 0:at.targets)||((vt=be==null?void 0:be.spec)==null?void 0:vt.target))&&$.createElement(m.Or,{text:(be.spec.targets||[be.spec.target]).join(", "),placement:"bottom-start"}))}}},createSpecTypeColumn(){return{title:"Type",field:"entity.spec.type",hidden:!0,width:"auto"}},createSpecLifecycleColumn(){return{title:"Lifecycle",field:"entity.spec.lifecycle"}},createMetadataDescriptionColumn(){return{title:"Description",field:"entity.metadata.description",render:({entity:be})=>$.createElement(m.Or,{text:be.metadata.description,placement:"bottom-start"}),width:"auto"}},createTagsColumn(){return{title:"Tags",field:"entity.metadata.tags",cellStyle:{padding:"0px 16px 0px 20px"},render:({entity:be})=>$.createElement($.Fragment,null,be.metadata.tags&&be.metadata.tags.map(at=>$.createElement(F.Z,{key:at,label:at,size:"small",variant:"outlined",style:{marginBottom:"0px"}}))),width:"auto"}},createTitleColumn(be){return{title:"Title",field:"entity.metadata.title",hidden:be==null?void 0:be.hidden,searchable:!0}},createLabelColumn(be,at){return{title:(at==null?void 0:at.title)||"Label",field:"entity.metadata.labels",cellStyle:{padding:"0px 16px 0px 20px"},render:({entity:vt})=>{var Tt;const an=(Tt=vt.metadata)==null?void 0:Tt.labels,Jt=an&&an[be]||(at==null?void 0:at.defaultValue);return $.createElement($.Fragment,null,Jt&&$.createElement(F.Z,{key:Jt,label:Jt,size:"small",variant:"outlined"}))},width:"auto"}},createNamespaceColumn(){return{title:"Namespace",field:"entity.metadata.namespace",width:"auto"}}}),M=(0,Ge.Z)({root:{color:"#f3ba37"}})(nt.Z),X=(be,at)=>{const vt=Tt=>Tt.metadata.title||(0,t.$3)(Tt,{defaultKind:"Component"});return vt(be).localeCompare(vt(at))},j=be=>{var at,vt,Tt,an,Jt;const{columns:en,actions:En,tableOptions:cn,subtitle:sn,emptyContent:Rn}=be,{isStarredEntity:_n,toggleStarredEntity:Ln}=(0,t.CR)(),{loading:Cn,error:Un,entities:Mn,filters:Bn}=(0,t.wp)(),Qn=(0,$.useMemo)(()=>{var Zn;return[h.createTitleColumn({hidden:!0}),h.createNameColumn({defaultKind:(Zn=Bn.kind)==null?void 0:Zn.value}),...Xe(),h.createMetadataDescriptionColumn(),h.createTagsColumn()];function Xe(){var ge;const gt=[h.createSystemColumn(),h.createOwnerColumn(),h.createSpecTypeColumn(),h.createSpecLifecycleColumn()];switch((ge=Bn.kind)==null?void 0:ge.value){case"user":return[];case"domain":case"system":return[h.createOwnerColumn()];case"group":case"template":return[h.createSpecTypeColumn()];case"location":return[h.createSpecTypeColumn(),h.createSpecTargetsColumn()];default:return Mn.every(l=>l.metadata.namespace==="default")?gt:[...gt,h.createNamespaceColumn()]}}},[(at=Bn.kind)==null?void 0:at.value,Mn]),xn=Bn.type===void 0,rr=(0,i.capitalize)((Tt=(vt=Bn.user)==null?void 0:vt.value)!=null?Tt:"all");if(Un)return $.createElement("div",null,$.createElement(m.GB,{severity:"error",title:"Could not fetch catalog entities."},$.createElement(m.Oi,{language:"text",text:Un.toString()})));const Vn=[({entity:Zn})=>{var Xe;const ge=(Xe=Zn.metadata.annotations)==null?void 0:Xe[p.l2],gt="View";return{icon:()=>$.createElement($.Fragment,null,$.createElement(N.Z,{variant:"srOnly"},gt),$.createElement(ft.Z,{fontSize:"small"})),tooltip:gt,disabled:!ge,onClick:()=>{ge&&window.open(ge,"_blank")}}},({entity:Zn})=>{var Xe;const ge=(Xe=Zn.metadata.annotations)==null?void 0:Xe[p.Tf],gt="Edit";return{icon:()=>$.createElement($.Fragment,null,$.createElement(N.Z,{variant:"srOnly"},gt),$.createElement(Ke.Z,{fontSize:"small"})),tooltip:gt,disabled:!ge,onClick:()=>{ge&&window.open(ge,"_blank")}}},({entity:Zn})=>{const Xe=_n(Zn),ge=Xe?"Remove from favorites":"Add to favorites";return{cellStyle:{paddingLeft:"1em"},icon:()=>$.createElement($.Fragment,null,$.createElement(N.Z,{variant:"srOnly"},ge),Xe?$.createElement(M,null):$.createElement(Rt.Z,null)),tooltip:ge,onClick:()=>Ln(Zn)}}],Gn=Mn.sort(X).map(Zn=>{const Xe=(0,t.hF)(Zn,p.cz,{kind:"system"}),ge=(0,t.hF)(Zn,p.S4);return{entity:Zn,resolved:{name:(0,t.$3)(Zn,{defaultKind:"Component"}),ownedByRelationsTitle:ge.map(gt=>(0,t.$3)(gt,{defaultKind:"group"})).join(", "),ownedByRelations:ge,partOfSystemRelationTitle:Xe.map(gt=>(0,t.$3)(gt,{defaultKind:"system"})).join(", "),partOfSystemRelations:Xe}}}),Wn=(en||Qn).find(Zn=>Zn.title==="Type");Wn&&(Wn.hidden=!xn);const Hn=Gn.length>20,cr=((an=Bn.kind)==null?void 0:an.value)||"",qn=((Jt=Bn.type)==null?void 0:Jt.value)||"",Or=[rr,qn,ae()(cr)].filter(Zn=>Zn).join(" ");return $.createElement(m.iA,{isLoading:Cn,columns:en||Qn,options:{paging:Hn,pageSize:20,actionsColumnIndex:-1,loadingType:"linear",showEmptyDataSourceMessage:!Cn,padding:"dense",pageSizeOptions:[20,50,100],...cn},title:`${Or} (${Mn.length})`,data:Gn,actions:En||Vn,subtitle:sn,emptyContent:Rn})};j.columns=h;function Z(be){var at;const{unregisterEntityOptions:vt,isUnregisterAllowed:Tt,onUnregisterEntity:an,onClose:Jt}=be,en=typeof(vt==null?void 0:vt.disableUnregister)=="boolean",En=(at=!Tt||(en?!!(vt!=null&&vt.disableUnregister):(vt==null?void 0:vt.disableUnregister)==="disable"))!=null?at:!1;let cn=$.createElement($.Fragment,null);return(vt==null?void 0:vt.disableUnregister)!=="hidden"&&(cn=$.createElement(ie.Z,{onClick:()=>{Jt(),an()},disabled:En},$.createElement(Te.Z,null,$.createElement(ot.Z,{fontSize:"small"})),$.createElement(Pe.Z,{primary:"Unregister entity"}))),$.createElement($.Fragment,null,cn)}const oe=(0,w.Z)(be=>({button:{color:be.page.fontColor}}),{name:"PluginCatalogEntityContextMenu"});function se(be){const{UNSTABLE_extraContextMenuItems:at,UNSTABLE_contextMenuOptions:vt,onUnregisterEntity:Tt,onInspectEntity:an}=be,[Jt,en]=(0,$.useState)(),En=oe(),sn=(0,pe.N)(Je.j8).allowed,Rn=Mn=>{en(Mn.currentTarget)},_n=()=>{en(void 0)},Ln=(0,b.h_)(b.$v),Cn=(0,$.useCallback)(()=>{window.navigator.clipboard.writeText(window.location.toString()).then(()=>Ln.post({message:"Copied!",severity:"info",display:"transient"}))},[Ln]),Un=at&&[...at.map(Mn=>$.createElement(ie.Z,{key:Mn.title,onClick:()=>{_n(),Mn.onClick()}},$.createElement(Te.Z,null,$.createElement(Mn.Icon,{fontSize:"small"})),$.createElement(Pe.Z,{primary:Mn.title}))),$.createElement(B.Z,{key:"the divider is here!"})];return $.createElement($.Fragment,null,$.createElement(qe.ZP,{title:"More",arrow:!0},$.createElement(x.Z,{"aria-label":"more","aria-controls":"long-menu","aria-haspopup":"true","aria-expanded":!!Jt,role:"button",onClick:Rn,"data-testid":"menu-button",className:En.button,id:"long-menu"},$.createElement(Ne.Z,null))),$.createElement(xe.ZP,{open:Boolean(Jt),onClose:_n,anchorEl:Jt,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},"aria-labelledby":"long-menu"},$.createElement(ke.Z,{autoFocusItem:Boolean(Jt)},Un,$.createElement(Z,{unregisterEntityOptions:vt,isUnregisterAllowed:sn,onUnregisterEntity:Tt,onClose:_n}),$.createElement(ie.Z,{onClick:()=>{_n(),an()}},$.createElement(Te.Z,null,$.createElement(Se.Z,{fontSize:"small"})),$.createElement(Pe.Z,{primary:"Inspect entity"})),$.createElement(ie.Z,{onClick:()=>{_n(),Cn()}},$.createElement(Te.Z,null,$.createElement(st.Z,{fontSize:"small"})),$.createElement(Pe.Z,{primary:"Copy entity URL"})))))}const Ue="plugin.catalog.entityLayoutRoute",lt=()=>null;(0,b.R5)(lt,Ue,!0),(0,b.R5)(lt,"core.gatherMountPoints",!0);function ne(be){const{entity:at,title:vt}=be;return $.createElement(k.Z,{display:"inline-flex",alignItems:"center",height:"1em",maxWidth:"100%"},$.createElement(k.Z,{component:"span",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"},vt),at&&$.createElement(t.LH,{entity:at}))}function ce(be,at,vt,Tt){var an,Jt,en,En,cn;const sn=(an=be!=null?be:Tt==null?void 0:Tt.kind)!=null?an:"",Rn=(Jt=at!=null?at:Tt==null?void 0:Tt.metadata.namespace)!=null?Jt:"";return{headerTitle:`${(cn=(En=(en=Tt==null?void 0:Tt.metadata.title)!=null?en:vt)!=null?En:Tt==null?void 0:Tt.metadata.name)!=null?cn:""}${Rn&&Rn!==p.zG?` in ${Rn}`:""}`,headerType:(()=>{let Ln=sn.toLocaleLowerCase("en-US");return Tt&&Tt.spec&&"type"in Tt.spec&&(Ln+=" \u2014 ",Ln+=Tt.spec.type.toLocaleLowerCase("en-US")),Ln})()}}function Ce(be){var at;const{entity:vt}=be,Tt=(0,t.hF)(vt,p.S4);return $.createElement($.Fragment,null,Tt.length>0&&$.createElement(m.i9,{label:"Owner",value:$.createElement(t.rI,{entityRefs:Tt,defaultKind:"Group",color:"inherit"})}),((at=vt.spec)==null?void 0:at.lifecycle)&&$.createElement(m.i9,{label:"Lifecycle",value:vt.spec.lifecycle}))}const Y=be=>{var at,vt,Tt;const{UNSTABLE_extraContextMenuItems:an,UNSTABLE_contextMenuOptions:Jt,children:en,NotFoundComponent:En}=be,{kind:cn,namespace:sn,name:Rn}=(0,b.Oi)(t.wi),{entity:_n,loading:Ln,error:Cn}=(0,t.ce)(),Un=(0,de.TH)(),Mn=(0,b.vJ)(en,cr=>cr.selectByComponentData({key:Ue,withStrictError:"Child of EntityLayout must be an EntityLayout.Route"}).getElements().flatMap(({props:qn})=>{if(_n){if(qn.if&&!qn.if(_n))return[]}else return[];return[{path:qn.path,title:qn.title,children:qn.children,tabProps:qn.tabProps}]}),[_n]),{headerTitle:Bn,headerType:Qn}=ce(cn,sn,Rn,_n),[xn,rr]=(0,$.useState)(!1),[Vn,Gn]=(0,$.useState)(!1),Wn=(0,de.s0)(),Hn=async()=>{rr(!1),Gn(!1),Wn("/")};return(0,$.useEffect)(()=>{rr(!1),Gn(!1)},[Un.pathname]),$.createElement(m.T3,{themeId:(Tt=(vt=(at=_n==null?void 0:_n.spec)==null?void 0:at.type)==null?void 0:vt.toString())!=null?Tt:"home"},$.createElement(m.h4,{title:$.createElement(ne,{title:Bn,entity:_n}),pageTitleOverride:Bn,type:Qn},_n&&$.createElement($.Fragment,null,$.createElement(Ce,{entity:_n}),$.createElement(se,{UNSTABLE_extraContextMenuItems:an,UNSTABLE_contextMenuOptions:Jt,onUnregisterEntity:()=>rr(!0),onInspectEntity:()=>Gn(!0)}))),Ln&&$.createElement(m.Ex,null),_n&&$.createElement(m.tn,{routes:Mn}),Cn&&$.createElement(m.VY,null,$.createElement(q.Z,{severity:"error"},Cn.toString())),!Ln&&!Cn&&!_n&&$.createElement(m.VY,null,En||$.createElement(m.GB,{title:"Entity not found"},"There is no ",cn," with the requested"," ",$.createElement(m.rU,{to:"https://backstage.io/docs/features/software-catalog/references"},"kind, namespace, and name"),".")),$.createElement(t.pp,{open:xn,entity:_n,onConfirm:Hn,onClose:()=>rr(!1)}),$.createElement(t.U_,{open:Vn,entity:_n,onClose:()=>Gn(!1)}))};Y.Route=lt;function te(be){const{open:at,onClose:vt,onConfirm:Tt,entity:an}=be,[Jt,en]=(0,$.useState)(!1),En=(0,b.h_)(t.Ah),cn=(0,b.h_)(b.$v),sn=async()=>{en(!0);try{const Rn=an.metadata.uid;await En.removeEntityByUid(Rn),Tt()}catch(Rn){(0,Qe.BD)(Rn),cn.post({message:Rn.message})}finally{en(!1)}};return $.createElement(rt.Z,{open:at,onClose:vt},$.createElement(Kt.Z,{id:"responsive-dialog-title"},"Are you sure you want to delete this entity?"),$.createElement(Nt.Z,null,$.createElement(rn.Z,{variant:"contained",color:"secondary",disabled:Jt,onClick:sn},"Delete"),$.createElement(rn.Z,{onClick:vt,color:"primary"},"Cancel")))}function me(be){var at,vt;return((vt=(at=be==null?void 0:be.metadata)==null?void 0:at.annotations)==null?void 0:vt["backstage.io/orphan"])==="true"}function Ie(){const be=(0,de.s0)(),at=(0,b.tg)(De),[vt,Tt]=(0,$.useState)(!1),{entity:an}=(0,t.X2)(),Jt=async()=>{Tt(!1),be(at())};return $.createElement($.Fragment,null,$.createElement(q.Z,{severity:"warning",onClick:()=>Tt(!0)},"This entity is not referenced by any location and is therefore not receiving updates. Click here to delete."),$.createElement(te,{open:vt,entity:an,onConfirm:Jt,onClose:()=>Tt(!1)}))}async function Le(be,at){var vt;const Tt=(vt=be.relations)==null?void 0:vt.map(Jt=>Jt.targetRef);if(!Tt||(Tt==null?void 0:Tt.length)<1||Tt.length>1e3)return[];const an=await at.getEntitiesByRefs({entityRefs:Tt,fields:["kind","metadata.name","metadata.namespace"]});return Tt.filter((Jt,en)=>an.items[en]===void 0)}async function bt(be,at){const vt=at.apis.get(catalogApiRef);if(!vt)throw new Error(`No implementation available for ${catalogApiRef}`);return(await Le(be,vt)).length>0}function ut(){const{entity:be}=useEntity(),at=useApi(catalogApiRef),{loading:vt,error:Tt,value:an}=useAsync(async()=>Le(be,at),[be,at]);return Tt?React.createElement(Box,{mb:1},React.createElement(ResponseErrorPanel,{error:Tt})):vt||!an||an.length===0?null:React.createElement(React.Fragment,null,React.createElement(Alert,{severity:"warning"},"This entity has relations to other entities, which can't be found in the catalog. ",React.createElement("br",null),"Entities not found are: ",an.join(", ")))}const Ut=be=>be.error&&be.level==="error"&&be.type===Et.mk;async function wt(be,at){return{items:(await at.getEntityAncestors({entityRef:be})).items.map(an=>{var Jt,en;return{errors:((en=(Jt=an.entity.status)==null?void 0:Jt.items)!=null?en:[]).filter(Ut).map(sn=>sn.error).filter(sn=>Boolean(sn)),entity:an.entity}}).filter(an=>an.errors.length>0)}}async function kt(be,at){const vt=at.apis.get(t.Ah);if(!vt)throw new Error(`No implementation available for ${t.Ah}`);return(await wt((0,p.eE)(be),vt)).items.length>0}function Qt(){const{entity:be}=(0,t.X2)(),at=(0,p.eE)(be),vt=(0,b.h_)(t.Ah),{loading:Tt,error:an,value:Jt}=(0,$e.default)(async()=>wt(at,vt),[at,vt]);return an?$.createElement(k.Z,{mb:1},$.createElement(m.Gk,{error:an})):Tt||!Jt?null:$.createElement($.Fragment,null,Jt.items.map((en,En)=>$.createElement(k.Z,{key:En,mb:1},(0,p.eE)(be)!==(0,p.eE)(en.entity)&&$.createElement(k.Z,{p:1},"The error below originates from"," ",$.createElement(t.dx,{entityRef:en.entity})),en.errors.map((cn,sn)=>$.createElement(m.Gk,{key:sn,error:cn})))))}const un="core.backstage.entitySwitch",ln=be=>null;(0,b.R5)(ln,un,!0);const tn=be=>{var at,vt;const{entity:Tt,loading:an}=(0,t.ce)(),Jt=(0,b.I_)(),en=(0,b.vJ)(be.children,cn=>cn.selectByComponentData({key:un,withStrictError:"Child of EntitySwitch is not an EntitySwitch.Case"}).getElements().flatMap(sn=>{if(an&&!Tt)return[];const{if:Rn,children:_n}=sn.props;return Tt?[{if:Rn==null?void 0:Rn(Tt,{apis:Jt}),children:_n}]:[{if:Rn===void 0,children:_n}]}),[Jt,Tt,an]);if(en.some(cn=>typeof cn.if=="object"&&"then"in cn.if))return $.createElement(Zt,{results:en,renderMultipleMatches:be.renderMultipleMatches});if(be.renderMultipleMatches==="all"){const cn=en.filter(sn=>sn.if).map(sn=>sn.children);return cn.length===0?Wt(en):$.createElement($.Fragment,null,cn)}return(vt=(at=en.find(cn=>cn.if))==null?void 0:at.children)!=null?vt:Wt(en)};function Zt({results:be,renderMultipleMatches:at}){const{loading:vt,value:Tt}=(0,$e.default)(async()=>{var an;const Jt=be.map(async({if:en,children:En})=>{try{if(await en)return En}catch{}return null});if(at==="all"){const en=(await Promise.all(Jt)).filter(Boolean);return en.length===0?Wt(be):$.createElement($.Fragment,null,en)}return(an=(await Promise.all(Jt)).find(Boolean))!=null?an:Wt(be)},[be]);return vt||!Tt?null:Tt}function Wt(be){var at,vt;return(vt=(at=be.filter(Tt=>Tt.if===void 0)[0])==null?void 0:at.children)!=null?vt:null}tn.Case=ln;function hn(be,at){return Boolean(be&&typeof be=="string"&&(be==null?void 0:be.toLocaleLowerCase("en-US"))===(at==null?void 0:at.toLocaleLowerCase("en-US")))}function gn(be,at){return typeof at=="string"?hn(be,at):at.length===0||at.some(vt=>hn(be,vt))}function yn(be){return An({kind:be})}function bn(be){return An({kind:"component",type:be})}function In(be){return An({kind:"resource",type:be})}function An(be){return at=>{var vt;return!(be.kind&&!gn(at.kind,be.kind)||be.type&&!gn((vt=at.spec)==null?void 0:vt.type,be.type))}}function On(be){return at=>{var vt;return gn((vt=at.metadata)==null?void 0:vt.namespace,be)}}const Sn=null,Dn=t._i.Filters,sr=t._i.Content,zn=`metadata:
  name: example
  labels:
    javaVersion: 1.2.3`,Dr=(0,w.Z)(be=>({code:{borderRadius:6,margin:be.spacing(2,0),background:be.palette.type==="dark"?"#444":be.palette.common.white}}),{name:"PluginCatalogEntityLabelsEmptyState"});function Vr(){const be=Dr();return $.createElement($.Fragment,null,$.createElement(N.Z,{variant:"body1"},"No labels defined for this entity. You can add labels to your entity YAML as shown in the highlighted example below:"),$.createElement("div",{className:be.code},$.createElement(m.Oi,{text:zn,language:"yaml",showLineNumbers:!0,highlightedNumbers:[3,4,5,6],customStyle:{background:"inherit",fontSize:"115%"}})),$.createElement(rn.Z,{variant:"contained",color:"primary",target:"_blank",href:"https://backstage.io/docs/features/software-catalog/descriptor-format#labels-optional"},"Read more"))}const Zr=(0,w.Z)(be=>({key:{fontWeight:"bold"}})),lr=be=>{var at;const{variant:vt,title:Tt}=be,{entity:an}=(0,t.X2)(),Jt=Zr(),en=[{render:cn=>$.createElement(N.Z,{className:Jt.key,variant:"body2"},cn.key)},{field:"value"}],En=(at=an==null?void 0:an.metadata)==null?void 0:at.labels;return $.createElement(m.rJ,{title:Tt||"Labels",variant:vt},!En||Object.keys(En).length===0?$.createElement(Vr,null):$.createElement(m.iA,{columns:en,data:Object.keys(En).map(cn=>({key:cn,value:En[cn]})),options:{search:!1,showTitle:!0,loadingType:"linear",header:!1,padding:"dense",pageSize:5,toolbar:!1,paging:Object.keys(En).length>5}}))};function Wr(be){var at,vt;return(at=be==null?void 0:be.metadata)!=null&&at.labels?Object.keys((vt=be==null?void 0:be.metadata)==null?void 0:vt.labels).some(Boolean):!1}const jn=(0,b.rx)({id:"catalog",apis:[(0,b.ni)({api:t.Ah,deps:{discoveryApi:b.NW,fetchApi:b.gP},factory:({discoveryApi:be,fetchApi:at})=>new Et.MS({discoveryApi:be,fetchApi:at})}),(0,b.ni)({api:t.p3,deps:{storageApi:b.E6},factory:({storageApi:be})=>new St({storageApi:be})})],routes:{catalogIndex:De,catalogEntity:t.wi},externalRoutes:{createComponent:Mt,viewTechDoc:Bt,createFromTemplate:Ee},__experimentalConfigure(be){return{...{createButtonTitle:"Create"},...be}}}),$r=jn.provide((0,b.P4)({name:"CatalogIndexPage",component:()=>e.e(9253).then(e.bind(e,59253)).then(be=>be.CatalogPage),mountPoint:De})),_r=jn.provide((0,b.P4)({name:"CatalogEntityPage",component:()=>e.e(9958).then(e.bind(e,39958)).then(be=>be.CatalogEntityPage),mountPoint:t.wi})),Lr=jn.provide((0,b.CO)({name:"EntityAboutCard",component:{lazy:()=>e.e(8608).then(e.bind(e,38608)).then(be=>be.AboutCard)}})),Ar=jn.provide((0,b.CO)({name:"EntityLinksCard",component:{lazy:()=>e.e(152).then(e.bind(e,50152)).then(be=>be.EntityLinksCard)}})),mr=jn.provide((0,b.CO)({name:"EntityLabelsCard",component:{lazy:()=>e.e(3489).then(e.bind(e,3489)).then(be=>be.EntityLabelsCard)}})),Br=jn.provide((0,b.CO)({name:"EntityHasSystemsCard",component:{lazy:()=>e.e(1901).then(e.bind(e,43629)).then(be=>be.HasSystemsCard)}})),br=jn.provide((0,b.CO)({name:"EntityHasComponentsCard",component:{lazy:()=>e.e(7128).then(e.bind(e,27128)).then(be=>be.HasComponentsCard)}})),Pr=jn.provide((0,b.CO)({name:"EntityHasSubcomponentsCard",component:{lazy:()=>e.e(9391).then(e.bind(e,19391)).then(be=>be.HasSubcomponentsCard)}})),Fn=jn.provide((0,b.CO)({name:"EntityHasResourcesCard",component:{lazy:()=>e.e(2071).then(e.bind(e,52071)).then(be=>be.HasResourcesCard)}})),wr=jn.provide((0,b.CO)({name:"EntityDependsOnComponentsCard",component:{lazy:()=>e.e(748).then(e.bind(e,20748)).then(be=>be.DependsOnComponentsCard)}})),Mr=jn.provide((0,b.CO)({name:"EntityDependencyOfComponentsCard",component:{lazy:()=>e.e(6146).then(e.bind(e,36146)).then(be=>be.DependencyOfComponentsCard)}})),Fr=jn.provide((0,b.CO)({name:"EntityDependsOnResourcesCard",component:{lazy:()=>e.e(7127).then(e.bind(e,47127)).then(be=>be.DependsOnResourcesCard)}})),Ur=jn.provide((0,b.CO)({name:"RelatedEntitiesCard",component:{lazy:()=>e.e(9489).then(e.bind(e,59489)).then(be=>be.RelatedEntitiesCard)}})),xr=jn.provide((0,dt.E5)({name:"CatalogSearchResultListItem",component:()=>e.e(638).then(e.bind(e,40638)).then(be=>be.CatalogSearchResultListItem),predicate:be=>be.type==="software-catalog"}))},16673:function(Dt,E,e){"use strict";e.d(E,{BL:function(){return n.o},Cy:function(){return n.m},Eq:function(){return n.u},Es:function(){return n.C},FZ:function(){return n.r},Hz:function(){return n.t},Kf:function(){return n.H},PA:function(){return n.v},Tu:function(){return n.e},_l:function(){return n.F},bM:function(){return n.g},dN:function(){return n.d},f2:function(){return n.p},im:function(){return n.z},jF:function(){return n.j},mr:function(){return n.y},o6:function(){return n.k},oU:function(){return n.n},p$:function(){return n.B},rR:function(){return n.f},yf:function(){return n.l}});var n=e(36215),d=e(82394),p=e.n(d),i=e(34520),c=e(76635),m=e.n(c),b=e(80236),R=e(30705),t=e(49462),U=e(64304),w=e(67898),N=e(2784),K=e(19928),k=e.n(K),H=e(52963),C=e(75650),v=e(32272),F=e(88285),g=e(92573)},42214:function(Dt,E,e){"use strict";e.d(E,{IJ:function(){return je},Oz:function(){return _},Q3:function(){return it},fX:function(){return st},i4:function(){return We}});var n=e(30705),d=e(1854),p=e(89393),i=e(49462),c=e(2784),m=e(64304),b=e(39857),R=e(73557),t=e(79692),U=e(27616),w=e(8284),N=e(90436),K=e(4614),k=e(80030),H=e(69087),C=e(35111),v=e(14498),F=e(89571),g=e(15584),J=e(49378),x=e(70660),B=e(91256),T=e(37390),S=e(95544),ie=e(67358),Te=e(27556),Pe=e(97485),qe=e(61837),xe=e(77277),ke=e(38016),rt=e(69001),Kt=e(26228),Nt=e(80236),rn=e(64279),D=e(30254),we=e(34520),ue=e(82717),Ke=e.n(ue),$=e(43266),A=e(58838),z=e(77446),ae=e(26883);const $e=(0,n.T0)({id:"plugin.githubactions.service"});var Ge=Object.defineProperty,ft=(h,M,X)=>M in h?Ge(h,M,{enumerable:!0,configurable:!0,writable:!0,value:X}):h[M]=X,nt=(h,M,X)=>(ft(h,typeof M!="symbol"?M+"":M,X),X);class Rt{constructor(M){nt(this,"configApi"),nt(this,"scmAuthApi"),this.configApi=M.configApi,this.scmAuthApi=M.scmAuthApi}async getOctokit(M="github.com"){var X;const{token:j}=await this.scmAuthApi.getCredentials({url:`https://${M}/`,additionalScope:{customScopes:{github:["repo"]}}}),oe=(0,d.MY)((X=this.configApi.getOptionalConfigArray("integrations.github"))!=null?X:[]).find(Ue=>Ue.host===M),se=oe==null?void 0:oe.apiBaseUrl;return new p.v({auth:j,baseUrl:se})}async reRunWorkflow(M){const{hostname:X,owner:j,repo:Z,runId:oe}=M;return(await this.getOctokit(X)).actions.reRunWorkflow({owner:j,repo:Z,run_id:oe})}async listWorkflowRuns(M){const{hostname:X,owner:j,repo:Z,pageSize:oe=100,page:se=0,branch:Ue}=M;return(await(await this.getOctokit(X)).actions.listWorkflowRunsForRepo({owner:j,repo:Z,per_page:oe,page:se,...Ue?{branch:Ue}:{}})).data}async getWorkflow(M){const{hostname:X,owner:j,repo:Z,id:oe}=M;return(await(await this.getOctokit(X)).actions.getWorkflow({owner:j,repo:Z,workflow_id:oe})).data}async getWorkflowRun(M){const{hostname:X,owner:j,repo:Z,id:oe}=M;return(await(await this.getOctokit(X)).actions.getWorkflowRun({owner:j,repo:Z,run_id:oe})).data}async listJobsForWorkflowRun(M){const{hostname:X,owner:j,repo:Z,id:oe,pageSize:se=100,page:Ue=0}=M;return(await(await this.getOctokit(X)).actions.listJobsForWorkflowRun({owner:j,repo:Z,run_id:oe,per_page:se,page:Ue})).data}async downloadJobLogsForWorkflowRun(M){const{hostname:X,owner:j,repo:Z,runId:oe}=M;return(await(await this.getOctokit(X)).actions.downloadJobLogsForWorkflowRun({owner:j,repo:Z,job_id:oe})).data}}var q=(h=>(h[h.success=0]="success",h[h.failure=1]="failure",h[h.pending=2]="pending",h[h.running=3]="running",h))(q||{});const de=(0,n.NT)({id:"github-actions"}),Se=(0,n.Rz)({id:"github-actions/build",path:"/:id",parent:de}),Ne=(0,n.rx)({id:"github-actions",apis:[(0,n.ni)({api:$e,deps:{configApi:n.Ds,scmAuthApi:i.Om},factory:({configApi:h,scmAuthApi:M})=>new Rt({configApi:h,scmAuthApi:M})})],routes:{entityContent:de}}),st=Ne.provide((0,n.P4)({name:"EntityGithubActionsContent",component:()=>Promise.resolve().then(function(){return zt}).then(h=>h.Router),mountPoint:de})),pe=Ne.provide((0,n.CO)({name:"EntityLatestGithubActionRunCard",component:{lazy:()=>e.e(3530).then(e.bind(e,93530)).then(h=>h.LatestWorkflowRunCard)}})),Je=Ne.provide((0,n.CO)({name:"EntityLatestGithubActionsForBranchCard",component:{lazy:()=>e.e(3530).then(e.bind(e,93530)).then(h=>h.LatestWorkflowsForBranchCard)}})),ot=Ne.provide((0,n.CO)({name:"EntityRecentGithubActionsRunsCard",component:{lazy:()=>e.e(3530).then(e.bind(e,93530)).then(h=>h.RecentWorkflowRunsCard)}})),Qe="github.com/project-slug",Et=h=>{var M,X;return(X=(M=h==null?void 0:h.metadata.annotations)==null?void 0:M[Qe])!=null?X:""},dt=({status:h,conclusion:M})=>{if(h===void 0)return null;switch(h.toLocaleLowerCase("en-US")){case"queued":return c.createElement(c.Fragment,null,c.createElement(Nt.wA,null)," Queued");case"in_progress":return c.createElement(c.Fragment,null,c.createElement(Nt.VC,null)," In progress");case"completed":switch(M==null?void 0:M.toLocaleLowerCase("en-US")){case"skipped":return c.createElement(c.Fragment,null,c.createElement(Nt.dh,null)," Aborted");case"timed_out":return c.createElement(c.Fragment,null,c.createElement(Nt.Pd,null)," Timed out");case"failure":return c.createElement(c.Fragment,null,c.createElement(Nt.vK,null)," Error");default:return c.createElement(c.Fragment,null,c.createElement(Nt.Kq,null)," Completed")}default:return c.createElement(c.Fragment,null,c.createElement(Nt.wA,null)," Pending")}},Vt=({hostname:h,owner:M,repo:X})=>{const j=(0,n.h_)($e),{id:Z}=(0,n.Oi)(Se);return(0,rn.default)(async()=>{if(!X||!M)throw new Error("No repo/owner provided");const oe=await j.listJobsForWorkflowRun({hostname:h,owner:M,repo:X,id:parseInt(Z,10)});return{total_count:oe.total_count,jobs:oe.jobs.map(se=>{var Ue,lt,ne,ce;return{html_url:(Ue=se.html_url)!=null?Ue:void 0,status:se.status,conclusion:(lt=se.conclusion)!=null?lt:void 0,started_at:se.started_at,completed_at:(ne=se.completed_at)!=null?ne:void 0,id:se.id,name:se.name,steps:(ce=se.steps)==null?void 0:ce.map(Ce=>{var Y,te,me;return{name:Ce.name,status:Ce.status,conclusion:(Y=Ce.conclusion)!=null?Y:void 0,number:Ce.number,started_at:(te=Ce.started_at)!=null?te:void 0,completed_at:(me=Ce.completed_at)!=null?me:void 0}})}})}},[X,M,Z])},jt=({hostname:h,owner:M,repo:X})=>{const j=(0,n.h_)($e),{id:Z}=(0,n.Oi)(Se);return(0,rn.default)(async()=>X&&M?j.getWorkflowRun({hostname:h,owner:M,repo:X,id:parseInt(Z,10)}):Promise.reject(new Error("No repo/owner provided")),[X,M,Z])},Ht=({hostname:h,owner:M,repo:X,id:j})=>{const Z=(0,n.h_)($e);return(0,rn.default)(async()=>X&&M?Z.downloadJobLogsForWorkflowRun({hostname:h,owner:M,repo:X,runId:j}):Promise.reject("No repo/owner provided"),[X,M,j])},Ye=h=>{var M,X,j;const Z=(j=(M=h==null?void 0:h.metadata.annotations)==null?void 0:M[we.M6])!=null?j:(X=h==null?void 0:h.metadata.annotations)==null?void 0:X[we.P1];return Z!=null&&Z.startsWith("url:")?Ke()(Z.slice(4)).resource:void 0},St=(0,t.Z)(h=>({button:{order:-1,marginRight:0,marginLeft:"-20px"},modal:{display:"flex",alignItems:"center",width:"85%",height:"85%",justifyContent:"center",margin:"auto"},normalLogContainer:{height:"75vh",width:"100%"},modalLogContainer:{height:"100%",width:"100%"},log:{background:h.palette.background.default}})),Mt=({entity:h,runId:M,inProgress:X})=>{const j=St(),Z=Et(h),oe=Ye(h),[se,Ue]=Z&&Z.split("/")||[],lt=Ht({hostname:oe,owner:se,repo:Ue,id:M}),ne=lt.value?String(lt.value):void 0,[ce,Ce]=c.useState(!1),Y=()=>{Ce(!0)},te=()=>{Ce(!1)};return c.createElement(U.Z,{TransitionProps:{unmountOnExit:!0},disabled:X},c.createElement(w.Z,{expandIcon:c.createElement(ke.Z,null),IconButtonProps:{className:j.button}},c.createElement(N.Z,{variant:"button"},lt.loading?c.createElement(K.Z,null):"Job Log"),c.createElement(k.ZP,{title:"Open Log",TransitionComponent:H.Z,arrow:!0},c.createElement(D.Z,{onClick:me=>{me.stopPropagation(),Y()},style:{marginLeft:"auto"}})),c.createElement(C.Z,{className:j.modal,onClick:me=>me.stopPropagation(),open:ce,onClose:te},c.createElement(v.Z,{in:ce},c.createElement("div",{className:j.modalLogContainer},c.createElement(Nt.nU,{text:ne!=null?ne:"No Values Found",classes:{root:j.log}}))))),ne&&c.createElement("div",{className:j.normalLogContainer},c.createElement(Nt.nU,{text:ne,classes:{root:j.log}})))},Bt=(0,t.Z)(h=>({root:{maxWidth:720,margin:h.spacing(2)},title:{padding:h.spacing(1,0,2,0)},table:{padding:h.spacing(1)},accordionDetails:{padding:0},button:{order:-1,marginRight:0,marginLeft:"-20px"},externalLinkIcon:{fontSize:"inherit",verticalAlign:"bottom"}})),Ee=(h,M)=>{if(!h||!M)return"";const X=Kt.ou.fromISO(h);return(M?Kt.ou.fromISO(M):Kt.ou.now()).diff(X).toFormat("m 'minutes' s 'seconds'")},De=({step:h})=>{var M;return c.createElement(F.Z,null,c.createElement(g.Z,null,c.createElement(J.Z,{primary:h.name,secondary:Ee(h.started_at,h.completed_at)})),c.createElement(g.Z,null,c.createElement(dt,{status:h.status.toLocaleUpperCase("en-US"),conclusion:(M=h.conclusion)==null?void 0:M.toLocaleUpperCase("en-US")})))},ct=({job:h,className:M,entity:X})=>{var j;const Z=Bt();return c.createElement(U.Z,{TransitionProps:{unmountOnExit:!0},className:M},c.createElement(w.Z,{expandIcon:c.createElement(ke.Z,null),IconButtonProps:{className:Z.button}},c.createElement(N.Z,{variant:"button"},h.name," (",Ee(h.started_at,h.completed_at),")")),c.createElement(x.Z,{className:Z.accordionDetails},c.createElement(B.Z,null,c.createElement(T.Z,null,(j=h.steps)==null?void 0:j.map(oe=>c.createElement(De,{key:oe.number,step:oe}))))),h.status==="queued"||h.status==="in_progress"?c.createElement(Mt,{runId:h.id,inProgress:!0,entity:X}):c.createElement(Mt,{runId:h.id,inProgress:!1,entity:X}))},Ve=({jobs:h,entity:M})=>{const X=Bt();return c.createElement(S.Z,null,h&&h.total_count>0&&h.jobs.map(j=>c.createElement(ct,{key:j.id,job:j,className:j.status!=="success"?X.failed:X.success,entity:M})))},yt=({entity:h})=>{var M,X,j,Z,oe,se,Ue,lt,ne,ce,Ce,Y,te,me,Ie;const Le=Et(h),bt=Ye(h),[ut,Ut]=Le&&Le.split("/")||[],wt=jt({hostname:bt,owner:ut,repo:Ut}),kt=Vt({hostname:bt,owner:ut,repo:Ut}),Qt=Bt();return wt.error&&wt.error.message?c.createElement(N.Z,{variant:"h6",color:"error"},"Failed to load build, ",wt.error.message):wt.loading?c.createElement(ie.Z,null):c.createElement("div",{className:Qt.root},c.createElement(S.Z,{mb:3},c.createElement(Nt.Oo,{"aria-label":"breadcrumb"},c.createElement(Nt.rU,{to:".."},"Workflow runs"),c.createElement(N.Z,null,"Workflow run details"))),c.createElement(B.Z,{component:Te.Z,className:Qt.table},c.createElement(T.Z,null,c.createElement(Pe.Z,null,c.createElement(F.Z,null,c.createElement(g.Z,null,c.createElement(N.Z,{noWrap:!0},"Branch")),c.createElement(g.Z,null,(M=wt.value)==null?void 0:M.head_branch)),c.createElement(F.Z,null,c.createElement(g.Z,null,c.createElement(N.Z,{noWrap:!0},"Message")),c.createElement(g.Z,null,(j=(X=wt.value)==null?void 0:X.head_commit)==null?void 0:j.message)),c.createElement(F.Z,null,c.createElement(g.Z,null,c.createElement(N.Z,{noWrap:!0},"Commit ID")),c.createElement(g.Z,null,(oe=(Z=wt.value)==null?void 0:Z.head_commit)==null?void 0:oe.id)),c.createElement(F.Z,null,c.createElement(g.Z,null,c.createElement(N.Z,{noWrap:!0},"Workflow")),c.createElement(g.Z,null,(se=wt.value)==null?void 0:se.name)),c.createElement(F.Z,null,c.createElement(g.Z,null,c.createElement(N.Z,{noWrap:!0},"Status")),c.createElement(g.Z,null,c.createElement(dt,{status:((Ue=wt.value)==null?void 0:Ue.status)||void 0,conclusion:((lt=wt.value)==null?void 0:lt.conclusion)||void 0}))),c.createElement(F.Z,null,c.createElement(g.Z,null,c.createElement(N.Z,{noWrap:!0},"Author")),c.createElement(g.Z,null,`${(Ce=(ce=(ne=wt.value)==null?void 0:ne.head_commit)==null?void 0:ce.author)==null?void 0:Ce.name} (${(me=(te=(Y=wt.value)==null?void 0:Y.head_commit)==null?void 0:te.author)==null?void 0:me.email})`)),c.createElement(F.Z,null,c.createElement(g.Z,null,c.createElement(N.Z,{noWrap:!0},"Links")),c.createElement(g.Z,null,((Ie=wt.value)==null?void 0:Ie.html_url)&&c.createElement(Nt.rU,{to:wt.value.html_url},"Workflow runs on GitHub"," ",c.createElement(rt.Z,{className:Qt.externalLinkIcon})))),c.createElement(F.Z,null,c.createElement(g.Z,{colSpan:2},c.createElement(N.Z,{noWrap:!0},"Jobs"),kt.loading?c.createElement(K.Z,null):c.createElement(Ve,{jobs:kt.value,entity:h})))))))};function ye({hostname:h,owner:M,repo:X,branch:j,initialPageSize:Z=5}){const oe=(0,n.h_)($e),se=(0,n.h_)(n.VE),[Ue,lt]=(0,c.useState)(0),[ne,ce]=(0,c.useState)(0),[Ce,Y]=(0,c.useState)(Z),{loading:te,value:me,retry:Ie,error:Le}=(0,z.Z)(async()=>{const bt=await oe.listWorkflowRuns({hostname:h,owner:M,repo:X,pageSize:Ce,page:ne+1,branch:j});return lt(bt.total_count),bt.workflow_runs.map(ut=>{var Ut,wt,kt,Qt,un,ln,tn,Zt,Wt;return{workflowName:(Ut=ut.name)!=null?Ut:void 0,message:(wt=ut.head_commit)==null?void 0:wt.message,id:`${ut.id}`,onReRunClick:async()=>{try{await oe.reRunWorkflow({hostname:h,owner:M,repo:X,runId:ut.id})}catch(hn){se.post(new Error(`Failed to rerun the workflow: ${hn.message}`))}},source:{branchName:(kt=ut.head_branch)!=null?kt:void 0,commit:{hash:(Qt=ut.head_commit)==null?void 0:Qt.id,url:(tn=(un=ut.head_repository)==null?void 0:un.branches_url)==null?void 0:tn.replace("{/branch}",(ln=ut.head_branch)!=null?ln:"")}},status:(Zt=ut.status)!=null?Zt:void 0,conclusion:(Wt=ut.conclusion)!=null?Wt:void 0,url:ut.url,githubUrl:ut.html_url}})},[ne,Ce,X,M]);return[{page:ne,pageSize:Ce,loading:te,runs:me,projectName:`${M}/${X}`,total:Ue,error:Le},{runs:me,setPage:ce,setPageSize:Y,retry:Ie}]}const mt=[{title:"ID",field:"id",type:"numeric",width:"150px"},{title:"Message",field:"message",highlight:!0,render:h=>{const M=()=>{const X=(0,n.tg)(Se);return c.createElement(Nt.rU,{component:b.rU,to:X({id:h.id})},h.message)};return c.createElement(M,null)}},{title:"Source",render:h=>{var M,X;return c.createElement(N.Z,{variant:"body2",noWrap:!0},c.createElement(N.Z,{paragraph:!0,variant:"body2"},(M=h.source)==null?void 0:M.branchName),c.createElement(N.Z,{paragraph:!0,variant:"body2"},(X=h.source)==null?void 0:X.commit.hash))}},{title:"Workflow",field:"workflowName"},{title:"Status",width:"150px",render:h=>c.createElement(S.Z,{display:"flex",alignItems:"center"},c.createElement(dt,{status:h.status,conclusion:h.conclusion}))},{title:"Actions",render:h=>c.createElement(k.ZP,{title:"Rerun workflow"},c.createElement(qe.Z,{onClick:h.onReRunClick},c.createElement($.Z,null))),width:"10%"}],Ct=({projectName:h,loading:M,pageSize:X,page:j,retry:Z,runs:oe,onChangePage:se,onChangePageSize:Ue,total:lt})=>c.createElement(Nt.iA,{isLoading:M,options:{paging:!0,pageSize:X,padding:"dense"},totalCount:lt,page:j,actions:[{icon:()=>c.createElement(ae.Z,null),tooltip:"Reload workflow runs",isFreeAction:!0,onClick:()=>Z()}],data:oe!=null?oe:[],onPageChange:se,onRowsPerPageChange:Ue,style:{width:"100%"},title:c.createElement(S.Z,{display:"flex",alignItems:"center"},c.createElement(A.Z,null),c.createElement(S.Z,{mr:1}),c.createElement(N.Z,{variant:"h6"},h)),columns:mt}),_t=({entity:h,branch:M})=>{const X=Et(h),j=Ye(h),[Z,oe]=(X!=null?X:"/").split("/"),[{runs:se,...Ue},{retry:lt,setPage:ne,setPageSize:ce}]=ye({hostname:j,owner:Z,repo:oe,branch:M}),Ce=j||"github.com";return!Ue.loading&&!se?c.createElement(Nt.ub,{missing:"data",title:"No Workflow Data",description:"This component has GitHub Actions enabled, but no data was found. Have you created any Workflows? Click the button below to create a new Workflow.",action:c.createElement(xe.Z,{variant:"contained",color:"primary",href:`https://${Ce}/${X}/actions/new`},"Create new Workflow")}):c.createElement(Ct,{...Ue,runs:se,loading:Ue.loading,retry:lt,onChangePageSize:ce,onChangePage:ne})},it=h=>{var M;return Boolean((M=h.metadata.annotations)==null?void 0:M[Qe])};var zt=Object.freeze({__proto__:null,isGithubActionsAvailable:it,Router:()=>{const{entity:h}=(0,m.X2)();return it(h)?c.createElement(R.Z5,null,c.createElement(R.AW,{path:"/",element:c.createElement(_t,{entity:h})}),c.createElement(R.AW,{path:`${Se.path}`,element:c.createElement(yt,{entity:h})}),")"):c.createElement(Nt.sk,{annotation:Qe})}});const ze=(0,t.Z)({externalLinkIcon:{fontSize:"inherit",verticalAlign:"bottom"}}),Re=h=>{var M;const{error:X,loading:j,lastRun:Z,branch:oe}=h,se=ze();return X?c.createElement(N.Z,null,"Couldn't fetch latest ",oe," run"):j?c.createElement(ie.Z,null):c.createElement(Nt.xT,{metadata:{status:c.createElement(c.Fragment,null,c.createElement(dt,{status:Z.status,conclusion:Z.conclusion})),message:Z.message,url:c.createElement(Nt.rU,{to:(M=Z.githubUrl)!=null?M:""},"See more on GitHub"," ",c.createElement(rt.Z,{className:se.externalLinkIcon}))}})},We=h=>{var M,X,j;const{branch:Z="master",variant:oe}=h,{entity:se}=(0,m.X2)(),Ue=(0,n.h_)(n.VE),lt=Ye(se),[ne,ce]=((X=(M=se==null?void 0:se.metadata.annotations)==null?void 0:M[Qe])!=null?X:"/").split("/"),[{runs:Ce,loading:Y,error:te}]=ye({hostname:lt,owner:ne,repo:ce,branch:Z}),me=(j=Ce==null?void 0:Ce[0])!=null?j:{};return(0,c.useEffect)(()=>{te&&Ue.post(te)},[te,Ue]),c.createElement(Nt.rJ,{title:`Last ${Z} build`,variant:oe},c.createElement(Re,{error:te,loading:Y,branch:Z,lastRun:me}))},je=h=>{const{branch:M="master",variant:X}=h,{entity:j}=(0,m.X2)();return c.createElement(Nt.rJ,{title:`Last ${M} build`,variant:X},c.createElement(_t,{branch:M,entity:j}))},W=h=>h.split(`
`)[0],_=h=>{var M,X;const{branch:j,dense:Z=!1,limit:oe=5,variant:se}=h,{entity:Ue}=(0,m.X2)(),lt=(0,n.h_)(n.VE),ne=Ye(Ue),[ce,Ce]=((X=(M=Ue==null?void 0:Ue.metadata.annotations)==null?void 0:M[Qe])!=null?X:"/").split("/"),[{runs:Y=[],loading:te,error:me}]=ye({hostname:ne,owner:ce,repo:Ce,branch:j,initialPageSize:oe});(0,c.useEffect)(()=>{me&&lt.post(me)},[me,lt]);const Ie=ne||"github.com",Le=(0,n.tg)(Se);return me?c.createElement(Nt.yu,{title:me.message,error:me}):c.createElement(Nt.rJ,{title:"Recent Workflow Runs",subheader:j?`Branch: ${j}`:"All Branches",noPadding:!0,variant:se},Y.length?c.createElement(Nt.iA,{isLoading:te,options:{search:!1,paging:!1,padding:Z?"dense":"default",toolbar:!1},columns:[{title:"Commit Message",field:"message",render:bt=>{var ut;return c.createElement(Nt.rU,{component:b.rU,to:Le({id:bt.id})},W((ut=bt.message)!=null?ut:""))}},{title:"Branch",field:"source.branchName"},{title:"Status",field:"status",render:dt}],data:Y}):c.createElement("div",{style:{textAlign:"center"}},c.createElement(N.Z,{variant:"body1"},"This component has GitHub Actions enabled, but no workflows were found."),c.createElement(N.Z,{variant:"body2"},c.createElement(Nt.rU,{to:`https://${Ie}/${ce}/${Ce}/actions/new`},"Create a new workflow"))))}},59235:function(Dt,E,e){"use strict";e.d(E,{$M:function(){return Ke},Eg:function(){return A},Jh:function(){return Je},Yq:function(){return Mt},jJ:function(){return Bt},jQ:function(){return z},oy:function(){return st},qJ:function(){return q},rw:function(){return $},w1:function(){return ue}});var n=e(30705),d=e(34520),p=e(64304),i=e(79692),c=e(12420),m=e(60905),b=e(95544),R=e(90436),t=e(82938),U=e(38402),w=e(86136),N=e(49378),K=e(85256),k=e(61837),H=e(11776),C=e(80030),v=e(9520),F=e(76637),g=e(2784),J=e(64279),x=e(80236),B=e(73655),T=e(99688),S=e(52866),ie=e(27604),Te=e(13384),Pe=e(62367),qe=e(52160),xe=e(98685),ke=e(19928),rt=e.n(ke),Kt=e(14162),Nt=e.n(Kt),rn=e(19126),D=e.n(rn);const we=(0,n.x8)({id:"catalog-index"}),ue=(0,n.rx)({id:"org",externalRoutes:{catalogIndex:we}}),Ke=ue.provide((0,n.CO)({name:"EntityGroupProfileCard",component:{lazy:()=>e.e(5620).then(e.bind(e,65620)).then(Ee=>Ee.GroupProfileCard)}})),$=ue.provide((0,n.CO)({name:"EntityMembersListCard",component:{lazy:()=>e.e(5620).then(e.bind(e,65620)).then(Ee=>Ee.MembersListCard)}})),A=ue.provide((0,n.CO)({name:"EntityOwnershipCard",component:{lazy:()=>e.e(5620).then(e.bind(e,65620)).then(Ee=>Ee.OwnershipCard)}})),z=ue.provide((0,n.CO)({name:"EntityUserProfileCard",component:{lazy:()=>e.e(5620).then(e.bind(e,65620)).then(Ee=>Ee.UserProfileCard)}})),ae=async(Ee,De)=>(Ee.length===0?{items:[]}:await De.getEntities({filter:{kind:"User","relations.memberof":Ee.map(Ve=>(0,d.eE)({kind:"group",namespace:Ve.namespace.toLocaleLowerCase("en-US"),name:Ve.name.toLocaleLowerCase("en-US")}))}})).items,$e=async(Ee,De)=>{var ct;const Ve=new Map,ye=[{kind:Ee.kind,namespace:(ct=Ee.metadata.namespace)!=null?ct:d.zG,name:Ee.metadata.name}],mt=[];for(;ye.length>0;){const Ct=ye.shift(),_t=await De.getEntityByRef(Ct);Ve.set((0,d.eE)(Ct),!0);const it=(0,p.hF)(_t,d._b,{kind:"Group"}).filter(At=>!Ve.has((0,d.eE)(At)));it.forEach(At=>Ve.set((0,d.eE)(At),!0)),ye.push(...it),mt.push(...it)}return mt},Ge=async(Ee,De)=>ae(await $e(Ee,De),De),ft=Ee=>{const De=new Map;return Ee.filter(ct=>{const Ve=(0,d.eE)(ct),yt=De.has(Ve);return De.set(Ve,!0),!yt})},nt=(0,i.Z)(Ee=>(0,c.Z)({card:{border:`1px solid ${Ee.palette.divider}`,boxShadow:Ee.shadows[2],borderRadius:"4px",overflow:"visible",position:"relative",margin:Ee.spacing(4,1,1),flex:"1",minWidth:"0px"}})),Rt=Ee=>{var De;const ct=nt(),{metadata:{name:Ve,description:yt},spec:{profile:ye}}=Ee.member,mt=(De=ye==null?void 0:ye.displayName)!=null?De:Ve;return g.createElement(m.Z,{item:!0,container:!0,xs:12,sm:6,md:4,xl:2},g.createElement(b.Z,{className:ct.card},g.createElement(b.Z,{display:"flex",flexDirection:"column",m:3,alignItems:"center",justifyContent:"center"},g.createElement(x.qE,{displayName:mt,picture:ye==null?void 0:ye.picture,customStyles:{position:"absolute",top:"-2rem"}}),g.createElement(b.Z,{pt:2,sx:{width:"100%"},textAlign:"center"},g.createElement(R.Z,{variant:"h6"},g.createElement(p.dx,{"data-testid":"user-link",entityRef:Ee.member,title:mt})),(ye==null?void 0:ye.email)&&g.createElement(x.rU,{to:`mailto:${ye.email}`},g.createElement(x.Or,{text:ye.email})),yt&&g.createElement(R.Z,{variant:"subtitle2"},yt)))))},q=Ee=>{var De;const{memberDisplayTitle:ct="Members",pageSize:Ve=50,showAggregateMembersToggle:yt}=Ee,{entity:ye}=(0,p.X2)(),{metadata:{name:mt,namespace:Ct},spec:{profile:_t}}=ye,it=(0,n.h_)(p.Ah),At=(De=_t==null?void 0:_t.displayName)!=null?De:mt,zt=Ct||d.zG,[ze,Re]=g.useState(1),We=(lt,ne)=>{Re(ne)},[je,W]=(0,g.useState)(!1),{loading:_,value:h}=(0,J.default)(async()=>yt?await Ge(ye,it):[],[it,ye,yt]),{loading:M,error:X,value:j}=(0,J.default)(async()=>(await it.getEntities({filter:{kind:"User","relations.memberof":[(0,d.eE)({kind:"group",namespace:zt.toLocaleLowerCase("en-US"),name:mt.toLocaleLowerCase("en-US")})]}})).items,[it,ye]),Z=ft([...j!=null?j:[],...h&&je?h:[]].sort((lt,ne)=>(0,d.eE)(lt).localeCompare((0,d.eE)(ne))));if(M)return g.createElement(x.Ex,null);if(X)return g.createElement(x.Gk,{error:X});const oe=Math.ceil(((Z==null?void 0:Z.length)||0)/Ve),se=oe<2?"":`, page ${ze} of ${oe}`,Ue=g.createElement(F.Z,{count:oe,page:ze,onChange:We,showFirstButton:!0,showLastButton:!0});return g.createElement(m.Z,{item:!0},g.createElement(x.rJ,{title:`${ct} (${(Z==null?void 0:Z.length)||0}${se})`,subheader:`of ${At}`,...oe<=1?{}:{actions:Ue}},yt&&g.createElement(g.Fragment,null,"Direct Members",g.createElement(t.Z,{color:"primary",checked:je,onChange:()=>{W(!je)},inputProps:{"aria-label":"Users Type Switch"}}),"Aggregated Members"),je&&_?g.createElement(x.Ex,null):g.createElement(m.Z,{container:!0,spacing:3},Z&&Z.length>0?Z.slice(Ve*(ze-1),Ve*ze).map(lt=>g.createElement(Rt,{member:lt,key:lt.metadata.uid})):g.createElement(b.Z,{p:2},g.createElement(R.Z,null,"This group has no ",ct.toLocaleLowerCase(),".")))))},de=({href:Ee,Icon:De,text:ct})=>g.createElement(U.Z,{key:Ee},g.createElement(w.Z,null,De?g.createElement(De,null):g.createElement(qe.Z,null)),g.createElement(N.Z,null,g.createElement(x.rU,{to:Ee},ct))),Se=({links:Ee})=>{const De=(0,n.qD)(),ct=Ve=>{var yt;return Ve&&(yt=De.getSystemIcon(Ve))!=null?yt:qe.Z};return Ee===void 0?null:g.createElement(g.Fragment,null,g.createElement(K.Z,null),Ee.map(Ve=>g.createElement(de,{key:Ve.url,href:Ve.url,text:Ve.title,Icon:ct(Ve.icon)})))},Ne=Ee=>g.createElement(b.Z,{display:"flex",alignItems:"center"},g.createElement(Pe.Z,{fontSize:"inherit"}),g.createElement(b.Z,{ml:1},Ee.title)),st=Ee=>{var De,ct,Ve;const yt=(0,n.h_)(p.Ah),ye=(0,n.h_)(n.$v),{entity:mt}=(0,p.X2)(),Ct=(0,g.useCallback)(async()=>{await yt.refreshEntity((0,d.eE)(mt)),ye.post({message:"Refresh scheduled",severity:"info",display:"transient"})},[yt,ye,mt]);if(!mt)return g.createElement(T.Z,{severity:"error"},"Group not found");const{metadata:{name:_t,description:it,title:At,annotations:zt,links:ze},spec:{profile:Re}}=mt,We=(0,p.hF)(mt,d._b,{kind:"Group"}),je=(0,p.hF)(mt,d.wP,{kind:"group"}),W=zt==null?void 0:zt[d.P1],_=(W==null?void 0:W.startsWith("url:"))||(W==null?void 0:W.startsWith("file:")),h=(De=mt.metadata.annotations)==null?void 0:De[d.Tf],M=(Ve=(ct=Re==null?void 0:Re.displayName)!=null?ct:At)!=null?Ve:_t,X=Re!=null&&Re.email?`mailto:${Re.email}`:"#",j=h?g.createElement(k.Z,{"aria-label":"Edit",title:"Edit Metadata",component:x.rU,to:h},g.createElement(ie.Z,null)):g.createElement(k.Z,{"aria-label":"Edit",disabled:!0,title:"Edit Metadata"},g.createElement(ie.Z,null));return g.createElement(x.rJ,{title:g.createElement(Ne,{title:M}),subheader:it,variant:Ee.variant,action:g.createElement(g.Fragment,null,_&&g.createElement(k.Z,{"aria-label":"Refresh",title:"Schedule entity refresh",onClick:Ct},g.createElement(S.Z,null)),j)},g.createElement(m.Z,{container:!0,spacing:3},g.createElement(m.Z,{item:!0,xs:12,sm:2,xl:1},g.createElement(x.qE,{displayName:M,picture:Re==null?void 0:Re.picture})),g.createElement(m.Z,{item:!0,md:10,xl:11},g.createElement(H.Z,null,(Re==null?void 0:Re.email)&&g.createElement(U.Z,null,g.createElement(w.Z,null,g.createElement(C.ZP,{title:"Email"},g.createElement(Te.Z,null))),g.createElement(N.Z,{primary:g.createElement(x.rU,{to:X},Re.email),secondary:"Email"})),g.createElement(U.Z,null,g.createElement(w.Z,null,g.createElement(C.ZP,{title:"Parent Group"},g.createElement(B.Z,null))),g.createElement(N.Z,{primary:je.length?g.createElement(p.rI,{entityRefs:je,defaultKind:"Group"}):"N/A",secondary:"Parent Group"})),g.createElement(U.Z,null,g.createElement(w.Z,null,g.createElement(C.ZP,{title:"Child Groups"},g.createElement(Pe.Z,null))),g.createElement(N.Z,{primary:We.length?g.createElement(p.rI,{entityRefs:We,defaultKind:"Group"}):"N/A",secondary:"Child Groups"})),(Ee==null?void 0:Ee.showLinks)&&g.createElement(Se,{links:ze})))))},pe=Ee=>Ee.title?g.createElement(b.Z,{display:"flex",alignItems:"center"},g.createElement(xe.Z,{fontSize:"inherit"}),g.createElement(b.Z,{ml:1},Ee.title)):null,Je=Ee=>{var De,ct;const{entity:Ve}=(0,p.X2)();if(!Ve)return g.createElement(T.Z,{severity:"error"},"User not found");const yt=(De=Ve.metadata.annotations)==null?void 0:De[d.Tf],{metadata:{name:ye,description:mt,links:Ct},spec:{profile:_t}}=Ve,it=(ct=_t==null?void 0:_t.displayName)!=null?ct:ye,At=_t!=null&&_t.email?`mailto:${_t.email}`:void 0,zt=(0,p.hF)(Ve,d.hr,{kind:"Group"});return g.createElement(x.rJ,{title:g.createElement(pe,{title:it}),subheader:mt,variant:Ee.variant,action:g.createElement(g.Fragment,null,yt&&g.createElement(k.Z,{"aria-label":"Edit",title:"Edit Metadata",component:x.rU,to:yt},g.createElement(ie.Z,null)))},g.createElement(m.Z,{container:!0,spacing:3,alignItems:"flex-start"},g.createElement(m.Z,{item:!0,xs:12,sm:2,xl:1},g.createElement(x.qE,{displayName:it,picture:_t==null?void 0:_t.picture})),g.createElement(m.Z,{item:!0,md:10,xl:11},g.createElement(H.Z,null,(_t==null?void 0:_t.email)&&g.createElement(U.Z,null,g.createElement(w.Z,null,g.createElement(C.ZP,{title:"Email"},g.createElement(Te.Z,null))),g.createElement(N.Z,null,g.createElement(x.rU,{to:At!=null?At:""},_t.email))),g.createElement(U.Z,null,g.createElement(w.Z,null,g.createElement(C.ZP,{title:"Member of"},g.createElement(Pe.Z,null))),g.createElement(N.Z,null,g.createElement(p.rI,{entityRefs:zt,defaultKind:"Group"}))),(Ee==null?void 0:Ee.showLinks)&&g.createElement(Se,{links:Ct})))))},ot=Nt()(10),Qe=(Ee,De)=>{const{kind:ct,type:Ve}=De,yt=Ee.map(mt=>(0,p.$3)((0,d.of)(mt),{defaultKind:"group"})),ye={kind:ct.toLocaleLowerCase("en-US"),type:Ve,owners:yt,user:"all"};return D().stringify({filters:ye},{arrayFormat:"repeat"})},Et=Ee=>{let De=[(0,d.eE)(Ee)];if(Ee.kind==="User"){const Ve=(0,p.hF)(Ee,d.hr,{kind:"Group"}).map(yt=>(0,d.eE)({kind:yt.kind,namespace:yt.namespace,name:yt.name}));De=[...De,...Ve]}return De},dt=async(Ee,De)=>{const ct=[],Ve=new Map,yt=new Set;ct.push(Ee);let ye=Ee;for(;ct.length>0;){const mt=(0,p.hF)(ye,d._b,{kind:"Group"});await Promise.all(mt.map(Ct=>ot(async()=>{const _t=De.getEntityByRef(Ct);Ve.set(Ct.name,_t);try{const it=await _t;it&&ct.push(it)}finally{Ve.delete(Ct.name)}}))),ct.shift(),yt.add((0,d.eE)({kind:ye.kind,namespace:ye.metadata.namespace,name:ye.metadata.name})),ye=ct[0]}return Array.from(yt)};function Vt(Ee,De,ct,Ve,yt=6){const ye=(0,n.h_)(p.Ah),mt=Ve!=null?Ve:["Component","API","System"],{loading:Ct,error:_t,value:it}=(0,J.default)(async()=>{const At=De==="aggregated"&&ct?await dt(Ee,ye):Et(Ee);return(await ye.getEntities({filter:[{kind:mt,"relations.ownedBy":At}],fields:["kind","metadata.name","metadata.namespace","spec.type","relations"]})).items.reduce((We,je)=>{var W,_;const h=We.find(M=>{var X;return M.kind===je.kind&&M.type===((X=je.spec)==null?void 0:X.type)});return h?h.count+=1:We.push({kind:je.kind,type:(_=(W=je.spec)==null?void 0:W.type)==null?void 0:_.toString(),count:1}),We},[]).sort((We,je)=>je.count-We.count).slice(0,yt).map(We=>({counter:We.count,type:We.type,kind:We.kind,queryParams:Qe(At,We)}))},[ye,Ee,De]);return{componentsWithCounters:it,loading:Ct,error:_t}}const jt=(0,i.Z)(Ee=>(0,c.Z)({card:{border:`1px solid ${Ee.palette.divider}`,boxShadow:Ee.shadows[2],borderRadius:"4px",padding:Ee.spacing(2),transition:`${Ee.transitions.duration.standard}ms`,"&:hover":{boxShadow:Ee.shadows[4]},height:"100%"},bold:{fontWeight:Ee.typography.fontWeightBold},smallFont:{fontSize:Ee.typography.body2.fontSize},entityTypeBox:{background:De=>Ee.getPageTheme({themeId:De.type}).backgroundImage,color:De=>Ee.getPageTheme({themeId:De.type}).fontColor}})),Ht=({counter:Ee,type:De,kind:ct,url:Ve})=>{const yt=jt({type:De!=null?De:ct}),ye=De!=null?De:ct,mt=ye.length>10;return g.createElement(x.rU,{to:Ve,variant:"body2"},g.createElement(b.Z,{className:`${yt.card} ${yt.entityTypeBox}`,display:"flex",flexDirection:"column",alignItems:"center"},g.createElement(R.Z,{className:yt.bold,variant:"h6"},Ee),g.createElement(b.Z,{sx:{width:"100%",textAlign:"center"}},g.createElement(R.Z,{className:`${yt.bold} ${mt&&yt.smallFont}`,variant:"h6"},g.createElement(x.Or,{text:rt()(ye.toLocaleUpperCase("en-US"),Ee)}))),De&&g.createElement(R.Z,{variant:"subtitle1"},ct)))},Ye=({entity:Ee,relationsType:De,isGroup:ct,entityFilterKind:Ve,entityLimit:yt=6})=>{const ye=(0,n.tg)(we),{componentsWithCounters:mt,loading:Ct,error:_t}=Vt(Ee,De,ct,Ve,yt);return Ct?g.createElement(x.Ex,null):_t?g.createElement(x.Gk,{error:_t}):g.createElement(m.Z,{container:!0},mt==null?void 0:mt.map(it=>{var At;return g.createElement(m.Z,{item:!0,xs:6,md:6,lg:4,key:(At=it.type)!=null?At:it.kind},g.createElement(Ht,{counter:it.counter,kind:it.kind,type:it.type,url:`${ye()}/?${it.queryParams}`}))}))},St=(0,i.Z)(Ee=>({list:{[Ee.breakpoints.down("xs")]:{padding:"0 0 12px"}},listItemText:{[Ee.breakpoints.down("xs")]:{paddingRight:0,paddingLeft:0}},listItemSecondaryAction:{[Ee.breakpoints.down("xs")]:{width:"100%",top:"auto",right:"auto",position:"relative",transform:"unset"}}})),Mt=Ee=>{const{variant:De,entityFilterKind:ct,hideRelationsToggle:Ve,relationsType:yt,entityLimit:ye=6}=Ee,mt=Ve===void 0?!1:Ve,Ct=St(),{entity:_t}=(0,p.X2)(),it=_t.kind==="Group",[At,zt]=(0,g.useState)(yt||"direct");return g.createElement(x.rJ,{title:"Ownership",variant:De},!mt&&g.createElement(H.Z,{dense:!0},g.createElement(U.Z,{className:Ct.list},g.createElement(N.Z,{className:Ct.listItemText}),g.createElement(v.Z,{className:Ct.listItemSecondaryAction},"Direct Relations",g.createElement(C.ZP,{placement:"top",arrow:!0,title:`${At==="direct"?"Direct":"Aggregated"} Relations`},g.createElement(t.Z,{color:"primary",checked:At!=="direct",onChange:()=>zt(At==="direct"?"aggregated":"direct"),name:"pin",inputProps:{"aria-label":"Ownership Type Switch"},disabled:!it})),"Aggregated Relations"))),g.createElement(Ye,{entity:_t,entityLimit:ye,relationsType:At,isGroup:it,entityFilterKind:ct}))},Bt=Ee=>{const{singularTitle:De,pluralTitle:ct,icon:Ve,filter:yt}=Ee,ye=(0,n.h_)(n.$4),mt=(0,n.h_)(p.Ah),Ct=(0,n.tg)(p.wi),{value:_t}=(0,J.default)(async()=>{const it=await ye.getBackstageIdentity();return(await mt.getEntities({filter:[{kind:"group","relations.hasMember":it.userEntityRef,...yt!=null?yt:{}}],fields:["metadata","kind"]})).items},[]);if(!(_t!=null&&_t.length))return null;if(_t.length===1){const it=_t[0];return g.createElement(x.R6,{text:De,to:Ct((0,d.iB)(it)),icon:Ve})}return g.createElement(x.R6,{icon:Ve,text:ct},g.createElement(x.k2,{title:ct},_t==null?void 0:_t.map(function(At){return g.createElement(x.BT,{title:At.metadata.title||At.metadata.name,subtitle:At.metadata.namespace!==d.zG?At.metadata.namespace:void 0,to:Ct((0,d.iB)(At)),icon:Ve,key:(0,d.eE)(At)})})))}},5083:function(Dt,E,e){"use strict";e.d(E,{J$:function(){return k},Y2:function(){return B},g2:function(){return R},rG:function(){return m}});var n=e(32272),d=e(96279),p=e.n(d),i=e(9571),c=e(30195),m=(T=>(T.DENY="DENY",T.ALLOW="ALLOW",T.CONDITIONAL="CONDITIONAL",T))(m||{});function b(T,S){return T.name===S.name}function R(T,S){return"resourceType"in T?!S||T.resourceType===S:!1}function t(T){return T.attributes.action==="create"}function U(T){return T.attributes.action==="read"}function w(T){return T.attributes.action==="update"}function N(T){return T.attributes.action==="delete"}function K(T){return{authorize:async(S,ie)=>await T.authorize(S,ie),authorizeConditional(S,ie){const Te=S;return T.authorize(Te,ie)}}}function k({name:T,attributes:S,resourceType:ie}){return ie?{type:"resource",name:T,attributes:S,resourceType:ie}:{type:"basic",name:T,attributes:S}}var H=Object.defineProperty,C=(T,S,ie)=>S in T?H(T,S,{enumerable:!0,configurable:!0,writable:!0,value:ie}):T[S]=ie,v=(T,S,ie)=>(C(T,typeof S!="symbol"?S+"":S,ie),ie);const F=c.z.lazy(()=>c.z.object({rule:c.z.string(),resourceType:c.z.string(),params:c.z.record(c.z.any()).optional()}).or(c.z.object({anyOf:c.z.array(F).nonempty()})).or(c.z.object({allOf:c.z.array(F).nonempty()})).or(c.z.object({not:F}))),g=c.z.object({result:c.z.literal(m.ALLOW).or(c.z.literal(m.DENY))}),J=c.z.union([c.z.object({result:c.z.literal(m.ALLOW).or(c.z.literal(m.DENY))}),c.z.object({result:c.z.literal(m.CONDITIONAL),pluginId:c.z.string(),resourceType:c.z.string(),conditions:F})]),x=(T,S)=>c.z.object({items:c.z.array(c.z.intersection(c.z.object({id:c.z.string()}),T)).refine(ie=>ie.length===S.size&&ie.every(({id:Te})=>S.has(Te)),{message:"Items in response do not match request"})});class B{constructor(S){v(this,"enabled"),v(this,"discovery");var ie;this.discovery=S.discovery,this.enabled=(ie=S.config.getOptionalBoolean("permission.enabled"))!=null?ie:!1}async authorize(S,ie){return this.makeRequest(S,g,ie)}async authorizeConditional(S,ie){return this.makeRequest(S,J,ie)}async makeRequest(S,ie,Te){if(!this.enabled)return S.map(Nt=>({result:m.ALLOW}));const Pe={items:S.map(Nt=>({id:i.Z(),...Nt}))},qe=await this.discovery.getBaseUrl("permission"),xe=await p()(`${qe}/authorize`,{method:"POST",body:JSON.stringify(Pe),headers:{...this.getAuthorizationHeader(Te==null?void 0:Te.token),"content-type":"application/json"}});if(!xe.ok)throw await n.VL.fromResponse(xe);const ke=await xe.json(),Kt=x(ie,new Set(Pe.items.map(({id:Nt})=>Nt))).parse(ke).items.reduce((Nt,rn)=>(Nt[rn.id]=rn,Nt),{});return Pe.items.map(Nt=>Kt[Nt.id])}getAuthorizationHeader(S){return S?{Authorization:`Bearer ${S}`}:{}}}},56563:function(Dt,E,e){"use strict";e.d(E,{RV:function(){return c},gI:function(){return b},iM:function(){return m},un:function(){return t}});var n=e(2784),d=e(30705),p=e(5083),i=e(69984);const c=(0,d.T0)({id:"plugin.permission.api"});class m{constructor(w,N){this.permissionClient=w,this.identityApi=N}static create(w){const{config:N,discovery:K,identity:k}=w,H=new p.Y2({discovery:K,config:N});return new m(H,k)}async authorize(w){return(await this.permissionClient.authorize([w],await this.identityApi.getCredentials()))[0]}}function b(U){const w=(0,d.h_)(c),{data:N,error:K}=(0,i.ZP)(U,async k=>{if((0,p.g2)(k.permission)&&!k.resourceRef)return p.rG.DENY;const{result:H}=await w.authorize(k);return H});return K?{error:K,loading:!1,allowed:!1}:N===void 0?{loading:!0,allowed:!1}:{loading:!1,allowed:N===p.rG.ALLOW}}const R=U=>{const{permission:w,resourceRef:N,errorComponent:K,...k}=U,H=b(isResourcePermission(w)?{permission:w,resourceRef:N}:{permission:w}),C=useApp(),{NotFoundErrorPage:v}=C.getComponents();let F=K===void 0?React.createElement(v,null):K;return H.loading?F=null:H.allowed&&(F=U.element),React.createElement(Route,{...k,element:F})};function t(U){const{permission:w,resourceRef:N}=U,K=b((0,p.g2)(w)?{permission:w,resourceRef:N}:{permission:w}),k=(0,d.qD)();if(K.loading)return null;if(K.allowed)return n.createElement(n.Fragment,null,U.children);if(U.errorPage)return n.createElement(n.Fragment,null,U.errorPage);const{NotFoundErrorPage:H}=k.getComponents();return n.createElement(H,null)}},67898:function(Dt,E,e){"use strict";e.d(E,{t:function(){return U}});var n=e(34520),d="http://json-schema.org/draft-07/schema",p="TemplateV1beta3",i="A Template describes a scaffolding task for use with the Scaffolder. It describes the required parameters as well as a series of steps that will be taken to execute the scaffolding task.",c=[{apiVersion:"scaffolder.backstage.io/v1beta3",kind:"Template",metadata:{name:"react-ssr-template",title:"React SSR Template",description:"Next.js application skeleton for creating isomorphic web applications.",tags:["recommended","react"]},spec:{owner:"artist-relations-team",parameters:{required:["name","description","repoUrl"],"backstage:permissions":{tags:["one","two"]},properties:{name:{title:"Name",type:"string",description:"Unique name of the component"},description:{title:"Description",type:"string",description:"Description of the component"},repoUrl:{title:"Pick a repository",type:"string","ui:field":"RepoUrlPicker"}}},steps:[{id:"fetch",name:"Fetch",action:"fetch:plain",parameters:{url:"./template"},"backstage:permissions":{tags:["one","two"]}},{id:"publish",name:"Publish to GitHub",action:"publish:github",parameters:{repoUrl:"${{ parameters.repoUrl }}"},if:"${{ parameters.repoUrl }}"}],output:{catalogInfoUrl:"${{ steps.publish.output.catalogInfoUrl }}"}}}],m=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["scaffolder.backstage.io/v1beta3"]},kind:{enum:["Template"]},spec:{type:"object",required:["type","steps"],properties:{type:{type:"string",description:"The type of component created by the template. The software catalog accepts any type value, but an organization should take great care to establish a proper taxonomy for these. Tools including Backstage itself may read this field and behave differently depending on its value. For example, a website type component may present tooling in the Backstage interface that is specific to just websites.",examples:["service","website","library"],minLength:1},owner:{type:"string",description:"The user (or group) owner of the template",minLength:1},parameters:{oneOf:[{type:"object",description:"The JSONSchema describing the inputs for the template.",properties:{"backstage:permissions":{type:"object",description:"Object used for authorizing the parameter",properties:{tags:{type:"array",items:{type:"string"}}}}}},{type:"array",description:"A list of separate forms to collect parameters.",items:{type:"object",description:"The JSONSchema describing the inputs for the template.",properties:{"backstage:permissions":{type:"object",description:"Object used for authorizing the parameter",properties:{tags:{type:"array",items:{type:"string"}}}}}}}]},steps:{type:"array",description:"A list of steps to execute.",items:{type:"object",description:"A description of the step to execute.",required:["action"],properties:{id:{type:"string",description:"The ID of the step, which can be used to refer to its outputs."},name:{type:"string",description:"The name of the step, which will be displayed in the UI during the scaffolding process."},action:{type:"string",description:"The name of the action to execute."},input:{type:"object",description:"A templated object describing the inputs to the action."},if:{type:["string","boolean"],description:'A templated condition that skips the step when evaluated to false. If the condition is true or not defined, the step is executed. The condition is true, if the input is not `false`, `undefined`, `null`, `""`, `0`, or `[]`.'},"backstage:permissions":{type:"object",description:"Object used for authorizing the step",properties:{tags:{type:"array",items:{type:"string"}}}}}}},output:{type:"object",description:"A templated object describing the outputs of the scaffolding task.",properties:{links:{type:"array",description:"A list of external hyperlinks, typically pointing to resources created or updated by the template",items:{type:"object",required:[],properties:{url:{type:"string",description:"A url in a standard uri format.",examples:["https://github.com/my-org/my-new-repo"],minLength:1},entityRef:{type:"string",description:"An entity reference to an entity in the catalog.",examples:["Component:default/my-app"],minLength:1},title:{type:"string",description:"A user friendly display name for the link.",examples:["View new repo"],minLength:1},icon:{type:"string",description:"A key representing a visual icon to be displayed in the UI.",examples:["dashboard"],minLength:1}}}},text:{type:"array",description:"A list of Markdown text blobs, like output data from the template.",items:{type:"object",required:[],properties:{title:{type:"string",description:"A user friendly display name for the text.",examples:["Output Content"],minLength:1},icon:{type:"string",description:"A key representing a visual icon to be displayed in the UI.",examples:["dashboard"],minLength:1},content:{type:"string",description:"The text blob to display in the UI, rendered as Markdown.",examples:["**hey** _I'm_ Markdown"]}}}}},additionalProperties:{type:"string"}}}}}}],b={$schema:d,$id:p,description:i,examples:c,allOf:m};const R=(0,n.wI)(b),t={async check(w){return R(w)===w}},U=w=>w.apiVersion==="scaffolder.backstage.io/v1beta3"&&w.kind==="Template"},60885:function(Dt,E,e){"use strict";e.d(E,{F:function(){return i},S:function(){return b},a:function(){return c},s:function(){return t},u:function(){return R}});var n=e(18473),d=e(2784),p=e(30705);const i="scaffolder.extensions.wrapper.v1",c="scaffolder.extensions.field.v1",m=(0,n.CT)("secrets-context"),b=U=>{const[w,N]=(0,d.useState)({});return d.createElement(m.Provider,{value:(0,n.EI)({1:{secrets:w,setSecrets:N}})},U.children)},R=()=>{var U;const w=(U=(0,d.useContext)(m))==null?void 0:U.atVersion(1);if(!w)throw new Error("useTemplateSecrets must be used within a SecretsContextProvider");const{setSecrets:N,secrets:K={}}=w;return{setSecrets:(0,d.useCallback)(H=>{N(C=>({...C,...H}))},[N]),secrets:K}},t=(0,n.uW)("scaffolder:scaffolder-api-ref",()=>(0,p.T0)({id:"plugin.scaffolder.service"}))},12053:function(Dt,E,e){"use strict";e.d(E,{A3:function(){return d.S},PT:function(){return R},TD:function(){return d.u},WQ:function(){return K},eP:function(){return m},lc:function(){return d.s},zS:function(){return w}});var n=e(30705),d=e(60885),p=e(92233),i=e(2784),c=e(18473);function m(C){return{expose(){const v=()=>null;return(0,n.R5)(v,d.a,C),v}}}const b=()=>null;(0,n.R5)(b,d.F,!0);const R=C=>(0,n.vJ)(C,v=>v.selectByComponentData({key:d.F}).findComponentData({key:d.a})),t="scaffolder.layout.v1",U="scaffolder.layouts.wrapper.v1",w=C=>(0,n.vJ)(C,v=>v.selectByComponentData({key:U}).findComponentData({key:t}));function N(C,v){var F,g,J;switch(v.type){case"INIT":{C.steps=v.data.spec.steps.reduce((x,B)=>(x[B.id]={status:"open",id:B.id},x),{}),C.stepLogs=v.data.spec.steps.reduce((x,B)=>(x[B.id]=[],x),{}),C.loading=!1,C.error=void 0,C.completed=!1,C.task=v.data;return}case"LOGS":{const x=v.data;for(const B of x){const T=`${B.createdAt} ${B.body.message}`;if(!B.body.stepId||!((F=C.steps)!=null&&F[B.body.stepId]))continue;const S=(g=C.stepLogs)==null?void 0:g[B.body.stepId],ie=(J=C.steps)==null?void 0:J[B.body.stepId];B.body.status&&B.body.status!==ie.status&&(ie.status=B.body.status,ie.status==="processing"&&(ie.startedAt=B.createdAt),["cancelled","completed","failed"].includes(ie.status)&&(ie.endedAt=B.createdAt)),S==null||S.push(T)}return}case"COMPLETED":{C.completed=!0,C.output=v.data.body.output,C.error=v.data.body.error;return}case"CANCELLED":{C.cancelled=!0;return}case"ERROR":{C.error=v.data,C.loading=!1,C.completed=!0;return}default:return}}const K=C=>{const v=(0,n.h_)(d.s),[F,g]=(0,p.C)(N,{cancelled:!1,loading:!0,completed:!1,stepLogs:{},steps:{}});return(0,i.useEffect)(()=>{let J=!1,x,B,T=1;const S=()=>v.getTask(C).then(ie=>{if(J)return;g({type:"INIT",data:ie});const Te=v.streamLogs({taskId:C}),Pe=new Array;function qe(){if(Pe.length){const xe=Pe.splice(0,Pe.length);g({type:"LOGS",data:xe})}}B=setInterval(qe,500),x=Te.subscribe({next:xe=>{switch(xe.type){case"log":return Pe.push(xe);case"cancelled":g({type:"CANCELLED"});return;case"completion":qe(),g({type:"COMPLETED",data:xe});return;default:throw new Error(`Unhandled event type ${xe.type} in observer`)}},error:xe=>{qe(),xe.message||(xe.message=`We cannot connect at the moment, trying again in some seconds... Retrying (${T}/3 retries)`),T<=3&&setTimeout(()=>{T+=1,S()},15e3),g({type:"ERROR",data:xe})}})},ie=>{J||g({type:"ERROR",data:ie})});return S(),()=>{J=!0,x&&x.unsubscribe(),B&&clearInterval(B)}},[v,g,C]),F};function k(C){return{expose(){const v=()=>null;return attachComponentData(v,t,C),v}}}const H=()=>null;(0,n.R5)(H,U,!0)},20082:function(Dt,E,e){"use strict";e.d(E,{T:function(){return ae},a:function(){return A},b:function(){return rn}});var n=e(34520),d=e(80236),p=e(30705),i=e(95544),c=e(79692),m=e(60905),b=e(90436),R=e(4614),t=e(97136),U=e(27556),w=e(77277),N=e(31377),K=e(34546),k=e(31625),H=e(12420),C=e(49166),v=e(98281),F=e(16874),g=e(72779),J=e.n(g),x=e(26228),B=e(19126),T=e.n(B),S=e(2784),ie=e(73557),Te=e(70218),Pe=e(12053),qe=e(64304),xe=e(52160),ke=e(16362);const rt=({error:$e})=>{const Ge=(0,S.useRef)("");return(0,S.useEffect)(()=>{Ge.current=String(Math.random())},[$e]),$e?S.createElement(i.Z,null,S.createElement(d.SX,{id:Ge.current,variant:"warning",message:$e.message})):null},Kt=(0,c.Z)({svgIcon:{display:"inline-block","& svg":{display:"inline-block",fontSize:"inherit",verticalAlign:"baseline"}}}),Nt=$e=>{const{href:Ge,text:ft,Icon:nt,...Rt}=$e,q=Kt();return S.createElement(m.Z,{container:!0,direction:"row",spacing:1},S.createElement(m.Z,{item:!0},S.createElement(b.Z,{component:"div",className:q.svgIcon},nt?S.createElement(nt,null):S.createElement(xe.Z,null))),S.createElement(m.Z,{item:!0},S.createElement(d.rU,{to:Ge,...Rt},ft||Ge)))},rn=({output:$e})=>{const{links:Ge=[]}=$e,ft=(0,p.qD)(),nt=(0,p.tg)(qe.wi),Rt=q=>{var de;return q&&(de=ft.getSystemIcon(q))!=null?de:xe.Z};return S.createElement(i.Z,{px:3,pb:3},Ge.filter(({url:q,entityRef:de})=>q||de).map(({url:q,entityRef:de,title:Se,icon:Ne})=>{if(de){const st=(0,n.of)(de,{defaultKind:"<unknown>",defaultNamespace:"<unknown>"}),pe=nt(st);return{title:Se,icon:Ne,url:pe}}return{title:Se,icon:Ne,url:q}}).map(({url:q,title:de,icon:Se},Ne)=>S.createElement(Nt,{key:`output-link-${Ne}`,href:q,text:de!=null?de:q,Icon:Rt(Se),target:"_blank"})))},D=e(75951),we=(0,c.Z)($e=>(0,H.Z)({root:{width:"100%"},button:{marginBottom:$e.spacing(2),marginLeft:$e.spacing(2)},actionsContainer:{marginBottom:$e.spacing(2)},resetContainer:{padding:$e.spacing(3)},labelWrapper:{display:"flex",flex:1,flexDirection:"row",justifyContent:"space-between"},stepWrapper:{width:"100%"}})),ue=({step:$e})=>{const[Ge,ft]=(0,S.useState)("");return(0,Te.Z)(()=>{if(!$e.startedAt){ft("");return}const nt=$e.endedAt?x.ou.fromISO($e.endedAt):x.ou.local(),Rt=x.ou.fromISO($e.startedAt),q=x.Xp.fromDateTimes(Rt,nt).toDuration().valueOf();ft(D(q,{round:!0}))},1e3),S.createElement(b.Z,{variant:"caption"},Ge)},Ke=(0,c.Z)($e=>(0,H.Z)({root:{color:$e.palette.text.disabled,display:"flex",height:22,alignItems:"center"},completed:{color:$e.palette.status.ok},error:{color:$e.palette.status.error}}));function $($e){const Ge=Ke(),{active:ft,completed:nt,error:Rt}=$e,q=()=>ft?S.createElement(R.Z,{size:"24px"}):nt?S.createElement(v.Z,null):Rt?S.createElement(C.Z,null):S.createElement(F.Z,null);return S.createElement("div",{className:J()(Ge.root,{[Ge.completed]:nt,[Ge.error]:Rt})},q())}const A=(0,S.memo)($e=>{const{steps:Ge,currentStepId:ft,onUserStepChange:nt}=$e,Rt=we($e);return S.createElement("div",{className:Rt.root},S.createElement(k.Z,{activeStep:Ge.findIndex(q=>q.id===ft),orientation:"vertical",nonLinear:!0},Ge.map((q,de)=>{const Se=q.status==="cancelled",Ne=q.status==="processing",st=q.status==="completed",pe=q.status==="failed",Je=q.status==="skipped";return S.createElement(N.Z,{key:String(de),expanded:!0},S.createElement(t.Z,{onClick:()=>nt(q.id)},S.createElement(K.Z,{StepIconProps:{completed:st,error:pe||Se,active:Ne},StepIconComponent:$,className:Rt.stepWrapper},S.createElement("div",{className:Rt.labelWrapper},S.createElement(b.Z,{variant:"subtitle2"},q.name),Je?S.createElement(b.Z,{variant:"caption"},"Skipped"):S.createElement(ue,{step:q})))))})))}),z=({links:$e=[]})=>$e.length>0,ae=$e=>{const{loadingText:Ge}=$e,ft=we(),nt=(0,ie.s0)(),Rt=(0,p.tg)(ke.r),q=(0,p.h_)(Pe.lc),de=(0,p.tg)(ke.n),[Se,Ne]=(0,S.useState)(void 0),[st,pe]=(0,S.useState)(!1),[Je,ot]=(0,S.useState)(void 0),{taskId:Qe}=(0,p.Oi)(ke.o),Et=(0,Pe.WQ)(Qe),dt=Et.completed,Vt=Et.cancelled,jt=(0,S.useMemo)(()=>{var De,ct;return(ct=(De=Et.task)==null?void 0:De.spec.steps.map(Ve=>{var yt;return{...Ve,...(yt=Et==null?void 0:Et.steps)==null?void 0:yt[Ve.id]}}))!=null?ct:[]},[Et]);(0,S.useEffect)(()=>{var De;const ct=jt.find(Ve=>["failed","processing"].includes(Ve.status));if(dt&&!ct){ot((De=jt[jt.length-1])==null?void 0:De.id);return}ot(ct==null?void 0:ct.id)},[jt,dt]);const Ht=Se!=null?Se:Je,Ye=(0,S.useMemo)(()=>{if(!Ht)return Ge||"Loading...";const De=Et.stepLogs[Ht];return De!=null&&De.length?De.join(`
`):"Waiting for logs..."},[Et.stepLogs,Ht,Ge]),St=Et.completed&&!Et.loading&&!Et.task,{output:Mt}=Et,Bt=()=>{var De,ct,Ve;if(!Et.task||!((ct=(De=Et.task)==null?void 0:De.spec.templateInfo)!=null&&ct.entityRef)){nt(Rt());return}const yt=Et.task.spec.parameters,{name:ye,namespace:mt}=(0,n.of)((Ve=Et.task.spec.templateInfo)==null?void 0:Ve.entityRef);nt(`${de({templateName:ye,namespace:mt})}?${T().stringify({formData:JSON.stringify(yt)})}`)},Ee=async()=>{pe(!0),await q.cancelTask(Qe)};return S.createElement(d.T3,{themeId:"home"},S.createElement(d.h4,{pageTitleOverride:`Task ${Qe}`,title:"Task Activity",subtitle:`Activity for task: ${Qe}`}),S.createElement(d.VY,null,St?S.createElement(d.mf,{status:"404",statusMessage:"Task not found",additionalInfo:"No task found with this ID"}):S.createElement("div",null,S.createElement(m.Z,{container:!0},S.createElement(m.Z,{item:!0,xs:3},S.createElement(U.Z,null,S.createElement(A,{steps:jt,currentStepId:Ht,onUserStepChange:Ne}),Mt&&z(Mt)&&S.createElement(rn,{output:Mt}),S.createElement(w.Z,{className:ft.button,onClick:Bt,disabled:!dt,variant:"contained",color:"primary"},"Start Over"),S.createElement(w.Z,{className:ft.button,onClick:Ee,disabled:dt||Vt||st,variant:"outlined",color:"secondary"},(Vt||st)&&!dt?"Cancelling...":"Cancel"))),S.createElement(m.Z,{item:!0,xs:9},!Ht&&S.createElement(d.Ex,null),S.createElement("div",{style:{height:"80vh"}},S.createElement(rt,{error:Et.error}),S.createElement(d.nU,{text:Ye})))))))}},15170:function(Dt,E,e){"use strict";e.d(E,{T:function(){return F}});var n=e(2784),d=e(82108),p=e.n(d),i=e(80236),c=e(95544),m=e(90436),b=e(5806),R=e(21324),t=e(86619),U=e(19996),w=e(25505),N=e(38016),K=e(88013),k=e(64304),H=e(30705);const C=n.createElement(w.Z,{fontSize:"small"}),v=n.createElement(U.Z,{fontSize:"small"}),F=()=>{const g=(0,H.h_)(H.$v),{error:J,loading:x,availableTypes:B,selectedTypes:T,setSelectedTypes:S}=(0,k.Uh)();return x?n.createElement(i.Ex,null):B?J?(g.post({message:"Failed to load entity types",severity:"error"}),null):n.createElement(c.Z,{pb:1,pt:1},n.createElement(m.Z,{variant:"button",component:"label",htmlFor:"categories-picker"},"Categories"),n.createElement(K.ZP,{id:"categories-picker",multiple:!0,options:B,value:T,onChange:(ie,Te)=>S(Te),renderOption:(ie,{selected:Te})=>n.createElement(b.Z,{control:n.createElement(R.Z,{icon:C,checkedIcon:v,checked:Te}),label:p()(ie)}),size:"small",popupIcon:n.createElement(N.Z,{"data-testid":"categories-picker-expand"}),renderInput:ie=>n.createElement(t.Z,{...ie,variant:"outlined"})})):null}},16362:function(Dt,E,e){"use strict";e.d(E,{A:function(){return $},B:function(){return z},C:function(){return Mt},D:function(){return St},F:function(){return dt},G:function(){return Rt},H:function(){return ft},I:function(){return Ge},J:function(){return Ht},K:function(){return jt},L:function(){return At},d:function(){return _},h:function(){return q},k:function(){return it},n:function(){return Ve},o:function(){return yt},p:function(){return Ct},q:function(){return mt},r:function(){return De},s:function(){return zt},t:function(){return ye},u:function(){return Bt},v:function(){return Ee},w:function(){return ct},x:function(){return D},y:function(){return rn},z:function(){return ae}});var n=e(49462),d=e(12053),p=e(34520),i=e(32272),c=e(19126),m=e.n(c),b=e(82394),R=e.n(b),t=e(31734),U=e.n(t),w=e(88285),N=e(30705),K=e(64304),k=e(86619),H=e(42494),C=e(88013),v=e(2784),F=e(64279),g=e(30195),J=e(68111),x=e(74828),B=e(29611),T=e(56939),S=e(80236),ie=e(48760),Te=e(62155),Pe=Object.defineProperty,qe=(j,Z,oe)=>Z in j?Pe(j,Z,{enumerable:!0,configurable:!0,writable:!0,value:oe}):j[Z]=oe,xe=(j,Z,oe)=>(qe(j,typeof Z!="symbol"?Z+"":Z,oe),oe);class ke{constructor(Z){xe(this,"discoveryApi"),xe(this,"scmIntegrationsApi"),xe(this,"fetchApi"),xe(this,"identityApi"),xe(this,"useLongPollingLogs");var oe,se;this.discoveryApi=Z.discoveryApi,this.fetchApi=(oe=Z.fetchApi)!=null?oe:{fetch},this.scmIntegrationsApi=Z.scmIntegrationsApi,this.useLongPollingLogs=(se=Z.useLongPollingLogs)!=null?se:!1,this.identityApi=Z.identityApi}async listTasks(Z){if(!this.identityApi)throw new Error("IdentityApi is not available in the ScaffolderClient, please pass through the IdentityApi to the ScaffolderClient constructor in order to use the listTasks method");const oe=await this.discoveryApi.getBaseUrl("scaffolder"),{userEntityRef:se}=await this.identityApi.getBackstageIdentity(),Ue=m().stringify(Z.filterByOwnership==="owned"?{createdBy:se}:{}),lt=await this.fetchApi.fetch(`${oe}/v2/tasks?${Ue}`);if(!lt.ok)throw await i.VL.fromResponse(lt);return await lt.json()}async getIntegrationsList(Z){return{integrations:[...this.scmIntegrationsApi.azure.list(),...this.scmIntegrationsApi.bitbucket.list().filter(se=>!this.scmIntegrationsApi.bitbucketCloud.byHost(se.config.host)&&!this.scmIntegrationsApi.bitbucketServer.byHost(se.config.host)),...this.scmIntegrationsApi.bitbucketCloud.list(),...this.scmIntegrationsApi.bitbucketServer.list(),...this.scmIntegrationsApi.gerrit.list(),...this.scmIntegrationsApi.github.list(),...this.scmIntegrationsApi.gitlab.list()].map(se=>({type:se.type,title:se.title,host:se.config.host})).filter(se=>Z.allowedHosts.includes(se.host))}}async getTemplateParameterSchema(Z){const{namespace:oe,kind:se,name:Ue}=(0,p.of)(Z,{defaultKind:"template"}),lt=await this.discoveryApi.getBaseUrl("scaffolder"),ne=[oe,se,Ue].map(te=>encodeURIComponent(te)).join("/"),ce=`${lt}/v2/templates/${ne}/parameter-schema`,Ce=await this.fetchApi.fetch(ce);if(!Ce.ok)throw await i.VL.fromResponse(Ce);return await Ce.json()}async scaffold(Z){const{templateRef:oe,values:se,secrets:Ue={}}=Z,lt=`${await this.discoveryApi.getBaseUrl("scaffolder")}/v2/tasks`,ne=await this.fetchApi.fetch(lt,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({templateRef:oe,values:{...se},secrets:Ue})});if(ne.status!==201){const Ce=`${ne.status} ${ne.statusText}`,Y=await ne.text();throw new Error(`Backend request failed, ${Ce} ${Y.trim()}`)}const{id:ce}=await ne.json();return{taskId:ce}}async getTask(Z){const se=`${await this.discoveryApi.getBaseUrl("scaffolder")}/v2/tasks/${encodeURIComponent(Z)}`,Ue=await this.fetchApi.fetch(se);if(!Ue.ok)throw await i.VL.fromResponse(Ue);return await Ue.json()}streamLogs(Z){return this.useLongPollingLogs?this.streamLogsPolling(Z):this.streamLogsEventStream(Z)}async dryRun(Z){const oe=await this.discoveryApi.getBaseUrl("scaffolder"),se=await this.fetchApi.fetch(`${oe}/v2/dry-run`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({template:Z.template,values:Z.values,secrets:Z.secrets,directoryContents:Z.directoryContents})});if(!se.ok)throw await i.VL.fromResponse(se);return se.json()}streamLogsEventStream({taskId:Z,after:oe}){return new(R())(se=>{var Ue;const lt=new URLSearchParams;oe!==void 0&&lt.set("after",String(Number(oe))),Promise.all([this.discoveryApi.getBaseUrl("scaffolder"),(Ue=this.identityApi)==null?void 0:Ue.getCredentials()]).then(([ne,ce])=>{const Ce=`${ne}/v2/tasks/${encodeURIComponent(Z)}/eventstream`,Y=me=>{if(me.data)try{se.next(JSON.parse(me.data))}catch(Ie){se.error(Ie)}},te=new t.EventSourcePolyfill(Ce,{withCredentials:!0,headers:ce!=null&&ce.token?{Authorization:`Bearer ${ce.token}`}:{}});te.addEventListener("log",Y),te.addEventListener("cancelled",Y),te.addEventListener("completion",me=>{Y(me),te.close(),se.complete()}),te.addEventListener("error",me=>{se.error(me)})},ne=>{se.error(ne)})})}streamLogsPolling({taskId:Z,after:oe}){let se=oe;return new(R())(Ue=>{this.discoveryApi.getBaseUrl("scaffolder").then(async lt=>{for(;!Ue.closed;){const ne=`${lt}/v2/tasks/${encodeURIComponent(Z)}/events?${m().stringify({after:se})}`,ce=await this.fetchApi.fetch(ne);if(!ce.ok){await new Promise(Y=>setTimeout(Y,1e3));continue}const Ce=await ce.json();for(const Y of Ce)if(se=Number(Y.id),Ue.next(Y),Y.type==="completion"){Ue.complete();return}}})})}async listActions(){const Z=await this.discoveryApi.getBaseUrl("scaffolder"),oe=await this.fetchApi.fetch(`${Z}/v2/actions`);if(!oe.ok)throw await i.VL.fromResponse(oe);return await oe.json()}async cancelTask(Z){const se=`${await this.discoveryApi.getBaseUrl("scaffolder")}/v2/tasks/${encodeURIComponent(Z)}/cancel`,Ue=await this.fetchApi.fetch(se,{method:"POST"});if(!Ue.ok)throw await i.VL.fromResponse(Ue);return await Ue.json()}}function rt(j,Z){return{schema:{returnValue:(0,J.ZP)(j),uiOptions:Z?(0,J.ZP)(Z):void 0},type:null,uiOptionsType:null}}const Kt=g.z.record(g.z.string().or(g.z.object({exists:g.z.boolean().optional()})).or(g.z.array(g.z.string()))),rn=rt(g.z.string(),g.z.object({allowedKinds:g.z.array(g.z.string()).optional().describe("DEPRECATED: Use `catalogFilter` instead. List of kinds of entities to derive options from"),defaultKind:g.z.string().optional().describe("The default entity kind. Options of this kind will not be prefixed."),allowArbitraryValues:g.z.boolean().optional().describe("Whether to allow arbitrary user input. Defaults to true"),defaultNamespace:g.z.union([g.z.string(),g.z.literal(!1)]).optional().describe("The default namespace. Options with this namespace will not be prefixed."),catalogFilter:g.z.array(Kt).or(Kt).optional().describe("List of key-value filter expression for entities")})).schema,D=j=>{var Z,oe,se,Ue,lt;const{onChange:ne,schema:{title:ce="Entity",description:Ce="An entity from the catalog"},required:Y,uiSchema:te,rawErrors:me,formData:Ie,idSchema:Le}=j,bt=Ke(te),ut=(Z=te["ui:options"])==null?void 0:Z.defaultKind,Ut=((oe=te["ui:options"])==null?void 0:oe.defaultNamespace)||void 0,wt=(0,N.h_)(K.Ah),{value:kt,loading:Qt}=(0,F.default)(async()=>{const{items:Zt}=await wt.getEntities(bt?{filter:bt}:void 0);return Zt}),un=(Ue=(se=te["ui:options"])==null?void 0:se.allowArbitraryValues)!=null?Ue:!0,ln=(0,v.useCallback)(Zt=>{try{return(0,K.$3)((0,p.of)(Zt,{defaultKind:ut,defaultNamespace:Ut}),{defaultKind:ut,defaultNamespace:Ut})}catch{return Zt}},[ut,Ut]),tn=(0,v.useCallback)((Zt,Wt,hn)=>{if(typeof Wt!="string")ne(Wt?(0,p.eE)(Wt):void 0);else if(hn==="blur"||hn==="create-option"){let gn=Wt;try{gn=(0,p.eE)((0,p.of)(Wt,{defaultKind:ut,defaultNamespace:Ut}))}catch{}(Ie!==Wt||un)&&ne(gn)}},[ne,Ie,ut,Ut,un]);return(0,v.useEffect)(()=>{(kt==null?void 0:kt.length)===1&&ne((0,p.eE)(kt[0]))},[kt,ne]),v.createElement(H.Z,{margin:"normal",required:Y,error:(me==null?void 0:me.length)>0&&!Ie},v.createElement(C.ZP,{disabled:(kt==null?void 0:kt.length)===1,id:Le==null?void 0:Le.$id,value:(lt=kt==null?void 0:kt.find(Zt=>(0,p.eE)(Zt)===Ie))!=null?lt:un&&Ie?ln(Ie):"",loading:Qt,onChange:tn,options:kt||[],getOptionLabel:Zt=>typeof Zt=="string"?Zt:(0,K.$3)(Zt,{defaultKind:ut,defaultNamespace:Ut}),autoSelect:!0,freeSolo:un,renderInput:Zt=>v.createElement(k.Z,{...Zt,label:ce,margin:"dense",helperText:Ce,FormHelperTextProps:{margin:"dense",style:{marginLeft:0}},variant:"outlined",required:Y,InputProps:Zt.InputProps})}))};function we(j){return typeof j=="object"&&j.exists?w.n3:j==null?void 0:j.toString()}function ue(j){const Z={};for(const[oe,se]of Object.entries(j))Array.isArray(se)?Z[oe]=se:Z[oe]=we(se);return Z}function Ke(j){var Z,oe;const se=(Z=j["ui:options"])==null?void 0:Z.allowedKinds,Ue=((oe=j["ui:options"])==null?void 0:oe.catalogFilter)||se&&{kind:se};if(Ue)return Array.isArray(Ue)?Ue.map(ue):ue(Ue)}const $=(j,Z)=>{p.y$.isValidObjectName(j)||Z.addError("Must start and end with an alphanumeric character, and contain only alphanumeric characters, hyphens, underscores, and periods. Maximum length is 63 characters.")},z=rt(g.z.string()).schema,ae=j=>{const{onChange:Z,required:oe,schema:{title:se="Name",description:Ue="Unique name of the component"},rawErrors:lt,formData:ne,uiSchema:{"ui:autofocus":ce},idSchema:Ce,placeholder:Y}=j;return v.createElement(k.Z,{id:Ce==null?void 0:Ce.$id,label:se,placeholder:Y,helperText:Ue,required:oe,value:ne!=null?ne:"",onChange:({target:{value:te}})=>Z(te),margin:"normal",error:(lt==null?void 0:lt.length)>0&&!ne,inputProps:{autoFocus:ce}})},Ge=rt(g.z.string(),g.z.object({allowedKinds:g.z.array(g.z.string()).default(["Group","User"]).optional().describe("DEPRECATED: Use `catalogFilter` instead. List of kinds of entities to derive options from. Defaults to Group and User"),allowArbitraryValues:g.z.boolean().optional().describe("Whether to allow arbitrary user input. Defaults to true"),defaultNamespace:g.z.union([g.z.string(),g.z.literal(!1)]).optional().describe("The default namespace. Options with this namespace will not be prefixed."),catalogFilter:g.z.array(Kt).or(Kt).optional().describe("List of key-value filter expression for entities")})).schema,ft=j=>{var Z,oe,se,Ue,lt;const{schema:{title:ne="Owner",description:ce="The owner of the component"},uiSchema:Ce,...Y}=j,te=(Z=Ce["ui:options"])==null?void 0:Z.defaultNamespace,me=(oe=Ce["ui:options"])==null?void 0:oe.allowedKinds,Ie=((se=Ce["ui:options"])==null?void 0:se.catalogFilter)||{kind:me||["Group","User"]},Le={...Ce,"ui:options":{catalogFilter:Ie,defaultKind:"Group",allowArbitraryValues:(lt=(Ue=Ce["ui:options"])==null?void 0:Ue.allowArbitraryValues)!=null?lt:!0,...te!==void 0?{defaultNamespace:te}:{}}};return v.createElement(D,{...Y,schema:{title:ne,description:ce},uiSchema:Le})},Rt=rt(g.z.string(),g.z.object({allowedHosts:g.z.array(g.z.string()).optional().describe("List of allowed SCM platform hosts"),allowedOrganizations:g.z.array(g.z.string()).optional().describe("List of allowed organizations in the given SCM platform"),allowedOwners:g.z.array(g.z.string()).optional().describe("List of allowed owners in the given SCM platform"),allowedProjects:g.z.array(g.z.string()).optional().describe("List of allowed projects in the given SCM platform"),allowedRepos:g.z.array(g.z.string()).optional().describe("List of allowed repos in the given SCM platform"),requestUserCredentials:g.z.object({secretsKey:g.z.string().describe("Key used within the template secrets context to store the credential"),additionalScopes:g.z.object({gerrit:g.z.array(g.z.string()).optional().describe("Additional Gerrit scopes to request"),github:g.z.array(g.z.string()).optional().describe("Additional GitHub scopes to request"),gitlab:g.z.array(g.z.string()).optional().describe("Additional GitLab scopes to request"),bitbucket:g.z.array(g.z.string()).optional().describe("Additional BitBucket scopes to request"),azure:g.z.array(g.z.string()).optional().describe("Additional Azure scopes to request")}).optional().describe("Additional permission scopes to request")}).optional().describe("If defined will request user credentials to auth against the given SCM platform")})).schema,q=(j,Z,oe)=>{var se,Ue;try{const{host:lt,searchParams:ne}=new URL(`https://${j}`),ce=oe.apiHolder.get(n.q3);lt?(((se=ce==null?void 0:ce.byHost(lt))==null?void 0:se.type)==="bitbucket"?(lt==="bitbucket.org"&&!ne.get("workspace")&&Z.addError("Incomplete repository location provided, workspace not provided"),ne.get("project")||Z.addError("Incomplete repository location provided, project not provided")):((Ue=ce==null?void 0:ce.byHost(lt))==null?void 0:Ue.type)!=="gerrit"&&(ne.get("owner")||Z.addError("Incomplete repository location provided, owner not provided")),ne.get("repo")||Z.addError("Incomplete repository location provided, repo not provided")):Z.addError("Incomplete repository location provided, host not provided")}catch{Z.addError("Unable to parse the Repository URL")}},de=j=>{const{allowedOwners:Z=[],rawErrors:oe,state:se,onChange:Ue}=j,lt=Z?Z.map(ce=>({label:ce,value:ce})):[{label:"Loading...",value:"loading"}],{owner:ne}=se;return v.createElement(v.Fragment,null,v.createElement(H.Z,{margin:"normal",required:!0,error:(oe==null?void 0:oe.length)>0&&!ne},Z!=null&&Z.length?v.createElement(S.Ph,{native:!0,label:"Owner Available",onChange:ce=>Ue({owner:String(Array.isArray(ce)?ce[0]:ce)}),disabled:Z.length===1,selected:ne,items:lt}):v.createElement(v.Fragment,null,v.createElement(T.Z,{htmlFor:"ownerInput"},"Owner"),v.createElement(B.Z,{id:"ownerInput",onChange:ce=>Ue({owner:ce.target.value}),value:ne})),v.createElement(x.Z,null,"The organization, user or project that this repo will belong to")))},Se=j=>{const{allowedOwners:Z=[],state:oe,onChange:se,rawErrors:Ue}=j,lt=Z?Z.map(ce=>({label:ce,value:ce})):[{label:"Loading...",value:"loading"}],{owner:ne}=oe;return v.createElement(v.Fragment,null,v.createElement(H.Z,{margin:"normal",required:!0,error:(Ue==null?void 0:Ue.length)>0&&!ne},Z!=null&&Z.length?v.createElement(S.Ph,{native:!0,label:"Owner Available",onChange:ce=>se({owner:String(Array.isArray(ce)?ce[0]:ce)}),disabled:Z.length===1,selected:ne,items:lt}):v.createElement(v.Fragment,null,v.createElement(T.Z,{htmlFor:"ownerInput"},"Owner"),v.createElement(B.Z,{id:"ownerInput",onChange:ce=>se({owner:ce.target.value}),value:ne})),v.createElement(x.Z,null,"GitLab namespace where this repository will belong to. It can be the name of organization, group, subgroup, user, or the project.")))},Ne=j=>{const{allowedOrganizations:Z=[],allowedOwners:oe=[],rawErrors:se,state:Ue,onChange:lt}=j,ne=Z?Z.map(te=>({label:te,value:te})):[{label:"Loading...",value:"loading"}],ce=oe?oe.map(te=>({label:te,value:te})):[{label:"Loading...",value:"loading"}],{organization:Ce,owner:Y}=Ue;return v.createElement(v.Fragment,null,v.createElement(H.Z,{margin:"normal",required:!0,error:(se==null?void 0:se.length)>0&&!Ce},Z!=null&&Z.length?v.createElement(S.Ph,{native:!0,label:"Organization",onChange:te=>lt({organization:String(Array.isArray(te)?te[0]:te)}),disabled:Z.length===1,selected:Ce,items:ne}):v.createElement(v.Fragment,null,v.createElement(T.Z,{htmlFor:"orgInput"},"Organization"),v.createElement(B.Z,{id:"orgInput",onChange:te=>lt({organization:te.target.value}),value:Ce})),v.createElement(x.Z,null,"The Organization that this repo will belong to")),v.createElement(H.Z,{margin:"normal",required:!0,error:(se==null?void 0:se.length)>0&&!Y},oe!=null&&oe.length?v.createElement(S.Ph,{native:!0,label:"Owner",onChange:te=>lt({owner:String(Array.isArray(te)?te[0]:te)}),disabled:oe.length===1,selected:Y,items:ce}):v.createElement(v.Fragment,null,v.createElement(T.Z,{htmlFor:"ownerInput"},"Project"),v.createElement(B.Z,{id:"ownerInput",onChange:te=>lt({owner:te.target.value}),value:Y})),v.createElement(x.Z,null,"The Project that this repo will belong to")))},st=j=>{const{allowedOwners:Z=[],allowedProjects:oe=[],onChange:se,rawErrors:Ue,state:lt}=j,{host:ne,workspace:ce,project:Ce}=lt,Y=Z?Z==null?void 0:Z.map(me=>({label:me,value:me})):[],te=oe?oe==null?void 0:oe.map(me=>({label:me,value:me})):[];return(0,v.useEffect)(()=>{ne==="bitbucket.org"&&Z.length&&se({workspace:Z[0]})},[Z,ne,se]),v.createElement(v.Fragment,null,ne==="bitbucket.org"&&v.createElement(H.Z,{margin:"normal",required:!0,error:(Ue==null?void 0:Ue.length)>0&&!ce},Z!=null&&Z.length?v.createElement(S.Ph,{native:!0,label:"Allowed Workspaces",onChange:me=>se({workspace:String(Array.isArray(me)?me[0]:me)}),disabled:Z.length===1,selected:ce,items:Y}):v.createElement(v.Fragment,null,v.createElement(T.Z,{htmlFor:"workspaceInput"},"Workspace"),v.createElement(B.Z,{id:"workspaceInput",onChange:me=>se({workspace:me.target.value}),value:ce})),v.createElement(x.Z,null,"The Workspace that this repo will belong to")),v.createElement(H.Z,{margin:"normal",required:!0,error:(Ue==null?void 0:Ue.length)>0&&!Ce},oe!=null&&oe.length?v.createElement(S.Ph,{native:!0,label:"Allowed Projects",onChange:me=>se({project:String(Array.isArray(me)?me[0]:me)}),disabled:oe.length===1,selected:Ce,items:te}):v.createElement(v.Fragment,null,v.createElement(T.Z,{htmlFor:"projectInput"},"Project"),v.createElement(B.Z,{id:"projectInput",onChange:me=>se({project:me.target.value}),value:Ce})),v.createElement(x.Z,null,"The Project that this repo will belong to")))},pe=j=>{const{onChange:Z,rawErrors:oe,state:se}=j,{workspace:Ue,owner:lt}=se;return v.createElement(v.Fragment,null,v.createElement(H.Z,{margin:"normal",error:(oe==null?void 0:oe.length)>0&&!Ue},v.createElement(T.Z,{htmlFor:"ownerInput"},"Owner"),v.createElement(B.Z,{id:"ownerInput",onChange:ne=>Z({owner:ne.target.value}),value:lt}),v.createElement(x.Z,null,"The owner of the project (optional)")),v.createElement(H.Z,{margin:"normal",required:!0,error:(oe==null?void 0:oe.length)>0&&!Ue},v.createElement(T.Z,{htmlFor:"parentInput"},"Parent"),v.createElement(B.Z,{id:"parentInput",onChange:ne=>Z({workspace:ne.target.value}),value:Ue}),v.createElement(x.Z,null,"The project parent that the repo will belong to")))},Je=j=>{const{host:Z,hosts:oe,onChange:se,rawErrors:Ue}=j,lt=(0,N.h_)(d.lc),{value:{integrations:ne}={integrations:[]},loading:ce}=(0,F.default)(async()=>await lt.getIntegrationsList({allowedHosts:oe!=null?oe:[]}));(0,v.useEffect)(()=>{Z||(oe!=null&&oe.length?se(oe[0]):ne!=null&&ne.length&&se(ne[0].host))},[oe,Z,se,ne]);const Ce=ne?ne.filter(Y=>oe!=null&&oe.length?oe==null?void 0:oe.includes(Y.host):!0).map(Y=>({label:Y.title,value:Y.host})):[{label:"Loading...",value:"loading"}];return ce?v.createElement(S.Ex,null):v.createElement(v.Fragment,null,v.createElement(H.Z,{margin:"normal",required:!0,error:(Ue==null?void 0:Ue.length)>0&&!Z},v.createElement(S.Ph,{native:!0,disabled:(oe==null?void 0:oe.length)===1,label:"Host",onChange:Y=>se(String(Array.isArray(Y)?Y[0]:Y)),selected:Z,items:Ce,"data-testid":"host-select"}),v.createElement(x.Z,null,"The host where the repository will be created")))},ot=j=>{const{repoName:Z,allowedRepos:oe,onChange:se,rawErrors:Ue}=j;(0,v.useEffect)(()=>{Z||oe!=null&&oe.length&&se(oe[0])},[oe,Z,se]);const lt=oe?oe.map(ne=>({label:ne,value:ne})):[{label:"Loading...",value:"loading"}];return v.createElement(v.Fragment,null,v.createElement(H.Z,{margin:"normal",required:!0,error:(Ue==null?void 0:Ue.length)>0&&!Z},oe!=null&&oe.length?v.createElement(S.Ph,{native:!0,label:"Repositories Available",onChange:ne=>String(Array.isArray(ne)?ne[0]:ne),disabled:oe.length===1,selected:Z,items:lt}):v.createElement(v.Fragment,null,v.createElement(T.Z,{htmlFor:"repoNameInput"},"Repository"),v.createElement(B.Z,{id:"repoNameInput",onChange:ne=>se(String(ne.target.value)),value:Z})),v.createElement(x.Z,null,"The name of the repository")))};function Qe(j){if(!j.host)return;const Z=new URLSearchParams;return j.owner&&Z.set("owner",j.owner),j.repoName&&Z.set("repo",j.repoName),j.organization&&Z.set("organization",j.organization),j.workspace&&Z.set("workspace",j.workspace),j.project&&Z.set("project",j.project),`${j.host}?${Z.toString()}`}function Et(j){let Z="",oe="",se="",Ue="",lt="",ne="";try{if(j){const ce=new URL(`https://${j}`);Z=ce.host,oe=ce.searchParams.get("owner")||"",se=ce.searchParams.get("repo")||"",Ue=ce.searchParams.get("organization")||"",lt=ce.searchParams.get("workspace")||"",ne=ce.searchParams.get("project")||""}}catch{}return{host:Z,owner:oe,repoName:se,organization:Ue,workspace:lt,project:ne}}const dt=j=>{var Z,oe;const{uiSchema:se,onChange:Ue,rawErrors:lt,formData:ne}=j,[ce,Ce]=(0,v.useState)(Et(ne)),Y=(0,N.h_)(n.q3),te=(0,N.h_)(n.Om),{setSecrets:me}=(0,d.TD)(),Ie=(0,v.useMemo)(()=>{var Zt,Wt;return(Wt=(Zt=se==null?void 0:se["ui:options"])==null?void 0:Zt.allowedHosts)!=null?Wt:[]},[se]),Le=(0,v.useMemo)(()=>{var Zt,Wt;return(Wt=(Zt=se==null?void 0:se["ui:options"])==null?void 0:Zt.allowedOrganizations)!=null?Wt:[]},[se]),bt=(0,v.useMemo)(()=>{var Zt,Wt;return(Wt=(Zt=se==null?void 0:se["ui:options"])==null?void 0:Zt.allowedOwners)!=null?Wt:[]},[se]),ut=(0,v.useMemo)(()=>{var Zt,Wt;return(Wt=(Zt=se==null?void 0:se["ui:options"])==null?void 0:Zt.allowedProjects)!=null?Wt:[]},[se]),Ut=(0,v.useMemo)(()=>{var Zt,Wt;return(Wt=(Zt=se==null?void 0:se["ui:options"])==null?void 0:Zt.allowedRepos)!=null?Wt:[]},[se]),{owner:wt,organization:kt,project:Qt,repoName:un}=ce;(0,v.useEffect)(()=>{Ue(Qe(ce))},[ce,Ue]),(0,v.useEffect)(()=>{Le.length>0&&!kt&&Ce(Zt=>({...Zt,organization:Le[0]}))},[Ce,Le,kt]),(0,v.useEffect)(()=>{bt.length>0&&!wt&&Ce(Zt=>({...Zt,owner:bt[0]}))},[Ce,bt,wt]),(0,v.useEffect)(()=>{ut.length>0&&!Qt&&Ce(Zt=>({...Zt,project:ut[0]}))},[Ce,ut,Qt]),(0,v.useEffect)(()=>{Ut.length>0&&!un&&Ce(Zt=>({...Zt,repoName:Ut[0]}))},[Ce,Ut,un]);const ln=(0,v.useCallback)(Zt=>{Ce(Wt=>({...Wt,...Zt}))},[Ce]);(0,ie.Z)(async()=>{var Zt;const{requestUserCredentials:Wt}=(Zt=se==null?void 0:se["ui:options"])!=null?Zt:{},hn=ce.owner?ce.owner:ce.project;if(!Wt||!(ce.host&&hn&&ce.repoName))return;const[gn,yn]=[ce.host,ce.repoName].map(encodeURIComponent),{token:bn}=await te.getCredentials({url:`https://${gn}/${hn}/${yn}`,additionalScope:{repoWrite:!0,customScopes:Wt.additionalScopes}});me({[Wt.secretsKey]:bn})},500,[ce,se]);const tn=(oe=ce.host&&((Z=Y.byHost(ce.host))==null?void 0:Z.type))!=null?oe:null;return v.createElement(v.Fragment,null,v.createElement(Je,{host:ce.host,hosts:Ie,onChange:Zt=>Ce(Wt=>({...Wt,host:Zt})),rawErrors:lt}),tn==="github"&&v.createElement(de,{allowedOwners:bt,onChange:ln,rawErrors:lt,state:ce}),tn==="gitlab"&&v.createElement(Se,{allowedOwners:bt,rawErrors:lt,state:ce,onChange:ln}),tn==="bitbucket"&&v.createElement(st,{allowedOwners:bt,allowedProjects:ut,rawErrors:lt,state:ce,onChange:ln}),tn==="azure"&&v.createElement(Ne,{allowedOrganizations:Le,allowedOwners:bt,rawErrors:lt,state:ce,onChange:ln}),tn==="gerrit"&&v.createElement(pe,{rawErrors:lt,state:ce,onChange:ln}),v.createElement(ot,{repoName:ce.repoName,allowedRepos:Ut,onChange:Zt=>Ce(Wt=>({...Wt,repoName:Zt})),rawErrors:lt}))},jt=rt(g.z.string(),g.z.object({allowedKinds:g.z.array(g.z.string()).optional().describe("List of kinds of entities to derive options from"),defaultKind:g.z.string().optional().describe("The default entity kind. Options of this kind will not be prefixed."),allowArbitraryValues:g.z.boolean().optional().describe("Whether to allow arbitrary user input. Defaults to true"),defaultNamespace:g.z.union([g.z.string(),g.z.literal(!1)]).optional().describe("The default namespace. Options with this namespace will not be prefixed.")})).schema,Ht=j=>{var Z;const{schema:{title:oe="Entity",description:se="An entity from the catalog"},uiSchema:Ue,required:lt}=j,ne=(0,N.h_)(N.$4),{loading:ce,value:Ce}=(0,F.default)(async()=>(await ne.getBackstageIdentity()).ownershipEntityRefs),Y=(Z=Ue["ui:options"])==null?void 0:Z.allowedKinds;return ce?v.createElement(C.ZP,{loading:ce,renderInput:te=>v.createElement(k.Z,{...te,label:oe,margin:"dense",helperText:se,FormHelperTextProps:{margin:"dense",style:{marginLeft:0}},variant:"outlined",required:lt,InputProps:te.InputProps}),options:[]}):v.createElement(D,{...j,schema:{title:oe,description:se},allowedKinds:Y,catalogFilter:Y?{filter:{kind:Y,[`relations.${p.S4}`]:Ce||[]}}:{filter:{[`relations.${p.S4}`]:Ce||[]}}})},St=rt(g.z.array(g.z.string()),g.z.object({kinds:g.z.array(g.z.string()).optional().describe("List of kinds of entities to derive tags from"),showCounts:g.z.boolean().optional().describe("Whether to show usage counts per tag"),helperText:g.z.string().optional().describe("Helper text to display")})).schema,Mt=j=>{var Z,oe,se;const{formData:Ue,onChange:lt,uiSchema:ne}=j,ce=(0,N.h_)(K.Ah),[Ce,Y]=(0,v.useState)([]),[te,me]=(0,v.useState)(""),[Ie,Le]=(0,v.useState)(!1),bt=(0,p.In)().isValidTag,ut=(Z=ne["ui:options"])==null?void 0:Z.kinds,Ut=(oe=ne["ui:options"])==null?void 0:oe.showCounts,wt=(se=ne["ui:options"])==null?void 0:se.helperText,{loading:kt,value:Qt}=(0,F.default)(async()=>{const ln="metadata.tags",tn={facets:[ln]};ut&&(tn.filter={kind:ut});const{facets:Zt}=await ce.getEntityFacets(tn),Wt=Object.fromEntries(Zt[ln].map(({value:hn,count:gn})=>[hn,gn]));return Y(Object.keys(Wt).sort((hn,gn)=>Ut?Wt[gn]-Wt[hn]:hn.localeCompare(gn))),Wt}),un=(ln,tn)=>{let Zt=!1,Wt=!1;const hn=Ue||[];if(tn!=null&&tn.length&&hn.length<tn.length){const gn=tn[tn.length-1]=tn[tn.length-1].toLocaleLowerCase("en-US").trim();Zt=!bt(gn),Wt=hn.indexOf(gn)!==-1}Le(Zt),me(Zt?te:""),!Zt&&!Wt&&lt(tn||[])};return(0,Te.Z)(()=>lt(Ue||[])),v.createElement(H.Z,{margin:"normal"},v.createElement(C.ZP,{multiple:!0,freeSolo:!0,filterSelectedOptions:!0,onChange:un,value:Ue||[],inputValue:te,loading:kt,options:Ce,ChipProps:{size:"small"},renderOption:ln=>Ut?`${ln} (${Qt==null?void 0:Qt[ln]})`:ln,renderInput:ln=>v.createElement(k.Z,{...ln,label:"Tags",onChange:tn=>me(tn.target.value),error:Ie,helperText:wt!=null?wt:"Add any relevant tags, hit 'Enter' to add new tags. Valid format: [a-z0-9+#] separated by [-], at most 63 characters"})}))},Bt=(0,N.x8)({id:"register-component",optional:!0}),Ee=(0,N.x8)({id:"view-techdoc",optional:!0,params:["namespace","kind","name"]}),De=(0,N.NT)({id:"scaffolder"}),ct=(0,N.Rz)({id:"scaffolder/legacy/selected-template",parent:De,path:"/templates/:templateName"}),Ve=(0,N.Rz)({id:"scaffolder/selected-template",parent:De,path:"/templates/:namespace/:templateName"}),yt=(0,N.Rz)({id:"scaffolder/task",parent:De,path:"/tasks/:taskId"}),ye=(0,N.Rz)({id:"scaffolder/list-tasks",parent:De,path:"/tasks"}),mt=(0,N.Rz)({id:"scaffolder/actions",parent:De,path:"/actions"}),Ct=(0,N.Rz)({id:"scaffolder/edit",parent:De,path:"/edit"}),it=rt(g.z.string(),g.z.object({title:g.z.string().default("Group").describe("Group"),description:g.z.string().default("A group you are part of").describe("The group to which the entity belongs")})).schema,At=j=>{const{schema:{title:Z,description:oe},required:se,rawErrors:Ue,onChange:lt}=j,ne=(0,N.h_)(N.$4),ce=(0,N.h_)(K.Ah),Ce=(0,N.h_)(N.VE),[Y,te]=(0,v.useState)([]),[me,Ie]=(0,v.useState)(null);(0,F.default)(async()=>{const{userEntityRef:bt}=await ne.getBackstageIdentity();if(!bt){Ce.post(new i.dR("No user entity ref found"));return}const{items:ut}=await ce.getEntities({filter:{kind:"Group",["relations.hasMember"]:[bt]}}),Ut=ut.filter(wt=>Boolean(wt)).map(wt=>{var kt;return{label:(kt=wt.metadata.title)!=null?kt:wt.metadata.name,ref:(0,p.eE)(wt)}});te(Ut)});const Le=(bt,ut)=>{var Ut;Ie(ut),lt((Ut=ut==null?void 0:ut.ref)!=null?Ut:"")};return v.createElement(H.Z,{margin:"normal",required:se,error:(Ue==null?void 0:Ue.length)>0},v.createElement(C.ZP,{id:"OwnershipEntityRefPicker-dropdown",options:Y||[],value:me,onChange:Le,getOptionLabel:bt=>bt.label,renderInput:bt=>v.createElement(k.Z,{...bt,label:Z,margin:"dense",helperText:oe,FormHelperTextProps:{margin:"dense",style:{marginLeft:0}},variant:"outlined",required:se})}))},zt=(0,N.rx)({id:"scaffolder",apis:[(0,N.ni)({api:d.lc,deps:{discoveryApi:N.NW,scmIntegrationsApi:n.q3,fetchApi:N.gP,identityApi:N.$4},factory:({discoveryApi:j,scmIntegrationsApi:Z,fetchApi:oe,identityApi:se})=>new ke({discoveryApi:j,scmIntegrationsApi:Z,fetchApi:oe,identityApi:se})})],routes:{root:De,selectedTemplate:Ve,ongoingTask:yt,actions:mt,listTasks:ye,edit:Ct},externalRoutes:{registerComponent:Bt,viewTechDoc:Ee}}),ze=zt.provide((0,d.eP)({component:D,name:"EntityPicker",schema:rn})),Re=zt.provide((0,d.eP)({component:ae,name:"EntityNamePicker",validation:$,schema:z})),We=zt.provide((0,d.eP)({component:dt,name:"RepoUrlPicker",validation:q,schema:Rt})),je=zt.provide((0,d.eP)({component:ft,name:"OwnerPicker",schema:Ge})),W=zt.provide((0,d.eP)({component:At,name:"MyGroupsPicker",schema:it})),_=zt.provide((0,N.P4)({name:"ScaffolderPage",component:()=>Promise.all([e.e(4778),e.e(931),e.e(4745),e.e(8854)]).then(e.bind(e,7031)).then(j=>j.Router),mountPoint:De})),h=zt.provide((0,d.eP)({component:Ht,name:"OwnedEntityPicker",schema:jt})),M=zt.provide((0,d.eP)({component:Mt,name:"EntityTagsPicker",schema:St})),X=zt.provide((0,N.P4)({name:"NextScaffolderPage",component:()=>Promise.all([e.e(4778),e.e(931),e.e(4745),e.e(5456)]).then(e.bind(e,55456)).then(j=>j.Router),mountPoint:De}))},78990:function(Dt,E,e){"use strict";e.d(E,{Ho:function(){return n.s},sG:function(){return n.d}});var n=e(16362),d=e(15170),p=e(20082),i=e(12053),c=e(49462),m=e(34520),b=e(32272),R=e(19126),t=e.n(R),U=e(82394),w=e.n(U),N=e(31734),K=e.n(N),k=e(88285),H=e(30705),C=e(64304),v=e(2784),F=e(68111),g=e(80236),J=e(82108),x=e.n(J),B=e(72779),T=e.n(B),S=e(26228);const ie=null,Te=null,Pe=null,qe=null,xe=null,ke=null,rt=null},31734:function(Dt,E){var e,n,d;/** @license
* eventsource.js
* Available under MIT License (MIT)
* https://github.com/Yaffle/EventSource/
*/(function(p){"use strict";var i=p.setTimeout,c=p.clearTimeout,m=p.XMLHttpRequest,b=p.XDomainRequest,R=p.ActiveXObject,t=p.EventSource,U=p.document,w=p.Promise,N=p.fetch,K=p.Response,k=p.TextDecoder,H=p.TextEncoder,C=p.AbortController;if(typeof window!="undefined"&&typeof U!="undefined"&&!("readyState"in U)&&U.body==null&&(U.readyState="loading",window.addEventListener("load",function(pe){U.readyState="complete"},!1)),m==null&&R!=null&&(m=function(){return new R("Microsoft.XMLHTTP")}),Object.create==null&&(Object.create=function(pe){function Je(){}return Je.prototype=pe,new Je}),Date.now||(Date.now=function(){return new Date().getTime()}),C==null){var v=N;N=function(pe,Je){var ot=Je.signal;return v(pe,{headers:Je.headers,credentials:Je.credentials,cache:Je.cache}).then(function(Qe){var Et=Qe.body.getReader();return ot._reader=Et,ot._aborted&&ot._reader.cancel(),{status:Qe.status,statusText:Qe.statusText,headers:Qe.headers,body:{getReader:function(){return Et}}}})},C=function(){this.signal={_reader:null,_aborted:!1},this.abort=function(){this.signal._reader!=null&&this.signal._reader.cancel(),this.signal._aborted=!0}}}function F(){this.bitsNeeded=0,this.codePoint=0}F.prototype.decode=function(pe){function Je(Ye,St,Mt){if(Mt===1)return Ye>=128>>St&&Ye<<St<=2047;if(Mt===2)return Ye>=2048>>St&&Ye<<St<=55295||Ye>=57344>>St&&Ye<<St<=65535;if(Mt===3)return Ye>=65536>>St&&Ye<<St<=1114111;throw new Error}function ot(Ye,St){if(Ye===6*1)return St>>6>15?3:St>31?2:1;if(Ye===6*2)return St>15?3:2;if(Ye===6*3)return 3;throw new Error}for(var Qe=65533,Et="",dt=this.bitsNeeded,Vt=this.codePoint,jt=0;jt<pe.length;jt+=1){var Ht=pe[jt];dt!==0&&(Ht<128||Ht>191||!Je(Vt<<6|Ht&63,dt-6,ot(dt,Vt)))&&(dt=0,Vt=Qe,Et+=String.fromCharCode(Vt)),dt===0?(Ht>=0&&Ht<=127?(dt=0,Vt=Ht):Ht>=192&&Ht<=223?(dt=6*1,Vt=Ht&31):Ht>=224&&Ht<=239?(dt=6*2,Vt=Ht&15):Ht>=240&&Ht<=247?(dt=6*3,Vt=Ht&7):(dt=0,Vt=Qe),dt!==0&&!Je(Vt,dt,ot(dt,Vt))&&(dt=0,Vt=Qe)):(dt-=6,Vt=Vt<<6|Ht&63),dt===0&&(Vt<=65535?Et+=String.fromCharCode(Vt):(Et+=String.fromCharCode(55296+(Vt-65535-1>>10)),Et+=String.fromCharCode(56320+(Vt-65535-1&1023))))}return this.bitsNeeded=dt,this.codePoint=Vt,Et};var g=function(){try{return new k().decode(new H().encode("test"),{stream:!0})==="test"}catch(pe){console.debug("TextDecoder does not support streaming option. Using polyfill instead: "+pe)}return!1};(k==null||H==null||!g())&&(k=F);var J=function(){};function x(pe){this.withCredentials=!1,this.readyState=0,this.status=0,this.statusText="",this.responseText="",this.onprogress=J,this.onload=J,this.onerror=J,this.onreadystatechange=J,this._contentType="",this._xhr=pe,this._sendTimeout=0,this._abort=J}x.prototype.open=function(pe,Je){this._abort(!0);var ot=this,Qe=this._xhr,Et=1,dt=0;this._abort=function(Mt){ot._sendTimeout!==0&&(c(ot._sendTimeout),ot._sendTimeout=0),(Et===1||Et===2||Et===3)&&(Et=4,Qe.onload=J,Qe.onerror=J,Qe.onabort=J,Qe.onprogress=J,Qe.onreadystatechange=J,Qe.abort(),dt!==0&&(c(dt),dt=0),Mt||(ot.readyState=4,ot.onabort(null),ot.onreadystatechange())),Et=0};var Vt=function(){if(Et===1){var Mt=0,Bt="",Ee=void 0;if("contentType"in Qe)Mt=200,Bt="OK",Ee=Qe.contentType;else try{Mt=Qe.status,Bt=Qe.statusText,Ee=Qe.getResponseHeader("Content-Type")}catch{Mt=0,Bt="",Ee=void 0}Mt!==0&&(Et=2,ot.readyState=2,ot.status=Mt,ot.statusText=Bt,ot._contentType=Ee,ot.onreadystatechange())}},jt=function(){if(Vt(),Et===2||Et===3){Et=3;var Mt="";try{Mt=Qe.responseText}catch{}ot.readyState=3,ot.responseText=Mt,ot.onprogress()}},Ht=function(Mt,Bt){if((Bt==null||Bt.preventDefault==null)&&(Bt={preventDefault:J}),jt(),Et===1||Et===2||Et===3){if(Et=4,dt!==0&&(c(dt),dt=0),ot.readyState=4,Mt==="load")ot.onload(Bt);else if(Mt==="error")ot.onerror(Bt);else if(Mt==="abort")ot.onabort(Bt);else throw new TypeError;ot.onreadystatechange()}},Ye=function(Mt){Qe!=null&&(Qe.readyState===4?(!("onload"in Qe)||!("onerror"in Qe)||!("onabort"in Qe))&&Ht(Qe.responseText===""?"error":"load",Mt):Qe.readyState===3?"onprogress"in Qe||jt():Qe.readyState===2&&Vt())},St=function(){dt=i(function(){St()},500),Qe.readyState===3&&jt()};"onload"in Qe&&(Qe.onload=function(Mt){Ht("load",Mt)}),"onerror"in Qe&&(Qe.onerror=function(Mt){Ht("error",Mt)}),"onabort"in Qe&&(Qe.onabort=function(Mt){Ht("abort",Mt)}),"onprogress"in Qe&&(Qe.onprogress=jt),"onreadystatechange"in Qe&&(Qe.onreadystatechange=function(Mt){Ye(Mt)}),("contentType"in Qe||!("ontimeout"in m.prototype))&&(Je+=(Je.indexOf("?")===-1?"?":"&")+"padding=true"),Qe.open(pe,Je,!0),"readyState"in Qe&&(dt=i(function(){St()},0))},x.prototype.abort=function(){this._abort(!1)},x.prototype.getResponseHeader=function(pe){return this._contentType},x.prototype.setRequestHeader=function(pe,Je){var ot=this._xhr;"setRequestHeader"in ot&&ot.setRequestHeader(pe,Je)},x.prototype.getAllResponseHeaders=function(){return this._xhr.getAllResponseHeaders!=null&&this._xhr.getAllResponseHeaders()||""},x.prototype.send=function(){if((!("ontimeout"in m.prototype)||!("sendAsBinary"in m.prototype)&&!("mozAnon"in m.prototype))&&U!=null&&U.readyState!=null&&U.readyState!=="complete"){var pe=this;pe._sendTimeout=i(function(){pe._sendTimeout=0,pe.send()},4);return}var Je=this._xhr;"withCredentials"in Je&&(Je.withCredentials=this.withCredentials);try{Je.send(void 0)}catch(ot){throw ot}};function B(pe){return pe.replace(/[A-Z]/g,function(Je){return String.fromCharCode(Je.charCodeAt(0)+32)})}function T(pe){for(var Je=Object.create(null),ot=pe.split(`\r
`),Qe=0;Qe<ot.length;Qe+=1){var Et=ot[Qe],dt=Et.split(": "),Vt=dt.shift(),jt=dt.join(": ");Je[B(Vt)]=jt}this._map=Je}T.prototype.get=function(pe){return this._map[B(pe)]},m!=null&&m.HEADERS_RECEIVED==null&&(m.HEADERS_RECEIVED=2);function S(){}S.prototype.open=function(pe,Je,ot,Qe,Et,dt,Vt){pe.open("GET",Et);var jt=0;pe.onprogress=function(){var Ye=pe.responseText,St=Ye.slice(jt);jt+=St.length,ot(St)},pe.onerror=function(Ye){Ye.preventDefault(),Qe(new Error("NetworkError"))},pe.onload=function(){Qe(null)},pe.onabort=function(){Qe(null)},pe.onreadystatechange=function(){if(pe.readyState===m.HEADERS_RECEIVED){var Ye=pe.status,St=pe.statusText,Mt=pe.getResponseHeader("Content-Type"),Bt=pe.getAllResponseHeaders();Je(Ye,St,Mt,new T(Bt))}},pe.withCredentials=dt;for(var Ht in Vt)Object.prototype.hasOwnProperty.call(Vt,Ht)&&pe.setRequestHeader(Ht,Vt[Ht]);return pe.send(),pe};function ie(pe){this._headers=pe}ie.prototype.get=function(pe){return this._headers.get(pe)};function Te(){}Te.prototype.open=function(pe,Je,ot,Qe,Et,dt,Vt){var jt=null,Ht=new C,Ye=Ht.signal,St=new k;return N(Et,{headers:Vt,credentials:dt?"include":"same-origin",signal:Ye,cache:"no-store"}).then(function(Mt){return jt=Mt.body.getReader(),Je(Mt.status,Mt.statusText,Mt.headers.get("Content-Type"),new ie(Mt.headers)),new w(function(Bt,Ee){var De=function(){jt.read().then(function(ct){if(ct.done)Bt(void 0);else{var Ve=St.decode(ct.value,{stream:!0});ot(Ve),De()}}).catch(function(ct){Ee(ct)})};De()})}).catch(function(Mt){if(Mt.name!=="AbortError")return Mt}).then(function(Mt){Qe(Mt)}),{abort:function(){jt!=null&&jt.cancel(),Ht.abort()}}};function Pe(){this._listeners=Object.create(null)}function qe(pe){i(function(){throw pe},0)}Pe.prototype.dispatchEvent=function(pe){pe.target=this;var Je=this._listeners[pe.type];if(Je!=null)for(var ot=Je.length,Qe=0;Qe<ot;Qe+=1){var Et=Je[Qe];try{typeof Et.handleEvent=="function"?Et.handleEvent(pe):Et.call(this,pe)}catch(dt){qe(dt)}}},Pe.prototype.addEventListener=function(pe,Je){pe=String(pe);var ot=this._listeners,Qe=ot[pe];Qe==null&&(Qe=[],ot[pe]=Qe);for(var Et=!1,dt=0;dt<Qe.length;dt+=1)Qe[dt]===Je&&(Et=!0);Et||Qe.push(Je)},Pe.prototype.removeEventListener=function(pe,Je){pe=String(pe);var ot=this._listeners,Qe=ot[pe];if(Qe!=null){for(var Et=[],dt=0;dt<Qe.length;dt+=1)Qe[dt]!==Je&&Et.push(Qe[dt]);Et.length===0?delete ot[pe]:ot[pe]=Et}};function xe(pe){this.type=pe,this.target=void 0}function ke(pe,Je){xe.call(this,pe),this.data=Je.data,this.lastEventId=Je.lastEventId}ke.prototype=Object.create(xe.prototype);function rt(pe,Je){xe.call(this,pe),this.status=Je.status,this.statusText=Je.statusText,this.headers=Je.headers}rt.prototype=Object.create(xe.prototype);function Kt(pe,Je){xe.call(this,pe),this.error=Je.error}Kt.prototype=Object.create(xe.prototype);var Nt=-1,rn=0,D=1,we=2,ue=-1,Ke=0,$=1,A=2,z=3,ae=/^text\/event\-stream(;.*)?$/i,$e=1e3,Ge=18e6,ft=function(pe,Je){var ot=pe==null?Je:parseInt(pe,10);return ot!==ot&&(ot=Je),nt(ot)},nt=function(pe){return Math.min(Math.max(pe,$e),Ge)},Rt=function(pe,Je,ot){try{typeof Je=="function"&&Je.call(pe,ot)}catch(Qe){qe(Qe)}};function q(pe,Je){Pe.call(this),Je=Je||{},this.onopen=void 0,this.onmessage=void 0,this.onerror=void 0,this.url=void 0,this.readyState=void 0,this.withCredentials=void 0,this.headers=void 0,this._close=void 0,Ne(this,pe,Je)}function de(){return m!=null&&"withCredentials"in m.prototype||b==null?new m:new b}var Se=N!=null&&K!=null&&"body"in K.prototype;function Ne(pe,Je,ot){Je=String(Je);var Qe=Boolean(ot.withCredentials),Et=ot.lastEventIdQueryParameterName||"lastEventId",dt=nt(1e3),Vt=ft(ot.heartbeatTimeout,45e3),jt="",Ht=dt,Ye=!1,St=0,Mt=ot.headers||{},Bt=ot.Transport,Ee=Se&&Bt==null?void 0:new x(Bt!=null?new Bt:de()),De=Bt!=null&&typeof Bt!="string"?new Bt:Ee==null?new Te:new S,ct=void 0,Ve=0,yt=Nt,ye="",mt="",Ct="",_t="",it=Ke,At=0,zt=0,ze=function(_,h,M,X){if(yt===rn)if(_===200&&M!=null&&ae.test(M)){yt=D,Ye=Date.now(),Ht=dt,pe.readyState=D;var j=new rt("open",{status:_,statusText:h,headers:X});pe.dispatchEvent(j),Rt(pe,pe.onopen,j)}else{var Z="";_!==200?(h&&(h=h.replace(/\s+/g," ")),Z="EventSource's response has a status "+_+" "+h+" that is not 200. Aborting the connection."):Z="EventSource's response has a Content-Type specifying an unsupported type: "+(M==null?"-":M.replace(/\s+/g," "))+". Aborting the connection.",je();var j=new rt("error",{status:_,statusText:h,headers:X});pe.dispatchEvent(j),Rt(pe,pe.onerror,j),console.error(Z)}},Re=function(_){if(yt===D){for(var h=-1,M=0;M<_.length;M+=1){var X=_.charCodeAt(M);(X===`
`.charCodeAt(0)||X==="\r".charCodeAt(0))&&(h=M)}var j=(h!==-1?_t:"")+_.slice(0,h+1);_t=(h===-1?_t:"")+_.slice(h+1),_!==""&&(Ye=Date.now(),St+=_.length);for(var Z=0;Z<j.length;Z+=1){var X=j.charCodeAt(Z);if(it===ue&&X===`
`.charCodeAt(0))it=Ke;else if(it===ue&&(it=Ke),X==="\r".charCodeAt(0)||X===`
`.charCodeAt(0)){if(it!==Ke){it===$&&(zt=Z+1);var oe=j.slice(At,zt-1),se=j.slice(zt+(zt<Z&&j.charCodeAt(zt)===" ".charCodeAt(0)?1:0),Z);oe==="data"?(ye+=`
`,ye+=se):oe==="id"?mt=se:oe==="event"?Ct=se:oe==="retry"?(dt=ft(se,dt),Ht=dt):oe==="heartbeatTimeout"&&(Vt=ft(se,Vt),Ve!==0&&(c(Ve),Ve=i(function(){W()},Vt)))}if(it===Ke){if(ye!==""){jt=mt,Ct===""&&(Ct="message");var Ue=new ke(Ct,{data:ye.slice(1),lastEventId:mt});if(pe.dispatchEvent(Ue),Ct==="open"?Rt(pe,pe.onopen,Ue):Ct==="message"?Rt(pe,pe.onmessage,Ue):Ct==="error"&&Rt(pe,pe.onerror,Ue),yt===we)return}ye="",Ct=""}it=X==="\r".charCodeAt(0)?ue:Ke}else it===Ke&&(At=Z,it=$),it===$?X===":".charCodeAt(0)&&(zt=Z+1,it=A):it===A&&(it=z)}}},We=function(_){if(yt===D||yt===rn){yt=Nt,Ve!==0&&(c(Ve),Ve=0),Ve=i(function(){W()},Ht),Ht=nt(Math.min(dt*16,Ht*2)),pe.readyState=rn;var h=new Kt("error",{error:_});pe.dispatchEvent(h),Rt(pe,pe.onerror,h),_!=null&&console.error(_)}},je=function(){yt=we,ct!=null&&(ct.abort(),ct=void 0),Ve!==0&&(c(Ve),Ve=0),pe.readyState=we},W=function(){if(Ve=0,yt!==Nt){if(!Ye&&ct!=null)We(new Error("No activity within "+Vt+" milliseconds. "+(yt===rn?"No response received.":St+" chars received.")+" Reconnecting.")),ct!=null&&(ct.abort(),ct=void 0);else{var _=Math.max((Ye||Date.now())+Vt-Date.now(),1);Ye=!1,Ve=i(function(){W()},_)}return}Ye=!1,St=0,Ve=i(function(){W()},Vt),yt=rn,ye="",Ct="",mt=jt,_t="",At=0,zt=0,it=Ke;var h=Je;if(Je.slice(0,5)!=="data:"&&Je.slice(0,5)!=="blob:"&&jt!==""){var M=Je.indexOf("?");h=M===-1?Je:Je.slice(0,M+1)+Je.slice(M+1).replace(/(?:^|&)([^=&]*)(?:=[^&]*)?/g,function(se,Ue){return Ue===Et?"":se}),h+=(Je.indexOf("?")===-1?"?":"&")+Et+"="+encodeURIComponent(jt)}var X=pe.withCredentials,j={};j.Accept="text/event-stream";var Z=pe.headers;if(Z!=null)for(var oe in Z)Object.prototype.hasOwnProperty.call(Z,oe)&&(j[oe]=Z[oe]);try{ct=De.open(Ee,ze,Re,We,h,X,j)}catch(se){throw je(),se}};pe.url=Je,pe.readyState=rn,pe.withCredentials=Qe,pe.headers=Mt,pe._close=je,W()}q.prototype=Object.create(Pe.prototype),q.prototype.CONNECTING=rn,q.prototype.OPEN=D,q.prototype.CLOSED=we,q.prototype.close=function(){this._close()},q.CONNECTING=rn,q.OPEN=D,q.CLOSED=we,q.prototype.withCredentials=void 0;var st=t;m!=null&&(t==null||!("withCredentials"in t.prototype))&&(st=q),function(pe){if(typeof Dt.exports=="object"){var Je=pe(E);Je!==void 0&&(Dt.exports=Je)}else n=[E],e=pe,d=typeof e=="function"?e.apply(E,n):e,d!==void 0&&(Dt.exports=d)}(function(pe){pe.EventSourcePolyfill=q,pe.NativeEventSource=t,pe.EventSource=st})})(typeof globalThis=="undefined"?typeof window!="undefined"?window:typeof self!="undefined"?self:this:globalThis)},92573:function(Dt,E,e){"use strict";e.d(E,{E1:function(){return pe},E5:function(){return ne},FA:function(){return ae},GQ:function(){return oe},Nd:function(){return de},Rx:function(){return Ge},US:function(){return st},ay:function(){return Bt},gK:function(){return $},lt:function(){return _t},qO:function(){return Et},wy:function(){return Ve}});var n=e(30705),d=e(2784),p=e(79692),i=e(50581),c=e(61837),m=e(86619),b=e(4614),R=e(7089),t=e(42494),U=e(84899),w=e(5806),N=e(21324),K=e(56939),k=e(73698),H=e(12231),C=e(90436),v=e(28899),F=e(86136),g=e(49378),J=e(95544),x=e(77277),B=e(38402),T=e(11776),S=e(21853),ie=e(48760),Te=e(76635),Pe=e.n(Te),qe=e(64279),xe=e(25557),ke=e(18473),rt=e(88013),Kt=e(69294),Nt=e(80236),rn=e(19126),D=e.n(rn),we=e(27742),ue=e(35352),Ke=e(48834).Buffer;const $=(0,n.T0)({id:"plugin.search.queryservice"});class A{constructor(te){this.mockedResults=te}query(){return Promise.resolve(this.mockedResults||{results:[]})}}const z=(0,p.Z)(()=>({highlight:{}}),{name:"BackstageHighlightedSearchResultText"}),ae=Y=>{const{text:te,preTag:me,postTag:Ie}=Y,Le=z(),bt=(0,d.useMemo)(()=>te.split(new RegExp(`(${me}.+?${Ie})`)),[Ie,me,te]);return d.createElement(d.Fragment,null,bt.map((ut,Ut)=>ut.includes(me)?d.createElement("mark",{className:Le.highlight,key:Ut},ut.replace(new RegExp(`${me}|${Ie}`,"g"),"")):ut))},$e=(0,ke.CT)("search-context"),Ge=()=>{const Y=(0,d.useContext)($e);if(!Y)throw new Error("useSearch must be used within a SearchContextProvider");const te=Y.atVersion(1);if(!te)throw new Error("No SearchContext v1 found");return te},ft=()=>(0,d.useContext)($e)!==void 0,nt={term:"",types:[],filters:{},pageLimit:void 0,pageCursor:void 0},Rt=(Y=nt)=>{var te,me,Ie,Le;const bt=(0,n.h_)($),[ut,Ut]=(0,d.useState)(Y.term),[wt,kt]=(0,d.useState)(Y.types),[Qt,un]=(0,d.useState)(Y.filters),[ln,tn]=(0,d.useState)(Y.pageLimit),[Zt,Wt]=(0,d.useState)(Y.pageCursor),hn=(0,xe.Z)(ut),gn=(0,xe.Z)(Qt),yn=(0,qe.default)(()=>bt.query({term:ut,types:wt,filters:Qt,pageLimit:ln,pageCursor:Zt}),[ut,wt,Qt,ln,Zt]),bn=!yn.loading&&!yn.error&&((te=yn.value)==null?void 0:te.nextPageCursor),In=!yn.loading&&!yn.error&&((me=yn.value)==null?void 0:me.previousPageCursor),An=(0,d.useCallback)(()=>{var Dn;Wt((Dn=yn.value)==null?void 0:Dn.nextPageCursor)},[(Ie=yn.value)==null?void 0:Ie.nextPageCursor]),On=(0,d.useCallback)(()=>{var Dn;Wt((Dn=yn.value)==null?void 0:Dn.previousPageCursor)},[(Le=yn.value)==null?void 0:Le.previousPageCursor]);return(0,d.useEffect)(()=>{hn!==void 0&&ut!==hn&&Wt(void 0)},[ut,hn,Wt]),(0,d.useEffect)(()=>{gn!==void 0&&!(0,Te.isEqual)(Qt,gn)&&Wt(void 0)},[Qt,gn,Wt]),{result:yn,term:ut,setTerm:Ut,types:wt,setTypes:kt,filters:Qt,setFilters:un,pageLimit:ln,setPageLimit:tn,pageCursor:Zt,setPageCursor:Wt,fetchNextPage:bn?An:void 0,fetchPreviousPage:In?On:void 0}},q=Y=>{const{initialState:te,children:me}=Y,Ie=Rt(te);return d.createElement(n.fC,{attributes:{searchTypes:Ie.types.sort().join(",")}},d.createElement($e.Provider,{value:(0,ke.EI)({1:Ie})},me))},de=Y=>{const{initialState:te,inheritParentContextIfAvailable:me,children:Ie}=Y;return ft()&&me?d.createElement(d.Fragment,null,Ie):d.createElement(q,{initialState:te},Ie)},Se=({children:Y})=>{var te,me;const Ie=Qt=>(0,xe.Z)(Qt)!==Qt,Le=(0,n.z$)(),{term:bt,result:ut}=Ge(),Ut=(me=(te=ut.value)==null?void 0:te.numberOfResults)!=null?me:void 0,kt=Ie(ut.loading)&&!ut.loading;return(0,d.useEffect)(()=>{bt&&kt&&Le.captureEvent("search",bt,{value:Ut})},[Le,bt,Ut,kt]),d.createElement(d.Fragment,null,Y)};function Ne(Y){return(0,d.forwardRef)((te,me)=>d.createElement(de,{inheritParentContextIfAvailable:!0},d.createElement(Y,{...te,ref:me})))}const st=Ne((0,d.forwardRef)((Y,te)=>{const{onChange:me,onKeyDown:Ie=()=>{},onClear:Le=()=>{},onSubmit:bt=()=>{},debounceTime:ut=200,clearButton:Ut=!0,fullWidth:wt=!0,value:kt,label:Qt,placeholder:un,inputProps:ln={},InputProps:tn={},endAdornment:Zt,...Wt}=Y,hn=(0,n.h_)(n.Ds),[gn,yn]=(0,d.useState)("");(0,d.useEffect)(()=>{yn(zn=>zn!==kt?String(kt):zn)},[kt]),(0,ie.Z)(()=>me(gn),ut,[gn]);const bn=(0,d.useCallback)(zn=>{yn(zn.target.value)},[yn]),In=(0,d.useCallback)(zn=>{Ie&&Ie(zn),bt&&zn.key==="Enter"&&bt()},[Ie,bt]),An=(0,d.useCallback)(()=>{me(""),Le&&Le()},[me,Le]),On=Qt?void 0:"Search",Sn=un!=null?un:`Search in ${hn.getOptionalString("app.title")||"Backstage"}`,Dn=d.createElement(i.Z,{position:"start"},d.createElement(c.Z,{"aria-label":"Query",size:"small",disabled:!0},d.createElement(S.Z,null))),sr=d.createElement(i.Z,{position:"end"},d.createElement(x.Z,{"aria-label":"Clear",size:"small",onClick:An,onKeyDown:zn=>{zn.key==="Enter"&&zn.stopPropagation()}},"Clear"));return d.createElement(Se,null,d.createElement(m.Z,{id:"search-bar-text-field","data-testid":"search-bar-next",variant:"outlined",margin:"normal",inputRef:te,value:gn,label:Qt,placeholder:Sn,InputProps:{startAdornment:Dn,endAdornment:Ut?sr:Zt,...tn},inputProps:{"aria-label":On,...ln},fullWidth:wt,onChange:bn,onKeyDown:In,...Wt}))})),pe=Ne((0,d.forwardRef)((Y,te)=>{const{value:me="",onChange:Ie,...Le}=Y,{term:bt,setTerm:ut}=Ge();(0,d.useEffect)(()=>{me&&ut(String(me))},[me,ut]);const Ut=(0,d.useCallback)(wt=>{Ie?Ie(wt):ut(wt)},[Ie,ut]);return d.createElement(n.fC,{attributes:{pluginId:"search",extension:"SearchBar"}},d.createElement(st,{...Le,ref:te,value:bt,onChange:Ut}))})),Je=(0,p.Z)(Y=>({loading:{right:Y.spacing(1),position:"absolute"}})),ot=Y=>te=>d.createElement(de,{inheritParentContextIfAvailable:!0},d.createElement(Y,{...te})),Qe=()=>{const Y=Je();return d.createElement(b.Z,{className:Y.loading,"data-testid":"search-autocomplete-progressbar",color:"inherit",size:20})},Et=ot(function(te){const{loading:me,value:Ie,onChange:Le=()=>{},options:bt=[],getOptionLabel:ut=bn=>String(bn),inputPlaceholder:Ut,inputDebounceTime:wt,freeSolo:kt=!0,fullWidth:Qt=!0,clearOnBlur:un=!1,"data-testid":ln="search-autocomplete",...tn}=te,{setTerm:Zt}=Ge(),Wt=(0,d.useCallback)(bn=>bn?typeof bn=="string"?bn:ut(bn):"",[ut]),hn=(0,d.useMemo)(()=>Wt(Ie),[Ie,Wt]),gn=(0,d.useCallback)((bn,In,An,On)=>{Zt(Wt(In)),Le(bn,In,An,On)},[Wt,Zt,Le]),yn=(0,d.useCallback)(({InputProps:{ref:bn,className:In,endAdornment:An},InputLabelProps:On,...Sn})=>d.createElement(pe,{...Sn,ref:bn,clearButton:!1,value:hn,placeholder:Ut,debounceTime:wt,endAdornment:me?d.createElement(Qe,null):An,InputProps:{className:In}}),[me,hn,Ut,wt]);return d.createElement(rt.ZP,{...tn,"data-testid":ln,value:Ie,onChange:gn,options:bt,getOptionLabel:ut,renderInput:yn,freeSolo:kt,fullWidth:Qt,clearOnBlur:un})}),dt=Y=>{const{icon:te,primaryText:me,primaryTextTypographyProps:Ie,secondaryText:Le,secondaryTextTypographyProps:bt,disableTextTypography:ut}=Y;return React.createElement(React.Fragment,null,te?React.createElement(ListItemIcon,null,te):null,React.createElement(ListItemText,{primary:me,primaryTypographyProps:Ie,secondary:Le,secondaryTypographyProps:bt,disableTypography:ut}))},Vt=(Y,te,me=[],Ie=250)=>{const Le=(0,d.useRef)({}),bt=Y||(()=>Promise.resolve([])),[ut,Ut]=(0,Kt.default)(bt,[te],{loading:!0});if((0,ie.Z)(()=>{Le.current[te]===void 0&&(Le.current[te]=Ut(te).then(kt=>(Le.current[te]=kt,kt)))},Ie,[Ut,te]),me.length)return{loading:!1,value:me};const wt=Le.current[te];return Array.isArray(wt)?{loading:!1,value:wt}:ut},jt=(Y,te)=>{const{setFilters:me}=Ge();(0,d.useEffect)(()=>{te&&[te].flat().length>0&&me(Ie=>({...Ie,[Y]:te}))},[])},Ht=Y=>{const{className:te,defaultValue:me,name:Ie,values:Le,valuesDebounceMs:bt,label:ut,filterSelectedOptions:Ut,limitTags:wt,multiple:kt}=Y,[Qt,un]=(0,d.useState)("");jt(Ie,me);const ln=typeof Le=="function"?Le:void 0,tn=typeof Le=="function"?void 0:Le,{value:Zt,loading:Wt}=Vt(ln,Qt,tn,bt),{filters:hn,setFilters:gn}=Ge(),yn=hn[Ie]||(kt?[]:null),bn=(On,Sn)=>{gn(Dn=>{const{[Ie]:sr,...zn}=Dn;return Sn?{...zn,[Ie]:Sn}:{...zn}})},In=On=>d.createElement(m.Z,{...On,name:"search",variant:"outlined",label:ut,fullWidth:!0}),An=(On,Sn)=>On.map((Dn,sr)=>d.createElement(R.Z,{label:Dn,color:"primary",...Sn({index:sr})}));return d.createElement(rt.ZP,{filterSelectedOptions:Ut,limitTags:wt,multiple:kt,className:te,id:`${kt?"multi-":""}select-filter-${Ie}--select`,options:Zt||[],loading:Wt,value:yn,onChange:bn,onInputChange:(On,Sn)=>un(Sn),renderInput:In,renderTags:An})},Ye=(0,p.Z)({label:{textTransform:"capitalize"},checkboxWrapper:{display:"flex",alignItems:"center",width:"100%"},textWrapper:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}}),St=Y=>{const{className:te,defaultValue:me,label:Ie,name:Le,values:bt=[],valuesDebounceMs:ut}=Y,Ut=Ye(),{filters:wt,setFilters:kt}=Ge();jt(Le,me);const Qt=typeof bt=="function"?bt:void 0,un=typeof bt=="function"?void 0:bt,{value:ln=[],loading:tn}=Vt(Qt,"",un,ut),Zt=Wt=>{const{target:{value:hn,checked:gn}}=Wt;kt(yn=>{const{[Le]:bn,...In}=yn,An=(bn||[]).filter(Sn=>Sn!==hn),On=gn?[...An,hn]:An;return On.length?{...In,[Le]:On}:In})};return d.createElement(t.Z,{className:te,disabled:tn,fullWidth:!0,"data-testid":"search-checkboxfilter-next"},Ie?d.createElement(U.Z,{className:Ut.label},Ie):null,ln.map(Wt=>{var hn;return d.createElement(w.Z,{key:Wt,classes:{root:Ut.checkboxWrapper,label:Ut.textWrapper},label:Wt,control:d.createElement(N.Z,{color:"primary",inputProps:{"aria-labelledby":Wt},value:Wt,name:Wt,onChange:Zt,checked:((hn=wt[Le])!=null?hn:[]).includes(Wt)})})}))},Mt=Y=>{const{className:te,defaultValue:me,label:Ie,name:Le,values:bt,valuesDebounceMs:ut}=Y,Ut=Ye();jt(Le,me);const wt=typeof bt=="function"?bt:void 0,kt=typeof bt=="function"?void 0:bt,{value:Qt=[],loading:un}=Vt(wt,"",kt,ut),{filters:ln,setFilters:tn}=Ge(),Zt=Wt=>{const{target:{value:hn}}=Wt;tn(gn=>{const{[Le]:yn,...bn}=gn;return hn?{...bn,[Le]:hn}:bn})};return d.createElement(t.Z,{disabled:un,className:te,variant:"filled",fullWidth:!0,"data-testid":"search-selectfilter-next"},Ie?d.createElement(K.Z,{className:Ut.label,margin:"dense"},Ie):null,d.createElement(k.Z,{variant:"outlined",value:ln[Le]||"",onChange:Zt},d.createElement(H.Z,{value:""},d.createElement("em",null,"All")),Qt.map(Wt=>d.createElement(H.Z,{key:Wt,value:Wt},d.createElement(C.Z,{variant:"inherit",noWrap:!0},Wt)))))},Bt=Y=>{const{component:te,...me}=Y;return d.createElement(te,{...me})};Bt.Checkbox=Y=>d.createElement(Bt,{...Y,component:St}),Bt.Select=Y=>d.createElement(Bt,{...Y,component:Mt}),Bt.Autocomplete=Y=>d.createElement(Bt,{...Y,component:Ht});const Ee=Y=>Ke.from(Y.toString(),"utf-8").toString("base64"),De=Y=>Y?Number(Ke.from(Y,"base64").toString("utf-8")):0,ct=Y=>{const{total:te=-1,cursor:me,hasNextPage:Ie,onCursorChange:Le,limit:bt=25,limitLabel:ut="Results per page:",limitText:Ut=({from:Zt,to:Wt})=>te>0?`of ${te}`:`${Zt}-${Wt}`,limitOptions:wt,onLimitChange:kt,...Qt}=Y,un=(0,d.useMemo)(()=>De(me),[me]),ln=(0,d.useCallback)((Zt,Wt)=>{Le==null||Le(Ee(Wt))},[Le]),tn=(0,d.useCallback)(Zt=>{const Wt=Zt.target.value;kt==null||kt(parseInt(Wt,10))},[kt]);return d.createElement(v.Z,{...Qt,component:"div",count:te,page:un,nextIconButtonProps:{...Ie!==void 0&&{disabled:!Ie}},onPageChange:ln,rowsPerPage:bt,labelRowsPerPage:ut,labelDisplayedRows:Ut,rowsPerPageOptions:wt,onRowsPerPageChange:tn})},Ve=Y=>{const{pageLimit:te,setPageLimit:me,pageCursor:Ie,setPageCursor:Le,fetchNextPage:bt}=Ge(),ut=(0,d.useCallback)(Ut=>{me(Ut),Le(void 0)},[me,Le]);return d.createElement(ct,{...Y,hasNextPage:!!bt,limit:te,onLimitChange:ut,cursor:Ie,onCursorChange:Le})},yt=Y=>{const{children:te}=Y,me=Ge(),{result:Ie,...Le}=me;return te(Ie,Le)},ye=Y=>{const{query:te,children:me}=Y,Ie=(0,n.h_)($),Le=(0,qe.default)(()=>{const{term:bt="",types:ut=[],filters:Ut={},...wt}=te;return Ie.query({...wt,term:bt,types:ut,filters:Ut})},[te]);return me(Le,te)},mt=Y=>{const{query:te,children:me}=Y;return te?d.createElement(ye,{query:te},me):d.createElement(yt,null,me)},Ct=Y=>{const{query:te,children:me,noResultsComponent:Ie=d.createElement(Nt.ub,{missing:"data",title:"Sorry, no results were found"}),...Le}=Y;return d.createElement(mt,{query:te},({loading:bt,error:ut,value:Ut})=>bt?d.createElement(Nt.Ex,null):ut?d.createElement(Nt.Gk,{title:"Error encountered while fetching search results",error:ut}):Ut!=null&&Ut.results.length?(0,Te.isFunction)(me)?me(Ut):d.createElement(Ce,{...Le,results:Ut.results},me):Ie)},_t=Y=>d.createElement(n.fC,{attributes:{pluginId:"search",extension:"SearchResult"}},d.createElement(Ct,{...Y})),it=({result:Y,highlight:te,icon:me,secondaryAction:Ie,lineClamp:Le=5})=>Y?d.createElement(d.Fragment,null,me&&d.createElement(F.Z,null,me),d.createElement(g.Z,{primaryTypographyProps:{variant:"h6"},primary:d.createElement(Nt.rU,{noTrack:!0,to:Y.location},te!=null&&te.fields.title?d.createElement(ae,{text:(te==null?void 0:te.fields.title)||"",preTag:(te==null?void 0:te.preTag)||"",postTag:(te==null?void 0:te.postTag)||""}):Y.title),secondary:d.createElement(C.Z,{component:"span",style:{display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:Le,overflow:"hidden"},color:"textSecondary",variant:"body2"},te!=null&&te.fields.text?d.createElement(ae,{text:te.fields.text,preTag:te.preTag,postTag:te.postTag}):Y.text)}),Ie&&d.createElement(J.Z,{alignItems:"flex-end"},Ie)):null,At=Y=>d.createElement(n.fC,{attributes:{pluginId:"search",extension:"DefaultResultListItem"}},d.createElement(it,{...Y})),zt=Y=>{const{error:te,loading:me,resultItems:Ie,renderResultItem:Le=wt=>React.createElement(At,{key:wt.document.location,result:wt.document}),disableRenderingWithNoResults:bt,noResultsComponent:ut=bt?null:React.createElement(EmptyState,{missing:"data",title:"Sorry, no results were found"}),...Ut}=Y;return me?React.createElement(Progress,null):te?React.createElement(ResponseErrorPanel,{title:"Error encountered while fetching search results",error:te}):Ie!=null&&Ie.length?React.createElement(List,{...Ut},Ie.map(Le)):React.createElement(React.Fragment,null,ut)},ze=Y=>{const{query:te,renderResultItem:me,children:Ie,...Le}=Y,bt=ce(Ie);return React.createElement(AnalyticsContext,{attributes:{pluginId:"search",extension:"SearchResultList"}},React.createElement(mt,{query:te},({loading:ut,error:Ut,value:wt})=>React.createElement(zt,{...Le,error:Ut,loading:ut,resultItems:wt==null?void 0:wt.results,renderResultItem:me!=null?me:bt})))},Re=(0,p.Z)(Y=>({listSubheader:{display:"flex",alignItems:"center"},listSubheaderName:{marginLeft:Y.spacing(1),textTransform:"uppercase"},listSubheaderChip:{color:Y.palette.text.secondary,margin:Y.spacing(0,0,0,1.5)},listSubheaderFilter:{display:"flex",color:Y.palette.text.secondary,margin:Y.spacing(0,0,0,1.5)},listSubheaderLink:{marginLeft:"auto",display:"flex",alignItems:"center"},listSubheaderLinkIcon:{fontSize:"inherit",marginLeft:Y.spacing(.5)}})),We=Y=>{const te=Re(),{label:me,children:Ie,...Le}=Y;return React.createElement(Chip,{...Le,className:te.listSubheaderFilter,variant:"outlined",label:React.createElement(React.Fragment,null,me,": ",Ie)})},je=()=>null,W=(0,p.Z)(Y=>({root:{fontSize:"inherit","&:focus":{outline:"none",background:Y.palette.common.white},"&:not(:focus)":{cursor:"pointer",color:Y.palette.primary.main,"&:hover":{textDecoration:"underline"}}}})),_=Y=>{const te=W(),{label:me,value:Ie="None",onChange:Le,onDelete:bt}=Y,ut=useCallback(Ut=>{Le(Ut.target.value)},[Le]);return React.createElement(We,{label:me,onDelete:bt},React.createElement(Typography,{role:"textbox",component:"span",className:te.root,onChange:ut,contentEditable:!0,suppressContentEditableWarning:!0},Ie))},h=(0,p.Z)(Y=>({root:{fontSize:"inherit","&:not(:focus)":{cursor:"pointer",color:Y.palette.primary.main,"&:hover":{textDecoration:"underline"}},"&:focus":{outline:"none"},"&>div:first-child":{padding:0}}})),M=Y=>{const te=h(),{label:me,value:Ie="none",onChange:Le,onDelete:bt,children:ut}=Y,Ut=useCallback(wt=>{Le(wt.target.value)},[Le]);return React.createElement(We,{label:me,onDelete:bt},React.createElement(Select,{className:te.root,value:Ie,onChange:Ut,input:React.createElement(InputBase,null),IconComponent:je},React.createElement(MenuItem,{value:"none"},"None"),ut))};function X(Y){const te=Re(),[me,Ie]=useState(null),{error:Le,loading:bt,icon:ut,title:Ut,titleProps:wt={},link:kt=React.createElement(React.Fragment,null,"See all",React.createElement(ArrowRightIcon,{className:te.listSubheaderLinkIcon})),linkProps:Qt={},filterOptions:un,renderFilterOption:ln=On=>React.createElement(MenuItem,{key:String(On),value:String(On)},On),filterFields:tn,renderFilterField:Zt,resultItems:Wt,renderResultItem:hn=On=>React.createElement(At,{key:On.document.location,result:On.document}),disableRenderingWithNoResults:gn,noResultsComponent:yn=gn?null:React.createElement(EmptyState,{missing:"data",title:"Sorry, no results were found"}),...bn}=Y,In=useCallback(On=>{Ie(On.currentTarget)},[]),An=useCallback(()=>{Ie(null)},[]);return bt?React.createElement(Progress,null):Le?React.createElement(ResponseErrorPanel,{title:"Error encountered while fetching search results",error:Le}):Wt!=null&&Wt.length?React.createElement(List,{...bn},React.createElement(ListSubheader,{className:te.listSubheader},ut,React.createElement(Typography,{className:te.listSubheaderName,component:"strong",...wt},Ut),un?React.createElement(Chip,{className:te.listSubheaderChip,component:"button",icon:React.createElement(AddIcon,null),variant:"outlined",label:"Add filter","aria-controls":"filters-menu","aria-haspopup":"true",onClick:In}):null,un?React.createElement(Menu,{id:"filters-menu",anchorEl:me,open:Boolean(me),onClose:An,onClick:An,keepMounted:!0},un.map(ln)):null,tn==null?void 0:tn.map(On=>{var Sn;return(Sn=Zt==null?void 0:Zt(On))!=null?Sn:null}),React.createElement(Link,{className:te.listSubheaderLink,to:"/search",...Qt},kt)),Wt.map(hn)):React.createElement(React.Fragment,null,yn)}function j(Y){const{query:te,children:me,renderResultItem:Ie,linkProps:Le={},...bt}=Y,ut=ce(me);return React.createElement(AnalyticsContext,{attributes:{pluginId:"search",extension:"SearchResultGroup"}},React.createElement(mt,{query:te},({loading:Ut,error:wt,value:kt},{term:Qt,types:un,pageCursor:ln,filters:tn={}})=>{const Zt=`/search?${qs.stringify({term:Qt,types:un,filters:tn,pageCursor:ln,query:Qt},{arrayFormat:"brackets"})}`;return React.createElement(X,{...bt,error:wt,loading:Ut,linkProps:{to:Zt,...Le},filterFields:Object.keys(tn),resultItems:kt==null?void 0:kt.results,renderResultItem:Ie!=null?Ie:ut})}))}const Z=(0,p.Z)(Y=>({root:{display:"flex",justifyContent:"space-between",gap:Y.spacing(2),margin:Y.spacing(2,0)}})),oe=()=>{const{fetchNextPage:Y,fetchPreviousPage:te}=Ge(),me=Z();return!Y&&!te?d.createElement(d.Fragment,null):d.createElement("nav",{"aria-label":"pagination navigation",className:me.root},d.createElement(x.Z,{"aria-label":"previous page",disabled:!te,onClick:te,startIcon:d.createElement(ue.Z,null)},"Previous"),d.createElement(x.Z,{"aria-label":"next page",disabled:!Y,onClick:Y,endIcon:d.createElement(we.Z,null)},"Next"))},se="search.results.list.items.extensions.v1",Ue=(Y,te)=>{for(const me of Y){if(!(0,d.isValidElement)(me))continue;const Ie=(0,n.IY)(me,se);if(Ie!=null&&Ie(te))return(0,d.cloneElement)(me,{rank:te.rank,highlight:te.highlight,result:te.document,...me.props})}return null},lt=Y=>{const{rank:te,result:me,noTrack:Ie,children:Le,alignItems:bt="flex-start",...ut}=Y,Ut=(0,n.z$)(),wt=(0,d.useCallback)(()=>{Ie||me&&Ut.captureEvent("discover",me.title,{attributes:{to:me.location},value:te})},[te,me,Ie,Ut]);return d.createElement(B.Z,{divider:!0,alignItems:bt,onClickCapture:wt,...ut},Le)},ne=Y=>{const{name:te,component:me,predicate:Ie=()=>!0}=Y;return(0,n.YO)({name:te,component:{lazy:()=>me().then(Le=>bt=>d.createElement(lt,{rank:bt.rank,result:bt.result,noTrack:bt.noTrack},(0,d.createElement)(Le,bt)))},data:{[se]:Ie}})},ce=Y=>{const te=(0,n.vJ)(Y,me=>me.selectByComponentData({key:se}).getElements(),[Y]);return(0,d.useCallback)((me,Ie)=>{const Le=Ue(te,me);return d.createElement(d.Fragment,{key:Ie},Le!=null?Le:d.createElement(lt,{rank:me.rank,result:me.document},d.createElement(At,{rank:me.rank,highlight:me.highlight,result:me.document})))},[te])},Ce=Y=>{const{results:te,children:me,...Ie}=Y,Le=ce(me);return d.createElement(T.Z,{...Ie},te.map(Le))}},25429:function(Dt,E,e){"use strict";e.d(E,{S:function(){return St},a:function(){return jt},b:function(){return dt},c:function(){return Ve},e:function(){return pe},f:function(){return Je},r:function(){return Ne},u:function(){return Ht}});var n=e(80236),d=e(30705),p=e(92573),i=e(60364),c=e(79249),m=e(38724),b=e(60905),R=e(85256),t=e(49429),U=e(8629),w=e(79692),N=e(94339),K=e(32552),k=e(24579),H=e(27616),C=e(8284),v=e(70660),F=e(11776),g=e(38402),J=e(86136),x=e(49378),B=e(99152),T=e(6487),S=e(42494),ie=e(56939),Te=e(73698),Pe=e(7089),qe=e(12231),xe=e(21324),ke=e(95544),rt=e(77277),Kt=e(61837),Nt=e(27597),rn=e(87685),D=e(2784),we=e(73557),ue=e(32272),Ke=e(19126),$=e.n(Ke),A=e(18473),z=e(55649),ae=e(25557),$e=e(62155),Ge=e(38016),ft=e(56881),nt=e(64279),Rt=Object.defineProperty,q=(ye,mt,Ct)=>mt in ye?Rt(ye,mt,{enumerable:!0,configurable:!0,writable:!0,value:Ct}):ye[mt]=Ct,de=(ye,mt,Ct)=>(q(ye,typeof mt!="symbol"?mt+"":mt,Ct),Ct);class Se{constructor(mt){de(this,"discoveryApi"),de(this,"identityApi"),this.discoveryApi=mt.discoveryApi,this.identityApi=mt.identityApi}async query(mt){const{token:Ct}=await this.identityApi.getCredentials(),_t=$().stringify(mt),it=`${await this.discoveryApi.getBaseUrl("search")}/query?${_t}`,At=await fetch(it,{headers:Ct?{Authorization:`Bearer ${Ct}`}:{}});if(!At.ok)throw await ue.VL.fromResponse(At);return At.json()}}const Ne=(0,d.NT)({id:"search"}),st=(0,d.rx)({id:"search",apis:[(0,d.ni)({api:p.gK,deps:{discoveryApi:d.NW,identityApi:d.$4},factory:({discoveryApi:ye,identityApi:mt})=>new Se({discoveryApi:ye,identityApi:mt})})],routes:{root:Ne}}),pe=st.provide((0,d.P4)({name:"SearchPage",component:()=>e.e(6447).then(e.bind(e,46447)).then(ye=>ye.SearchPage),mountPoint:Ne})),Je=st.provide((0,d.CO)({name:"SidebarSearchModal",component:{lazy:()=>e.e(5645).then(e.bind(e,15645)).then(ye=>ye.SidebarSearchModal)}})),ot=st.provide((0,d.CO)({name:"HomePageSearchBar",component:{lazy:()=>e.e(8019).then(e.bind(e,18019)).then(ye=>ye.HomePageSearchBar)}})),Qe=(0,w.Z)(ye=>({dialogTitle:{gap:ye.spacing(1),display:"grid",alignItems:"center",gridTemplateColumns:"1fr auto","&> button":{marginTop:ye.spacing(1)}},input:{flex:1},button:{"&:hover":{background:"none"}},paperFullWidth:{height:"calc(100% - 128px)"},dialogActionsContainer:{padding:ye.spacing(1,3)},viewResultsLink:{verticalAlign:"0.5em"}})),Et=({toggleModal:ye})=>{const mt=Qe(),Ct=(0,we.s0)(),{transitions:_t}=(0,i.Z)(),{focusContent:it}=(0,n.r0)(),At=(0,d.tg)(Ne)(),zt=(0,D.useRef)(null);(0,D.useEffect)(()=>{var We;(We=zt==null?void 0:zt.current)==null||We.focus()});const ze=(0,D.useCallback)(()=>{setTimeout(it,_t.duration.leavingScreen)},[it,_t]),Re=(0,D.useCallback)(()=>{var We,je;const W=(je=(We=zt.current)==null?void 0:We.value)!=null?je:"";Ct(`${At}?query=${W}`),ze()},[Ct,ze,At]);return D.createElement(D.Fragment,null,D.createElement(c.Z,null,D.createElement(ke.Z,{className:mt.dialogTitle},D.createElement(p.E1,{className:mt.input,inputProps:{ref:zt},onSubmit:Re}),D.createElement(Kt.Z,{"aria-label":"close",onClick:ye},D.createElement(rn.Z,null)))),D.createElement(m.Z,null,D.createElement(b.Z,{container:!0,direction:"row-reverse",justifyContent:"flex-start",alignItems:"center"},D.createElement(b.Z,{item:!0},D.createElement(rt.Z,{className:mt.button,color:"primary",endIcon:D.createElement(Nt.Z,null),onClick:Re,disableRipple:!0},"View Full Results"))),D.createElement(R.Z,null),D.createElement(p.lt,{onClick:ze,onKeyDown:ze})),D.createElement(t.Z,{className:mt.dialogActionsContainer},D.createElement(b.Z,{container:!0,direction:"row"},D.createElement(b.Z,{item:!0,xs:12},D.createElement(p.GQ,null)))))},dt=ye=>{var mt;const{open:Ct=!0,hidden:_t,toggleModal:it,children:At}=ye,zt=Qe();return D.createElement(U.Z,{classes:{paperFullWidth:zt.paperFullWidth},onClose:it,"aria-labelledby":"search-modal-title",fullWidth:!0,maxWidth:"lg",open:Ct,hidden:_t},Ct&&D.createElement(p.Nd,{inheritParentContextIfAvailable:!0},(mt=At&&At({toggleModal:it}))!=null?mt:D.createElement(Et,{toggleModal:it})))},Vt=(0,A.CT)("search-modal-context"),jt=ye=>{const mt=Ht(ye.showInitially),Ct=(0,A.EI)({1:mt});return D.createElement(Vt.Provider,{value:Ct},ye.children)};function Ht(ye=!1){const[mt,Ct]=(0,D.useState)({hidden:!ye,open:ye}),_t=(0,D.useCallback)(()=>Ct(je=>({open:!0,hidden:!je.hidden})),[]),it=(0,D.useCallback)(je=>Ct(W=>({open:W.open||je,hidden:!je})),[]),At=(0,D.useContext)(Vt),zt=At==null?void 0:At.atVersion(1),ze=!!(zt!=null&&zt.state),Re=(0,we.TH)(),We=`${Re.pathname}${Re.search}${Re.hash}`;return(0,z.Z)(()=>{Ct(je=>({open:je.open,hidden:!0}))},[We]),ze?zt:{state:mt,toggleModal:_t,setOpen:it}}const Ye=()=>{const ye=(0,we.TH)(),{term:mt,setTerm:Ct,types:_t,setTypes:it,pageCursor:At,setPageCursor:zt,filters:ze,setFilters:Re}=(0,p.Rx)(),We=(0,ae.Z)(ye.search);return(0,D.useEffect)(()=>{if(ye.search===We)return;const je=$().parse(ye.search.substring(1),{arrayLimit:0})||{};je.filters&&Re(je.filters),je.query&&Ct(je.query),je.pageCursor&&zt(je.pageCursor),je.types&&it(je.types)},[We,ye,Ct,it,zt,Re]),(0,D.useEffect)(()=>{const je=$().stringify({query:mt,types:_t,pageCursor:At,filters:ze},{arrayFormat:"brackets"}),W=`${window.location.pathname}?${je}`;window.history.replaceState(null,document.title,W)},[mt,_t,At,ze]),null},St=()=>{const ye=(0,we.pC)();return D.createElement(p.Nd,null,D.createElement(Ye,null),ye)},Mt=(0,w.Z)(ye=>({card:{backgroundColor:"rgba(0, 0, 0, .11)"},cardContent:{paddingTop:ye.spacing(1)},icon:{color:ye.palette.common.black},list:{width:"100%"},listItemIcon:{width:"24px",height:"24px"},accordion:{backgroundColor:ye.palette.background.paper},accordionSummary:{minHeight:"auto","&.Mui-expanded":{minHeight:"auto"}},accordionSummaryContent:{margin:ye.spacing(2,0),"&.Mui-expanded":{margin:ye.spacing(2,0)}},accordionDetails:{padding:ye.spacing(0,0,1)}})),Bt=ye=>{const mt=Mt(),{filters:Ct,setPageCursor:_t,setTypes:it,term:At,types:zt}=(0,p.Rx)(),ze=(0,d.h_)(p.gK),[Re,We]=(0,D.useState)(!0),{defaultValue:je,name:W,showCounts:_,types:h}=ye,M=()=>We(se=>!se),X=se=>()=>{it(se!==""?[se]:[]),_t(void 0),We(!1)};(0,D.useEffect)(()=>{je&&it([je])},[]);const j=[{value:"",name:"All",icon:D.createElement(ft.Z,null)},...h],Z=zt[0]||"",{value:oe}=(0,nt.default)(async()=>{if(!_)return{};const se=await Promise.all(j.map(Ue=>Ue.value).map(async Ue=>{const{numberOfResults:lt}=await ze.query({term:At,types:Ue?[Ue]:[],filters:zt.includes(Ue)||!zt.length&&!Ue?Ct:{},pageLimit:0});return[Ue,lt!==void 0?`${lt>=1e4?">10000":lt} results`:" -- "]}));return Object.fromEntries(se)},[Ct,_,At,zt]);return D.createElement(N.Z,{className:mt.card},D.createElement(K.Z,{title:W,titleTypographyProps:{variant:"overline"}}),D.createElement(k.Z,{className:mt.cardContent},D.createElement(H.Z,{className:mt.accordion,expanded:Re,onChange:M},D.createElement(C.Z,{classes:{root:mt.accordionSummary,content:mt.accordionSummaryContent},expandIcon:D.createElement(Ge.Z,{className:mt.icon}),IconButtonProps:{size:"small"}},Re?"Collapse":j.filter(se=>se.value===Z)[0].name),D.createElement(v.Z,{classes:{root:mt.accordionDetails}},D.createElement(F.Z,{className:mt.list,component:"nav","aria-label":"filter by type",disablePadding:!0,dense:!0},j.map(se=>D.createElement(D.Fragment,{key:se.value},D.createElement(R.Z,null),D.createElement(g.Z,{selected:zt[0]===se.value||zt.length===0&&se.value==="",onClick:X(se.value),button:!0},D.createElement(J.Z,null,(0,D.cloneElement)(se.icon,{className:mt.listItemIcon})),D.createElement(x.Z,{primary:se.name,secondary:oe&&oe[se.value]})))))))))},Ee=(0,w.Z)(ye=>({tabs:{borderBottom:`1px solid ${ye.palette.textVerySubtle}`},tab:{height:"50px",fontWeight:ye.typography.fontWeightBold,fontSize:ye.typography.pxToRem(13),color:ye.palette.text.primary,minWidth:"130px"}})),De=ye=>{const mt=Ee(),{setPageCursor:Ct,setTypes:_t,types:it}=(0,p.Rx)(),{defaultValue:At,types:zt}=ye,ze=(We,je)=>{_t(je!==""?[je]:[]),Ct(void 0)};(0,D.useEffect)(()=>{At&&_t([At])},[]);const Re=[{value:"",name:"All"},...zt];return D.createElement(B.Z,{"aria-label":"List of search types tabs",className:mt.tabs,indicatorColor:"primary",value:it.length===0?"":it[0],onChange:ze},Re.map((We,je)=>D.createElement(T.Z,{key:je,className:mt.tab,label:We.name,value:We.value})))},ct=(0,w.Z)(ye=>({label:{textTransform:"capitalize"},chips:{display:"flex",flexWrap:"wrap",marginTop:ye.spacing(1)},chip:{margin:2}})),Ve=ye=>{const{className:mt,defaultValue:Ct,name:_t,values:it=[]}=ye,At=ct(),{types:zt,setTypes:ze}=(0,p.Rx)();(0,$e.Z)(()=>{zt.length||(Ct&&Array.isArray(Ct)?ze(Ct):Ct&&ze([Ct]))});const Re=We=>{const je=We.target.value;ze(je)};return D.createElement(S.Z,{className:mt,variant:"filled",fullWidth:!0,"data-testid":"search-typefilter-next"},D.createElement(ie.Z,{className:At.label,margin:"dense"},_t),D.createElement(Te.Z,{multiple:!0,variant:"outlined",value:zt,onChange:Re,placeholder:"All Results",renderValue:We=>D.createElement("div",{className:At.chips},We.map(je=>D.createElement(Pe.Z,{key:je,label:je,className:At.chip,size:"small"})))},it.map(We=>D.createElement(qe.Z,{key:We,value:We},D.createElement(xe.Z,{checked:zt.indexOf(We)>-1}),D.createElement(x.Z,{primary:We})))))};Ve.Accordion=ye=>D.createElement(Bt,{...ye}),Ve.Tabs=ye=>D.createElement(De,{...ye});const yt=ye=>{const mt=useRouteRef(Ne),{focusContent:Ct}=useContent(),_t=useNavigate(),it=useCallback(At=>{const zt=qs.stringify({query:At},{addQueryPrefix:!0});Ct(),_t(`${mt()}${zt}`)},[Ct,_t,mt]);return React.createElement(SidebarSearchField,{icon:ye.icon,onSearch:it,to:"/search"})}},23778:function(Dt,E,e){"use strict";e.d(E,{Sc:function(){return n.c},YC:function(){return n.f},Z9:function(){return n.e}});var n=e(25429),d=e(80236),p=e(30705),i=e(92573),c=e(2784),m=e(32272),b=e(19126),R=e.n(b),t=e(18473)},44741:function(Dt,E,e){"use strict";e.d(E,{Wf:function(){return At}});var n=e(80236),d=e(30705),p=e(2784),i=e(64279),c=e(79692),m=e(38724),b=e(49429),R=e(77277),t=e(29611),U=e(60905),w=e(8629),N=e(79249),K=e(35292),k=e(37390),H=e(97485),C=e(15584),v=e(91256),F=e(58987),g=e(89571),J=e(27556),x=e(90436),B=e(90324),T=e(70595),S=e(43181),ie=e(58238),Te=e(71346),Pe=e.n(Te),qe=e(62432),xe=e(26506);const ke=(0,d.T0)({id:"plugin.techradar.service"});var rt=(ze=>(ze[ze.Down=-1]="Down",ze[ze.NoChange=0]="NoChange",ze[ze.Up=1]="Up",ze))(rt||{});const Kt=(0,c.Z)(ze=>({ring:{fill:"none",stroke:"#bbb",strokeWidth:"1px"},axis:{fill:"none",stroke:"#bbb",strokeWidth:"1px"},text:{pointerEvents:"none",userSelect:"none",fill:ze.palette.text.primary,fontSize:"25px",fontWeight:800,opacity:.7}}),{name:"PluginTechRadarGrid"}),Nt=ze=>{const{radius:Re,rings:We}=ze,je=Kt(ze),W=(M,X)=>[p.createElement("circle",{key:`c${M}`,cx:0,cy:0,r:X,className:je.ring}),p.createElement("text",{key:`t${M}`,y:X!==void 0?-X+42:void 0,textAnchor:"middle",className:je.text,style:{fill:We[M].color},"data-testid":"radar-ring-heading"},We[M].name)],_=[p.createElement("line",{key:"x",x1:0,y1:-Re,x2:0,y2:Re,className:je.axis,"data-testid":"radar-grid-x-line"}),p.createElement("line",{key:"y",x1:-Re,y1:0,x2:Re,y2:0,className:je.axis,"data-testid":"radar-grid-y-line"})],h=We.map(M=>M.outerRadius).map((M,X)=>W(X,M));return p.createElement(p.Fragment,null,_.concat(...h))};function rn(ze){return Boolean(ze&&ze!=="#"&&ze.length>0)}const D=({url:ze,className:Re,children:We})=>rn(ze)?p.createElement(n.rU,{className:Re,to:ze},We):p.createElement(p.Fragment,null,We),we=ze=>{const{timeline:Re}=ze;return p.createElement(p.Fragment,null,p.createElement(x.Z,{variant:"h6",gutterBottom:!0},"History"),p.createElement(v.Z,{component:J.Z},p.createElement(k.Z,{"aria-label":"simple table"},p.createElement(F.Z,null,p.createElement(g.Z,null,p.createElement(C.Z,{align:"left"},"Moved in direction"),p.createElement(C.Z,{align:"left"},"Moved to ring"),p.createElement(C.Z,{align:"left"},"Moved on date"),p.createElement(C.Z,{align:"left"},"Description"))),p.createElement(H.Z,null,(Re==null?void 0:Re.length)===0&&p.createElement(g.Z,{key:"no-timeline"},p.createElement(C.Z,{component:"th",scope:"row"},"No Timeline")),Re==null?void 0:Re.map(We=>p.createElement(g.Z,{key:We.description},p.createElement(C.Z,{component:"th",scope:"row"},We.moved===rt.Up?p.createElement(B.Z,null):"",We.moved===rt.Down?p.createElement(T.Z,null):"",We.moved===rt.NoChange?p.createElement(S.Z,null):""),p.createElement(C.Z,{align:"left"},We.ring.name?We.ring.name:""),p.createElement(C.Z,{align:"left"},We.date.toLocaleDateString()?We.date.toLocaleDateString():""),p.createElement(C.Z,{align:"left"},We.description?We.description:"")))))))},ue=ze=>{function Re(j,Z){return rn(j)||Boolean(Z&&Z.length>0)}const{open:We,onClose:je,title:W,description:_,timeline:h,url:M,links:X}=ze;return p.createElement(w.Z,{"data-testid":"radar-description",open:We,onClose:je},p.createElement(N.Z,{"data-testid":"radar-description-dialog-title"},W),p.createElement(m.Z,{dividers:!0},p.createElement(n.SA,{content:_}),p.createElement(we,{timeline:h})),Re(M,X)&&p.createElement(b.Z,null,X==null?void 0:X.map(j=>p.createElement(R.Z,{component:n.rU,to:j.url,onClick:je,color:"primary",startIcon:p.createElement(K.Z,null),key:j.url},j.title)),rn(M)&&p.createElement(R.Z,{component:n.rU,to:M,onClick:je,color:"primary",startIcon:p.createElement(K.Z,null),key:M},"LEARN MORE")))},Ke=(0,c.Z)(ze=>({text:{pointerEvents:"none",userSelect:"none",fontSize:"9px",fill:ze.palette.common.white,textAnchor:"middle"},link:{cursor:"pointer"}})),$=(ze,Re)=>{const We={fill:ze};let je=p.createElement("circle",{r:9,style:We});return Re&&Re>0?je=p.createElement("path",{d:"M -11,5 11,5 0,-13 z",style:We}):Re&&Re<0&&(je=p.createElement("path",{d:"M -11,-5 11,-5 0,13 z",style:We})),je},A=ze=>{const Re=Ke(ze),[We,je]=p.useState(!1),{moved:W,description:_,timeline:h,title:M,color:X,url:j,links:Z,value:oe,x:se,y:Ue,onMouseEnter:lt,onMouseLeave:ne,onClick:ce}=ze,Ce=$(X,W),Y=()=>{je(!0)},te=()=>{je(!1)},me=()=>{je(!We)};return p.createElement("g",{transform:`translate(${se}, ${Ue})`,onMouseEnter:lt,onMouseLeave:ne,onClick:ce,"data-testid":"radar-entry"}," ",We&&p.createElement(ue,{open:We,onClose:te,title:M||"no title",description:_||"no description",timeline:h||[],url:j,links:Z}),_?p.createElement("a",{className:Re.link,onClick:Y,role:"button",href:"#",tabIndex:0,onKeyPress:me},Ce):p.createElement(D,{url:j,className:Re.link},Ce),p.createElement("text",{y:3,className:Re.text},oe))},z=(0,c.Z)(ze=>({bubble:{pointerEvents:"none",userSelect:"none",opacity:0},visibleBubble:{pointerEvents:"none",userSelect:"none",opacity:.8},background:{fill:"#333"},text:{pointerEvents:"none",userSelect:"none",fontSize:"10px",fill:ze.palette.common.white}})),ae=ze=>{const Re=z(ze),{visible:We,text:je}=ze,W=(0,p.useRef)(null),_=(0,p.useRef)(null),h=(0,p.useRef)(null),M=(0,p.useRef)(null),X=()=>{if(W.current){const{x:j,y:Z}=ze,oe=W.current.getBBox(),se=5,Ue=4;_.current&&_.current.setAttribute("transform",`translate(${j-oe.width/2}, ${Z-oe.height-Ue})`),h.current&&(h.current.setAttribute("x",String(-se)),h.current.setAttribute("y",String(-oe.height)),h.current.setAttribute("width",String(oe.width+2*se)),h.current.setAttribute("height",String(oe.height+Ue))),M.current&&M.current.setAttribute("transform",`translate(${oe.width/2-se}, ${Ue-1})`)}};return(0,p.useLayoutEffect)(()=>{X()}),p.createElement("g",{ref:_,x:0,y:0,className:We?Re.visibleBubble:Re.bubble,"data-testid":"radar-bubble"},p.createElement("rect",{ref:h,rx:4,ry:4,className:Re.background}),p.createElement("text",{ref:W,className:Re.text},je),p.createElement("path",{ref:M,d:"M 0,0 10,0 5,8 z",className:Re.background}))},$e=(0,c.Z)(ze=>({text:{pointerEvents:"none",userSelect:"none",fontSize:"10px",fill:ze.palette.text.secondary}})),Ge=ze=>{const{x:Re,y:We}=ze,je=$e(ze);return p.createElement("text",{"data-testid":"radar-footer",transform:`translate(${Re}, ${We})`,className:je.text},"\u25B2 moved up\xA0\xA0\xA0\xA0\xA0\u25BC moved down")},ft=({url:ze,description:Re,title:We,classes:je,active:W,links:_,timeline:h})=>{const[M,X]=p.useState(!1),j=()=>{X(!0)},Z=()=>{X(!1)},oe=()=>{X(!M)};return Re?p.createElement(p.Fragment,null,p.createElement(x.Z,{component:"span",className:je.entryLink,onClick:j,role:"button",tabIndex:0,onKeyPress:oe},p.createElement(x.Z,{component:"span",className:W?je.activeEntry:je.entry},We)),M&&p.createElement(ue,{open:M,onClose:Z,title:We||"no title",url:ze,description:Re,timeline:h||[],links:_})):p.createElement(D,{url:ze,className:je.entryLink},p.createElement(x.Z,{component:"span",className:W?je.activeEntry:je.entry},We))},nt=({ring:ze,entries:Re,classes:We,onEntryMouseEnter:je,onEntryMouseLeave:W})=>p.createElement("div",{"data-testid":"radar-ring",key:ze.id,className:We.ring},p.createElement("h3",{className:We.ringHeading,style:{color:ze.color},"data-testid":"radar-legend-heading"},ze.name),Re.length===0?p.createElement(ie.ZP,{paragraph:!0,className:We.ringEmpty},"(empty)"):p.createElement("ol",{className:We.ringList},Re.map(_=>{var h,M;return p.createElement("li",{key:_.id,value:(_.index||0)+1,onMouseEnter:je&&(()=>je(_)),onMouseLeave:W&&(()=>W(_))},p.createElement(ft,{classes:We,url:_.url,title:_.title,description:_.description,active:_.active,links:(h=_.links)!=null?h:[],timeline:(M=_.timeline)!=null?M:[]}))}))),Rt=ze=>{const Re={};for(const We of ze){const je=We.quadrant.index,W=We.ring.index;let _={};je!==void 0&&(Re[je]===void 0&&(Re[je]={}),_=Re[je]);let h=[];W!==void 0&&(_[W]===void 0&&(_[W]=[]),h=_[W]),h.push(We)}return Re},q=(ze,Re,We,je=0)=>{const W=Re.index,_=We.index,h=W===void 0?{}:ze[W]||{};return _===void 0?[]:h[_+je]||[]},de=({segments:ze,quadrant:Re,rings:We,classes:je,onEntryMouseEnter:W,onEntryMouseLeave:_})=>p.createElement("foreignObject",{key:Re.id,x:Re.legendX,y:Re.legendY,width:Re.legendWidth,height:Re.legendHeight,"data-testid":"radar-quadrant"},p.createElement("div",{className:je.quadrant},p.createElement("h2",{className:je.quadrantHeading},Re.name),p.createElement("div",{className:je.rings},We.map(h=>p.createElement(nt,{key:h.id,ring:h,classes:je,entries:q(ze,Re,h),onEntryMouseEnter:W,onEntryMouseLeave:_}))))),Se=(0,c.Z)(ze=>({quadrant:{height:"100%",width:"100%",overflowY:"auto",scrollbarWidth:"thin"},quadrantHeading:{pointerEvents:"none",userSelect:"none",marginTop:0,marginBottom:ze.spacing(2),fontSize:"18px"},rings:{columns:3},ring:{breakInside:"avoid-column",pageBreakInside:"avoid","-webkit-column-break-inside":"avoid",fontSize:"12px",marginBottom:ze.spacing(2)},ringEmpty:{color:ze.palette.text.secondary,fontSize:"12px"},ringHeading:{pointerEvents:"none",userSelect:"none",marginTop:0,marginBottom:ze.spacing(1),fontSize:"12px",fontWeight:800},ringList:{listStylePosition:"inside",marginTop:0,paddingLeft:0,fontVariantNumeric:"proportional-nums","-moz-font-feature-settings":"pnum","-webkit-font-feature-settings":"pnum","font-feature-settings":"pnum"},entry:{pointerEvents:"visiblePainted",userSelect:"none",fontSize:"11px"},activeEntry:{pointerEvents:"visiblePainted",userSelect:"none",fontSize:"11px",background:"#6f6f6f",color:ze.palette.common.white},entryLink:{pointerEvents:"visiblePainted",cursor:"pointer"}})),Ne=({quadrants:ze,rings:Re,entries:We,onEntryMouseEnter:je,onEntryMouseLeave:W,..._})=>{const h=Se(_);return p.createElement("g",{"data-testid":"radar-legend"},ze.map(M=>p.createElement(de,{key:M.id,segments:Rt(We),quadrant:M,rings:Re,classes:h,onEntryMouseEnter:je,onEntryMouseLeave:W})))},st=ze=>{const{width:Re,height:We,radius:je,quadrants:W,rings:_,entries:h,activeEntry:M,onEntryMouseEnter:X,onEntryMouseLeave:j}=ze;return p.createElement("g",{"data-testid":"radar-plot"},p.createElement(Ne,{quadrants:W,rings:_,entries:h,onEntryMouseEnter:X&&(Z=>X(Z)),onEntryMouseLeave:j&&(Z=>j(Z))}),p.createElement("g",{transform:`translate(${Re/2}, ${We/2})`},p.createElement(Nt,{radius:je,rings:_}),p.createElement(Ge,{x:-.5*Re,y:.5*We}),h.map(Z=>p.createElement(A,{key:Z.id,x:Z.x||0,y:Z.y||0,color:Z.color||"",value:((Z==null?void 0:Z.index)||0)+1,url:Z.url,links:Z.links,description:Z.description,moved:Z.moved,title:Z.title,timeline:Z.timeline,onMouseEnter:X&&(()=>X(Z)),onMouseLeave:j&&(()=>j(Z))})),p.createElement(ae,{visible:!!M,text:(M==null?void 0:M.title)||"",x:(M==null?void 0:M.x)||0,y:(M==null?void 0:M.y)||0})))};class pe{constructor(Re,We,je,W){this.nextSeed=W,this.polarMin={t:Re.radialMin,r:We.innerRadius},this.polarMax={t:Re.radialMax,r:We.outerRadius},this.cartesianMin={x:15*Re.offsetX,y:15*Re.offsetY},this.cartesianMax={x:je*Re.offsetX,y:je*Re.offsetY}}clipx(Re){const We=dt(Re,this.cartesianMin,this.cartesianMax),je=Et(Je(We),this.polarMin.r+15,this.polarMax.r-15);return Re.x=ot(je).x,Re.x}clipy(Re){const We=dt(Re,this.cartesianMin,this.cartesianMax),je=Et(Je(We),this.polarMin.r+15,this.polarMax.r-15);return Re.y=ot(je).y,Re.y}random(){return ot({t:this._randomBetween(this.polarMin.t,this.polarMax.t),r:this._normalBetween(this.polarMin.r,this.polarMax.r)})}_random(){const Re=Math.sin(this.nextSeed())*1e4;return Re-Math.floor(Re)}_randomBetween(Re,We){return Re+this._random()*(We-Re)}_normalBetween(Re,We){return Re+(this._random()+this._random())*.5*(We-Re)}}function Je({x:ze,y:Re}){return{t:Math.atan2(Re,ze),r:Math.sqrt(ze*ze+Re*Re)}}function ot({r:ze,t:Re}){return{x:ze*Math.cos(Re),y:ze*Math.sin(Re)}}function Qe(ze,Re,We){const je=Math.min(Re,We),W=Math.max(Re,We);return Math.min(Math.max(ze,je),W)}function Et(ze,Re,We){return{t:ze.t,r:Qe(ze.r,Re,We)}}function dt(ze,Re,We){return{x:Qe(ze.x,Re.x,We.x),y:Qe(ze.y,Re.y,We.y)}}const Vt=(ze,Re,We,je)=>{const _=[16,We/2-Re-16,We/2+Re+16,We-16],h=[16,je/2-16,je/2,je-16],M=[{x:_[2],y:h[2],width:_[3]-_[2],height:h[3]-h[2]},{x:_[0],y:h[2],width:_[1]-_[0],height:h[3]-h[2]},{x:_[0],y:h[0],width:_[1]-_[0],height:h[1]-h[0]},{x:_[2],y:h[0],width:_[3]-_[2],height:h[1]-h[0]}];return ze.map((X,j)=>{const Z=M[j%4];return{...X,index:j,radialMin:j*Math.PI/2,radialMax:(j+1)*Math.PI/2,offsetX:j%4===0||j%4===3?1:-1,offsetY:j%4===0||j%4===1?1:-1,legendX:Z.x,legendY:Z.y,legendWidth:Z.width,legendHeight:Z.height}})},jt=(ze,Re,We,je,W)=>{let _=42;const h=ze.map((X,j)=>{const Z=Re.find(lt=>{const ne=typeof X.quadrant=="object"?X.quadrant.id:X.quadrant;return lt.id===ne}),oe=We.find(lt=>{const ne=typeof X.ring=="object"?X.ring.id:X.ring;return lt.id===ne});if(!Z)throw new Error(`Unknown quadrant ${X.quadrant} for entry ${X.id}!`);if(!oe)throw new Error(`Unknown ring ${X.ring} for entry ${X.id}!`);const se=new pe(Z,oe,je,()=>_++),Ue=se==null?void 0:se.random();return{...X,index:j,quadrant:Z,ring:oe,segment:se,x:Ue.x,y:Ue.y,color:W&&X.id===(W==null?void 0:W.id)?X.ring.color:Pe()(X.ring.color).desaturate(.5).lighten(.1).string(),active:!!(W&&X.id===(W==null?void 0:W.id))}}),M=(0,qe.Z)().nodes(h).velocityDecay(.19).force("collision",(0,xe.Z)().radius(12).strength(.85)).stop();for(let X=0,j=Math.ceil(Math.log(M.alphaMin())/Math.log(1-M.alphaDecay()));X<j;++X){M.tick();for(const Z of h)Z.segment&&(Z.x=Z.segment.clipx(Z),Z.y=Z.segment.clipy(Z))}return h},Ht=(ze,Re)=>ze.map((We,je)=>({...We,index:je,outerRadius:(je+2)/(ze.length+1)*Re,innerRadius:(je===0?0:je+1)/(ze.length+1)*Re})),Ye=({width:ze,height:Re,quadrants:We,rings:je,entries:W,..._})=>{const h=Math.min(ze,Re)/2,[M,X]=(0,p.useState)(),j=(0,p.useRef)(null),Z=(0,p.useMemo)(()=>Vt(We,h,ze,Re),[We,h,ze,Re]),oe=(0,p.useMemo)(()=>Ht(je,h),[h,je]),se=(0,p.useMemo)(()=>jt(W,Z,oe,h,M),[W,Z,oe,h,M]);return p.createElement("svg",{ref:j,width:ze,height:Re,..._.svgProps},p.createElement(st,{width:ze,height:Re,radius:h,entries:se,quadrants:Z,rings:oe,activeEntry:M,onEntryMouseEnter:Ue=>X(Ue),onEntryMouseLeave:()=>X(void 0)}))},St=ze=>{const Re=(0,d.h_)(d.VE),We=(0,d.h_)(ke),{error:je,value:W,loading:_}=(0,i.default)(async()=>We.load(ze),[We,ze]);return(0,p.useEffect)(()=>{je&&Re.post(je)},[je,Re]),{loading:_,value:W,error:je}};function Mt(ze){const Re=ze==null?void 0:ze.toLocaleLowerCase("en-US").split(/\s/).map(We=>We.trim()).filter(Boolean);return Re!=null&&Re.length?We=>{var je;const W=`${We.title} ${((je=We.timeline[0])==null?void 0:je.description)||""}`.toLocaleLowerCase("en-US");return Re.every(_=>W.includes(_))}:()=>!0}function Bt(ze){const{loading:Re,error:We,value:je}=St(ze.id),W=_=>_.entries.filter(Mt(ze.searchText)).map(h=>({id:h.key,quadrant:_.quadrants.find(M=>M.id===h.quadrant),title:h.title,ring:_.rings.find(M=>M.id===h.timeline[0].ringId),timeline:h.timeline.map(M=>({date:M.date,ring:_.rings.find(X=>X.id===M.ringId),description:M.description,moved:M.moved})),moved:h.timeline[0].moved,description:h.description||h.timeline[0].description,url:h.url,links:h.links}));return p.createElement(p.Fragment,null,Re&&p.createElement(n.Ex,null),!Re&&!We&&je&&p.createElement(Ye,{...ze,rings:je.rings,quadrants:je.quadrants,entries:W(je)}))}const Ee=(0,c.Z)(()=>({overflowXScroll:{overflowX:"scroll"}}));function De(ze){const{title:Re="Tech Radar",subtitle:We="Pick the recommended technologies for your projects",pageTitle:je="Company Radar",...W}=ze,_=Ee(),[h,M]=p.useState("");return p.createElement(n.T3,{themeId:"tool"},p.createElement(n.h4,{title:Re,subtitle:We}),p.createElement(n.VY,{className:_.overflowXScroll},p.createElement(n.yW,{title:je},p.createElement(t.Z,{id:"tech-radar-filter",type:"search",placeholder:"Filter",onChange:X=>M(X.target.value)}),p.createElement(n.qt,null,p.createElement(x.Z,{paragraph:!0},"This is used for visualizing the official guidelines of different areas of software development such as languages, frameworks, infrastructure and processes. You can find an explanation for the radar at"," ",p.createElement(n.rU,{to:"https://opensource.zalando.com/tech-radar/"},"Zalando Tech Radar"),"."))),p.createElement(U.Z,{container:!0,spacing:3,direction:"row"},p.createElement(U.Z,{item:!0,xs:12,sm:6,md:4},p.createElement(Bt,{searchText:h,...W})))))}var ct=Object.freeze({__proto__:null,RadarPage:De});const Ve=new Array;Ve.push({id:"adopt",name:"ADOPT",color:"#5BA300"}),Ve.push({id:"trial",name:"TRIAL",color:"#009EB0"}),Ve.push({id:"assess",name:"ASSESS",color:"#C7BA00"}),Ve.push({id:"hold",name:"HOLD",color:"#E09B96"});const yt=new Array;yt.push({id:"infrastructure",name:"Infrastructure"}),yt.push({id:"frameworks",name:"Frameworks"}),yt.push({id:"languages",name:"Languages"}),yt.push({id:"process",name:"Process"});const ye=new Array;ye.push({timeline:[{moved:0,ringId:"adopt",date:new Date("2020-08-06"),description:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua"}],key:"javascript",id:"javascript",title:"JavaScript",quadrant:"languages",links:[{url:"https://www.javascript.com/",title:"Learn more"},{url:"https://www.typescriptlang.org/",title:"TypeScript"}],description:'Excepteur **sint** occaecat *cupidatat* non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.\n\n```ts\nconst x = "3";\n```\n'}),ye.push({timeline:[{moved:-1,ringId:"adopt",date:new Date("2020-08-06"),description:"Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat"}],key:"typescript",id:"typescript",title:"TypeScript",quadrant:"languages",description:"Itaque earum rerum hic tenetur a sapiente delectus, ut aut reiciendis voluptatibus maiores alias consequatur aut perferendis doloribus asperiores repellat"}),ye.push({timeline:[{moved:1,ringId:"adopt",date:new Date("2020-08-06"),description:"Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur"}],links:[{url:"https://webpack.js.org/",title:"Learn more"}],key:"webpack",id:"webpack",title:"Webpack",quadrant:"frameworks"}),ye.push({timeline:[{moved:0,ringId:"adopt",date:new Date("2020-08-06")}],links:[{url:"https://reactjs.org/",title:"Learn more"}],key:"react",id:"react",title:"React",quadrant:"frameworks"}),ye.push({timeline:[{moved:0,ringId:"adopt",date:new Date("2020-08-06")}],key:"code-reviews",id:"code-reviews",title:"Code Reviews",quadrant:"process"}),ye.push({timeline:[{moved:0,ringId:"assess",date:new Date("2020-08-06")}],key:"mob-programming",id:"mob-programming",title:"Mob Programming",quadrant:"process"}),ye.push({timeline:[{moved:0,ringId:"adopt",date:new Date("2020-08-06")}],key:"docs-like-code",id:"docs-like-code",title:"Docs-like-code",quadrant:"process"}),ye.push({timeline:[{ringId:"hold",date:new Date("2020-08-06")}],key:"force-push",id:"force-push",title:"Force push to master",quadrant:"process"}),ye.push({timeline:[{ringId:"adopt",date:new Date("2020-08-06"),description:"long description"},{ringId:"trial",date:new Date("2020-07-05"),description:"long description"}],links:[{url:"https://github.com",title:"Learn more"}],key:"github-actions",id:"github-actions",title:"GitHub Actions",quadrant:"infrastructure"});const mt={entries:ye,quadrants:yt,rings:Ve};class Ct{async load(){return mt}}const _t=(0,d.NT)({id:"tech-radar"}),At=(0,d.rx)({id:"tech-radar",routes:{root:_t},apis:[(0,d.ni)(ke,new Ct)]}).provide((0,d.P4)({name:"TechRadarPage",component:()=>Promise.resolve().then(function(){return ct}).then(ze=>ze.RadarPage),mountPoint:_t})),zt=null},65609:function(Dt,E,e){"use strict";e.d(E,{EU:function(){return St}});var n=e(30705),d=e(66565),p=e(2784),i=e(87370),c=e(15459),m=e(77277),b=e(79692),R=e(8560),t=e(27556),U=e(11433),w=e(60364),N=e(12231),K=e(49378),k=e(90436),H=e(95544),C=e(61837),v=e(51209),F=e(38016),g=e(82717),J=e.n(g),x=e(1854),B=e(49462),T=e(31654),S=e(80236),ie=e(65549),Te=e(17373),Pe=e(85224),qe=e(96103);const xe=".md-nav__item--nested .md-toggle",ke="@backstage/techdocs-addons/nav-expanded",rt=(0,c.Z)({root:{position:"absolute",left:"220px",top:"19px",padding:0,minWidth:0}})(m.Z),Kt=(0,c.Z)({root:{height:"20px",width:"20px"}})(v.Z),Nt=(0,c.Z)({root:{height:"20px",width:"20px"}})(F.Z),rn=()=>{const Ee={expandAllNestedNavs:!1},{value:De,set:ct}=(0,i.Z)(ke,{defaultValue:Ee}),[Ve,yt]=(0,p.useState)(!1),[...ye]=(0,d.pV)([xe]),mt=(0,p.useCallback)(_t=>{const it=_t.checked,At=De==null?void 0:De.expandAllNestedNavs;return!!(At&&!it||!At&&it)},[De]);(0,p.useEffect)(()=>{ye!=null&&ye.length&&(yt(!0),ye.forEach(_t=>{mt(_t)&&_t.click()}))},[De,mt,ye]);const Ct=()=>{ct(_t=>({expandAllNestedNavs:!(_t!=null&&_t.expandAllNestedNavs)}))};return p.createElement(p.Fragment,null,Ve?p.createElement(rt,{size:"small",onClick:Ct,"aria-label":De!=null&&De.expandAllNestedNavs?"collapse-nav":"expand-nav"},De!=null&&De.expandAllNestedNavs?p.createElement(Nt,null):p.createElement(Kt,null)):null)},D="techdocs-report-issue",we=`#${D}`,ue='[title^="Edit this page"]',Ke='[title^="Leave feedback for"]',$='[data-md-component="main"] .md-content',A=(Ee,De)=>De==="github"?(0,x.BT)(Ee,"blob"):De==="gitlab"?(0,x.ah)(Ee,"blob"):(console.error(`Invalid SCM type ${De} found in ReportIssue addon for URL ${Ee}!`),Ee),z=Ee=>{const De=Ee.toString().substring(0,70),ct=De.length===70?"...":"";return`Documentation feedback: ${De}${ct}`},ae=(Ee,De,ct)=>{const Ve="## Documentation Feedback \u{1F4DD}",yt="#### The highlighted text:",ye="#### The comment on the text:",mt="_>replace this line with your comment<_",Ct=Ee.toString().trim().split(`
`).map(it=>`> ${it.trim()}`).join(`
`),_t=[`${ct} URL: <${window.location.href}> 
Markdown URL: <${De}>`];return`${Ve}

 ${yt} 

 ${Ct}

 ${ye} 
 ${mt}

 ___
${_t}`},$e=Ee=>{var De,ct;const Ve={title:"",body:""},yt=(0,d.oi)(Ee),[ye]=(0,d.pV)([ue]),mt=(De=ye==null?void 0:ye.href)!=null?De:"",Ct=(0,n.h_)(B.q3),it=(0,n.h_)(n.Ds).getOptionalString("app.title")||"Backstage";if(!yt||!mt)return Ve;const At=(ct=Ct.byUrl(mt))==null?void 0:ct.type;return At?{title:z(yt),body:ae(yt,A(mt,At),it)}:Ve},Ge=()=>{var Ee,De;const ct=(0,n.h_)(B.q3),[Ve]=(0,d.pV)([ue]),yt=(Ee=Ve==null?void 0:Ve.href)!=null?Ee:"";if(!yt)return null;const ye=(De=ct.byUrl(yt))==null?void 0:De.type;return ye?{...J()(A(yt,ye)),type:ye}:null},ft=(0,b.Z)(Ee=>({root:{display:"grid",gridGap:Ee.spacing(1),gridAutoFlow:"column",justifyContent:"center",alignItems:"center",color:Ee.palette.common.black,fontSize:Ee.typography.button.fontSize}})),nt=({type:Ee})=>Ee==="github"?S.fy:T.Z,Rt=({type:Ee})=>Ee==="github"?"Github":"Gitlab",q=(Ee,De)=>{const{title:ct,body:Ve}=De,yt=encodeURIComponent(ct),ye=encodeURIComponent(Ve),{protocol:mt,resource:Ct,owner:_t,name:it,type:At}=Ee,zt=`${mt}://${Ct}/${_t}/${it}`,ze=encodeURI(zt);return At==="github"?`${ze}/issues/new?title=${yt}&body=${ye}`:`${ze}/issues/new?issue[title]=${yt}&issue[description]=${ye}`},de=({template:Ee,repository:De})=>{const ct=ft(),Ve=nt(De),yt=q(De,Ee);return p.createElement(S.rU,{className:ct.root,to:yt,target:"_blank"},p.createElement(Ve,null)," Open new ",Rt(De)," issue")},Se=(0,b.Z)(Ee=>({root:{transform:"translate(-100%, -100%)",position:"absolute",padding:Ee.spacing(1),zIndex:Ee.zIndex.tooltip,background:Ee.palette.common.white}})),Ne=({debounceTime:Ee=500,templateBuilder:De})=>{const ct=Se(),[Ve,yt]=(0,p.useState)(),ye=Ge(),mt=$e(Ee),Ct=(0,d.oi)(Ee),[_t,it]=(0,d.pV)([$,Ke]);let[At]=(0,d.pV)([we]);return it&&(it.style.display="none"),(0,p.useEffect)(()=>{if(!ye||!Ct||!Ct.containsNode(_t,!0)||Ct!=null&&Ct.containsNode(At,!0))return;const zt=_t.getBoundingClientRect(),ze=Ct.getRangeAt(0).getBoundingClientRect();yt({top:`${ze.top-zt.top-16}px`,left:`${ze.left+ze.width/2}px`})},[Ct,_t,At]),!Ct||!ye||!["github","gitlab"].includes(ye.type)?null:(At||(At=document.createElement("div"),At.setAttribute("id",D),_t.prepend(At)),p.createElement(R.Z,{container:At},p.createElement(t.Z,{"data-testid":"report-issue-addon",className:ct.root,style:Ve},p.createElement(de,{repository:ye,template:De?De({selection:Ct}):mt}))))},st="0 3px 1px rgba(0,0,0,0.1),0 4px 8px rgba(0,0,0,0.13),0 0 0 1px rgba(0,0,0,0.02)",pe=(0,c.Z)(Ee=>({root:{height:2,padding:"15px 0"},thumb:{height:18,width:18,backgroundColor:Ee.palette.common.white,boxShadow:st,marginTop:-9,marginLeft:-9,"&:focus, &:hover, &$active":{boxShadow:"0 3px 1px rgba(0,0,0,0.1),0 4px 8px rgba(0,0,0,0.3),0 0 0 1px rgba(0,0,0,0.02)","@media (hover: none)":{boxShadow:st}}},active:{},valueLabel:{top:"100%",left:"50%",transform:"scale(1) translate(-50%, -5px) !important","& *":{color:Ee.palette.common.black,fontSize:Ee.typography.caption.fontSize,background:"transparent"}},track:{height:2},rail:{height:2,opacity:.5},mark:{height:10,width:1,marginTop:-4},markActive:{opacity:1,backgroundColor:"currentColor"}}))(U.Z),Je={key:"techdocs.addons.settings.textsize",defaultValue:100},ot=[{value:90},{value:100},{value:115},{value:130},{value:150}],Qe=(0,b.Z)(Ee=>({container:{color:Ee.palette.textSubtle,display:"flex",alignItems:"center",margin:0,minWidth:200},menuItem:{"&:hover":{background:"transparent"}},decreaseButton:{marginRight:Ee.spacing(1)},increaseButton:{marginLeft:Ee.spacing(1)}})),Et=()=>{const Ee=Qe(),De=(0,w.Z)(),[ct]=(0,d.pV)(["body"]),[Ve,yt]=(0,p.useState)(()=>{const Re=localStorage==null?void 0:localStorage.getItem(Je.key);return Re?parseInt(Re,10):Je.defaultValue}),ye=(0,p.useMemo)(()=>ot.map(Re=>Re.value),[]),mt=(0,p.useMemo)(()=>ye.indexOf(Ve),[ye,Ve]),Ct=(0,p.useMemo)(()=>ye[0],[ye]),_t=(0,p.useMemo)(()=>ye[ye.length-1],[ye]),it=(0,p.useCallback)(()=>`${Ve}%`,[Ve]),At=(0,p.useCallback)((Re,We)=>{Array.isArray(We)||(yt(We),localStorage==null||localStorage.setItem(Je.key,String(We)))},[yt]),zt=(0,p.useCallback)(Re=>{At(Re,ye[mt-1])},[mt,ye,At]),ze=(0,p.useCallback)(Re=>{At(Re,ye[mt+1])},[mt,ye,At]);return(0,p.useEffect)(()=>{var Re,We;if(!ct)return;const je=(We=(Re=De.typography)==null?void 0:Re.htmlFontSize)!=null?We:16;ct.style.setProperty("--md-typeset-font-size",`${je*(Ve/100)}px`)},[ct,Ve,De]),p.createElement(N.Z,{className:Ee.menuItem,button:!0,disableRipple:!0},p.createElement(K.Z,{primary:p.createElement(k.Z,{variant:"subtitle2",color:"textPrimary"},"Text size"),secondary:p.createElement(H.Z,{className:Ee.container},p.createElement(C.Z,{className:Ee.decreaseButton,size:"small",edge:"start",disabled:Ve===Ct,onClick:zt,"aria-label":"Decrease text size"},p.createElement(Te.Z,null)),p.createElement(pe,{value:Ve,"aria-labelledby":"text-size-slider",getAriaValueText:it,valueLabelDisplay:"on",valueLabelFormat:it,marks:ot,step:null,min:Ct,max:_t,onChangeCommitted:At}),p.createElement(C.Z,{className:Ee.increaseButton,size:"small",edge:"end",disabled:Ve===_t,onClick:ze,"aria-label":"Increase text size"},p.createElement(ie.Z,null))),disableTypography:!0}))};function dt(Ee,De){De===void 0&&(De={});var ct=De.insertAt;if(!(!Ee||typeof document=="undefined")){var Ve=document.head||document.getElementsByTagName("head")[0],yt=document.createElement("style");yt.type="text/css",ct==="top"&&Ve.firstChild?Ve.insertBefore(yt,Ve.firstChild):Ve.appendChild(yt),yt.styleSheet?yt.styleSheet.cssText=Ee:yt.appendChild(document.createTextNode(Ee))}}var Vt=`.pswp {
  --pswp-bg: #f8f8f8;
}
.pswp__counter {
  color: rgba(0, 0, 0, 0.87);
  text-shadow: none;
}

.pswp__img {
  cursor: pointer !important;
}
`;dt(Vt);const jt=()=>{const Ee=(0,d.pV)(["img"]);return(0,p.useEffect)(()=>{let De=null,ct=new Pe.Z({pswpModule:qe.Z,wheelToZoom:!0,arrowPrevSVG:'<svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeLarge  css-c1sh5i" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="ArrowBackIosIcon" aria-label="fontSize large"><path d="M11.67 3.87 9.9 2.1 0 12l9.9 9.9 1.77-1.77L3.54 12z"></path></svg>',arrowNextSVG:'<svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeLarge  css-c1sh5i" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="ArrowForwardIosIcon" aria-label="fontSize large"><path d="M6.23 20.23 8 22l10-10L8 2 6.23 3.77 14.46 12z"></path></svg>',closeSVG:'<svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeLarge  css-c1sh5i" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="CloseIcon" aria-label="fontSize large"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg>',zoomSVG:'<svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeLarge  css-c1sh5i" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="ZoomInIcon" aria-label="fontSize large"><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"></path><path d="M12 10h-2v2H9v-2H7V9h2V7h1v2h2v1z"></path></svg>'});return Ee.forEach((Ve,yt)=>{Ve.onclick=()=>(De===null&&(De=Ee.map(ye=>({element:ye,src:ye.src,msrc:ye.src,alt:ye.alt,width:ye.clientWidth,height:ye.clientHeight}))),ct.loadAndOpen(yt,De),!1)}),ct.init(),()=>{ct.destroy(),ct=null}},[Ee]),null},Ht=(0,n.rx)({id:"techdocsModuleAddonsContrib"}),Ye=Ht.provide((0,d.KY)({name:"ExpandableNavigation",location:d.oZ.PrimarySidebar,component:rn})),St=Ht.provide((0,d.KY)({name:"ReportIssue",location:d.oZ.Content,component:Ne})),Mt=Ht.provide((0,d.KY)({name:"TextSize",location:d.oZ.Settings,component:Et})),Bt=Ht.provide((0,d.KY)({name:"LightBox",location:d.oZ.Content,component:jt}))},66565:function(Dt,E,e){"use strict";e.d(E,{$L:function(){return B},DR:function(){return C},Dl:function(){return S},KY:function(){return F},Ox:function(){return Kt},VA:function(){return D},ZS:function(){return xe},Zz:function(){return H},gT:function(){return T},jM:function(){return k},oZ:function(){return rt},oi:function(){return $},pV:function(){return ue},ux:function(){return rn},x1:function(){return ke}});var n=e(2784),d=e(73557),p=e(30705),i=e(64279),c=e(77446),m=e(34520),b=e(18473),R=e(70882),t=e(50236),U=e(19219),w=e(80236),N=e(54073),K=e.n(N);const k="techdocs.addons.addon.v1",H="techdocs.addons.wrapper.v1",C=()=>null;(0,p.R5)(C,H,!0);const v=A=>`${k}.${A.toLocaleLowerCase("en-US")}`;function F(A){const{name:z,component:ae}=A;return(0,p.YO)({name:z,component:{sync:$e=>n.createElement(ae,{...$e})},data:{[k]:A,[v(z)]:!0}})}const g=(A,z)=>A.selectByComponentData({key:z}).getElements()[0],J=A=>A.selectByComponentData({key:H}).selectByComponentData({key:k}),x=A=>A.selectByComponentData({key:H}).findComponentData({key:k}),B=()=>{const A=(0,d.pC)(),z=(0,p.vJ)(A,J),ae=(0,p.vJ)(A,x),$e=(0,n.useCallback)(nt=>{var Rt;if(!z||!nt)return null;const q=v(nt.name);return(Rt=g(z,q))!=null?Rt:null},[z]),Ge=(0,n.useCallback)(nt=>{const Rt=ae.find(q=>q.name===nt);return Rt?$e(Rt):null},[ae,$e]),ft=(0,n.useCallback)(nt=>{const Rt=ae.filter(q=>q.location===nt);return Rt.length?Rt.map($e):null},[ae,$e]);return{renderComponentByName:Ge,renderComponentsByLocation:ft}},T=(0,p.T0)({id:"plugin.techdocs.service"}),S=(0,p.T0)({id:"plugin.techdocs.storageservice"});function ie(A,z){return z.getOptionalBoolean("techdocs.legacyUseCaseSensitiveTripletPaths")||(A.kind=A.kind.toLocaleLowerCase(),A.name=A.name.toLocaleLowerCase(),A.namespace=A.namespace.toLocaleLowerCase()),A}const Te=(A,z)=>(0,m.eE)(A)===(0,m.eE)(z),Pe={title:"",subtitle:"",setTitle:()=>{},setSubtitle:()=>{},setShadowRoot:()=>{},metadata:{loading:!0},entityMetadata:{loading:!0},entityRef:{kind:"",name:"",namespace:""}},qe=(0,b.CT)("techdocs-reader-page-context"),xe=(0,n.memo)(A=>{const{entityRef:z,children:ae}=A,$e=(0,p.h_)(T),Ge=(0,p.h_)(p.Ds),ft=(0,i.default)(async()=>$e.getEntityMetadata(z),[z]),nt=(0,c.Z)(async()=>$e.getTechDocsMetadata(z),[z]),[Rt,q]=(0,n.useState)(Pe.title),[de,Se]=(0,n.useState)(Pe.subtitle),[Ne,st]=(0,n.useState)(Pe.shadowRoot);(0,n.useEffect)(()=>{Ne&&!nt.value&&!nt.loading&&nt.retry()},[nt.value,nt.loading,Ne,nt.retry,nt]);const pe={metadata:nt,entityRef:ie(z,Ge),entityMetadata:ft,shadowRoot:Ne,setShadowRoot:st,title:Rt,setTitle:q,subtitle:de,setSubtitle:Se},Je=(0,b.EI)({1:pe});return n.createElement(p.fC,{attributes:{entityRef:(0,m.eE)(z)}},n.createElement(qe.Provider,{value:Je},ae instanceof Function?ae(pe):ae))},(A,z)=>Te(A.entityRef,z.entityRef)),ke=()=>{const A=(0,n.useContext)(qe);if(A===void 0)return Pe;const z=A.atVersion(1);if(z===void 0)throw new Error("No context found for version 1.");return z},rt=Object.freeze({Header:"Header",Subheader:"Subheader",Settings:"Settings",PrimarySidebar:"PrimarySidebar",SecondarySidebar:"SecondarySidebar",Content:"Content"}),Kt="TECH_DOCS_SHADOW_DOM_STYLE_LOAD",Nt=A=>{(0,n.useEffect)(()=>{var z;if(!A)return()=>{};const ae=A.querySelectorAll('head > link[rel="stylesheet"]');let $e=(z=ae==null?void 0:ae.length)!=null?z:0;const Ge=new CustomEvent(Kt);if(!$e)return A.dispatchEvent(Ge),()=>{};const ft=()=>{--$e===0&&A.dispatchEvent(Ge)};return ae==null||ae.forEach(nt=>{nt.addEventListener("load",ft)}),()=>{ae==null||ae.forEach(nt=>{nt.removeEventListener("load",ft)})}},[A])},rn=A=>{const[z,ae]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{if(!A)return()=>{};ae(!0);const $e=A.style;$e.setProperty("opacity","0");const Ge=()=>{ae(!1),$e.setProperty("opacity","1")};return A.addEventListener(Kt,Ge),()=>{A.removeEventListener(Kt,Ge)}},[A]),z},D=A=>{const{element:z,onAppend:ae,children:$e}=A,[Ge,ft]=(0,n.useState)((0,R.Ue)({...(0,t.Z)(),insertionPoint:void 0}));Nt(z);const nt=rn(z),Rt=(0,n.useCallback)(q=>{if(!z||!q)return;ft((0,R.Ue)({...(0,t.Z)(),insertionPoint:z.querySelector("head")||void 0}));let de=q.shadowRoot;de||(de=q.attachShadow({mode:"open"})),de.replaceChildren(z),typeof ae=="function"&&ae(de)},[z,ae]);return n.createElement(n.Fragment,null,nt&&n.createElement(w.Ex,null),n.createElement(U.ZP,{jss:Ge,sheetsManager:new Map},n.createElement("div",{ref:Rt,"data-testid":"techdocs-native-shadowroot"}),$e))},we=()=>{const{shadowRoot:A}=ke();return A},ue=A=>{const z=we();return z?A.map(ae=>z==null?void 0:z.querySelectorAll(ae)).filter(ae=>ae.length).map(ae=>Array.from(ae)).flat():[]},Ke=A=>A.toString()&&A.rangeCount&&A.getRangeAt(0).getBoundingClientRect().top,$=(A=0)=>{const z=we(),[ae,$e]=(0,n.useState)(null),Ge=(0,n.useMemo)(()=>K()(()=>{const ft=z,nt=ft.getSelection?ft.getSelection():document.getSelection();nt&&Ke(nt)?$e(nt):$e(null)},A),[z,$e,A]);return(0,n.useEffect)(()=>(window.document.addEventListener("selectionchange",Ge),()=>{Ge.cancel(),window.document.removeEventListener("selectionchange",Ge)}),[Ge]),ae}},49849:function(Dt,E,e){"use strict";e.d(E,{D:function(){return Rn},E:function(){return xn},T:function(){return Ln},a:function(){return vt},b:function(){return be},c:function(){return xr},e:function(){return Vn},g:function(){return Gn},h:function(){return Wn},t:function(){return Bn}});var n=e(30705),d=e(32272),p=e(76372),i=e.n(p),c=e(2784),m=e(73557),b=e(66565),R=e(64279),t=e(77446),U=e(80236),w=e(79692),N=e(49378),K=e(86136),k=e(12420),H=e(60905),C=e(90436),v=e(61837),F=e(77277),g=e(4190),J=e(4614),x=e(41128),B=e(60364),T=e(15459),S=e(80030),ie=e(72379),Te=e(41547),Pe=e(41156),qe=e(8560),xe=e(15223),ke=e(95544),rt=e(48348),Kt=e(94339),Nt=e(16111),rn=e(24579),D=e(14503),we=e(92573),ue=e(99688),Ke=e(98069),$=e(87685),A=e(49462),z=e(35368),ae=e.n(z),$e=e(1854),Ge=e(67097),ft=e(28316),nt=e(82717),Rt=e.n(nt),q=e(44882),de=e(95074),Se=e(18671),Ne=e(73250),st=e(64304),pe=e(34520),Je=e(76635),ot=e.n(Je),Qe=e(47603),Et=e(39981),dt=e(2337),Vt=e(11640),jt=e(28347);const Ht=(0,n.T0)({id:"plugin.techdocs.storageservice"}),Ye=(0,n.T0)({id:"plugin.techdocs.service"});var St=Object.defineProperty,Mt=(l,o,f)=>o in l?St(l,o,{enumerable:!0,configurable:!0,writable:!0,value:f}):l[o]=f,Bt=(l,o,f)=>(Mt(l,typeof o!="symbol"?o+"":o,f),f);class Ee{constructor(o){Bt(this,"configApi"),Bt(this,"discoveryApi"),Bt(this,"fetchApi"),this.configApi=o.configApi,this.discoveryApi=o.discoveryApi,this.fetchApi=o.fetchApi}async getApiOrigin(){return await this.discoveryApi.getBaseUrl("techdocs")}async getTechDocsMetadata(o){const{kind:f,namespace:I,name:ee}=o,Ae=`${await this.getApiOrigin()}/metadata/techdocs/${I}/${f}/${ee}`,Be=await this.fetchApi.fetch(`${Ae}`);if(!Be.ok)throw await d.VL.fromResponse(Be);return await Be.json()}async getEntityMetadata(o){const{kind:f,namespace:I,name:ee}=o,Ae=`${await this.getApiOrigin()}/metadata/entity/${I}/${f}/${ee}`,Be=await this.fetchApi.fetch(`${Ae}`);if(!Be.ok)throw await d.VL.fromResponse(Be);return await Be.json()}}class De{constructor(o){Bt(this,"configApi"),Bt(this,"discoveryApi"),Bt(this,"identityApi"),Bt(this,"fetchApi"),this.configApi=o.configApi,this.discoveryApi=o.discoveryApi,this.identityApi=o.identityApi,this.fetchApi=o.fetchApi}async getApiOrigin(){return await this.discoveryApi.getBaseUrl("techdocs")}async getStorageUrl(){var o;return(o=this.configApi.getOptionalString("techdocs.storageUrl"))!=null?o:`${await this.discoveryApi.getBaseUrl("techdocs")}/static/docs`}async getBuilder(){return this.configApi.getString("techdocs.builder")}async getEntityDocs(o,f){const{kind:I,namespace:ee,name:fe}=o,Be=`${await this.getStorageUrl()}/${ee}/${I}/${fe}/${f}`,$t=await this.fetchApi.fetch(`${Be.endsWith("/")?Be:`${Be}/`}index.html`);let on="";switch($t.status){case 404:throw on="Page not found. ",f||(on+="This could be because there is no index.md file in the root of the docs directory of this repository."),new d.dR(on);case 500:throw on="Could not generate documentation or an error in the TechDocs backend. ",new Error(on)}return $t.text()}async syncEntityDocs(o,f=()=>{}){const{kind:I,namespace:ee,name:fe}=o,Be=`${await this.getApiOrigin()}/sync/${ee}/${I}/${fe}`,{token:$t}=await this.identityApi.getCredentials();return new Promise((on,Ft)=>{const mn=new p.EventSourcePolyfill(Be,{withCredentials:!0,headers:$t?{Authorization:`Bearer ${$t}`}:{}});mn.addEventListener("log",nn=>{nn.data&&f(JSON.parse(nn.data))}),mn.addEventListener("finish",nn=>{let kn=!1;nn.data&&({updated:kn}=JSON.parse(nn.data)),on(kn?"updated":"cached")}),mn.onerror=nn=>{switch(mn.close(),nn.status){case 404:Ft(new d.dR(nn.message));return;default:Ft(new Error(nn.data));return}}})}async getBaseUrl(o,f,I){const{kind:ee,namespace:fe,name:Ae}=f,$t=`${await this.getApiOrigin()}/static/docs/${fe}/${ee}/${Ae}/${I}`;return new URL(o,$t.endsWith("/")?$t:`${$t}/`).toString()}}function ct({contentLoading:l,content:o,activeSyncState:f}){return l||f==="BUILD_READY_RELOAD"||!o&&f==="CHECKING"?"CHECKING":!o&&f==="BUILDING"?"INITIAL_BUILD":o?f==="BUILDING"?"CONTENT_STALE_REFRESHING":f==="BUILD_READY"?"CONTENT_STALE_READY":f==="ERROR"?"CONTENT_STALE_ERROR":"CONTENT_FRESH":"CONTENT_NOT_FOUND"}function Ve(l,o){const f={...l};switch(o.type){case"sync":o.state==="CHECKING"&&(f.buildLog=[]),f.activeSyncState=o.state,f.syncError=o.syncError;break;case"contentLoading":f.contentLoading=!0,f.contentError=void 0;break;case"content":typeof o.path=="string"&&(f.path=o.path),f.contentLoading=!1,f.content=o.content,f.contentError=o.contentError;break;case"buildLog":f.buildLog=f.buildLog.concat(o.log);break;default:throw new Error}return["BUILD_READY","BUILD_READY_RELOAD"].includes(f.activeSyncState)&&["contentLoading","content"].includes(o.type)&&(f.activeSyncState="UP_TO_DATE",f.buildLog=[]),f}function yt(l,o,f,I){var ee,fe;const[Ae,Be]=(0,c.useReducer)(Ve,{activeSyncState:"CHECKING",path:I,contentLoading:!0,buildLog:[]}),$t=(0,n.h_)(b.Dl),{retry:on}=(0,t.Z)(async()=>{Be({type:"contentLoading"});try{const nn=await $t.getEntityDocs({kind:l,namespace:o,name:f},I);return Be({type:"content",content:nn,path:I}),nn}catch(nn){Be({type:"content",contentError:nn,path:I})}},[$t,l,o,f,I]),Ft=(0,c.useRef)({content:void 0,reload:()=>{}});return Ft.current={content:Ae.content,reload:on},(0,R.default)(async()=>{Be({type:"sync",state:"CHECKING"});const nn=setTimeout(()=>{Be({type:"sync",state:"BUILDING"})},1e3);try{switch(await $t.syncEntityDocs({kind:l,namespace:o,name:f},Tn=>{Be({type:"buildLog",log:Tn})})){case"updated":Ft.current.content?Be({type:"sync",state:"BUILD_READY"}):(Ft.current.reload(),Be({type:"sync",state:"BUILD_READY_RELOAD"}));break;case"cached":Be({type:"sync",state:"UP_TO_DATE"});break;default:Be({type:"sync",state:"ERROR",syncError:new Error("Unexpected return state")});break}}catch(kn){Be({type:"sync",state:"ERROR",syncError:kn})}finally{clearTimeout(nn)}},[l,f,o,$t,Be,Ft]),{state:(0,c.useMemo)(()=>ct({activeSyncState:Ae.activeSyncState,contentLoading:Ae.contentLoading,content:Ae.content}),[Ae.activeSyncState,Ae.content,Ae.contentLoading]),contentReload:on,path:Ae.path,content:Ae.content,contentErrorMessage:(ee=Ae.contentError)==null?void 0:ee.toString(),syncErrorMessage:(fe=Ae.syncError)==null?void 0:fe.toString(),buildLog:Ae.buildLog}}const ye=(0,c.createContext)({}),mt=()=>(0,c.useContext)(ye),Ct=l=>{const{children:o}=l,{"*":f=""}=(0,m.UO)(),{entityRef:I}=(0,b.x1)(),{kind:ee,namespace:fe,name:Ae}=I,Be=yt(ee,fe,Ae,f);return c.createElement(ye.Provider,{value:Be},o instanceof Function?o(Be):o)},_t=l=>o=>c.createElement(Ct,null,c.createElement(l,{...o})),it=(0,w.Z)({flexContainer:{flexWrap:"wrap"},itemText:{width:"100%",marginBottom:"1rem"}}),At=l=>{const{result:o,highlight:f,lineClamp:I=5,asListItem:ee=!0,asLink:fe=!0,title:Ae,icon:Be}=l,$t=it(),on=({children:nn})=>fe?c.createElement(U.rU,{noTrack:!0,to:o.location},nn):c.createElement(c.Fragment,null,nn),Ft=()=>{const nn=f!=null&&f.fields.title?c.createElement(we.FA,{text:f.fields.title,preTag:f.preTag,postTag:f.postTag}):o.title,kn=f!=null&&f.fields.entityTitle?c.createElement(we.FA,{text:f.fields.entityTitle,preTag:f.preTag,postTag:f.postTag}):o.entityTitle,Tn=f!=null&&f.fields.name?c.createElement(we.FA,{text:f.fields.name,preTag:f.preTag,postTag:f.postTag}):o.name;return o?c.createElement(N.Z,{className:$t.itemText,primaryTypographyProps:{variant:"h6"},primary:c.createElement(on,null,Ae||c.createElement(c.Fragment,null,nn," | ",kn!=null?kn:Tn," docs")),secondary:c.createElement(C.Z,{component:"span",style:{display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:I,overflow:"hidden"},color:"textSecondary",variant:"body2"},f!=null&&f.fields.text?c.createElement(we.FA,{text:f.fields.text,preTag:f.preTag,postTag:f.postTag}):o.text)}):null},mn=({children:nn})=>ee?c.createElement(c.Fragment,null,Be&&c.createElement(K.Z,null,typeof Be=="function"?Be(o):Be),c.createElement("div",{className:$t.flexContainer},nn)):c.createElement(c.Fragment,null,nn);return c.createElement(mn,null,c.createElement(Ft,null))};var zt=Object.freeze({__proto__:null,TechDocsSearchResultListItem:At});const ze=l=>l==null?void 0:l.document,Re=l=>{const{entityId:o,entityTitle:f,debounceTime:I=150}=l,[ee,fe]=(0,c.useState)(!1),Ae=(0,m.s0)(),{setFilters:Be,result:{loading:$t,value:on}}=(0,we.Rx)(),[Ft,mn]=(0,c.useState)([]);(0,c.useEffect)(()=>{let Kn=!0;if(Kn&&on){const vr=on.results.slice(0,10);mn(vr)}return()=>{Kn=!1}},[$t,on]);const{kind:nn,name:kn,namespace:Tn}=o;(0,c.useEffect)(()=>{Be(Kn=>({...Kn,kind:nn,namespace:Tn,name:kn}))},[nn,Tn,kn,Be]);const ur=(Kn,vr)=>{if(ze(vr)){const{location:Kr}=vr.document;Ae(Kr)}};return c.createElement(we.qO,{"data-testid":"techdocs-search-bar",size:"small",open:ee,getOptionLabel:()=>"",filterOptions:Kn=>Kn,onClose:()=>{fe(!1)},onFocus:()=>{fe(!0)},onChange:ur,blurOnSelect:!0,noOptionsText:"No results found",value:null,options:Ft,renderOption:({document:Kn,highlight:vr})=>c.createElement(At,{result:Kn,lineClamp:3,asListItem:!1,asLink:!1,title:Kn.title,highlight:vr}),loading:$t,inputDebounceTime:I,inputPlaceholder:`Search ${f||o.name} docs`,freeSolo:!1})},We=l=>{const o={term:"",types:["techdocs"],pageCursor:"",filters:l.entityId};return c.createElement(we.Nd,{initialState:o},c.createElement(Re,{...l}))},je=(0,w.Z)(l=>(0,k.Z)({paper:{width:"100%",[l.breakpoints.up("sm")]:{width:"75%"},[l.breakpoints.up("md")]:{width:"50%"},padding:l.spacing(2.5)},root:{height:"100%",overflow:"hidden"},logs:{background:l.palette.background.default}})),W=({buildLog:l,onClose:o})=>{const f=je(),I=l.length===0?"Waiting for logs...":l.join(`
`);return c.createElement(H.Z,{container:!0,direction:"column",className:f.root,spacing:0,wrap:"nowrap"},c.createElement(H.Z,{item:!0,container:!0,justifyContent:"space-between",alignItems:"center",spacing:0,wrap:"nowrap"},c.createElement(C.Z,{variant:"h5"},"Build Details"),c.createElement(v.Z,{key:"dismiss",title:"Close the drawer",onClick:o,color:"inherit"},c.createElement($.Z,null))),c.createElement(H.Z,{item:!0,xs:!0},c.createElement(U.nU,{text:I,classes:{root:f.logs}})))},_=({buildLog:l})=>{const o=je(),[f,I]=(0,c.useState)(!1);return c.createElement(c.Fragment,null,c.createElement(F.Z,{color:"inherit",onClick:()=>I(!0)},"Show Build Logs"),c.createElement(g.ZP,{classes:{paper:o.paper},anchor:"right",open:f,onClose:()=>I(!1)},c.createElement(W,{buildLog:l,onClose:()=>I(!1)})))},h=({errorMessage:l})=>{const o=(0,n.h_)(n.Ds).getOptionalString("techdocs.builder");let f="";return o!=="local"&&(f="Note that techdocs.builder is not set to 'local' in your config, which means this Backstage app will not generate docs if they are not found. Make sure the project's docs are generated and published by some external process (e.g. CI/CD pipeline). Or change techdocs.builder to 'local' to generate docs from this Backstage instance."),c.createElement(U.mf,{status:"404",statusMessage:l||"Documentation not found",additionalInfo:f})},M=(0,w.Z)(l=>({root:{marginBottom:l.spacing(2)},message:{wordBreak:"break-word",overflowWrap:"anywhere"}})),X=()=>{let l=null;const o=M(),{state:f,contentReload:I,contentErrorMessage:ee,syncErrorMessage:fe,buildLog:Ae}=mt();return f==="INITIAL_BUILD"&&(l=c.createElement(ue.Z,{classes:{root:o.root},variant:"outlined",severity:"info",icon:c.createElement(J.Z,{size:"24px"}),action:c.createElement(_,{buildLog:Ae})},"Documentation is accessed for the first time and is being prepared. The subsequent loads are much faster.")),f==="CONTENT_STALE_REFRESHING"&&(l=c.createElement(ue.Z,{variant:"outlined",severity:"info",icon:c.createElement(J.Z,{size:"24px"}),action:c.createElement(_,{buildLog:Ae}),classes:{root:o.root}},"A newer version of this documentation is being prepared and will be available shortly.")),f==="CONTENT_STALE_READY"&&(l=c.createElement(ue.Z,{variant:"outlined",severity:"success",action:c.createElement(F.Z,{color:"inherit",onClick:()=>I()},"Refresh"),classes:{root:o.root}},"A newer version of this documentation is now available, please refresh to view.")),f==="CONTENT_STALE_ERROR"&&(l=c.createElement(ue.Z,{variant:"outlined",severity:"error",action:c.createElement(_,{buildLog:Ae}),classes:{root:o.root,message:o.message}},"Building a newer version of this documentation failed."," ",fe)),f==="CONTENT_NOT_FOUND"&&(l=c.createElement(c.Fragment,null,fe&&c.createElement(ue.Z,{variant:"outlined",severity:"error",action:c.createElement(_,{buildLog:Ae}),classes:{root:o.root,message:o.message}},"Building a newer version of this documentation failed."," ",fe),c.createElement(h,{errorMessage:ee}))),l},j=/main\.[A-Fa-f0-9]{8}\.min\.css$/,Z=/^https:\/\/fonts\.googleapis\.com/,oe=/^https:\/\/fonts\.gstatic\.com/,se=l=>l.nodeName==="LINK",Ue=l=>{const o=(l==null?void 0:l.getAttribute("href"))||"",f=o.match(j),I=o.match(Z),ee=o.match(oe);return f||I||ee},lt=l=>(se(l)&&!Ue(l)&&l.remove(),l),ne=l=>l.nodeName==="IFRAME",ce=(l,o)=>{const f=l.getAttribute("src")||"";try{const{host:I}=new URL(f);return o.includes(I)}catch{return!1}},Ce=l=>o=>(ne(o)&&!ce(o,l)&&o.remove(),o),Y=()=>{const l=(0,n.h_)(n.Ds);return(0,c.useMemo)(()=>l.getOptionalConfig("techdocs.sanitizer"),[l])},te=()=>{const l=Y();return(0,c.useCallback)(async o=>{const f=l==null?void 0:l.getOptionalStringArray("allowedIframeHosts");ae().addHook("beforeSanitizeElements",lt);const I=["link"];return f&&(I.push("iframe"),ae().addHook("beforeSanitizeElements",Ce(f))),ae().sanitize(o.outerHTML,{ADD_TAGS:I,FORBID_TAGS:["style"],WHOLE_DOCUMENT:!0,RETURN_DOM:!0})},[l])};var me=({theme:l})=>`
/*==================  Variables  ==================*/
/*
  As the MkDocs output is rendered in shadow DOM, the CSS variable definitions on the root selector are not applied. Instead, they have to be applied on :host.
  As there is no way to transform the served main*.css yet (for example in the backend), we have to copy from main*.css and modify them.
*/

:host {
  /* FONT */
  --md-default-fg-color: ${l.palette.text.primary};
  --md-default-fg-color--light: ${l.palette.text.secondary};
  --md-default-fg-color--lighter: ${(0,x.$n)(l.palette.text.secondary,.7)};
  --md-default-fg-color--lightest: ${(0,x.$n)(l.palette.text.secondary,.3)};

  /* BACKGROUND */
  --md-default-bg-color:${l.palette.background.default};
  --md-default-bg-color--light: ${l.palette.background.paper};
  --md-default-bg-color--lighter: ${(0,x.$n)(l.palette.background.paper,.7)};
  --md-default-bg-color--lightest: ${(0,x.$n)(l.palette.background.paper,.3)};

  /* PRIMARY */
  --md-primary-fg-color: ${l.palette.primary.main};
  --md-primary-fg-color--light: ${l.palette.primary.light};
  --md-primary-fg-color--dark: ${l.palette.primary.dark};
  --md-primary-bg-color: ${l.palette.primary.contrastText};
  --md-primary-bg-color--light: ${(0,x.$n)(l.palette.primary.contrastText,.7)};

  /* ACCENT */
  --md-accent-fg-color: var(--md-primary-fg-color);

  /* SHADOW */
  --md-shadow-z1: ${l.shadows[1]};
  --md-shadow-z2: ${l.shadows[2]};
  --md-shadow-z3: ${l.shadows[3]};

  /* EXTENSIONS */
  --md-admonition-fg-color: var(--md-default-fg-color);
  --md-admonition-bg-color: var(--md-default-bg-color);
  /* Admonitions and others are using SVG masks to define icons. These masks are defined as CSS variables. */
  --md-admonition-icon--note: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>');
  --md-admonition-icon--abstract: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 5h16v2H4V5m0 4h16v2H4V9m0 4h16v2H4v-2m0 4h10v2H4v-2z"/></svg>');
  --md-admonition-icon--info: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 9h-2V7h2m0 10h-2v-6h2m-1-9A10 10 0 002 12a10 10 0 0010 10 10 10 0 0010-10A10 10 0 0012 2z"/></svg>');
  --md-admonition-icon--tip: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17.55 11.2c-.23-.3-.5-.56-.76-.82-.65-.6-1.4-1.03-2.03-1.66C13.3 7.26 13 4.85 13.91 3c-.91.23-1.75.75-2.45 1.32-2.54 2.08-3.54 5.75-2.34 8.9.04.1.08.2.08.33 0 .22-.15.42-.35.5-.22.1-.46.04-.64-.12a.83.83 0 01-.15-.17c-1.1-1.43-1.28-3.48-.53-5.12C5.89 10 5 12.3 5.14 14.47c.04.5.1 1 .27 1.5.14.6.4 1.2.72 1.73 1.04 1.73 2.87 2.97 4.84 3.22 2.1.27 4.35-.12 5.96-1.6 1.8-1.66 2.45-4.32 1.5-6.6l-.13-.26c-.2-.46-.47-.87-.8-1.25l.05-.01m-3.1 6.3c-.28.24-.73.5-1.08.6-1.1.4-2.2-.16-2.87-.82 1.19-.28 1.89-1.16 2.09-2.05.17-.8-.14-1.46-.27-2.23-.12-.74-.1-1.37.18-2.06.17.38.37.76.6 1.06.76 1 1.95 1.44 2.2 2.8.04.14.06.28.06.43.03.82-.32 1.72-.92 2.27h.01z"/></svg>');
  --md-admonition-icon--success: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10 10-4.5 10-10S17.5 2 12 2m-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/></svg>');
  --md-admonition-icon--question: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M15.07 11.25l-.9.92C13.45 12.89 13 13.5 13 15h-2v-.5c0-1.11.45-2.11 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41a2 2 0 00-2-2 2 2 0 00-2 2H8a4 4 0 014-4 4 4 0 014 4 3.2 3.2 0 01-.93 2.25M13 19h-2v-2h2M12 2A10 10 0 002 12a10 10 0 0010 10 10 10 0 0010-10c0-5.53-4.5-10-10-10z"/></svg>');
  --md-admonition-icon--warning: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 14h-2v-4h2m0 8h-2v-2h2M1 21h22L12 2 1 21z"/></svg>');
  --md-admonition-icon--failure: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2c5.53 0 10 4.47 10 10s-4.47 10-10 10S2 17.53 2 12 6.47 2 12 2m3.59 5L12 10.59 8.41 7 7 8.41 10.59 12 7 15.59 8.41 17 12 13.41 15.59 17 17 15.59 13.41 12 17 8.41 15.59 7z"/></svg>');
  --md-admonition-icon--danger: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M11.5 20l4.86-9.73H13V4l-5 9.73h3.5V20M12 2c2.75 0 5.1 1 7.05 2.95C21 6.9 22 9.25 22 12s-1 5.1-2.95 7.05C17.1 21 14.75 22 12 22s-5.1-1-7.05-2.95C3 17.1 2 14.75 2 12s1-5.1 2.95-7.05C6.9 3 9.25 2 12 2z"/></svg>');
  --md-admonition-icon--bug: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14 12h-4v-2h4m0 6h-4v-2h4m6-6h-2.81a5.985 5.985 0 00-1.82-1.96L17 4.41 15.59 3l-2.17 2.17a6.002 6.002 0 00-2.83 0L8.41 3 7 4.41l1.62 1.63C7.88 6.55 7.26 7.22 6.81 8H4v2h2.09c-.05.33-.09.66-.09 1v1H4v2h2v1c0 .34.04.67.09 1H4v2h2.81c1.04 1.79 2.97 3 5.19 3s4.15-1.21 5.19-3H20v-2h-2.09c.05-.33.09-.66.09-1v-1h2v-2h-2v-1c0-.34-.04-.67-.09-1H20V8z"/></svg>');
  --md-admonition-icon--example: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M7 13v-2h14v2H7m0 6v-2h14v2H7M7 7V5h14v2H7M3 8V5H2V4h2v4H3m-1 9v-1h3v4H2v-1h2v-.5H3v-1h1V17H2m2.25-7a.75.75 0 01.75.75c0 .2-.08.39-.21.52L3.12 13H5v1H2v-.92L4 11H2v-1h2.25z"/></svg>');
  --md-admonition-icon--quote: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14 17h3l2-4V7h-6v6h3M6 17h3l2-4V7H5v6h3l-2 4z"/></svg>');
  --md-footnotes-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 7v4H5.83l3.58-3.59L8 6l-6 6 6 6 1.41-1.42L5.83 13H21V7h-2z"/></svg>');
  --md-details-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58 13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>');
  --md-tasklist-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"/></svg>');
  --md-tasklist-icon--checked: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/></svg>');
  --md-nav-icon--prev: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>');
  --md-nav-icon--next: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58 13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>');
  --md-toc-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 9h14V7H3v2m0 4h14v-2H3v2m0 4h14v-2H3v2m16 0h2v-2h-2v2m0-10v2h2V7h-2m0 6h2v-2h-2v2z"/></svg>');
  --md-clipboard-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 21H8V7h11m0-2H8a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h11a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2m-3-4H4a2 2 0 0 0-2 2v14h2V3h12V1z"/></svg>');
  --md-search-result-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h7c-.41-.25-.8-.56-1.14-.9-.33-.33-.61-.7-.86-1.1H6V4h7v5h5v1.18c.71.16 1.39.43 2 .82V8l-6-6m6.31 16.9c1.33-2.11.69-4.9-1.4-6.22-2.11-1.33-4.91-.68-6.22 1.4-1.34 2.11-.69 4.89 1.4 6.22 1.46.93 3.32.93 4.79.02L22 23.39 23.39 22l-3.08-3.1m-3.81.1a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5z"/></svg>');
  --md-source-forks-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M5 3.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0zm0 2.122a2.25 2.25 0 1 0-1.5 0v.878A2.25 2.25 0 0 0 5.75 8.5h1.5v2.128a2.251 2.251 0 1 0 1.5 0V8.5h1.5a2.25 2.25 0 0 0 2.25-2.25v-.878a2.25 2.25 0 1 0-1.5 0v.878a.75.75 0 0 1-.75.75h-4.5A.75.75 0 0 1 5 6.25v-.878zm3.75 7.378a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0zm3-8.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5z"/></svg>');
  --md-source-repositories-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M2 2.5A2.5 2.5 0 0 1 4.5 0h8.75a.75.75 0 0 1 .75.75v12.5a.75.75 0 0 1-.75.75h-2.5a.75.75 0 1 1 0-1.5h1.75v-2h-8a1 1 0 0 0-.714 1.7.75.75 0 0 1-1.072 1.05A2.495 2.495 0 0 1 2 11.5v-9zm10.5-1V9h-8c-.356 0-.694.074-1 .208V2.5a1 1 0 0 1 1-1h8zM5 12.25v3.25a.25.25 0 0 0 .4.2l1.45-1.087a.25.25 0 0 1 .3 0L8.6 15.7a.25.25 0 0 0 .4-.2v-3.25a.25.25 0 0 0-.25-.25h-3.5a.25.25 0 0 0-.25.25z"/></svg>');
  --md-source-stars-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8 .25a.75.75 0 0 1 .673.418l1.882 3.815 4.21.612a.75.75 0 0 1 .416 1.279l-3.046 2.97.719 4.192a.75.75 0 0 1-1.088.791L8 12.347l-3.766 1.98a.75.75 0 0 1-1.088-.79l.72-4.194L.818 6.374a.75.75 0 0 1 .416-1.28l4.21-.611L7.327.668A.75.75 0 0 1 8 .25zm0 2.445L6.615 5.5a.75.75 0 0 1-.564.41l-3.097.45 2.24 2.184a.75.75 0 0 1 .216.664l-.528 3.084 2.769-1.456a.75.75 0 0 1 .698 0l2.77 1.456-.53-3.084a.75.75 0 0 1 .216-.664l2.24-2.183-3.096-.45a.75.75 0 0 1-.564-.41L8 2.694v.001z"/></svg>');
  --md-source-version-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M2.5 7.775V2.75a.25.25 0 0 1 .25-.25h5.025a.25.25 0 0 1 .177.073l6.25 6.25a.25.25 0 0 1 0 .354l-5.025 5.025a.25.25 0 0 1-.354 0l-6.25-6.25a.25.25 0 0 1-.073-.177zm-1.5 0V2.75C1 1.784 1.784 1 2.75 1h5.025c.464 0 .91.184 1.238.513l6.25 6.25a1.75 1.75 0 0 1 0 2.474l-5.026 5.026a1.75 1.75 0 0 1-2.474 0l-6.25-6.25A1.75 1.75 0 0 1 1 7.775zM6 5a1 1 0 1 0 0 2 1 1 0 0 0 0-2z"/></svg>');
  --md-version-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="m310.6 246.6-127.1 128c-7.1 6.3-15.3 9.4-23.5 9.4s-16.38-3.125-22.63-9.375l-127.1-128C.224 237.5-2.516 223.7 2.438 211.8S19.07 192 32 192h255.1c12.94 0 24.62 7.781 29.58 19.75s3.12 25.75-6.08 34.85z"/></svg>');
}

:host > * {
  /* CODE */
  --md-code-fg-color: ${l.palette.text.primary};
  --md-code-bg-color: ${l.palette.background.paper};
  --md-code-hl-color: ${(0,x.Fq)(l.palette.warning.main,.5)};
  --md-code-hl-keyword-color: ${l.palette.type==="dark"?l.palette.primary.light:l.palette.primary.dark};
  --md-code-hl-function-color: ${l.palette.type==="dark"?l.palette.secondary.light:l.palette.secondary.dark};
  --md-code-hl-string-color: ${l.palette.type==="dark"?l.palette.success.light:l.palette.success.dark};
  --md-code-hl-number-color: ${l.palette.type==="dark"?l.palette.error.light:l.palette.error.dark};
  --md-code-hl-constant-color: var(--md-code-hl-function-color);
  --md-code-hl-special-color: var(--md-code-hl-function-color);
  --md-code-hl-name-color: var(--md-code-fg-color);
  --md-code-hl-comment-color: var(--md-default-fg-color--light);
  --md-code-hl-generic-color: var(--md-default-fg-color--light);
  --md-code-hl-variable-color: var(--md-default-fg-color--light);
  --md-code-hl-operator-color: var(--md-default-fg-color--light);
  --md-code-hl-punctuation-color: var(--md-default-fg-color--light);

  /* TYPESET */
  --md-typeset-font-size: 1rem;
  --md-typeset-color: var(--md-default-fg-color);
  --md-typeset-a-color: ${l.palette.link};
  --md-typeset-table-color: ${l.palette.text.primary};
  --md-typeset-del-color: ${l.palette.type==="dark"?(0,x.Fq)(l.palette.error.dark,.5):(0,x.Fq)(l.palette.error.light,.5)};
  --md-typeset-ins-color: ${l.palette.type==="dark"?(0,x.Fq)(l.palette.success.dark,.5):(0,x.Fq)(l.palette.success.light,.5)};
  --md-typeset-mark-color: ${l.palette.type==="dark"?(0,x.Fq)(l.palette.warning.dark,.5):(0,x.Fq)(l.palette.warning.light,.5)};
}

@media screen and (max-width: 76.1875em) {
  :host > * {
    /* TYPESET */
    --md-typeset-font-size: .9rem;
  }
}

@media screen and (max-width: 600px) {
  :host > * {
    /* TYPESET */
    --md-typeset-font-size: .7rem;
  }
}
`,Ie=({theme:l})=>`
/*==================  Reset  ==================*/

body {
  --md-text-color: var(--md-default-fg-color);
  --md-text-link-color: var(--md-accent-fg-color);
  --md-text-font-family: ${l.typography.fontFamily};
  font-family: var(--md-text-font-family);
  background-color: unset;
}
`;const Le="224px";var bt=({theme:l,sidebar:o})=>`
/*==================  Layout  ==================*/

/* mkdocs material v9 compat */
.md-nav__title {
  color: var(--md-default-fg-color);
}

.md-grid {
  max-width: 100%;
  margin: 0;
}

.md-nav {
  font-size: calc(var(--md-typeset-font-size) * 0.9);
}
.md-nav__link {
  display: flex;
  align-items: center;
  justify-content: space-between;
}
.md-nav__icon {
  height: 20px !important;
  width: 20px !important;
  margin-left:${l.spacing(1)}px;
}
.md-nav__icon svg {
  margin: 0;
  width: 20px !important;
  height: 20px !important;
}
.md-nav__icon:after {
  width: 20px !important;
  height: 20px !important;
}

.md-nav__item--active > .md-nav__link, a.md-nav__link--active {
  text-decoration: underline;
  color: var(--md-typeset-a-color);
}

.md-main__inner {
  margin-top: 0;
}

.md-sidebar {
  bottom: 75px;
  position: fixed;
  width: 16rem;
  overflow-y: auto;
  overflow-x: hidden;
  scrollbar-color: rgb(193, 193, 193) #eee;
  scrollbar-width: thin;
}
.md-sidebar .md-sidebar__scrollwrap {
  width: calc(12.1rem);
}
.md-sidebar--secondary {
  right: ${l.spacing(3)}px;
}
.md-sidebar::-webkit-scrollbar {
  width: 5px;
}
.md-sidebar::-webkit-scrollbar-button {
  width: 5px;
  height: 5px;
}
.md-sidebar::-webkit-scrollbar-track {
  background: #eee;
  border: 1 px solid rgb(250, 250, 250);
  box-shadow: 0px 0px 3px #dfdfdf inset;
  border-radius: 3px;
}
.md-sidebar::-webkit-scrollbar-thumb {
  width: 5px;
  background: rgb(193, 193, 193);
  border: transparent;
  border-radius: 3px;
}
.md-sidebar::-webkit-scrollbar-thumb:hover {
  background: rgb(125, 125, 125);
}

.md-content {
  max-width: calc(100% - 16rem * 2);
  margin-left: 16rem;
  margin-bottom: 50px;
}

.md-footer {
  position: fixed;
  bottom: 0px;
  pointer-events: none;
}

.md-footer-nav__link, .md-footer__link {
  pointer-events: all;
}

.md-footer__title {
  background-color: unset;
}
.md-footer-nav__link {
  width: 16rem;
}

.md-dialog {
  background-color: unset;
}

@media screen and (min-width: 76.25em) {
  .md-sidebar {
    height: auto;
  }
}

@media screen and (max-width: 76.1875em) {
  .md-nav {
    transition: none !important;
    background-color: var(--md-default-bg-color)
  }
  .md-nav--primary .md-nav__title {
    cursor: auto;
    color: var(--md-default-fg-color);
    font-weight: 700;
    white-space: normal;
    line-height: 1rem;
    height: auto;
    display: flex;
    flex-flow: column;
    row-gap: 1.6rem;
    padding: 1.2rem .8rem .8rem;
    background-color: var(--md-default-bg-color);
  }
  .md-nav--primary .md-nav__title~.md-nav__list {
    box-shadow: none;
  }
  .md-nav--primary .md-nav__title ~ .md-nav__list > :first-child {
    border-top: none;
  }
  .md-nav--primary .md-nav__title .md-nav__button {
    display: none;
  }
  .md-nav--primary .md-nav__title .md-nav__icon {
    color: var(--md-default-fg-color);
    position: static;
    height: auto;
    margin: 0 0 0 -0.2rem;
  }
  .md-nav--primary > .md-nav__title [for="none"] {
    padding-top: 0;
  }
  .md-nav--primary .md-nav__item {
    border-top: none;
  }
  .md-nav--primary :is(.md-nav__title,.md-nav__item) {
    font-size : var(--md-typeset-font-size);
  }
  .md-nav .md-source {
    display: none;
  }

  .md-sidebar {
    height: 100%;
  }
  .md-sidebar--primary {
    width: 12.1rem !important;
    z-index: 200;
    left: ${o.isPinned?`calc(-12.1rem + ${Le})`:"calc(-12.1rem + 72px)"} !important;
  }
  .md-sidebar--secondary:not([hidden]) {
    display: none;
  }

  .md-content {
    max-width: 100%;
    margin-left: 0;
  }

  .md-header__button {
    margin: 0.4rem 0;
    margin-left: 0.4rem;
    padding: 0;
  }

  .md-overlay {
    left: 0;
  }

  .md-footer {
    position: static;
    padding-left: 0;
  }
  .md-footer-nav__link {
    /* footer links begin to overlap at small sizes without setting width */
    width: 50%;
  }
}

@media screen and (max-width: 600px) {
  .md-sidebar--primary {
    left: -12.1rem !important;
    width: 12.1rem;
  }
}


@media print {
  .md-sidebar,
  #toggle-sidebar {
    display: none;
  }
  
  .md-content {
    margin: 0;
    width: 100%;
    max-width: 100%;
  }
}
`;const ut=["h1","h2","h3","h4","h5","h6"];var Ut=({theme:l})=>`
/*==================  Typeset  ==================*/

.md-typeset {
  font-size: var(--md-typeset-font-size);
}

${ut.reduce((o,f)=>{var I;const ee=(I=l.typography.htmlFontSize)!=null?I:16,fe=l.typography[f],{lineHeight:Ae,fontFamily:Be,fontWeight:$t,fontSize:on}=fe,Ft=mn=>{let nn=1;return typeof mn=="number"&&(nn=mn/ee*.6),typeof mn=="string"&&(nn=mn.replace("rem","")),`calc(${nn} * var(--md-typeset-font-size))`};return o.concat(`
    .md-typeset ${f} {
      color: var(--md-default-fg-color);
      line-height: ${Ae};
      font-family: ${Be};
      font-weight: ${$t};
      font-size: ${Ft(on)};
    }
  `)},"")}

.md-typeset .md-content__button {
  color: var(--md-default-fg-color);
}

.md-typeset hr {
  border-bottom: 0.05rem dotted ${l.palette.divider};
}

.md-typeset details {
  font-size: var(--md-typeset-font-size) !important;
}
.md-typeset details summary {
  padding-left: 2.5rem !important;
}
.md-typeset details summary:before,
.md-typeset details summary:after {
  top: 50% !important;
  width: 20px !important;
  height: 20px !important;
  transform: rotate(0deg) translateY(-50%) !important;
}
.md-typeset details[open] > summary:after {
  transform: rotate(90deg) translateX(-50%) !important;
}

.md-typeset blockquote {
  color: var(--md-default-fg-color--light);
  border-left: 0.2rem solid var(--md-default-fg-color--light);
}

.md-typeset table:not([class]) {
  font-size: var(--md-typeset-font-size);
  border: 1px solid var(--md-default-fg-color);
  border-bottom: none;
  border-collapse: collapse;
}
.md-typeset table:not([class]) th {
  font-weight: bold;
}
.md-typeset table:not([class]) td, .md-typeset table:not([class]) th {
  border-bottom: 1px solid var(--md-default-fg-color);
}

.md-typeset pre > code::-webkit-scrollbar-thumb {
  background-color: hsla(0, 0%, 0%, 0.32);
}
.md-typeset pre > code::-webkit-scrollbar-thumb:hover {
  background-color: hsla(0, 0%, 0%, 0.87);
}
`,wt=()=>`
/*==================  Animations  ==================*/
/*
  Disable CSS animations on link colors as they lead to issues in dark mode.
  The dark mode color theme is applied later and theirfore there is always an animation from light to dark mode when navigation between pages.
*/
.md-dialog, .md-nav__link, .md-footer__link, .md-typeset a, .md-typeset a::before, .md-typeset .headerlink {
  transition: none;
}
`,kt=({theme:l})=>`
/*==================  Extensions  ==================*/

/* HIGHLIGHT */
.highlight .md-clipboard:after {
  content: unset;
}

.highlight .nx {
  color: ${l.palette.type==="dark"?"#ff53a3":"#ec407a"};
}

/* CODE HILITE */
.codehilite .gd {
  background-color: ${l.palette.type==="dark"?"rgba(248,81,73,0.65)":"#fdd"};
}

.codehilite .gi {
  background-color: ${l.palette.type==="dark"?"rgba(46,160,67,0.65)":"#dfd"};
}

/* TABBED */
.tabbed-set>input:nth-child(1):checked~.tabbed-labels>:nth-child(1),
.tabbed-set>input:nth-child(2):checked~.tabbed-labels>:nth-child(2),
.tabbed-set>input:nth-child(3):checked~.tabbed-labels>:nth-child(3),
.tabbed-set>input:nth-child(4):checked~.tabbed-labels>:nth-child(4),
.tabbed-set>input:nth-child(5):checked~.tabbed-labels>:nth-child(5),
.tabbed-set>input:nth-child(6):checked~.tabbed-labels>:nth-child(6),
.tabbed-set>input:nth-child(7):checked~.tabbed-labels>:nth-child(7),
.tabbed-set>input:nth-child(8):checked~.tabbed-labels>:nth-child(8),
.tabbed-set>input:nth-child(9):checked~.tabbed-labels>:nth-child(9),
.tabbed-set>input:nth-child(10):checked~.tabbed-labels>:nth-child(10),
.tabbed-set>input:nth-child(11):checked~.tabbed-labels>:nth-child(11),
.tabbed-set>input:nth-child(12):checked~.tabbed-labels>:nth-child(12),
.tabbed-set>input:nth-child(13):checked~.tabbed-labels>:nth-child(13),
.tabbed-set>input:nth-child(14):checked~.tabbed-labels>:nth-child(14),
.tabbed-set>input:nth-child(15):checked~.tabbed-labels>:nth-child(15),
.tabbed-set>input:nth-child(16):checked~.tabbed-labels>:nth-child(16),
.tabbed-set>input:nth-child(17):checked~.tabbed-labels>:nth-child(17),
.tabbed-set>input:nth-child(18):checked~.tabbed-labels>:nth-child(18),
.tabbed-set>input:nth-child(19):checked~.tabbed-labels>:nth-child(19),
.tabbed-set>input:nth-child(20):checked~.tabbed-labels>:nth-child(20) {
  color: var(--md-accent-fg-color);
  border-color: var(--md-accent-fg-color);
}

/* TASK-LIST */
.task-list-control .task-list-indicator::before {
  background-color: ${l.palette.action.disabledBackground};
}
.task-list-control [type="checkbox"]:checked + .task-list-indicator:before {
 background-color: ${l.palette.success.main};
}

/* ADMONITION */
.admonition {
  font-size: var(--md-typeset-font-size) !important;
}
.admonition .admonition-title {
  padding-left: 2.5rem !important;
}

.admonition .admonition-title:before {
  top: 50% !important;
  width: 20px !important;
  height: 20px !important;
  transform: translateY(-50%) !important;
}
`;const Qt=[me,Ie,bt,Ut,wt,kt],un=()=>(0,U.Pf)(),ln=()=>{const l=un(),o=(0,B.Z)();return(0,c.useMemo)(()=>{const f={theme:o,sidebar:l};return Qt.reduce((I,ee)=>I+ee(f),"")},[o,l])},tn=()=>{const l=ln();return(0,c.useCallback)(o=>(o.getElementsByTagName("head")[0].insertAdjacentHTML("beforeend",`<style>${l}</style>`),o),[l])},Zt=(l,o,f)=>{const I=l==="src"&&o.endsWith(".svg"),ee=!o.match(/^([a-z]*:)?\/\//i),fe=o.startsWith(f);return I&&(ee||fe)},Wt=({techdocsStorageApi:l,entityId:o,path:f})=>async I=>{const ee=await l.getApiOrigin(),fe=async(Ae,Be)=>{for(const $t of Ae)if($t.hasAttribute(Be)){const on=$t.getAttribute(Be);if(!on)return;const Ft=await l.getBaseUrl(on,o,f);if(Zt(Be,on,ee))try{const nn=await(await fetch(Ft,{credentials:"include"})).text();$t.setAttribute(Be,`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(nn)))}`)}catch{$t.setAttribute("alt",`Error: ${on}`)}else $t.setAttribute(Be,Ft)}};return await Promise.all([fe(I.querySelectorAll("img"),"src"),fe(I.querySelectorAll("script"),"src"),fe(I.querySelectorAll("source"),"src"),fe(I.querySelectorAll("link"),"href"),fe(I.querySelectorAll("a[download]"),"href")]),I},hn=l=>o=>{var f;const I=o.querySelector('[title="Edit this page"]');if(!I||!I.href)return o;const ee=new URL(I.href),fe=l.byUrl(ee);if((fe==null?void 0:fe.type)!=="github"&&(fe==null?void 0:fe.type)!=="gitlab")return o;const Ae=((f=o.querySelector("article>h1"))==null?void 0:f.childNodes[0].textContent)||"",Be=encodeURIComponent(`Documentation Feedback: ${Ae}`),$t=encodeURIComponent(`Page source:
${I.href}

Feedback:`),on=(fe==null?void 0:fe.type)==="github"?(0,$e.BT)(ee.href,"blob"):ee.href,Ft=Rt()(on),mn=`/${Ft.organization}/${Ft.name}`,nn=I.cloneNode();switch(fe==null?void 0:fe.type){case"gitlab":nn.href=`${ee.origin}${mn}/issues/new?issue[title]=${Be}&issue[description]=${$t}`;break;case"github":nn.href=`${ee.origin}${mn}/issues/new?title=${Be}&body=${$t}`;break;default:return o}return ft.render(c.createElement(Ge.Z),nn),nn.style.paddingLeft="5px",nn.title="Leave feedback for this page",nn.id="git-feedback-link",I==null||I.insertAdjacentElement("beforebegin",nn),o},gn=()=>l=>{const o=l.querySelector('.md-header label[for="__drawer"]'),f=l.querySelector("article");if(!o||!f)return l;const I=o.cloneNode();return ft.render(c.createElement(q.Z),I),I.id="toggle-sidebar",I.title="Toggle Sidebar",I.classList.add("md-content__button"),I.style.setProperty("padding","0 0 0 5px"),I.style.setProperty("margin","0.4rem 0 0.4rem 0.4rem"),f==null||f.prepend(I),l},yn=()=>l=>(((f,I)=>{Array.from(f).filter(ee=>ee.hasAttribute(I)).forEach(ee=>{const fe=ee.getAttribute(I);if(fe){fe.match(/^https?:\/\//i)&&ee.setAttribute("target","_blank");try{const Ae=bn(window.location.href);ee.setAttribute(I,new URL(fe,Ae).toString())}catch{ee.replaceWith(ee.textContent||fe)}}})})(Array.from(l.getElementsByTagName("a")),"href"),l);function bn(l){const o=new URL(l);return!o.pathname.endsWith("/")&&!o.pathname.endsWith(".html")&&(o.pathname+="/"),o.toString()}const In=({baseUrl:l,onClick:o})=>f=>(Array.from(f.getElementsByTagName("a")).forEach(I=>{I.addEventListener("click",ee=>{const Ae=I.getAttribute("href");Ae&&Ae.startsWith(l)&&!I.hasAttribute("download")&&(ee.preventDefault(),o(ee,Ae))})}),f),An=(0,T.Z)(l=>({tooltip:{fontSize:"inherit",color:l.palette.text.primary,margin:0,padding:l.spacing(.5),backgroundColor:"transparent",boxShadow:"none"}}))(S.ZP),On=()=>c.createElement(ie.Z,null,c.createElement("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"})),Sn=({text:l})=>{const[o,f]=(0,c.useState)(!1),[,I]=(0,de.Z)(),ee=(0,c.useCallback)(()=>{I(l),f(!0)},[l,I]),fe=(0,c.useCallback)(()=>{f(!1)},[f]);return c.createElement(An,{title:"Copied to clipboard",placement:"left",open:o,onClose:fe,leaveDelay:1e3},c.createElement(v.Z,{style:{color:"inherit"},className:"md-clipboard md-icon",onClick:ee},c.createElement(On,null)))},Dn=l=>o=>{var f;const I=o.querySelectorAll("pre > code");for(const ee of I){const fe=ee.textContent||"",Ae=document.createElement("div");(f=ee==null?void 0:ee.parentElement)==null||f.prepend(Ae),ft.render(c.createElement(Te.Z,{theme:l},c.createElement(Sn,{text:fe})),Ae)}return o},sr=()=>l=>{var o;return(o=l.querySelector(".md-header"))==null||o.remove(),l},zn=()=>l=>{var o,f;return(o=l.querySelector(".md-footer .md-copyright"))==null||o.remove(),(f=l.querySelector(".md-footer-copyright"))==null||f.remove(),l},Dr=({onLoading:l,onLoaded:o})=>f=>(l(),f.addEventListener(b.Ox,function I(){o(),f.removeEventListener(b.Ox,I)}),f),Vr=()=>l=>(l.addEventListener(b.Ox,function o(){var f;if(window.location.hash){const I=window.location.hash.slice(1);(f=l==null?void 0:l.querySelector(`[id="${I}"]`))==null||f.scrollIntoView()}l.removeEventListener(b.Ox,o)}),l),Zr=()=>l=>(setTimeout(()=>{const o=l==null?void 0:l.querySelectorAll("li.md-nav__item--active");o.length!==0&&(o.forEach(I=>{const ee=I==null?void 0:I.querySelector("input");ee!=null&&ee.checked||ee==null||ee.click()}),o[o.length-1].scrollIntoView())},200),l),lr=async(l,o)=>{let f;if(typeof l=="string")f=new DOMParser().parseFromString(l,"text/html").documentElement;else if(l instanceof Element)f=l;else throw new Error("dom is not a recognized type");for(const I of o)f=await I(f);return f};function Wr(l,o){const f=new URL(o),I=`${f.origin}${f.pathname.replace(/\/$/,"")}`,ee=l.replace(I,"").replace(/^\/+/,""),fe=new URL(`http://localhost/${ee}`);return`${fe.pathname}${fe.search}${fe.hash}`}function jn(){const l=(0,m.s0)(),f=(0,n.h_)(n.Ds).getOptionalString("app.baseUrl");return(0,c.useCallback)(ee=>{let fe=ee;if(f)try{fe=Wr(ee,f)}catch{}l(fe)},[l,f])}const $r="screen and (max-width: 76.1875em)",_r=l=>{const o=jn(),f=(0,B.Z)(),I=(0,Pe.Z)($r),ee=te(),fe=tn(),Ae=(0,n.z$)(),Be=(0,n.h_)(b.Dl),$t=(0,n.h_)(A.q3),{state:on,path:Ft,content:mn}=mt(),[nn,kn]=(0,c.useState)(null),Tn=(0,b.ux)(nn),ur=(0,c.useCallback)(()=>{if(!nn)return;nn.querySelectorAll(".md-sidebar").forEach(tr=>{var Jn,kr,Sr;if(I)tr.style.top="0px";else{const gr=document==null?void 0:document.querySelector(".techdocs-reader-page"),Gr=(Jn=gr==null?void 0:gr.getBoundingClientRect().top)!=null?Jn:0;let Hr=(kr=nn.getBoundingClientRect().top)!=null?kr:0;const na=nn.querySelector(".md-container > .md-tabs"),ca=(Sr=na==null?void 0:na.getBoundingClientRect().height)!=null?Sr:0;Hr<Gr&&(Hr=Gr),tr.style.top=`${Math.max(Hr,0)+ca}px`}tr.style.setProperty("opacity","1")})},[nn,I]);(0,c.useEffect)(()=>(window.addEventListener("resize",ur),window.addEventListener("scroll",ur,!0),()=>{window.removeEventListener("resize",ur),window.removeEventListener("scroll",ur,!0)}),[nn,ur]);const Kn=(0,c.useCallback)(()=>{if(!nn)return;const er=nn.querySelector(".md-footer");er&&(er.style.width=`${nn.getBoundingClientRect().width}px`)},[nn]);(0,c.useEffect)(()=>(window.addEventListener("resize",Kn),()=>{window.removeEventListener("resize",Kn)}),[nn,Kn]),(0,c.useEffect)(()=>{Tn||(Kn(),ur())},[on,Tn,Kn,ur]);const vr=(0,c.useCallback)((er,tr)=>lr(er,[ee,Wt({techdocsStorageApi:Be,entityId:l,path:tr}),yn(),gn(),sr(),zn(),hn($t),fe]),[l,$t,Be,ee,fe]),Kr=(0,c.useCallback)(async er=>lr(er,[Vr(),Zr(),Dn(f),In({baseUrl:window.location.origin,onClick:(tr,Jn)=>{var kr,Sr;const gr=tr.ctrlKey||tr.metaKey,Gr=new URL(Jn),Hr=((kr=tr.target)==null?void 0:kr.innerText)||Jn,na=Jn.replace(window.location.origin,"");Ae.captureEvent("click",Hr,{attributes:{to:na}}),Gr.hash?gr?window.open(Jn,"_blank"):(o(Jn),(Sr=er==null?void 0:er.querySelector(`[id="${Gr.hash.slice(1)}"]`))==null||Sr.scrollIntoView()):gr?window.open(Jn,"_blank"):o(Jn)}}),Dr({onLoading:()=>{},onLoaded:()=>{var tr;(tr=er.querySelector(".md-nav__title"))==null||tr.removeAttribute("for")}}),Dr({onLoading:()=>{Array.from(er.querySelectorAll(".md-sidebar")).forEach(Jn=>{Jn.style.setProperty("opacity","0")})},onLoaded:()=>{}})]),[f,o,Ae]);return(0,c.useEffect)(()=>{if(!mn)return()=>{};let er=!0;return vr(mn,Ft).then(async tr=>{if(!(tr!=null&&tr.innerHTML)||!er)return;window.scroll({top:0});const Jn=await Kr(tr);kn(Jn)}),()=>{er=!1}},[mn,Ft,vr,Kr]),nn},Lr=()=>{const l=(0,b.$L)(),{shadowRoot:o}=(0,b.x1)(),f=o==null?void 0:o.querySelector('[data-md-component="content"]'),I=o==null?void 0:o.querySelector('div[data-md-component="sidebar"][data-md-type="navigation"], div[data-md-component="navigation"]');let ee=I==null?void 0:I.querySelector('[data-techdocs-addons-location="primary sidebar"]');ee||(ee=document.createElement("div"),ee.setAttribute("data-techdocs-addons-location","primary sidebar"),I==null||I.prepend(ee));const fe=o==null?void 0:o.querySelector('div[data-md-component="sidebar"][data-md-type="toc"], div[data-md-component="toc"]');let Ae=fe==null?void 0:fe.querySelector('[data-techdocs-addons-location="secondary sidebar"]');return Ae||(Ae=document.createElement("div"),Ae.setAttribute("data-techdocs-addons-location","secondary sidebar"),fe==null||fe.prepend(Ae)),c.createElement(c.Fragment,null,c.createElement(qe.Z,{container:ee},l.renderComponentsByLocation(b.oZ.PrimarySidebar)),c.createElement(qe.Z,{container:f},l.renderComponentsByLocation(b.oZ.Content)),c.createElement(qe.Z,{container:Ae},l.renderComponentsByLocation(b.oZ.SecondarySidebar)))},Ar=(0,w.Z)({search:{width:"100%","@media (min-width: 76.1875em)":{width:"calc(100% - 34.4rem)",margin:"0 auto"},"@media print":{display:"none"}}}),mr=_t(l=>{var o;const{withSearch:f=!0,onReady:I}=l,ee=Ar(),{entityMetadata:{value:fe,loading:Ae},entityRef:Be,setShadowRoot:$t}=(0,b.x1)(),on=_r(Be),Ft=(0,c.useCallback)(mn=>{$t(mn),I instanceof Function&&I()},[$t,I]);return Ae===!1&&!fe?c.createElement(U.mf,{status:"404",statusMessage:"PAGE NOT FOUND"}):on?c.createElement(U.VY,null,c.createElement(H.Z,{container:!0},c.createElement(H.Z,{xs:12,item:!0},c.createElement(X,null)),f&&c.createElement(H.Z,{className:ee.search,xs:"auto",item:!0},c.createElement(We,{entityId:Be,entityTitle:(o=fe==null?void 0:fe.metadata)==null?void 0:o.title})),c.createElement(H.Z,{xs:12,item:!0},c.createElement(b.VA,{element:on,onAppend:Ft},c.createElement(Lr,null))))):c.createElement(U.VY,null,c.createElement(H.Z,{container:!0},c.createElement(H.Z,{xs:12,item:!0},c.createElement(X,null))))}),Br=null,br=(0,n.NT)({id:"techdocs:index-page"}),Pr=(0,n.NT)({id:"techdocs:reader-page",params:["namespace","kind","name"]}),Fn=(0,n.NT)({id:"techdocs:catalog-reader-view"}),wr=c.createElement(Ke.Z,{animation:"wave",variant:"text",height:40}),Mr=l=>{const{palette:{common:{white:o}}}=(0,B.Z)(),{children:f}=l,I=(0,b.$L)(),ee=(0,n.h_)(n.Ds),{title:fe,setTitle:Ae,subtitle:Be,setSubtitle:$t,entityRef:on,metadata:{value:Ft,loading:mn},entityMetadata:{value:nn,loading:kn}}=(0,b.x1)();(0,c.useEffect)(()=>{Ft&&(Ae(Ft.site_name),$t(()=>{let{site_description:gr}=Ft;return(!gr||gr==="None")&&(gr=""),gr}))},[Ft,Ae,$t]);const Tn=ee.getOptional("app.title")||"Backstage",ur=[fe,Be,Tn].filter(Boolean).join(" | "),{locationMetadata:Kn,spec:vr}=nn||{},Kr=vr==null?void 0:vr.lifecycle,er=nn?(0,st.hF)(nn,pe.S4):[],tr=(0,n.tg)(br)(),Jn=c.createElement(c.Fragment,null,c.createElement(U.i9,{label:(0,Je.capitalize)((nn==null?void 0:nn.kind)||"entity"),value:c.createElement(st.dx,{color:"inherit",entityRef:on,title:nn==null?void 0:nn.metadata.title,defaultKind:"Component"})}),er.length>0&&c.createElement(U.i9,{label:"Owner",value:c.createElement(st.rI,{color:"inherit",entityRefs:er,defaultKind:"group"})}),Kr?c.createElement(U.i9,{label:"Lifecycle",value:Kr}):null,Kn&&Kn.type!=="dir"&&Kn.type!=="file"?c.createElement(U.i9,{label:"",value:c.createElement(H.Z,{container:!0,direction:"column",alignItems:"center",style:{color:o}},c.createElement(H.Z,{style:{padding:0},item:!0},c.createElement(Ne.Z,{style:{marginTop:"-25px"}})),c.createElement(H.Z,{style:{padding:0},item:!0},"Source")),url:Kn.target}):null);return!kn&&nn===void 0||!mn&&Ft===void 0?null:c.createElement(U.h4,{type:"Documentation",typeLink:tr,title:fe||wr,subtitle:Be===""?void 0:Be||wr},c.createElement(Se.Z,{titleTemplate:"%s"},c.createElement("title",null,ur)),Jn,f,I.renderComponentsByLocation(b.oZ.Header))},Fr=(0,w.Z)(l=>({root:{gridArea:"pageSubheader",flexDirection:"column",minHeight:"auto",padding:l.spacing(3,3,0),"@media print":{display:"none"}}})),Ur=l=>{const o=Fr(),[f,I]=(0,c.useState)(null),ee=(0,c.useCallback)(mn=>{I(mn.currentTarget)},[]),fe=(0,c.useCallback)(()=>{I(null)},[]),{entityMetadata:{value:Ae,loading:Be}}=(0,b.x1)(),$t=(0,b.$L)(),on=$t.renderComponentsByLocation(b.oZ.Subheader),Ft=$t.renderComponentsByLocation(b.oZ.Settings);return!on&&!Ft||Be===!1&&!Ae?null:c.createElement(xe.Z,{classes:o,...l.toolbarProps},c.createElement(ke.Z,{display:"flex",justifyContent:"flex-end",width:"100%",flexWrap:"wrap"},on,Ft?c.createElement(c.Fragment,null,c.createElement(S.ZP,{title:"Settings"},c.createElement(v.Z,{"aria-controls":"tech-docs-reader-page-settings","aria-haspopup":"true",onClick:ee},c.createElement(Qe.Z,null))),c.createElement(rt.Z,{id:"tech-docs-reader-page-settings",getContentAnchorEl:null,anchorEl:f,anchorOrigin:{vertical:"bottom",horizontal:"right"},open:Boolean(f),onClose:fe,keepMounted:!0},c.createElement("div",null,Ft))):null))},xr=l=>{const{withSearch:o,withHeader:f=!0}=l;return c.createElement(U.T3,{themeId:"documentation"},f&&c.createElement(Mr,null),c.createElement(Ur,null),c.createElement(mr,{withSearch:o}))},be=l=>{const{kind:o,name:f,namespace:I}=(0,n.Oi)(Pr),{children:ee,entityRef:fe={kind:o,name:f,namespace:I}}=l,Ae=(0,m.pC)();if(!ee){const on=(Ae?c.Children.toArray(Ae.props.children):[]).flatMap(Ft=>{var mn,nn;return(nn=(mn=Ft==null?void 0:Ft.props)==null?void 0:mn.children)!=null?nn:[]}).find(Ft=>!(0,n.IY)(Ft,b.Zz)&&!(0,n.IY)(Ft,b.jM));return c.createElement(b.ZS,{entityRef:fe},on||c.createElement(xr,null))}return c.createElement(b.ZS,{entityRef:fe},({metadata:Be,entityMetadata:$t,onReady:on})=>c.createElement("div",{className:"techdocs-reader-page"},c.createElement(U.T3,{themeId:"documentation"},ee instanceof Function?ee({entityRef:fe,techdocsMetadataValue:Be.value,entityMetadataValue:$t.value,onReady:on}):ee)))};function at(l,o){return o.getOptionalBoolean("techdocs.legacyUseCaseSensitiveTripletPaths")?l:l.toLocaleLowerCase("en-US")}const vt=l=>{const{entities:o}=l,f=(0,n.tg)(Pr),I=(0,n.h_)(n.Ds);return o?c.createElement(U.Oh,{"data-testid":"docs-explore"},o!=null&&o.length?o.map((ee,fe)=>{var Ae,Be;return c.createElement(Kt.Z,{key:fe},c.createElement(Nt.Z,null,c.createElement(U.hu,{title:(Ae=ee.metadata.title)!=null?Ae:ee.metadata.name})),c.createElement(rn.Z,null,ee.metadata.description),c.createElement(D.Z,null,c.createElement(U.Qj,{to:f({namespace:at((Be=ee.metadata.namespace)!=null?Be:"default",I),kind:at(ee.kind,I),name:at(ee.metadata.name,I)}),color:"primary","data-testid":"read_docs"},"Read Docs")))}):null):null},Tt={title:"All Documentation",filterPredicate:()=>!0},an=l=>{const{entities:o,group:f}=l,{loading:I,isOwnedEntity:ee}=useEntityOwnership(),fe=o.filter(Be=>f.filterPredicate==="ownedByUser"?I?!1:ee(Be):typeof f.filterPredicate=="function"&&f.filterPredicate(Be)),Ae=(()=>typeof f.title=="string"?React.createElement(ContentHeader,{title:f.title}):f.title)();return fe.length===0?null:React.createElement(Content,null,Ae,React.createElement(vt,{entities:fe}))},Jt=l=>{const{loading:o,error:f,entities:I}=useEntityList();return f?React.createElement(WarningPanel,{severity:"error",title:"Could not load available documentation."},React.createElement(CodeSnippet,{language:"text",text:f.toString()})):o?React.createElement(Progress,null):I.length===0?React.createElement("div",{"data-testid":"doc-not-found"},React.createElement(Typography$1,{variant:"body2"},"No documentation found that match your filter. Learn more about"," ",React.createElement(Link,{to:"https://backstage.io/docs/features/techdocs/creating-and-publishing"},"publishing documentation"),".")):(I.sort((ee,fe)=>{var Ae,Be;return((Ae=ee.metadata.title)!=null?Ae:ee.metadata.name).localeCompare((Be=fe.metadata.title)!=null?Be:fe.metadata.name)}),React.createElement(Content,null,(l.groups||[Tt]).map((ee,fe)=>React.createElement(an,{entities:I,group:ee,key:`${ee.title}-${fe}`}))))},en=(0,dt.Z)({root:{color:"#f3ba37"}})(Vt.Z),En={createCopyDocsUrlAction(l){return o=>({icon:()=>c.createElement(Et.Z,{fontSize:"small"}),tooltip:"Click to copy documentation link to clipboard",onClick:()=>l(`${window.location.origin}${o.resolved.docsUrl}`)})},createStarEntityAction(l,o){return f=>{const I=f.entity,ee=l(I);return{cellStyle:{paddingLeft:"1em"},icon:()=>ee?c.createElement(en,null):c.createElement(jt.Z,null),tooltip:ee?"Remove from favorites":"Add to favorites",onClick:()=>o(I)}}}};function cn(l){return l.metadata.title||l.metadata.name}const sn={createNameColumn(){return{title:"Document",field:"entity.metadata.name",highlight:!0,render:l=>c.createElement(U.uw,{value:c.createElement(U.rU,{to:l.resolved.docsUrl},cn(l.entity)),subvalue:l.entity.metadata.description})}},createOwnerColumn(){return{title:"Owner",field:"resolved.ownedByRelationsTitle",render:({resolved:l})=>c.createElement(st.rI,{entityRefs:l.ownedByRelations,defaultKind:"group"})}},createTypeColumn(){return{title:"Type",field:"entity.spec.type"}}},Rn=l=>{const{entities:o,title:f,loading:I,columns:ee,actions:fe,options:Ae}=l,[,Be]=(0,de.Z)(),$t=(0,n.tg)(Pr),on=(0,n.h_)(n.Ds);if(!o)return null;const Ft=o.map(kn=>{var Tn;const ur=(0,st.hF)(kn,pe.S4);return{entity:kn,resolved:{docsUrl:$t({namespace:at((Tn=kn.metadata.namespace)!=null?Tn:"default",on),kind:at(kn.kind,on),name:at(kn.metadata.name,on)}),ownedByRelations:ur,ownedByRelationsTitle:ur.map(Kn=>(0,st.$3)(Kn,{defaultKind:"group"})).join(", ")}}}),mn=[sn.createNameColumn(),sn.createOwnerColumn(),sn.createTypeColumn()],nn=[En.createCopyDocsUrlAction(Be)];return c.createElement(c.Fragment,null,I||Ft&&Ft.length>0?c.createElement(U.iA,{isLoading:I,options:{paging:!0,pageSize:20,search:!0,actionsColumnIndex:-1,...Ae},data:Ft,columns:ee||mn,actions:fe||nn,title:f?`${f} (${Ft.length})`:`All (${Ft.length})`}):c.createElement(U.ub,{missing:"data",title:"No documents to show",description:"Create your own document. Check out our Getting Started Information",action:c.createElement(U.Qj,{color:"primary",to:"https://backstage.io/docs/features/techdocs/getting-started",variant:"contained"},"DOCS")}))};Rn.columns=sn,Rn.actions=En;const _n=l=>{var o,f;const{columns:I,actions:ee,options:fe}=l,{loading:Ae,error:Be,entities:$t,filters:on}=(0,st.wp)(),{isStarredEntity:Ft,toggleStarredEntity:mn}=(0,st.CR)(),[,nn]=(0,de.Z)(),kn=(0,Je.capitalize)((f=(o=on.user)==null?void 0:o.value)!=null?f:"all"),Tn=[En.createCopyDocsUrlAction(nn),En.createStarEntityAction(Ft,mn)];return Be?c.createElement(U.GB,{severity:"error",title:"Could not load available documentation."},c.createElement(U.Oi,{language:"text",text:Be.toString()})):c.createElement(Rn,{title:kn,entities:$t,loading:Ae,actions:ee||Tn,columns:I,options:fe})};_n.columns=sn,_n.actions=En;const Ln=l=>{var o;const{children:f}=l,ee=`Documentation available in ${(o=(0,n.h_)(n.Ds).getOptionalString("organization.name"))!=null?o:"Backstage"}`;return c.createElement(U.g9,{title:"Documentation",subtitle:ee,themeId:"documentation"},f)};class Cn{getCatalogFilters(){return{"metadata.annotations.backstage.io/techdocs-ref":st.n3}}}const Un=()=>{const{updateFilters:l}=(0,st.wp)();return(0,c.useEffect)(()=>{l({techdocs:new Cn})},[l]),null},Mn=l=>{const{initialFilter:o="owned",columns:f,actions:I}=l;return c.createElement(Ln,null,c.createElement(U.VY,null,c.createElement(U.yW,{title:""},c.createElement(U.qt,null,"Discover documentation in your ecosystem.")),c.createElement(st.UO,null,c.createElement(st._i,null,c.createElement(st._i.Filters,null,c.createElement(Un,null),c.createElement(st.EW,{initialFilter:o}),c.createElement(st.dq,null),c.createElement(st.xE,null)),c.createElement(st._i.Content,null,c.createElement(_n,{actions:I,columns:f}))))))},Bn=(0,n.rx)({id:"techdocs",apis:[(0,n.ni)({api:b.Dl,deps:{configApi:n.Ds,discoveryApi:n.NW,identityApi:n.$4,fetchApi:n.gP},factory:({configApi:l,discoveryApi:o,identityApi:f,fetchApi:I})=>new De({configApi:l,discoveryApi:o,identityApi:f,fetchApi:I})}),(0,n.ni)({api:b.gT,deps:{configApi:n.Ds,discoveryApi:n.NW,fetchApi:n.gP},factory:({configApi:l,discoveryApi:o,fetchApi:f})=>new Ee({configApi:l,discoveryApi:o,fetchApi:f})})],routes:{root:br,docRoot:Pr,entityContent:Fn}}),Qn=Bn.provide((0,n.P4)({name:"TechdocsPage",component:()=>Promise.resolve().then(function(){return gt}).then(l=>l.Router),mountPoint:br})),xn=Bn.provide((0,n.P4)({name:"EntityTechdocsContent",component:()=>Promise.resolve().then(function(){return gt}).then(l=>l.EmbeddedDocsRouter),mountPoint:Fn})),rr=Bn.provide((0,n.P4)({name:"TechDocsCustomHome",component:()=>e.e(7202).then(e.bind(e,57202)).then(l=>l.TechDocsCustomHome),mountPoint:br})),Vn=Bn.provide((0,n.P4)({name:"TechDocsIndexPage",component:()=>Promise.resolve().then(function(){return qn}).then(l=>l.TechDocsIndexPage),mountPoint:br})),Gn=Bn.provide((0,n.P4)({name:"TechDocsReaderPage",component:()=>e.e(2503).then(e.bind(e,12503)).then(l=>l.TechDocsReaderPage),mountPoint:Pr})),Wn=Bn.provide((0,we.E5)({name:"TechDocsSearchResultListItem",component:()=>Promise.resolve().then(function(){return zt}).then(l=>l.TechDocsSearchResultListItem),predicate:l=>l.type==="techdocs"})),Hn=({entity:l})=>{const o=(0,pe.iB)(l);return c.createElement(Gn,{entityRef:o},c.createElement(Ur,null),c.createElement(mr,{withSearch:!1}))},cr=l=>(0,m.pC)()||c.createElement(Mn,{...l});var qn=Object.freeze({__proto__:null,TechDocsIndexPage:cr});const Or="backstage.io/techdocs-ref";var gt=Object.freeze({__proto__:null,isTechDocsAvailable:l=>{var o,f;return Boolean((f=(o=l==null?void 0:l.metadata)==null?void 0:o.annotations)==null?void 0:f[Or])},Router:()=>c.createElement(m.Z5,null,c.createElement(m.AW,{path:"/",element:c.createElement(cr,null)}),c.createElement(m.AW,{path:"/:namespace/:kind/:name/*",element:c.createElement(be,null)})),EmbeddedDocsRouter:l=>{var o;const{children:f}=l,{entity:I}=(0,st.X2)(),ee=(0,m.V$)([{path:"/*",element:c.createElement(Hn,{entity:I}),children:[{path:"*",element:f}]}]);return((o=I.metadata.annotations)==null?void 0:o[Or])?ee:c.createElement(U.sk,{annotation:Or})}})},70557:function(Dt,E,e){"use strict";e.d(E,{$d:function(){return n.E},I6:function(){return n.g},Jl:function(){return n.e},bf:function(){return n.h},s4:function(){return n.t}});var n=e(49849),d=e(30705),p=e(32272),i=e(76372),c=e.n(i),m=e(2784),b=e(66565),R=e(80236),t=e(92573),U=e(49462),w=e(35368),N=e.n(w),K=e(1854),k=e(28316),H=e(82717),C=e.n(H),v=e(18671),F=e(64304),g=e(34520),J=e(76635),x=e.n(J)},43229:function(Dt,E,e){"use strict";e.d(E,{F0:function(){return Re},H2:function(){return Ge},Zr:function(){return ft},kG:function(){return Ye}});var n=e(53907),d=e(32272),p=e(82394),i=e.n(p),c=e(30705),m=e(2784),b=e(47603),R=e(80236),t=e(73557),U=e(90436),w=e(77277),N=e(79692),K=e(43434),k=e(38402),H=e(86136),C=e(49378),v=e(80030),F=e(60905),g=e(9520),J=e(11776),x=e(82938),B=e(86619),T=e(61837),S=e(48348),ie=e(12231),Te=e(11640),Pe=e(33375),qe=e(64279),xe=e(71554),ke=e(43054),rt=e(72164),Kt=e(59324),Nt=e(13737),rn=e(31168),D=e(64304),we=Object.defineProperty,ue=(W,_,h)=>_ in W?we(W,_,{enumerable:!0,configurable:!0,writable:!0,value:h}):W[_]=h,Ke=(W,_,h)=>(ue(W,typeof _!="symbol"?_+"":_,h),h);const $={"Content-Type":"application/json; charset=utf-8",Accept:"application/json"},A=new Map;class z{constructor(_,h,M,X,j,Z){this.namespace=_,this.fetchApi=h,this.discoveryApi=M,this.errorApi=X,this.identityApi=j,this.fallback=Z,Ke(this,"subscribers",new Set),Ke(this,"observables",new Map)}static create(_){var h;return new z((h=_.namespace)!=null?h:"default",_.fetchApi,_.discoveryApi,_.errorApi,_.identityApi,WebStorage.create({namespace:_.namespace,errorApi:_.errorApi}))}forBucket(_){const h=`${this.namespace}.${_}`;return A.has(h)||A.set(h,new z(h,this.fetchApi,this.discoveryApi,this.errorApi,this.identityApi,this.fallback)),A.get(h)}async remove(_){const h=await this.getFetchUrl(_),M=await this.fetchApi.fetch(h,{method:"DELETE"});if(!M.ok&&M.status!==404)throw await ResponseError.fromResponse(M);this.notifyChanges({key:_,presence:"absent"})}async set(_,h){if(!await this.isSignedIn()){await this.fallback.set(_,h),this.notifyChanges({key:_,presence:"present",value:h});return}const M=await this.getFetchUrl(_),X=await this.fetchApi.fetch(M,{method:"PUT",headers:$,body:JSON.stringify({value:h})});if(!X.ok)throw await ResponseError.fromResponse(X);const{value:j}=await X.json();this.notifyChanges({key:_,value:j,presence:"present"})}observe$(_){return this.observables.has(_)||this.observables.set(_,new ObservableImpl(h=>(this.subscribers.add(h),Promise.resolve().then(()=>this.get(_)).then(M=>h.next(M)).catch(M=>this.errorApi.post(M)),()=>{this.subscribers.delete(h)})).filter(({key:h})=>h===_)),this.observables.get(_)}snapshot(_){return{key:_,presence:"unknown"}}async get(_){if(!await this.isSignedIn())return this.fallback.snapshot(_);const h=await this.getFetchUrl(_),M=await this.fetchApi.fetch(h);if(M.status===404)return{key:_,presence:"absent"};if(!M.ok)throw await ResponseError.fromResponse(M);try{const{value:X}=await M.json(),j=JSON.parse(JSON.stringify(X),(Z,oe)=>(typeof oe=="object"&&oe!==null&&Object.freeze(oe),oe));return{key:_,presence:"present",value:j}}catch{return{key:_,presence:"absent"}}}async getFetchUrl(_){const h=await this.discoveryApi.getBaseUrl("user-settings"),M=encodeURIComponent(this.namespace),X=encodeURIComponent(_);return`${h}/buckets/${M}/keys/${X}`}async notifyChanges(_){for(const h of this.subscribers)try{h.next(_)}catch{}}async isSignedIn(){try{const _=await this.identityApi.getCredentials();return!!(_!=null&&_.token)}catch{return!1}}}const ae=(0,c.NT)({id:"user-settings"}),Ge=(0,c.rx)({id:"user-settings",routes:{settingsPage:ae}}).provide((0,c.P4)({name:"UserSettingsPage",component:()=>e.e(9513).then(e.bind(e,49513)).then(W=>W.SettingsPage),mountPoint:ae})),ft=W=>{const _=(0,c.tg)(ae),h=W.icon?W.icon:b.Z;return m.createElement(R.R6,{text:"Settings",to:_(),icon:h})},nt=`auth:
  providers:
    google:
      development:
        clientId: \${AUTH_GOOGLE_CLIENT_ID}
        clientSecret: \${AUTH_GOOGLE_CLIENT_SECRET}
`,Rt=()=>m.createElement(R.ub,{missing:"content",title:"No Authentication Providers",description:"You can add Authentication Providers to Backstage which allows you to use these providers to authenticate yourself.",action:m.createElement(m.Fragment,null,m.createElement(U.Z,{variant:"body1"},"Open ",m.createElement("code",null,"app-config.yaml")," and make the changes as highlighted below:"),m.createElement(R.Oi,{text:nt,language:"yaml",showLineNumbers:!0,highlightedNumbers:[3,4,5,6,7,8],customStyle:{background:"inherit",fontSize:"115%"}}),m.createElement(w.Z,{variant:"contained",color:"primary",href:"https://backstage.io/docs/auth/add-auth-provider"},"Read More"))}),q=(0,N.Z)(W=>({avatar:{width:({size:_})=>_,height:({size:_})=>_,fontSize:({size:_})=>_*.7,border:`1px solid ${W.palette.textSubtle}`}})),de=({size:W,picture:_})=>{const{iconSize:h}=R.sidebarConfig,M=q(W?{size:W}:{size:h});return m.createElement(K.Z,{src:_,className:M.avatar})},Se={},Ne=W=>{const{title:_,description:h,icon:M,apiRef:X}=W,j=(0,c.h_)(X),Z=(0,c.h_)(c.VE),[oe,se]=(0,m.useState)(!1),[Ue,lt]=(0,m.useState)(Se);return(0,m.useEffect)(()=>{let ne=!1;const ce=j.sessionState$().subscribe(Ce=>{Ce!==c.sM.SignedIn&&(lt(Se),se(!1)),ne||j.getProfile({optional:!0}).then(Y=>{ne||(Ce===c.sM.SignedIn&&se(!0),Y&&lt(Y))})});return()=>{ne=!0,ce.unsubscribe()}},[j]),m.createElement(k.Z,null,m.createElement(H.Z,null,m.createElement(M,null)),m.createElement(C.Z,{primary:_,secondary:m.createElement(v.ZP,{placement:"top",arrow:!0,title:h},m.createElement(F.Z,{container:!0,spacing:6},m.createElement(F.Z,{item:!0},m.createElement(de,{size:48,picture:Ue.picture})),m.createElement(F.Z,{item:!0,xs:12,sm:!0,container:!0},m.createElement(F.Z,{item:!0,xs:!0,container:!0,direction:"column",spacing:2},m.createElement(F.Z,{item:!0,xs:!0},m.createElement(U.Z,{variant:"subtitle1",color:"textPrimary",gutterBottom:!0},Ue.displayName),m.createElement(U.Z,{variant:"body2",color:"textSecondary"},Ue.email),m.createElement(U.Z,{variant:"body2",color:"textSecondary"},h)))))),secondaryTypographyProps:{noWrap:!0,style:{width:"80%"}}}),m.createElement(g.Z,null,m.createElement(v.ZP,{placement:"top",arrow:!0,title:oe?`Sign out from ${_}`:`Sign in to ${_}`},m.createElement(w.Z,{variant:"outlined",color:"primary",onClick:()=>{(oe?j.signOut():j.signIn()).catch(ce=>Z.post(ce))}},oe?"Sign out":"Sign in"))))},st=W=>{const{configuredProviders:_}=W;return m.createElement(m.Fragment,null,_.includes("google")&&m.createElement(Ne,{title:"Google",description:"Provides authentication towards Google APIs and identities",apiRef:c.Kp,icon:Te.Z}),_.includes("microsoft")&&m.createElement(Ne,{title:"Microsoft",description:"Provides authentication towards Microsoft APIs and identities",apiRef:c.p_,icon:Te.Z}),_.includes("github")&&m.createElement(Ne,{title:"GitHub",description:"Provides authentication towards GitHub APIs",apiRef:c.F4,icon:Te.Z}),_.includes("gitlab")&&m.createElement(Ne,{title:"GitLab",description:"Provides authentication towards GitLab APIs",apiRef:c.ux,icon:Te.Z}),_.includes("okta")&&m.createElement(Ne,{title:"Okta",description:"Provides authentication towards Okta APIs",apiRef:c.D,icon:Te.Z}),_.includes("bitbucket")&&m.createElement(Ne,{title:"Bitbucket",description:"Provides authentication towards Bitbucket APIs",apiRef:c.bq,icon:Te.Z}),_.includes("onelogin")&&m.createElement(Ne,{title:"OneLogin",description:"Provides authentication towards OneLogin APIs",apiRef:c.gW,icon:Te.Z}),_.includes("atlassian")&&m.createElement(Ne,{title:"Atlassian",description:"Provides authentication towards Atlassian APIs",apiRef:c.uB,icon:Te.Z}),_.includes("bitbucketServer")&&m.createElement(Ne,{title:"Bitbucket Server",description:"Provides authentication towards Bitbucket Server APIs",apiRef:c.Km,icon:Te.Z}))},pe=W=>{const{providerSettings:_}=W,M=(0,c.h_)(c.Ds).getOptionalConfig("auth.providers"),X=(M==null?void 0:M.keys())||[],j=_!=null?_:m.createElement(st,{configuredProviders:X});return!_&&!(X!=null&&X.length)?m.createElement(Rt,null):m.createElement(R.rJ,{title:"Available Providers"},m.createElement(J.Z,{dense:!0},j))},Je=`import { createPlugin } from '@backstage/core-plugin-api';

export default createPlugin({
  id: 'plugin-name',
  featureFlags: [{ name: 'enable-example-feature' }],
});
`,ot=()=>m.createElement(R.ub,{missing:"content",title:"No Feature Flags",description:"Feature Flags make it possible for plugins to register features in Backstage for users to opt into. You can use this to split out logic in your code for manual A/B testing, etc.",action:m.createElement(m.Fragment,null,m.createElement(U.Z,{variant:"body1"},"An example for how to add a feature flag is highlighted below:"),m.createElement(R.Oi,{text:Je,language:"typescript",showLineNumbers:!0,highlightedNumbers:[6],customStyle:{background:"inherit",fontSize:"115%"}}),m.createElement(w.Z,{variant:"contained",color:"primary",href:"https://backstage.io/docs/api/utility-apis"},"Read More"))}),Qe=W=>W.description?W.description:W.pluginId?`Registered in ${W.pluginId} plugin`:"Registered in the application",Et=({flag:W,enabled:_,toggleHandler:h})=>m.createElement(k.Z,{divider:!0,button:!0,onClick:()=>h(W.name)},m.createElement(H.Z,null,m.createElement(v.ZP,{placement:"top",arrow:!0,title:_?"Disable":"Enable"},m.createElement(x.Z,{color:"primary",checked:_,name:W.name}))),m.createElement(C.Z,{primary:W.name,secondary:Qe(W)})),dt=(W,_)=>{const h=W.filter(X=>_.isActive(X.name)),M=W.filter(X=>!_.isActive(X.name));return[...h,...M]},Vt=()=>{const W=(0,c.h_)(c.W0),_=m.useRef(),h=W.getRegisteredFlags(),M=dt(h,W),[X]=(0,m.useState)(M),j=Object.fromEntries(X.map(({name:Y})=>[Y,W.isActive(Y)])),[Z,oe]=(0,m.useState)(j),[se,Ue]=(0,m.useState)(""),lt=(0,m.useCallback)(Y=>{const te=W.isActive(Y)?c.CL.None:c.CL.Active;W.save({states:{[Y]:te},merge:!0}),oe(me=>({...me,[Y]:te===c.CL.Active}))},[W]);if(!X.length)return m.createElement(ot,null);const ne=()=>{var Y;Ue(""),(Y=_==null?void 0:_.current)==null||Y.focus()},ce=X.filter(Y=>Y.name.toLocaleLowerCase("en-US").includes(se.toLocaleLowerCase("en-US"))),Ce=()=>m.createElement(F.Z,{container:!0,style:{justifyContent:"space-between"}},m.createElement(F.Z,{item:!0,xs:6,md:8},m.createElement(U.Z,{variant:"h5"},"Feature Flags"),m.createElement(U.Z,{variant:"subtitle1"},"Please refresh the page when toggling feature flags")),X.length>=10&&m.createElement(F.Z,{item:!0,xs:6,md:4},m.createElement(B.Z,{label:"Filter",style:{display:"flex",justifyContent:"flex-end"},inputRef:Y=>Y&&Y.focus(),InputProps:{...se.length&&{endAdornment:m.createElement(T.Z,{"aria-label":"Clear filter",onClick:ne,edge:"end"},m.createElement(Pe.Z,null))}},onChange:Y=>Ue(Y.target.value),value:se})));return m.createElement(R.rJ,{title:m.createElement(Ce,null)},m.createElement(J.Z,{dense:!0},ce.map(Y=>{const te=Boolean(Z[Y.name]);return m.createElement(Et,{key:Y.name,flag:Y,enabled:te,toggleHandler:lt})})))},jt=()=>{var W;const _=(0,c.h_)(c.$4),h=(0,c.h_)(c.$v),{value:M,loading:X,error:j}=(0,qe.default)(async()=>({profile:await _.getProfileInfo(),identity:await _.getBackstageIdentity()}),[]);return(0,m.useEffect)(()=>{j&&h.post({message:`Failed to load user identity: ${j}`,severity:"error"})},[j,h]),X||j?{profile:{},displayName:"",loading:X}:{profile:M.profile,backstageIdentity:M.identity,displayName:(W=M.profile.displayName)!=null?W:M.identity.userEntityRef,loading:X}},Ht=(0,N.Z)(W=>({avatar:{width:({size:_})=>_,height:({size:_})=>_,fontSize:({size:_})=>_*.7,border:`1px solid ${W.palette.textSubtle}`}})),Ye=W=>{const{size:_}=W,{iconSize:h}=R.sidebarConfig,M=Ht(_?{size:_}:{size:h}),{profile:X}=jt();return m.createElement(K.Z,{src:X.picture,className:M.avatar,alt:"Profile picture"})},St=()=>{const W=(0,c.h_)(c.VE),_=(0,c.h_)(c.$4),[h,M]=m.useState(!1),[X,j]=m.useState(void 0),Z=se=>{j(se.currentTarget),M(!0)},oe=()=>{j(void 0),M(!1)};return m.createElement(m.Fragment,null,m.createElement(T.Z,{"data-testid":"user-settings-menu","aria-label":"more",onClick:Z},m.createElement(ke.Z,null)),m.createElement(S.Z,{anchorEl:X,open:h,onClose:oe},m.createElement(ie.Z,{"data-testid":"sign-out",onClick:()=>_.signOut().catch(se=>W.post(se))},m.createElement(H.Z,null,m.createElement(xe.Z,null)),"Sign Out")))},Mt=()=>{const{profile:W,displayName:_}=jt();return m.createElement(R.rJ,{title:"Profile",variant:"gridItem"},m.createElement(F.Z,{container:!0,spacing:6},m.createElement(F.Z,{item:!0},m.createElement(Ye,{size:96})),m.createElement(F.Z,{item:!0,xs:12,sm:!0,container:!0},m.createElement(F.Z,{item:!0,xs:!0,container:!0,direction:"column",spacing:2},m.createElement(F.Z,{item:!0,xs:!0},m.createElement(U.Z,{variant:"subtitle1",gutterBottom:!0},_),m.createElement(U.Z,{variant:"body2",color:"textSecondary"},W.email))),m.createElement(F.Z,{item:!0},m.createElement(St,null)))))},Bt=()=>{const{isPinned:W,toggleSidebarPinState:_}=(0,R.Pf)();return m.createElement(k.Z,null,m.createElement(C.Z,{primary:"Pin Sidebar",secondary:"Prevent the sidebar from collapsing"}),m.createElement(g.Z,null,m.createElement(v.ZP,{placement:"top",arrow:!0,title:`${W?"Unpin":"Pin"} Sidebar`},m.createElement(x.Z,{color:"primary",checked:W,onChange:()=>_(),name:"pin",inputProps:{"aria-label":"Pin Sidebar Switch"}}))))},Ee=({id:W,activeId:_,icon:h})=>h?(0,m.cloneElement)(h,{color:_===W?"primary":void 0}):m.createElement(Kt.Z,{color:_===W?"primary":void 0}),De=(0,N.Z)(W=>({container:{display:"flex",flexWrap:"wrap",width:"100%",justifyContent:"space-between",alignItems:"center",paddingBottom:8,paddingRight:16},list:{width:"initial",[W.breakpoints.down("xs")]:{width:"100%",padding:"0 0 12px"}},listItemText:{paddingRight:0,paddingLeft:0},listItemSecondaryAction:{position:"relative",transform:"unset",top:"auto",right:"auto",paddingLeft:16,[W.breakpoints.down("xs")]:{paddingLeft:0}}})),ct=({children:W,title:_,value:h,...M})=>m.createElement(v.ZP,{placement:"top",arrow:!0,title:_},m.createElement(Nt.Z,{value:h,...M},W)),Ve=()=>{const W=De(),_=(0,c.h_)(c.hg),h=(0,rt.Z)(_.activeThemeId$(),_.getActiveThemeId()),M=_.getInstalledThemes(),X=(j,Z)=>{M.some(oe=>oe.id===Z)?_.setActiveThemeId(Z):_.setActiveThemeId(void 0)};return m.createElement(k.Z,{className:W.list,classes:{container:W.container}},m.createElement(C.Z,{className:W.listItemText,primary:"Theme",secondary:"Change the theme mode"}),m.createElement(g.Z,{className:W.listItemSecondaryAction},m.createElement(rn.Z,{exclusive:!0,size:"small",value:h!=null?h:"auto",onChange:X},M.map(j=>{var Z;const oe=(Z=M.find(se=>se.id===j.id))==null?void 0:Z.icon;return m.createElement(ct,{key:j.id,title:`Select ${j.title}`,value:j.id},m.createElement(m.Fragment,null,j.title,"\xA0",m.createElement(Ee,{id:j.id,icon:oe,activeId:h})))}),m.createElement(v.ZP,{placement:"top",arrow:!0,title:"Select auto theme"},m.createElement(Nt.Z,{value:"auto",selected:h===void 0},"Auto\xA0",m.createElement(Kt.Z,{color:h===void 0?"primary":void 0}))))))},yt=()=>{const{isMobile:W}=(0,R.Pf)();return m.createElement(R.rJ,{title:"Appearance",variant:"gridItem"},m.createElement(J.Z,{dense:!0},m.createElement(Ve,null),!W&&m.createElement(Bt,null)))},ye=()=>{const{backstageIdentity:W}=jt();return W?m.createElement(F.Z,{container:!0,spacing:1},m.createElement(F.Z,{item:!0,xs:12},m.createElement(U.Z,{variant:"subtitle1",gutterBottom:!0},"User Entity:"," ",m.createElement(D.rI,{entityRefs:[W.userEntityRef],getTitle:_=>_}))),m.createElement(F.Z,{item:!0,xs:12},m.createElement(U.Z,{variant:"subtitle1"},"Ownership Entities:"," ",m.createElement(D.rI,{entityRefs:W.ownershipEntityRefs,getTitle:_=>_})))):m.createElement(U.Z,null,"No Backstage Identity")},mt=()=>m.createElement(R.rJ,{title:"Backstage Identity"},m.createElement(ye,null)),Ct=()=>m.createElement(F.Z,{container:!0,direction:"row",spacing:3},m.createElement(F.Z,{item:!0,xs:12,md:6},m.createElement(Mt,null)),m.createElement(F.Z,{item:!0,xs:12,md:6},m.createElement(yt,null)),m.createElement(F.Z,{item:!0,xs:12,md:6},m.createElement(mt,null))),_t="plugin.user-settings.settingsLayout",it="plugin.user-settings.settingsLayoutRoute",At=()=>null;(0,c.R5)(At,it,!0),(0,c.R5)(At,"core.gatherMountPoints",!0);const zt=W=>{const{title:_,children:h}=W,{isMobile:M}=(0,R.Pf)(),X=(0,c.vJ)(h,j=>j.selectByComponentData({key:it,withStrictError:"Child of SettingsLayout must be an SettingsLayout.Route"}).getElements().map(Z=>Z.props));return m.createElement(R.T3,{themeId:"home"},!M&&m.createElement(R.h4,{title:_!=null?_:"Settings"}),m.createElement(R.tn,{routes:X}))};(0,c.R5)(zt,_t,!0),zt.Route=At;const ze=W=>{const{providerSettings:_,tabs:h}=W;return m.createElement(zt,null,m.createElement(zt.Route,{path:"general",title:"General"},m.createElement(Ct,null)),m.createElement(zt.Route,{path:"auth-providers",title:"Authentication Providers"},m.createElement(pe,{providerSettings:_})),m.createElement(zt.Route,{path:"feature-flags",title:"Feature Flags"},m.createElement(Vt,null)),h)},Re=W=>{const{providerSettings:_}=W,h=(0,t.pC)(),M=(0,c.vJ)(h,j=>j.selectByComponentData({key:_t}).getElements()),X=(0,c.vJ)(h,j=>j.selectByComponentData({key:it}).getElements());return m.createElement(m.Fragment,null,M.length!==0&&M||m.createElement(ze,{tabs:X,providerSettings:_}))},We=it,je=W=>m.createElement(zt.Route,{path:W.path,title:W.title},m.createElement(m.Fragment,null,"props.children"));(0,c.R5)(je,We,"UserSettingsTab")},18473:function(Dt,E,e){"use strict";e.d(E,{CT:function(){return b},EI:function(){return m},Vt:function(){return R},uW:function(){return c}});var n=e(2784);function d(){return typeof window!="undefined"&&window.Math===Math?window:typeof self!="undefined"&&self.Math===Math?self:Function("return this")()}const p=d(),i=U=>`__@backstage/${U}__`;function c(U,w){const N=i(U);let K=p[N];return K||(K=w(),p[N]=K,K)}function m(U){Object.freeze(U);const w={atVersion(N){return U[N]}};return Object.defineProperty(w,"$map",{configurable:!0,enumerable:!0,get(){return U}}),w}function b(U){return c(U,()=>(0,n.createContext)(void 0))}function R(U){return(0,n.useContext)(b(U))}function t(U){return{set(w){globalThis[`__@backstage/${U}__`]=createContext(m(w))},reset(){delete globalThis[`__@backstage/${U}__`]}}}},52059:function(Dt,E,e){"use strict";Dt.exports=e.p+"static/createComponent.975d1e1e..svg"},79265:function(Dt,E,e){"use strict";Dt.exports=e.p+"static/missingAnnotation.67f79e98..svg"},38225:function(Dt,E,e){"use strict";Dt.exports=e.p+"static/noBuild.1715fa71..svg"},85910:function(Dt,E,e){"use strict";Dt.exports=e.p+"static/noInformation.4b426325..svg"},53305:function(Dt,E,e){"use strict";Dt.exports=e.p+"static/mic-drop.fe3ef4d0..svg"},85310:function(Dt){"use strict";Dt.exports=JSON.parse('{"$id":"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#","description":"Meta-schema for $data reference (JSON AnySchema extension proposal)","type":"object","required":["$data"],"properties":{"$data":{"type":"string","anyOf":[{"format":"relative-json-pointer"},{"format":"json-pointer"}]}},"additionalProperties":false}')},51020:function(Dt){"use strict";Dt.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-07/schema#","$id":"http://json-schema.org/draft-07/schema#","title":"Core schema meta-schema","definitions":{"schemaArray":{"type":"array","minItems":1,"items":{"$ref":"#"}},"nonNegativeInteger":{"type":"integer","minimum":0},"nonNegativeIntegerDefault0":{"allOf":[{"$ref":"#/definitions/nonNegativeInteger"},{"default":0}]},"simpleTypes":{"enum":["array","boolean","integer","null","number","object","string"]},"stringArray":{"type":"array","items":{"type":"string"},"uniqueItems":true,"default":[]}},"type":["object","boolean"],"properties":{"$id":{"type":"string","format":"uri-reference"},"$schema":{"type":"string","format":"uri"},"$ref":{"type":"string","format":"uri-reference"},"$comment":{"type":"string"},"title":{"type":"string"},"description":{"type":"string"},"default":true,"readOnly":{"type":"boolean","default":false},"examples":{"type":"array","items":true},"multipleOf":{"type":"number","exclusiveMinimum":0},"maximum":{"type":"number"},"exclusiveMaximum":{"type":"number"},"minimum":{"type":"number"},"exclusiveMinimum":{"type":"number"},"maxLength":{"$ref":"#/definitions/nonNegativeInteger"},"minLength":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"pattern":{"type":"string","format":"regex"},"additionalItems":{"$ref":"#"},"items":{"anyOf":[{"$ref":"#"},{"$ref":"#/definitions/schemaArray"}],"default":true},"maxItems":{"$ref":"#/definitions/nonNegativeInteger"},"minItems":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"uniqueItems":{"type":"boolean","default":false},"contains":{"$ref":"#"},"maxProperties":{"$ref":"#/definitions/nonNegativeInteger"},"minProperties":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"required":{"$ref":"#/definitions/stringArray"},"additionalProperties":{"$ref":"#"},"definitions":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"properties":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"patternProperties":{"type":"object","additionalProperties":{"$ref":"#"},"propertyNames":{"format":"regex"},"default":{}},"dependencies":{"type":"object","additionalProperties":{"anyOf":[{"$ref":"#"},{"$ref":"#/definitions/stringArray"}]}},"propertyNames":{"$ref":"#"},"const":true,"enum":{"type":"array","items":true,"minItems":1,"uniqueItems":true},"type":{"anyOf":[{"$ref":"#/definitions/simpleTypes"},{"type":"array","items":{"$ref":"#/definitions/simpleTypes"},"minItems":1,"uniqueItems":true}]},"format":{"type":"string"},"contentMediaType":{"type":"string"},"contentEncoding":{"type":"string"},"if":{"$ref":"#"},"then":{"$ref":"#"},"else":{"$ref":"#"},"allOf":{"$ref":"#/definitions/schemaArray"},"anyOf":{"$ref":"#/definitions/schemaArray"},"oneOf":{"$ref":"#/definitions/schemaArray"},"not":{"$ref":"#"}},"default":true}')}}]);})();

//# sourceMappingURL=module-backstage.e69423bb.js.map